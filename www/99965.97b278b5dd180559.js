"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[99965],{99965:(o,n,e)=>{e.r(n),e.d(n,{AddonQtypeOrderingComponent:()=>O});var t=e(10467),r=e(1762),i=e(69319),c=e(82907),a=e(79555),s=e(53794),l=e(18022),d=e(86654),u=e(54438),g=e(89417),_=e(2910),p=e(86198),m=e(58197),C=e(43570),b=e(73955);const _forTrack0=(o,n)=>n.id;function AddonQtypeOrderingComponent_Conditional_0_Conditional_4_Template(o,n){if(1&o&&(u.j41(0,"div",2),u.EFF(1),u.k0s()),2&o){const o=u.XpG(2);u.R7$(),u.JRh(o.a11yAnnouncement)}}function AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Conditional_0_Template(o,n){if(1&o&&(u.nrm(0,"ion-icon",10),u.nI1(1,"translate")),2&o){const o=u.XpG(4);u.Y8G("name",o.correctIcon)("ariaLabel",u.bMT(1,2,"core.question.correct"))}}function AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Conditional_1_Template(o,n){if(1&o&&(u.nrm(0,"ion-icon",11),u.nI1(1,"translate")),2&o){const o=u.XpG(4);u.Y8G("name",o.incorrectIcon)("ariaLabel",u.bMT(1,2,"core.question.incorrect"))}}function AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Conditional_2_Template(o,n){if(1&o&&(u.nrm(0,"ion-icon",12),u.nI1(1,"translate")),2&o){const o=u.XpG(4);u.Y8G("name",o.partialCorrectIcon)("ariaLabel",u.bMT(1,2,"core.question.partiallycorrect"))}}function AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Template(o,n){if(1&o&&u.DNE(0,AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Conditional_0_Template,2,4,"ion-icon",10)(1,AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Conditional_1_Template,2,4)(2,AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Conditional_2_Template,2,4),2&o){const o=u.XpG().$implicit;u.vxM(0,"correct"===o.correctClass?0:"incorrect"===o.correctClass?1:o.correctClass.startsWith("partial")?2:-1)}}function AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_6_Template(o,n){if(1&o){const o=u.RV6();u.j41(0,"div",9)(1,"ion-button",13),u.nI1(2,"translate"),u.bIt("click",(function AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_6_Template_ion_button_click_1_listener(n){u.eBV(o);const e=u.XpG().$implicit,t=u.XpG(2);return u.Njj(t.moveItemByClick(n,!1,e.id))})),u.nrm(3,"ion-icon",14),u.k0s(),u.j41(4,"ion-button",15),u.nI1(5,"translate"),u.bIt("click",(function AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_6_Template_ion_button_click_4_listener(n){u.eBV(o);const e=u.XpG().$implicit,t=u.XpG(2);return u.Njj(t.moveItemByClick(n,!0,e.id))})),u.nrm(6,"ion-icon",16),u.k0s()()}if(2&o){const o=u.XpG().$implicit;u.R7$(),u.Y8G("ariaLabel",u.bMT(2,4,"core.moveup")),u.BMQ("aria-description",o.contentText),u.R7$(3),u.Y8G("ariaLabel",u.bMT(5,6,"core.movedown")),u.BMQ("aria-description",o.contentText)}}function AddonQtypeOrderingComponent_Conditional_0_For_7_Template(o,n){if(1&o&&(u.j41(0,"ion-card",6)(1,"ion-item",0),u.nrm(2,"ion-reorder",7),u.DNE(3,AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_3_Template,3,1),u.j41(4,"ion-label",6),u.nrm(5,"core-format-text",8),u.k0s(),u.DNE(6,AddonQtypeOrderingComponent_Conditional_0_For_7_Conditional_6_Template,7,8,"div",9),u.k0s()()),2&o){const o=n.$implicit,e=u.XpG(2);u.ZvI("core-question-answer-",o.correctClass,""),u.FS9("id",o.id),u.R7$(3),u.vxM(3,e.dragDisabled?3:-1),u.R7$(),u.Mz_("id","",o.id,"-text"),u.R7$(),u.Y8G("component",e.component)("componentId",e.componentId)("text",o.content)("contextLevel",e.contextLevel)("contextInstanceId",e.contextInstanceId),u.R7$(),u.vxM(6,e.dragDisabled?-1:6)}}function AddonQtypeOrderingComponent_Conditional_0_Template(o,n){if(1&o){const o=u.RV6();u.j41(0,"div")(1,"ion-item",0)(2,"ion-label"),u.nrm(3,"core-format-text",1),u.k0s()(),u.DNE(4,AddonQtypeOrderingComponent_Conditional_0_Conditional_4_Template,2,1,"div",2),u.j41(5,"ion-reorder-group",3),u.bIt("ionItemReorder",(function AddonQtypeOrderingComponent_Conditional_0_Template_ion_reorder_group_ionItemReorder_5_listener(n){u.eBV(o);const e=u.XpG();return u.Njj(e.moveItem(n.detail))})),u.Z7z(6,AddonQtypeOrderingComponent_Conditional_0_For_7_Template,7,13,"ion-card",4,_forTrack0),u.k0s(),u.nrm(8,"input",5),u.k0s()}if(2&o){const o=u.XpG();u.R7$(3),u.Y8G("component",o.component)("componentId",o.componentId)("text",o.question.text)("contextLevel",o.contextLevel)("contextInstanceId",o.contextInstanceId)("courseId",o.courseId),u.R7$(),u.vxM(4,o.a11yAnnouncement?4:-1),u.R7$(),u.HbH(o.numberingClass),u.Y8G("disabled",o.dragDisabled),u.R7$(),u.Dyx(o.question.items),u.R7$(2),u.Y8G("ngModel",o.responseInput.value),u.BMQ("name",o.responseInput.name)}}let O=(()=>{var o;class AddonQtypeOrderingComponent extends r.g{constructor(o){super("AddonQtypeOrderingComponent",o),this.dragDisabled=!1,this.numberingClass="",this.a11yAnnouncement="",this.responseInput={name:"",value:""}}init(){var o,n;if(!this.question)return this.onReadyPromise.resolve(),void 0;const e=this.initComponent();if(!e)return this.onReadyPromise.resolve(),void 0;i.CoreQuestionHelper.replaceFeedbackClasses(e);const t=e.querySelector(".sortablelist");if(!t)return this.logger.warn("Aborting because of an error parsing question.",this.question.slot),this.onReadyPromise.resolve(),i.CoreQuestionHelper.showComponentError(this.onAbort);this.dragDisabled=t.classList.contains("notactive")||!t.querySelector(".sortableitem"),this.numberingClass=null!==(o=Array.from(t.classList).find((o=>o.startsWith("numbering"))))&&void 0!==o?o:"";const r=Array.from(t.querySelectorAll("li"));this.question.items=r.map((o=>{var n,e,t,r;const i=o.querySelector("[data-itemcontent]");return null==i||null===(n=i.querySelector('.icon.fa-check, .icon.fa-remove, .icon.fa-check-square, .icon.fa-circle-check, .icon.fa-xmark, .icon.fa-circle-xmark, .icon.fa-square-check, .icon.circle-half-stroke, img.icon[src*="grade_partiallycorrect"]'))||void 0===n||n.remove(),{id:o.id,content:null!==(e=null==i?void 0:i.innerHTML)&&void 0!==e?e:"",contentText:null!==(t=null==i?void 0:i.innerText)&&void 0!==t?t:"",correctClass:null!==(r=Array.from(o.classList).find((o=>o.includes("correct")||o.includes("partial"))))&&void 0!==r?r:"pending"}}));const a=e.querySelector('input[name*="_response_"]');a&&(this.responseInput.name=a.name,this.responseInput.value=a.value),null===(n=e.querySelector(".ablock"))||void 0===n||n.remove(),null==a||a.remove(),this.question.text=c.y.getContentsOfElement(e,".qtext"),this.onReadyPromise.resolve()}moveItem(o){var n,e,t;if(null===(n=this.question)||void 0===n||!n.items)return;const r=this.question.items.splice(o.from,1)[0];this.question.items.splice(o.to,0,r),this.responseInput.value=this.question.items.map((o=>o.id)).join(","),this.a11yAnnouncement=a.HT.instant("addon.qtype_ordering.moved",{$a:{item:null!==(e=null===(t=this.hostElement.querySelector(`#${r.id}-text`))||void 0===t?void 0:t.innerText)&&void 0!==e?e:r.id,position:o.to+1,total:this.question.items.length}}),o.complete()}moveItemByClick(o,n,e){var r=this;return(0,t.A)((function*(){var t;o.preventDefault(),o.stopPropagation();const i=o.target;if(!i||null===(t=r.question)||void 0===t||!t.items)return;const a=r.question.items.findIndex((o=>o.id===e)),d=n?a+1:a-1;if(d<0||d>=r.question.items.length)return;r.moveItem({from:a,to:d,complete:()=>{}}),yield s.H.nextTick();const u=document.querySelector(`#${e}`);let g=i;var _;if(u&&!u.previousElementSibling)g=null!==(_=u.querySelector('[data-action="move-forward"]'))&&void 0!==_?_:i;else if(u&&!u.nextElementSibling){var p;g=null!==(p=u.querySelector('[data-action="move-backward"]'))&&void 0!==p?p:i}if(c.y.focusElement(g),l.CorePlatform.isIOS()){const reFocus=()=>{g.removeEventListener("blur",reFocus),c.y.focusElement(g)};g.addEventListener("blur",reFocus),setTimeout((()=>{g.removeEventListener("blur",reFocus)}),300)}}))()}}return(o=AddonQtypeOrderingComponent).ɵfac=function AddonQtypeOrderingComponent_Factory(n){return new(n||o)(u.rXU(u.aKT))},o.ɵcmp=u.VBU({type:o,selectors:[["addon-qtype-ordering"]],standalone:!0,features:[u.Vt3,u.aNF],decls:1,vars:1,consts:[[1,"ion-text-wrap"],[3,"component","componentId","text","contextLevel","contextInstanceId","courseId"],["aria-live","polite",1,"sr-only"],[3,"ionItemReorder","disabled"],[3,"id","class"],["type","hidden",3,"ngModel"],[3,"id"],["slot","start","aria-hidden","true"],[3,"component","componentId","text","contextLevel","contextInstanceId"],["slot","end",1,"flex-row"],["slot","start","color","success",3,"name","ariaLabel"],["slot","start","color","danger",3,"name","ariaLabel"],["slot","start","color","warning",3,"name","ariaLabel"],["fill","clear","data-action","move-backward",3,"click","ariaLabel"],["slot","icon-only","name","fas-chevron-up","aria-hidden","true"],["fill","clear","data-action","move-forward",3,"click","ariaLabel"],["slot","icon-only","name","fas-chevron-down","aria-hidden","true"]],template:function AddonQtypeOrderingComponent_Template(o,n){1&o&&u.DNE(0,AddonQtypeOrderingComponent_Conditional_0_Template,9,13,"div"),2&o&&u.vxM(0,n.question&&(n.question.text||""===n.question.text)?0:-1)},dependencies:[d.n,g.me,g.BC,g.vS,_.Jm,_.b_,_.iq,_.uz,_.he,_.UB,_.p$,p.t,m.B,C.T,b.D9],styles:["[_nghost-%COMP%]     .core-question-answer-correct{color:var(--core-question-correct-color)}[_nghost-%COMP%]     .core-question-answer-partiallycorrect{color:var(--core-question-partial-color)}[_nghost-%COMP%]     .core-question-answer-incorrect{color:var(--core-question-incorrect-color)}[_nghost-%COMP%]     input.core-question-answer-correct, [_nghost-%COMP%]     select.core-question-answer-correct{--background: var(--core-question-correct-color-bg);--contrast-background: var(--background)}[_nghost-%COMP%]     input.core-question-answer-partiallycorrect, [_nghost-%COMP%]     select.core-question-answer-partiallycorrect{--background: var(--core-question-partial-color-bg);--contrast-background: var(--background)}[_nghost-%COMP%]     input.core-question-answer-incorrect, [_nghost-%COMP%]     select.core-question-answer-incorrect{--background: var(--core-question-incorrect-color-bg);--contrast-background: var(--background)}[_nghost-%COMP%]     .core-question-feedback-container  {--color: var(--core-question-feedback-color);--background: var(--core-question-feedback-background-color);color:var(--core-question-feedback-color);background-color:var(--core-question-feedback-background-color)}[_nghost-%COMP%]     .core-question-feedback-container   .specificfeedback, [_nghost-%COMP%]     .core-question-feedback-container   .rightanswer, [_nghost-%COMP%]     .core-question-feedback-container   .im-feedback, [_nghost-%COMP%]     .core-question-feedback-container   .feedback, [_nghost-%COMP%]     .core-question-feedback-container   .generalfeedback{font:var(--mdl-typography-body-font-md);margin:0 0 .5em}[_nghost-%COMP%]     .core-question-feedback-container   .specificfeedback p, [_nghost-%COMP%]     .core-question-feedback-container   .rightanswer p, [_nghost-%COMP%]     .core-question-feedback-container   .im-feedback p, [_nghost-%COMP%]     .core-question-feedback-container   .feedback p, [_nghost-%COMP%]     .core-question-feedback-container   .generalfeedback p{--color: var(--core-question-feedback-color)}[_nghost-%COMP%]     .core-question-feedback-container   .correctness{display:inline-block;padding:2px 4px;font-weight:700;line-height:14px;color:var(--white);text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:var(--gray-500);border-radius:3px}[_nghost-%COMP%]     .core-question-feedback-container   .correctness.incorrect{background-color:var(--danger)}[_nghost-%COMP%]     .core-question-feedback-container   .correctness.correct{background-color:var(--success)}[_nghost-%COMP%]     .core-question-feedback-inline{display:inline-block;margin-inline-start:4px;margin-inline-end:0px}[_nghost-%COMP%]     .core-question-feedback-padding{padding-inline-start:14px;padding-inline-end:35px;padding-top:8px;padding-bottom:8px}[_nghost-%COMP%]     .core-question-correct, [_nghost-%COMP%]     .core-question-comment{--background: var(--core-question-correct-color-bg);background-color:var(--core-question-correct-color-bg);color:var(--core-question-correct-color)}[_nghost-%COMP%]     .core-question-partiallycorrect{--background: var(--core-question-partial-color-bg);background-color:var(--core-question-partial-color-bg);color:var(--core-question-partial-color)}[_nghost-%COMP%]     .core-question-notanswered, [_nghost-%COMP%]     .core-question-incorrect{--background: var(--core-question-incorrect-color-bg);background-color:var(--core-question-incorrect-color-bg);color:var(--core-question-incorrect-color)}[_nghost-%COMP%]     .core-question-answersaved, [_nghost-%COMP%]     .core-question-requiresgrading{color:var(--ion-text-color);background-color:var(--core-question-saved-color-bg)}[_nghost-%COMP%]     .core-question-warning{color:var(--core-question-warning-color)}[_nghost-%COMP%]     .questioncorrectnessicon, [_nghost-%COMP%]     .fa.icon.questioncorrectnessicon{font-size:var(--mdl-typography-icon-fontSize-md);vertical-align:middle;margin:4px}","[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:list-item;list-style-position:inside;list-style-type:none}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .core-correct-icon[_ngcontent-%COMP%]{margin-inline-start:0px;margin-inline-end:8px;vertical-align:middle}[_nghost-%COMP%]   ion-reorder-group.numbering123[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{list-style-type:decimal}[_nghost-%COMP%]   ion-reorder-group.numberingabc[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{list-style-type:lower-alpha}[_nghost-%COMP%]   ion-reorder-group.numberingABCD[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{list-style-type:upper-alpha}[_nghost-%COMP%]   ion-reorder-group.numberingiii[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{list-style-type:lower-roman}[_nghost-%COMP%]   ion-reorder-group.numberingIIII[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{list-style-type:upper-roman}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{contain:layout paint}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:first-of-type   [data-action=move-backward][_ngcontent-%COMP%], [_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:last-of-type   [data-action=move-forward][_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-correct[_ngcontent-%COMP%]{--border-color: var(--core-question-correct-color)}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-correct[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{--color: var(--core-question-correct-color);--background: var(--core-question-correct-color-bg)}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-incorrect[_ngcontent-%COMP%]{--border-color: var(--core-question-incorrect-color)}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-incorrect[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{--color: var(--core-question-incorrect-color);--background: var(--core-question-incorrect-color-bg)}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-partial66[_ngcontent-%COMP%]{--border-color: #ff9900}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-partial66[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{--color: var(--core-question-correct-color);--background: var(--core-question-correct-color-bg)}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-partial33[_ngcontent-%COMP%]{--border-color: #ff9900}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-partial33[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{--color: var(--core-question-feedback-color);--background: var(--core-question-feedback-color-bg)}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-partial00[_ngcontent-%COMP%]{--border-color: #ff9900}[_nghost-%COMP%]   ion-reorder-group[_ngcontent-%COMP%]   ion-card.core-question-answer-partial00[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{--color: var(--core-question-incorrect-color);--background: var(--core-question-incorrect-color-bg)}"]}),AddonQtypeOrderingComponent})()}}]);