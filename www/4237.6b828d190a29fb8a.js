"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4237],{4237:(n,o,i)=>{i.r(o),i.d(o,{AddonModForumDiscussionOptionsMenuComponent:()=>k});var s=i(10467),t=i(52749),e=i(79555),d=i(49882),u=i(16179),c=i(2216),r=i(47551),a=i(86654),m=i(33014),l=i(25572),_=i(54438),p=i(60177),f=i(2910),M=i(86198),I=i(88246),F=i(73955);function AddonModForumDiscussionOptionsMenuComponent_ion_item_2_Template(n,o){if(1&n){const n=_.RV6();_.j41(0,"ion-item",1),_.bIt("click",(function AddonModForumDiscussionOptionsMenuComponent_ion_item_2_Template_ion_item_click_0_listener(){_.eBV(n);const o=_.XpG();return _.Njj(o.setLockState(!0))})),_.nrm(1,"ion-icon",2),_.j41(2,"ion-label")(3,"p",3),_.EFF(4),_.nI1(5,"translate"),_.k0s()()()}2&n&&(_.Y8G("detail",!1),_.R7$(4),_.JRh(_.bMT(5,2,"addon.mod_forum.lockdiscussion")))}function AddonModForumDiscussionOptionsMenuComponent_ion_item_3_Template(n,o){if(1&n){const n=_.RV6();_.j41(0,"ion-item",1),_.bIt("click",(function AddonModForumDiscussionOptionsMenuComponent_ion_item_3_Template_ion_item_click_0_listener(){_.eBV(n);const o=_.XpG();return _.Njj(o.setLockState(!1))})),_.nrm(1,"ion-icon",4),_.j41(2,"ion-label")(3,"p",3),_.EFF(4),_.nI1(5,"translate"),_.k0s()()()}2&n&&(_.Y8G("detail",!1),_.R7$(4),_.JRh(_.bMT(5,2,"addon.mod_forum.unlockdiscussion")))}function AddonModForumDiscussionOptionsMenuComponent_ion_item_4_Template(n,o){if(1&n){const n=_.RV6();_.j41(0,"ion-item",1),_.bIt("click",(function AddonModForumDiscussionOptionsMenuComponent_ion_item_4_Template_ion_item_click_0_listener(){_.eBV(n);const o=_.XpG();return _.Njj(o.setPinState(!0))})),_.nrm(1,"ion-icon",5),_.j41(2,"ion-label")(3,"p",3),_.EFF(4),_.nI1(5,"translate"),_.k0s()()()}2&n&&(_.Y8G("detail",!1),_.R7$(4),_.JRh(_.bMT(5,2,"addon.mod_forum.pindiscussion")))}function AddonModForumDiscussionOptionsMenuComponent_ion_item_5_Template(n,o){if(1&n){const n=_.RV6();_.j41(0,"ion-item",1),_.bIt("click",(function AddonModForumDiscussionOptionsMenuComponent_ion_item_5_Template_ion_item_click_0_listener(){_.eBV(n);const o=_.XpG();return _.Njj(o.setPinState(!1))})),_.nrm(1,"ion-icon",6),_.j41(2,"ion-label")(3,"p",3),_.EFF(4),_.nI1(5,"translate"),_.k0s()()()}2&n&&(_.Y8G("detail",!1),_.R7$(4),_.JRh(_.bMT(5,2,"addon.mod_forum.unpindiscussion")))}function AddonModForumDiscussionOptionsMenuComponent_ion_item_6_Template(n,o){if(1&n){const n=_.RV6();_.j41(0,"ion-item",1),_.bIt("click",(function AddonModForumDiscussionOptionsMenuComponent_ion_item_6_Template_ion_item_click_0_listener(){_.eBV(n);const o=_.XpG();return _.Njj(o.toggleFavouriteState(!0))})),_.nrm(1,"ion-icon",7),_.j41(2,"ion-label")(3,"p",3),_.EFF(4),_.nI1(5,"translate"),_.k0s()()()}2&n&&(_.Y8G("detail",!1),_.R7$(4),_.JRh(_.bMT(5,2,"addon.mod_forum.addtofavourites")))}function AddonModForumDiscussionOptionsMenuComponent_ion_item_7_Template(n,o){if(1&n){const n=_.RV6();_.j41(0,"ion-item",1),_.bIt("click",(function AddonModForumDiscussionOptionsMenuComponent_ion_item_7_Template_ion_item_click_0_listener(){_.eBV(n);const o=_.XpG();return _.Njj(o.toggleFavouriteState(!1))})),_.nrm(1,"ion-icon",8),_.j41(2,"ion-label")(3,"p",3),_.EFF(4),_.nI1(5,"translate"),_.k0s()()()}2&n&&(_.Y8G("detail",!1),_.R7$(4),_.JRh(_.bMT(5,2,"addon.mod_forum.removefromfavourites")))}let k=(()=>{var n;class AddonModForumDiscussionOptionsMenuComponent{constructor(){this.canPin=!1}ngOnInit(){var n=this;return(0,s.A)((function*(){if(!u.AddonModForum.isSetPinStateAvailableForSite())return n.canPin=!1,void 0;try{const o=yield u.AddonModForum.canAddDiscussionToAll(n.forumId,{cmId:n.cmId});n.canPin=!!o.canpindiscussions}catch(o){n.canPin=!1}}))()}setLockState(n){var o=this;return(0,s.A)((function*(){const i=yield m.CoreLoadings.show("core.sending",!0);try{const i=yield u.AddonModForum.setLockState(o.forumId,o.discussion.discussion,n);d.z.trigger(c.rh,{forumId:o.forumId,discussionId:o.discussion.discussion,cmId:o.cmId,locked:i.locked},t.CoreSites.getCurrentSiteId()),e.IE.dismiss({action:"lock",value:n}),r.CoreToasts.show({message:"addon.mod_forum.lockupdated",translateMessage:!0})}catch(n){l.CoreAlerts.showError(n),e.IE.dismiss()}finally{i.dismiss()}}))()}setPinState(n){var o=this;return(0,s.A)((function*(){const i=yield m.CoreLoadings.show("core.sending",!0);try{yield u.AddonModForum.setPinState(o.discussion.discussion,n);d.z.trigger(c.rh,{forumId:o.forumId,discussionId:o.discussion.discussion,cmId:o.cmId,pinned:n},t.CoreSites.getCurrentSiteId()),e.IE.dismiss({action:"pin",value:n}),r.CoreToasts.show({message:"addon.mod_forum.pinupdated",translateMessage:!0})}catch(n){l.CoreAlerts.showError(n),e.IE.dismiss()}finally{i.dismiss()}}))()}toggleFavouriteState(n){var o=this;return(0,s.A)((function*(){const i=yield m.CoreLoadings.show("core.sending",!0);try{yield u.AddonModForum.toggleFavouriteState(o.discussion.discussion,n);d.z.trigger(c.rh,{forumId:o.forumId,discussionId:o.discussion.discussion,cmId:o.cmId,starred:n},t.CoreSites.getCurrentSiteId()),e.IE.dismiss({action:"star",value:n}),r.CoreToasts.show({message:"addon.mod_forum.favouriteupdated",translateMessage:!0})}catch(n){l.CoreAlerts.showError(n),e.IE.dismiss()}finally{i.dismiss()}}))()}}return(n=AddonModForumDiscussionOptionsMenuComponent).ɵfac=function AddonModForumDiscussionOptionsMenuComponent_Factory(o){return new(o||n)},n.ɵcmp=_.VBU({type:n,selectors:[["addon-forum-discussion-options-menu"]],inputs:{discussion:"discussion",forumId:"forumId",cmId:"cmId"},standalone:!0,features:[_.aNF],decls:8,vars:6,consts:[["button","","class","ion-text-wrap",3,"detail","click",4,"ngIf"],["button","",1,"ion-text-wrap",3,"click","detail"],["name","fas-lock","slot","start","aria-hidden","true"],[1,"item-heading"],["name","fas-unlock","slot","start","aria-hidden","true"],["name","fas-map-pin","slot","start","aria-hidden","true"],["name","fas-map-pin","slot","start","aria-hidden","true",1,"icon-slash"],["name","fas-star","slot","start","aria-hidden","true"],["name","fas-star","slot","start","aria-hidden","true",1,"icon-slash"]],template:function AddonModForumDiscussionOptionsMenuComponent_Template(n,o){1&n&&(_.j41(0,"ion-content")(1,"ion-list"),_.DNE(2,AddonModForumDiscussionOptionsMenuComponent_ion_item_2_Template,6,4,"ion-item",0)(3,AddonModForumDiscussionOptionsMenuComponent_ion_item_3_Template,6,4,"ion-item",0)(4,AddonModForumDiscussionOptionsMenuComponent_ion_item_4_Template,6,4,"ion-item",0)(5,AddonModForumDiscussionOptionsMenuComponent_ion_item_5_Template,6,4,"ion-item",0)(6,AddonModForumDiscussionOptionsMenuComponent_ion_item_6_Template,6,4,"ion-item",0)(7,AddonModForumDiscussionOptionsMenuComponent_ion_item_7_Template,6,4,"ion-item",0),_.k0s()()),2&n&&(_.R7$(2),_.Y8G("ngIf",o.discussion.canlock&&!o.discussion.locked),_.R7$(),_.Y8G("ngIf",o.discussion.canlock&&o.discussion.locked),_.R7$(),_.Y8G("ngIf",o.canPin&&!o.discussion.pinned),_.R7$(),_.Y8G("ngIf",o.canPin&&o.discussion.pinned),_.R7$(),_.Y8G("ngIf",o.discussion.canfavourite&&!o.discussion.starred),_.R7$(),_.Y8G("ngIf",o.discussion.canfavourite&&o.discussion.starred))},dependencies:[a.n,p.bT,f.W9,f.iq,f.uz,f.he,f.nf,M.t,I.i,F.D9],encapsulation:2}),AddonModForumDiscussionOptionsMenuComponent})()}}]);