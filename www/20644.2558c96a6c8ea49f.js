"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[20644],{67840:(o,n,e)=>{e.d(n,{X:()=>i});var t=e(54438);let i=(()=>{var o;class CoreCourseModuleCompletionBaseComponent{constructor(){this.completionChanged=new t.bkB}ngOnChanges(o){o.completion&&this.completion&&this.calculateData()}calculateData(){}}return(o=CoreCourseModuleCompletionBaseComponent).ɵfac=function CoreCourseModuleCompletionBaseComponent_Factory(n){return new(n||o)},o.ɵcmp=t.VBU({type:o,selectors:[["ng-component"]],inputs:{completion:"completion",moduleId:"moduleId",moduleName:"moduleName"},outputs:{completionChanged:"completionChanged"},features:[t.OA$],decls:0,vars:0,template:function CoreCourseModuleCompletionBaseComponent_Template(o,n){},encapsulation:2}),CoreCourseModuleCompletionBaseComponent})()},20644:(o,n,e)=>{e.r(n),e.d(n,{CoreCourseModuleCompletionComponent:()=>f});var t=e(10467),i=e(67840),l=e(24813),a=e(94247),C=e(98870),c=e(79555),p=e(49882),r=e(91416),_=e(86654),m=e(54438),s=e(2910),u=e(86198),d=e(43570),M=e(73955);function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Conditional_0_Template(o,n){if(1&o){const o=m.RV6();m.j41(0,"ion-button",1),m.bIt("click",(function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Conditional_0_Template_ion_button_click_0_listener(n){m.eBV(o);const e=m.XpG(4);return m.Njj(e.completionClicked(n))})),m.EFF(1),m.nI1(2,"translate"),m.j41(3,"div",2),m.nrm(4,"div",3),m.k0s()()}2&o&&(m.R7$(),m.SpI(" ",m.bMT(2,1,"core.course.todo")," "))}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Conditional_1_Template(o,n){if(1&o){const o=m.RV6();m.j41(0,"ion-button",4),m.bIt("click",(function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Conditional_1_Template_ion_button_click_0_listener(n){m.eBV(o);const e=m.XpG(4);return m.Njj(e.completionClicked(n))})),m.nrm(1,"ion-icon",5),m.EFF(2),m.nI1(3,"translate"),m.j41(4,"div",2),m.nrm(5,"div",3),m.k0s()()}2&o&&(m.R7$(2),m.SpI(" ",m.bMT(3,1,"core.course.done")," "))}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Template(o,n){if(1&o&&m.DNE(0,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Conditional_0_Template,5,3,"ion-button",0)(1,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Conditional_1_Template,6,3),2&o){const o=m.XpG(3);m.vxM(0,o.completed?1:0)}}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_0_Conditional_4_Template(o,n){1&o&&(m.nrm(0,"ion-icon",8),m.nI1(1,"translate")),2&o&&m.BMQ("aria-label",m.bMT(1,1,"core.course.manualcompletionnotsynced"))}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_0_Template(o,n){if(1&o){const o=m.RV6();m.j41(0,"ion-button",7),m.bIt("click",(function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_0_Template_ion_button_click_0_listener(n){m.eBV(o);const e=m.XpG(4);return m.Njj(e.completionClicked(n))})),m.nrm(1,"ion-icon",5),m.EFF(2),m.nI1(3,"translate"),m.DNE(4,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_0_Conditional_4_Template,2,3,"ion-icon",8),m.k0s()}if(2&o){const o=m.XpG(4);m.Y8G("ariaLabel",o.accessibleDescription),m.R7$(2),m.SpI(" ",m.bMT(3,3,"core.course.completion_manual:done")," "),m.R7$(2),m.vxM(4,o.completion.offline?4:-1)}}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_1_Conditional_3_Template(o,n){1&o&&(m.nrm(0,"ion-icon",8),m.nI1(1,"translate")),2&o&&m.BMQ("aria-label",m.bMT(1,1,"core.course.manualcompletionnotsynced"))}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_1_Template(o,n){if(1&o){const o=m.RV6();m.j41(0,"ion-button",9),m.bIt("click",(function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_1_Template_ion_button_click_0_listener(n){m.eBV(o);const e=m.XpG(4);return m.Njj(e.completionClicked(n))})),m.EFF(1),m.nI1(2,"translate"),m.DNE(3,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_1_Conditional_3_Template,2,3,"ion-icon",8),m.k0s()}if(2&o){const o=m.XpG(4);m.Y8G("ariaLabel",o.accessibleDescription),m.R7$(),m.SpI(" ",m.bMT(2,3,"core.course.completion_manual:markdone")," "),m.R7$(2),m.vxM(3,o.completion.offline?3:-1)}}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Template(o,n){if(1&o&&m.DNE(0,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_0_Template,5,5,"ion-button",6)(1,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Conditional_1_Template,4,5),2&o){const o=m.XpG(3);m.vxM(0,o.completed?0:1)}}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Template(o,n){if(1&o&&m.DNE(0,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_0_Template,2,1)(1,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Conditional_1_Template,2,1),2&o){const o=m.XpG(2);m.vxM(0,o.completion.isautomatic?0:1)}}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_1_Conditional_0_Template(o,n){if(1&o){const o=m.RV6();m.j41(0,"ion-button",11),m.bIt("click",(function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_1_Conditional_0_Template_ion_button_click_0_listener(n){m.eBV(o);const e=m.XpG(3);return m.Njj(e.completionClicked(n))})),m.EFF(1),m.nI1(2,"translate"),m.j41(3,"div",2),m.nrm(4,"div",3),m.k0s()()}2&o&&(m.R7$(),m.SpI(" ",m.bMT(2,1,"core.course.completionmenuitem")," "))}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_1_Conditional_1_Template(o,n){if(1&o&&(m.j41(0,"ion-button",12),m.EFF(1),m.nI1(2,"translate"),m.k0s()),2&o){const o=m.XpG(3);m.Y8G("ariaLabel",o.accessibleDescription),m.R7$(),m.SpI(" ",m.bMT(2,2,"core.course.completion_manual:markdone")," ")}}function CoreCourseModuleCompletionComponent_Conditional_0_Conditional_1_Template(o,n){if(1&o&&m.DNE(0,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_1_Conditional_0_Template,5,3,"ion-button",10)(1,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_1_Conditional_1_Template,3,4),2&o){const o=m.XpG(2);m.vxM(0,o.completion.isautomatic?0:1)}}function CoreCourseModuleCompletionComponent_Conditional_0_Template(o,n){if(1&o&&m.DNE(0,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_0_Template,2,1)(1,CoreCourseModuleCompletionComponent_Conditional_0_Conditional_1_Template,2,1),2&o){const o=m.XpG();m.vxM(0,o.completion.istrackeduser?0:1)}}let f=(()=>{var o;class CoreCourseModuleCompletionComponent extends i.X{constructor(){super(...arguments),this.showCompletionConditions=!1,this.showManualCompletion=!1,this.completed=!1,this.accessibleDescription=null,this.showCompletionInfo=!1}ngOnInit(){var o;if(!this.completion)return;const n=!this.completion.isautomatic||((null===(o=this.completion.details)||void 0===o?void 0:o.length)||0)>0;this.showCompletionInfo=n&&(this.showCompletionConditions||this.showManualCompletion),this.showCompletionInfo&&!this.completion.isautomatic&&this.completion.istrackeduser&&(this.completionObserver=p.z.on(p.z.MANUAL_COMPLETION_CHANGED,(o=>{this.completion&&this.completion.cmid==o.completion.cmid&&(this.completion=o.completion,this.calculateData(),this.completionChanged.emit(this.completion))})))}calculateData(){var o=this;return(0,t.A)((function*(){if(!o.completion||!o.completion.istrackeduser)return;const n=a.CoreCourseHelper.getCompletionStatus(o.completion);if(o.completed=0!==n&&3!==n,!o.completion.isautomatic)if(o.completion.overrideby){const n=yield C.CoreUser.getUserFullNameWithDefault(o.completion.overrideby,o.completion.courseId);o.accessibleDescription=c.HT.instant(`core.course.${o.completion.state?"completion_setby:manual:done":"completion_setby:manual:markdone"}`,{$a:{activityname:o.moduleName,setby:n}})}else{o.accessibleDescription=c.HT.instant(`core.course.${o.completion.state?"completion_manual:aria:done":"completion_manual:aria:markdone"}`,{$a:o.moduleName})}}))()}completionClicked(o){var n=this;return(0,t.A)((function*(){if(n.completion&&n.showCompletionInfo)if(o.stopPropagation(),o.preventDefault(),n.completion.isautomatic||!n.completion.istrackeduser){let t=o.target;t&&"ION-BUTTON"!==t.tagName&&(t=t.parentElement);const{CoreCourseModuleCompletionDetailsComponent:i}=yield e.e(22664).then(e.bind(e,22664));l.CorePopovers.openWithoutResult({component:i,componentProps:{completion:n.completion},event:{target:t}})}else yield a.CoreCourseHelper.changeManualCompletion(n.completion),p.z.trigger(p.z.MANUAL_COMPLETION_CHANGED,{completion:n.completion})}))()}ngOnChanges(o){o.completion&&this.completion&&this.completion.istrackeduser&&this.calculateData()}ngOnDestroy(){var o;null===(o=this.completionObserver)||void 0===o||o.off()}}return(o=CoreCourseModuleCompletionComponent).ɵfac=(()=>{let n;return function CoreCourseModuleCompletionComponent_Factory(e){return(n||(n=m.xGo(o)))(e||o)}})(),o.ɵcmp=m.VBU({type:o,selectors:[["core-course-module-completion"]],inputs:{showCompletionConditions:[m.Mj6.HasDecoratorInputTransform,"showCompletionConditions","showCompletionConditions",r.G],showManualCompletion:[m.Mj6.HasDecoratorInputTransform,"showManualCompletion","showManualCompletion",r.G]},standalone:!0,features:[m.GFd,m.Vt3,m.OA$,m.aNF],decls:1,vars:1,consts:[["fill","outline",1,"completioninfo","completion_incomplete","chip","ion-text-nowrap"],["fill","outline",1,"completioninfo","completion_incomplete","chip","ion-text-nowrap",3,"click"],["role","presentation","aria-hidden","true",1,"select-icon"],[1,"select-icon-inner"],["color","success",1,"completioninfo","completion_complete","chip","ion-text-nowrap",3,"click"],["name","fas-check","slot","start","aria-hidden","true"],["color","success",1,"completioninfo","completion_complete","chip","ion-text-nowrap",3,"ariaLabel"],["color","success",1,"completioninfo","completion_complete","chip","ion-text-nowrap",3,"click","ariaLabel"],["name","fas-arrows-rotate","slot","end"],["fill","outline",1,"completioninfo","completion_incomplete","chip","ion-text-nowrap",3,"click","ariaLabel"],["fill","outline",1,"chip","ion-text-nowrap"],["fill","outline",1,"chip","ion-text-nowrap",3,"click"],["fill","outline","disabled","",1,"completioninfo","completion_incomplete","chip","ion-text-nowrap",3,"ariaLabel"]],template:function CoreCourseModuleCompletionComponent_Template(o,n){1&o&&m.DNE(0,CoreCourseModuleCompletionComponent_Conditional_0_Template,2,1),2&o&&m.vxM(0,n.showCompletionInfo&&n.completion?0:-1)},dependencies:[_.n,s.Jm,s.iq,u.t,d.T,M.D9],styles:["[_nghost-%COMP%]{display:block;margin:var(--margin, 4px)}[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   ion-button.button-solid.ion-color-success[_ngcontent-%COMP%]::part(native){background:var(--ion-color-tint);color:var(--ion-color-shade)}[_nghost-%COMP%]   ion-button.button-solid.ion-color-success.ion-focused[_ngcontent-%COMP%]::part(native){background:var(--ion-color);color:var(--ion-color-contrast)}[_nghost-%COMP%]   ion-button.button-outline[_ngcontent-%COMP%]::part(native){border-color:var(--gray-400)}"]}),CoreCourseModuleCompletionComponent})()}}]);