"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[70554],{70554:(e,n,t)=>{t.r(n),t.d(n,{CoreLoginSitesModalComponent:()=>k});var o=t(10467),i=t(52749),a=t(82461),l=t(15324),r=t(7310),s=t(89818),c=t(79555),_=t(86654),d=t(25572),u=t(54438),g=t(60177),m=t(2910),p=t(64422),C=t(69418),b=t(19858),f=t(86198),h=t(88246),L=t(43570),S=t(73955);const _c0=e=>({count:e});function CoreLoginSitesModalComponent_ion_button_11_Template(e,n){if(1&e){const e=u.RV6();u.j41(0,"ion-button",12),u.nI1(1,"translate"),u.bIt("click",(function CoreLoginSitesModalComponent_ion_button_11_Template_ion_button_click_0_listener(){u.eBV(e);const n=u.XpG();return u.Njj(n.toggleDelete())})),u.nrm(2,"ion-icon",13),u.k0s()}2&e&&u.Y8G("ariaLabel",u.bMT(1,1,"core.login.toggleremove"))}function CoreLoginSitesModalComponent_ng_template_15_ion_icon_0_Template(e,n){1&e&&u.nrm(0,"ion-icon",16)}function CoreLoginSitesModalComponent_ng_template_15_ng_container_1_ion_badge_1_Template(e,n){if(1&e&&(u.j41(0,"ion-badge",4)(1,"span",19),u.EFF(2),u.k0s(),u.j41(3,"span",11),u.EFF(4),u.nI1(5,"translate"),u.k0s()()),2&e){const e=u.XpG(2).site;u.Y8G("@coreShowHideAnimation",void 0),u.R7$(2),u.JRh(e.badge),u.R7$(2),u.JRh(u.i5U(5,3,"core.login.sitebadgedescription",u.eq3(6,_c0,e.badge)))}}function CoreLoginSitesModalComponent_ng_template_15_ng_container_1_ion_button_2_Template(e,n){if(1&e){const e=u.RV6();u.j41(0,"ion-button",20),u.nI1(1,"translate"),u.bIt("click",(function CoreLoginSitesModalComponent_ng_template_15_ng_container_1_ion_button_2_Template_ion_button_click_0_listener(n){u.eBV(e);const t=u.XpG(2).site,o=u.XpG();return u.Njj(o.deleteSite(n,t))})),u.nrm(2,"ion-icon",21),u.k0s()}2&e&&u.Y8G("ariaLabel",u.bMT(1,2,"core.login.removeaccount"))("@coreSlideInOut","fromRight")}function CoreLoginSitesModalComponent_ng_template_15_ng_container_1_Template(e,n){if(1&e&&(u.qex(0),u.DNE(1,CoreLoginSitesModalComponent_ng_template_15_ng_container_1_ion_badge_1_Template,6,8,"ion-badge",17)(2,CoreLoginSitesModalComponent_ng_template_15_ng_container_1_ion_button_2_Template,3,4,"ion-button",18),u.bVm()),2&e){const e=u.XpG().site,n=u.XpG();u.R7$(),u.Y8G("ngIf",!n.showDelete&&e.badge),u.R7$(),u.Y8G("ngIf",n.showDelete)}}function CoreLoginSitesModalComponent_ng_template_15_Template(e,n){if(1&e&&u.DNE(0,CoreLoginSitesModalComponent_ng_template_15_ion_icon_0_Template,1,0,"ion-icon",14)(1,CoreLoginSitesModalComponent_ng_template_15_ng_container_1_Template,3,2,"ng-container",15),2&e){const e=n.isCurrentSite;u.Y8G("ngIf",e),u.R7$(),u.Y8G("ngIf",!e)}}let k=(()=>{var e;class CoreLoginSitesModalComponent{constructor(){this.accountsList={sameSite:[],otherSites:[],count:0},this.showDelete=!1,this.loaded=!1,this.currentSiteId=i.CoreSites.getRequiredCurrentSite().getId()}ngOnInit(){var e=this;return(0,o.A)((function*(){e.accountsList=yield a.CoreLoginHelper.getAccountsList(),e.loaded=!0}))()}add(e){var n=this;return(0,o.A)((function*(){yield n.close(e,!0),yield a.CoreLoginHelper.goToAddSite(!0,!0)}))()}deleteSite(e,n){var t=this;return(0,o.A)((function*(){e.stopPropagation();let o=n.siteName||"";o=yield r.CoreFilter.formatText(o,{clean:!0,singleLine:!0,filter:!1},[],n.id);try{yield d.CoreAlerts.confirmDelete(c.HT.instant("core.login.confirmdeletesite",{sitename:o}))}catch{return}try{yield a.CoreLoginHelper.deleteAccountFromList(t.accountsList,n),t.showDelete=!1}catch(e){d.CoreAlerts.showError(e,{default:c.HT.instant("core.login.errordeletesite")})}}))()}login(e){var n=this;return(0,o.A)((function*(){yield n.close(void 0,!0),yield l.CoreNavigator.navigateToSiteHome({preferCurrentTab:!1,siteId:e.id})}))()}toggleDelete(){this.showDelete=!this.showDelete}close(e,n=!1){return(0,o.A)((function*(){null==e||e.preventDefault(),null==e||e.stopPropagation(),yield c.W3.dismiss(n)}))()}}return(e=CoreLoginSitesModalComponent).ɵfac=function CoreLoginSitesModalComponent_Factory(n){return new(n||e)},e.ɵcmp=u.VBU({type:e,selectors:[["core-login-sites-modal"]],standalone:!0,features:[u.aNF],decls:24,vars:17,consts:[["siteItem",""],["slot","start"],["fill","clear",1,"ion-back-button",3,"click","ariaLabel"],["ios","chevron-back","md","arrow-back-sharp","slot","icon-only","aria-hidden","true"],["slot","end"],["fill","clear",3,"ariaLabel","click",4,"ngIf"],[3,"hideUntil"],[3,"onSiteClicked","accountsList","sitesClickable","currentSiteClickable"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end"],[3,"click"],["name","fas-plus","aria-hidden","true"],[1,"sr-only"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-pen","aria-hidden","true"],["color","success","name","fas-check","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["color","success","name","fas-check","aria-hidden","true"],["slot","end",4,"ngIf"],["slot","end","fill","clear","color","danger",3,"ariaLabel","click",4,"ngIf"],["aria-hidden","true"],["slot","end","fill","clear","color","danger",3,"click","ariaLabel"],["name","fas-trash","slot","icon-only","aria-hidden","true"]],template:function CoreLoginSitesModalComponent_Template(e,n){if(1&e){const e=u.RV6();u.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),u.nI1(4,"translate"),u.bIt("click",(function CoreLoginSitesModalComponent_Template_ion_button_click_3_listener(t){return u.eBV(e),u.Njj(n.close(t))})),u.nrm(5,"ion-icon",3),u.k0s()(),u.j41(6,"ion-title")(7,"h1"),u.EFF(8),u.nI1(9,"translate"),u.k0s()(),u.j41(10,"ion-buttons",4),u.DNE(11,CoreLoginSitesModalComponent_ion_button_11_Template,3,3,"ion-button",5),u.k0s()()(),u.j41(12,"ion-content")(13,"core-loading",6)(14,"core-sites-list",7),u.bIt("onSiteClicked",(function CoreLoginSitesModalComponent_Template_core_sites_list_onSiteClicked_14_listener(t){return u.eBV(e),u.Njj(n.login(t))})),u.DNE(15,CoreLoginSitesModalComponent_ng_template_15_Template,2,2,"ng-template",null,0,u.C5r),u.k0s()(),u.j41(17,"ion-fab",8)(18,"ion-fab-button",9),u.nI1(19,"translate"),u.bIt("click",(function CoreLoginSitesModalComponent_Template_ion_fab_button_click_18_listener(t){return u.eBV(e),u.Njj(n.add(t))})),u.nrm(20,"ion-icon",10),u.j41(21,"span",11),u.EFF(22),u.nI1(23,"translate"),u.k0s()()()()}2&e&&(u.R7$(3),u.Y8G("ariaLabel",u.bMT(4,9,"core.back")),u.R7$(5),u.JRh(u.bMT(9,11,"core.mainmenu.switchaccount")),u.R7$(3),u.Y8G("ngIf",n.accountsList.count>1),u.R7$(2),u.Y8G("hideUntil",n.loaded),u.R7$(),u.Y8G("accountsList",n.accountsList)("sitesClickable",!0)("currentSiteClickable",!1),u.R7$(4),u.BMQ("aria-label",u.bMT(19,13,"core.login.add")),u.R7$(4),u.JRh(u.bMT(23,15,"core.login.add")))},dependencies:[_.n,g.bT,m.In,m.Jm,m.QW,m.W9,m.Q8,m.YW,m.eU,m.iq,m.BC,m.ai,p.R,C.L,b.A,f.t,h.i,L.T,S.D9],encapsulation:2,data:{animation:[s.d.SLIDE_IN_OUT,s.d.SHOW_HIDE]}}),CoreLoginSitesModalComponent})()}}]);