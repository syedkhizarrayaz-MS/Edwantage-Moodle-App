"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[12832],{92010:(e,n,t)=>{t.d(n,{E:()=>AddonModGlossaryEntriesSource});var o=t(10467),r=t(99522),i=t(21113),a=t(20119),s=t(59829);class AddonModGlossaryEntriesSource extends r.F{constructor(e,n,t){super(),this.isSearch=!1,this.hasSearched=!1,this.onlineEntries=[],this.offlineEntries=[],this.COURSE_ID=e,this.CM_ID=n,this.GLOSSARY_PATH_PREFIX=t}isOnlineEntry(e){return"id"in e}isOfflineEntry(e){return!this.isOnlineEntry(e)}getItemPath(e){return this.isOfflineEntry(e)?`${this.GLOSSARY_PATH_PREFIX}entry/new-${e.timecreated}`:`${this.GLOSSARY_PATH_PREFIX}entry/${e.id}`}getItemQueryParams(){return{cmId:this.CM_ID,courseId:this.COURSE_ID}}getPagesLoaded(){return null===this.items?0:Math.ceil(this.onlineEntries.length/this.getPageLength())}startSearch(){this.isSearch=!0,this.setDirty(!0)}stopSearch(e,n){this.fetchMode&&(this.isSearch=!1,this.hasSearched=!1,this.onlineEntries=e,this.hasMoreItems=n,this.setDirty(!0))}search(e){if(!this.glossary)return;const n=this.glossary.id;this.fetchFunction=t=>i.$.getEntriesBySearch(n,e,!0,t),this.fetchInvalidate=()=>i.$.invalidateEntriesBySearch(n,e,!0),this.hasSearched=!0,this.setDirty(!0)}loadGlossary(){var e=this;return(0,o.A)((function*(){e.glossary=yield i.$.getGlossary(e.COURSE_ID,e.CM_ID)}))()}invalidateCache(e=!0){var n=this;return(0,o.A)((function*(){yield Promise.all([n.fetchInvalidate&&n.fetchInvalidate(),e&&i.$.invalidateCourseGlossaries(n.COURSE_ID),e&&n.glossary&&i.$.invalidateCategories(n.glossary.id)])}))()}switchMode(e){if(!this.glossary)throw new Error("Can't switch entries mode without a glossary!");const n=this.glossary.id;switch(this.fetchMode=e,this.isSearch=!1,this.setDirty(!0),e){case"author_all":this.viewMode="author",this.fetchFunction=e=>i.$.getEntriesByAuthor(n,e),this.fetchInvalidate=()=>i.$.invalidateEntriesByAuthor(n);break;case"cat_all":this.viewMode="cat",this.fetchFunction=e=>i.$.getEntriesByCategory(n,e),this.fetchInvalidate=()=>i.$.invalidateEntriesByCategory(n);break;case"newest_first":this.viewMode="date",this.fetchFunction=e=>i.$.getEntriesByDate(n,"CREATION",e),this.fetchInvalidate=()=>i.$.invalidateEntriesByDate(n,"CREATION");break;case"recently_updated":this.viewMode="date",this.fetchFunction=e=>i.$.getEntriesByDate(n,"UPDATE",e),this.fetchInvalidate=()=>i.$.invalidateEntriesByDate(n,"UPDATE");break;default:this.viewMode="letter",this.fetchMode="letter_all",this.fetchFunction=e=>i.$.getEntriesByLetter(n,e),this.fetchInvalidate=()=>i.$.invalidateEntriesByLetter(n)}}loadPageItems(e){var n=this;return(0,o.A)((function*(){const t=n.glossary,o=n.fetchFunction;if(!t||!o)throw new Error("Can't load entries without glossary or fetch function");const r=[];if(0===e){const e=yield a.e.getGlossaryOfflineEntries(t.id);e.sort(((e,n)=>e.concept.localeCompare(n.concept))),r.push(...e)}const i=e*n.getPageLength(),s=yield o({from:i,cmId:n.CM_ID});return r.push(...s.entries),{items:r,hasMoreItems:i+s.entries.length<s.count}}))()}getPageLength(){return s.sT}setItems(e,n){this.onlineEntries=[],this.offlineEntries=[],e.forEach((e=>{this.isOnlineEntry(e)&&this.onlineEntries.push(e),this.isOfflineEntry(e)&&this.offlineEntries.push(e)})),super.setItems(e,n)}reset(){this.onlineEntries=[],this.offlineEntries=[],super.reset()}}},12832:(e,n,t)=>{t.r(n),t.d(n,{default:()=>q});var o=t(10467),r=t(18674),i=t(20119),a=t(83696),s=t(52266),l=t(81879),d=t(54638),c=t(41094),_=t(15324),g=t(94455),y=t(55554),m=t(79555),f=t(49882),u=t(92010),h=t(21113),E=t(24742),p=t(22693),I=t(59829),G=t(51024),v=t(47551),T=t(33014),A=t(25572),M=t(25367),P=t(86654),$=t(76990),R=t(55608),b=t(54438),w=t(29492),C=t(21182),k=t(60177),D=t(2910),S=t(6128),F=t(64422),O=t(50016),Y=t(16658),x=t(86198),L=t(58197),N=t(28988),j=t(88246),B=t(43570),X=t(61307),U=t(73955),V=t(2423);const _c0=e=>({$a:e});function AddonModGlossaryEntryPage_h1_6_Template(e,n){if(1&e&&(b.j41(0,"h1"),b.nrm(1,"core-format-text",9),b.k0s()),2&e){const e=b.XpG();b.R7$(),b.Y8G("text",e.entry.concept)("contextInstanceId",e.componentId)("courseId",e.courseId)("sanitize",!e.onlineEntry)}}function AddonModGlossaryEntryPage_ng_container_13_ion_card_1_Template(e,n){1&e&&(b.j41(0,"ion-card",17)(1,"ion-item"),b.nrm(2,"ion-icon",18),b.j41(3,"ion-label"),b.EFF(4),b.nI1(5,"translate"),b.nI1(6,"translate"),b.k0s()()()),2&e&&(b.R7$(4),b.JRh(b.i5U(6,3,"core.hasdatatosync",b.eq3(6,_c0,b.bMT(5,1,"addon.mod_glossary.entry")))))}function AddonModGlossaryEntryPage_ng_container_13_ion_item_3_p_5_Template(e,n){if(1&e&&(b.j41(0,"p"),b.EFF(1),b.k0s()),2&e){const e=b.XpG(3);b.R7$(),b.JRh(e.onlineEntry.userfullname)}}function AddonModGlossaryEntryPage_ng_container_13_ion_item_3_ion_note_6_Template(e,n){if(1&e&&(b.j41(0,"ion-note",3),b.EFF(1),b.nI1(2,"coreDateDayOrTime"),b.k0s()),2&e){const e=b.XpG(3);b.R7$(),b.JRh(b.bMT(2,1,e.onlineEntry.timemodified))}}function AddonModGlossaryEntryPage_ng_container_13_ion_item_3_Template(e,n){if(1&e&&(b.j41(0,"ion-item",12),b.nrm(1,"core-user-avatar",19),b.j41(2,"ion-label")(3,"h2"),b.nrm(4,"core-format-text",9),b.k0s(),b.DNE(5,AddonModGlossaryEntryPage_ng_container_13_ion_item_3_p_5_Template,2,1,"p",2),b.k0s(),b.DNE(6,AddonModGlossaryEntryPage_ng_container_13_ion_item_3_ion_note_6_Template,3,3,"ion-note",20),b.k0s()),2&e){const e=b.XpG(2);b.R7$(),b.Y8G("user",e.entry),b.R7$(3),b.Y8G("text",e.entry.concept)("contextInstanceId",e.componentId)("courseId",e.courseId)("sanitize",!e.onlineEntry),b.R7$(),b.Y8G("ngIf",e.onlineEntry),b.R7$(),b.Y8G("ngIf",e.showDate&&e.onlineEntry)}}function AddonModGlossaryEntryPage_ng_container_13_ion_item_4_ion_note_4_Template(e,n){if(1&e&&(b.j41(0,"ion-note",3),b.EFF(1),b.nI1(2,"coreDateDayOrTime"),b.k0s()),2&e){const e=b.XpG(3);b.R7$(),b.JRh(b.bMT(2,1,e.onlineEntry.timemodified))}}function AddonModGlossaryEntryPage_ng_container_13_ion_item_4_Template(e,n){if(1&e&&(b.j41(0,"ion-item",12)(1,"ion-label")(2,"p",21),b.nrm(3,"core-format-text",22),b.k0s()(),b.DNE(4,AddonModGlossaryEntryPage_ng_container_13_ion_item_4_ion_note_4_Template,3,3,"ion-note",20),b.k0s()),2&e){const e=b.XpG(2);b.R7$(3),b.Y8G("text",e.entry.concept)("contextInstanceId",e.componentId)("sanitize",!e.onlineEntry),b.R7$(),b.Y8G("ngIf",e.showDate&&e.onlineEntry)}}function AddonModGlossaryEntryPage_ng_container_13_div_8_core_file_1_Template(e,n){if(1&e&&b.nrm(0,"core-file",24),2&e){const e=n.$implicit,t=b.XpG(3);b.Y8G("file",e)("component",t.component)("componentId",t.componentId)}}function AddonModGlossaryEntryPage_ng_container_13_div_8_Template(e,n){if(1&e&&(b.j41(0,"div"),b.DNE(1,AddonModGlossaryEntryPage_ng_container_13_div_8_core_file_1_Template,1,3,"core-file",23),b.k0s()),2&e){const e=b.XpG(2);b.R7$(),b.Y8G("ngForOf",e.onlineEntry.attachments)}}function AddonModGlossaryEntryPage_ng_container_13_div_9_core_file_1_Template(e,n){if(1&e&&b.nrm(0,"core-file",24),2&e){const e=n.$implicit,t=b.XpG(3);b.Y8G("file",e)("component",t.component)("componentId",t.componentId)}}function AddonModGlossaryEntryPage_ng_container_13_div_9_Template(e,n){if(1&e&&(b.j41(0,"div"),b.DNE(1,AddonModGlossaryEntryPage_ng_container_13_div_9_core_file_1_Template,1,3,"core-file",23),b.k0s()),2&e){const e=b.XpG(2);b.R7$(),b.Y8G("ngForOf",e.offlineEntry.attachments.online)}}function AddonModGlossaryEntryPage_ng_container_13_div_10_core_local_file_1_Template(e,n){if(1&e&&b.nrm(0,"core-local-file",26),2&e){b.Y8G("file",n.$implicit)}}function AddonModGlossaryEntryPage_ng_container_13_div_10_Template(e,n){if(1&e&&(b.j41(0,"div"),b.DNE(1,AddonModGlossaryEntryPage_ng_container_13_div_10_core_local_file_1_Template,1,1,"core-local-file",25),b.k0s()),2&e){const e=b.XpG(2);b.R7$(),b.Y8G("ngForOf",e.offlineEntryFiles)}}function AddonModGlossaryEntryPage_ng_container_13_ion_item_11_Template(e,n){if(1&e&&(b.j41(0,"ion-item",12)(1,"ion-label")(2,"div",0),b.EFF(3),b.nI1(4,"translate"),b.k0s(),b.nrm(5,"core-tag-list",27),b.k0s()()),2&e){const e=b.XpG(2);b.R7$(3),b.SpI("",b.bMT(4,2,"core.tag.tags"),":"),b.R7$(2),b.Y8G("tags",e.onlineEntry.tags)}}function AddonModGlossaryEntryPage_ng_container_13_ion_item_12_ion_button_2_Template(e,n){if(1&e){const e=b.RV6();b.j41(0,"ion-button",30),b.nI1(1,"translate"),b.bIt("click",(function AddonModGlossaryEntryPage_ng_container_13_ion_item_12_ion_button_2_Template_ion_button_click_0_listener(){b.eBV(e);const n=b.XpG(3);return b.Njj(n.deleteEntry())})),b.nrm(2,"ion-icon",31),b.k0s()}2&e&&b.Y8G("ariaLabel",b.bMT(1,1,"addon.mod_glossary.deleteentry"))}function AddonModGlossaryEntryPage_ng_container_13_ion_item_12_ion_button_3_Template(e,n){if(1&e){const e=b.RV6();b.j41(0,"ion-button",32),b.nI1(1,"translate"),b.bIt("click",(function AddonModGlossaryEntryPage_ng_container_13_ion_item_12_ion_button_3_Template_ion_button_click_0_listener(){b.eBV(e);const n=b.XpG(3);return b.Njj(n.editEntry())})),b.nrm(2,"ion-icon",33),b.k0s()}2&e&&b.Y8G("ariaLabel",b.bMT(1,1,"addon.mod_glossary.editentry"))}function AddonModGlossaryEntryPage_ng_container_13_ion_item_12_Template(e,n){if(1&e&&(b.j41(0,"ion-item")(1,"div",3),b.DNE(2,AddonModGlossaryEntryPage_ng_container_13_ion_item_12_ion_button_2_Template,3,3,"ion-button",28)(3,AddonModGlossaryEntryPage_ng_container_13_ion_item_12_ion_button_3_Template,3,3,"ion-button",29),b.k0s()()),2&e){const e=b.XpG(2);b.R7$(2),b.Y8G("ngIf",e.canDelete),b.R7$(),b.Y8G("ngIf",e.canEdit)}}function AddonModGlossaryEntryPage_ng_container_13_ion_item_13_Template(e,n){1&e&&(b.j41(0,"ion-item",12)(1,"ion-label")(2,"p")(3,"em"),b.EFF(4),b.nI1(5,"translate"),b.k0s()()()()),2&e&&(b.R7$(4),b.JRh(b.bMT(5,1,"addon.mod_glossary.entrypendingapproval")))}function AddonModGlossaryEntryPage_ng_container_13_core_comments_14_Template(e,n){if(1&e&&b.nrm(0,"core-comments",34),2&e){const e=b.XpG(2);b.Y8G("instanceId",e.glossary.coursemodule)("itemId",e.onlineEntry.id)("courseId",e.glossary.course)("showItem",!0)("title",e.entry.concept)}}function AddonModGlossaryEntryPage_ng_container_13_core_rating_rate_15_Template(e,n){if(1&e){const e=b.RV6();b.j41(0,"core-rating-rate",35),b.bIt("onUpdate",(function AddonModGlossaryEntryPage_ng_container_13_core_rating_rate_15_Template_core_rating_rate_onUpdate_0_listener(){b.eBV(e);const n=b.XpG(2);return b.Njj(n.ratingUpdated())})),b.k0s()}if(2&e){const e=b.XpG(2);b.Y8G("ratingInfo",e.ratingInfo)("instanceId",e.glossary.coursemodule)("itemId",e.onlineEntry.id)("itemSetId",0)("courseId",e.glossary.course)("aggregateMethod",e.glossary.assessed)("scaleId",e.glossary.scale)("userId",e.entry.userid)}}function AddonModGlossaryEntryPage_ng_container_13_core_rating_aggregate_16_Template(e,n){if(1&e&&b.nrm(0,"core-rating-aggregate",36),2&e){const e=b.XpG(2);b.Y8G("ratingInfo",e.ratingInfo)("instanceId",e.glossary.coursemodule)("itemId",e.onlineEntry.id)("courseId",e.glossary.course)("aggregateMethod",e.glossary.assessed)("scaleId",e.glossary.scale)}}function AddonModGlossaryEntryPage_ng_container_13_Template(e,n){if(1&e&&(b.qex(0),b.DNE(1,AddonModGlossaryEntryPage_ng_container_13_ion_card_1_Template,7,8,"ion-card",8),b.j41(2,"div",10),b.DNE(3,AddonModGlossaryEntryPage_ng_container_13_ion_item_3_Template,7,7,"ion-item",11)(4,AddonModGlossaryEntryPage_ng_container_13_ion_item_4_Template,5,4,"ion-item",11),b.j41(5,"ion-item",12)(6,"ion-label"),b.nrm(7,"core-format-text",13),b.k0s()(),b.DNE(8,AddonModGlossaryEntryPage_ng_container_13_div_8_Template,2,1,"div",2)(9,AddonModGlossaryEntryPage_ng_container_13_div_9_Template,2,1,"div",2),b.k0s(),b.DNE(10,AddonModGlossaryEntryPage_ng_container_13_div_10_Template,2,1,"div",2)(11,AddonModGlossaryEntryPage_ng_container_13_ion_item_11_Template,6,4,"ion-item",11)(12,AddonModGlossaryEntryPage_ng_container_13_ion_item_12_Template,4,2,"ion-item",2)(13,AddonModGlossaryEntryPage_ng_container_13_ion_item_13_Template,6,3,"ion-item",11)(14,AddonModGlossaryEntryPage_ng_container_13_core_comments_14_Template,1,5,"core-comments",14)(15,AddonModGlossaryEntryPage_ng_container_13_core_rating_rate_15_Template,1,8,"core-rating-rate",15)(16,AddonModGlossaryEntryPage_ng_container_13_core_rating_aggregate_16_Template,1,6,"core-rating-aggregate",16),b.bVm()),2&e){const e=b.XpG();b.R7$(),b.Y8G("ngIf",e.offlineEntry),b.R7$(2),b.Y8G("ngIf",e.showAuthor),b.R7$(),b.Y8G("ngIf",!e.showAuthor),b.R7$(3),b.Y8G("component",e.component)("componentId",e.componentId)("text",e.entry.definition)("contextInstanceId",e.componentId)("courseId",e.courseId)("sanitize",!e.onlineEntry),b.R7$(),b.Y8G("ngIf",e.onlineEntry&&e.onlineEntry.attachment),b.R7$(),b.Y8G("ngIf",e.offlineEntry&&e.offlineEntry.attachments),b.R7$(),b.Y8G("ngIf",e.offlineEntry&&e.offlineEntryFiles),b.R7$(),b.Y8G("ngIf",e.onlineEntry&&e.tagsEnabled&&e.entry&&e.onlineEntry.tags&&e.onlineEntry.tags.length>0),b.R7$(),b.Y8G("ngIf",e.canDelete||e.canEdit),b.R7$(),b.Y8G("ngIf",e.onlineEntry&&!e.onlineEntry.approved),b.R7$(),b.Y8G("ngIf",e.glossary&&e.glossary.allowcomments&&e.onlineEntry&&e.onlineEntry.id>0&&e.commentsEnabled),b.R7$(),b.Y8G("ngIf",e.glossary&&e.ratingInfo&&e.onlineEntry),b.R7$(),b.Y8G("ngIf",e.glossary&&e.ratingInfo&&e.onlineEntry)}}function AddonModGlossaryEntryPage_ion_card_14_Template(e,n){1&e&&(b.j41(0,"ion-card",17)(1,"ion-item")(2,"ion-label"),b.EFF(3),b.nI1(4,"translate"),b.k0s()()()),2&e&&(b.R7$(3),b.JRh(b.bMT(4,1,"addon.mod_glossary.errorloadingentry")))}let q=(()=>{var e;class AddonModGlossaryEntryPage{constructor(e,n,t){var r=this;this.splitView=e,this.route=n,this.courseContentsPage=t,this.component=I.pV,this.loaded=!1,this.showAuthor=!1,this.showDate=!1,this.tagsEnabled=!1,this.canEdit=!1,this.canDelete=!1,this.commentsEnabled=!1,this.logView=E.j.once((0,o.A)((function*(){r.onlineEntry&&r.glossary&&r.componentId&&(yield y.g.ignoreErrors(h.$.logEntryView(r.onlineEntry.id,r.componentId)),r.analyticsLogEvent("mod_glossary_get_entry_by_id",`/mod/glossary/showentry.php?eid=${r.onlineEntry.id}`))})))}get entry(){var e;return null!==(e=this.onlineEntry)&&void 0!==e?e:this.offlineEntry}ngOnInit(){var e=this;return(0,o.A)((function*(){let n=null,t=null;try{var o;e.courseId=_.CoreNavigator.getRequiredRouteNumberParam("courseId"),e.tagsEnabled=c.CoreTag.areTagsAvailableInSite(),e.commentsEnabled=d.CoreComments.areCommentsEnabledInSite(),e.cmId=_.CoreNavigator.getRequiredRouteNumberParam("cmId"),e.entrySlug=_.CoreNavigator.getRequiredRouteParam("entrySlug");const r=_.CoreNavigator.getRouteData(e.route),i=a.u.getOrCreateSource(u.E,[e.courseId,e.cmId,null!==(o=r.glossaryPathPrefix)&&void 0!==o?o:""]);e.entries=new AddonModGlossaryEntryEntriesSwipeManager(i),yield e.entries.start(),e.entrySlug.startsWith("new-")?t=Number(e.entrySlug.slice(4)):n=Number(e.entrySlug)}catch(n){return A.CoreAlerts.showError(n),e.goBack(),void 0}e.entryUpdatedObserver=f.z.on(I.uw,(n=>{var t;n.glossaryId===(null===(t=e.glossary)||void 0===t?void 0:t.id)&&(e.onlineEntry&&e.onlineEntry.id===n.entryId||e.offlineEntry&&e.offlineEntry.timecreated===n.timecreated)&&e.doRefresh()}));try{n?yield e.loadOnlineEntry(n):t&&(yield e.loadOfflineEntry(t))}finally{e.loaded=!0}}))()}ngOnDestroy(){var e;this.entries.destroy(),null===(e=this.entryUpdatedObserver)||void 0===e||e.off()}editEntry(){var e=this;return(0,o.A)((function*(){yield _.CoreNavigator.navigateToSitePath(`${I.Z9}/${e.courseId}/${e.cmId}/entry/${e.entrySlug}/edit`)}))()}deleteEntry(){var e=this;return(0,o.A)((function*(){var n,t,o;e.analyticsLogEvent("mod_glossary_delete_entry",`/mod/glossary/deleteentry.php?id=${null===(n=e.glossary)||void 0===n?void 0:n.id}&mode=delete&entry=${null===(t=e.onlineEntry)||void 0===t?void 0:t.id}`);const a=null===(o=e.glossary)||void 0===o?void 0:o.id,s=yield y.g.promiseFails(A.CoreAlerts.confirm(m.HT.instant("addon.mod_glossary.areyousuredelete")));if(!a||s)return;const l=yield T.CoreLoadings.show();try{if(e.onlineEntry){const n=e.onlineEntry.id;yield h.$.deleteEntry(a,n),yield Promise.all([y.g.ignoreErrors(h.$.invalidateEntry(n)),y.g.ignoreErrors(h.$.invalidateEntriesByLetter(a)),y.g.ignoreErrors(h.$.invalidateEntriesByAuthor(a)),y.g.ignoreErrors(h.$.invalidateEntriesByCategory(a)),y.g.ignoreErrors(h.$.invalidateEntriesByDate(a,"CREATION")),y.g.ignoreErrors(h.$.invalidateEntriesByDate(a,"UPDATE")),y.g.ignoreErrors(e.entries.getSource().invalidateCache(!1))])}else if(e.offlineEntry){const n=e.offlineEntry.concept,t=e.offlineEntry.timecreated;yield i.e.deleteOfflineEntry(a,t),yield r.n.deleteStoredFiles(a,n,t)}v.CoreToasts.show({message:"addon.mod_glossary.entrydeleted",translateMessage:!0,duration:v.ToastDuration.LONG}),yield e.goBack()}catch(e){A.CoreAlerts.showError(e,{default:m.HT.instant("addon.mod_glossary.errordeleting")})}finally{l.dismiss()}}))()}doRefresh(e){var n=this;return(0,o.A)((function*(){var t;n.onlineEntry&&null!==(t=n.glossary)&&void 0!==t&&t.allowcomments&&n.onlineEntry.id>0&&n.commentsEnabled&&n.comments&&y.g.ignoreErrors(n.comments.doRefresh());try{if(n.onlineEntry)yield y.g.ignoreErrors(h.$.invalidateEntry(n.onlineEntry.id)),yield n.loadOnlineEntry(n.onlineEntry.id);else if(n.offlineEntry){const e=Number(n.entrySlug.slice(4));yield n.loadOfflineEntry(e)}}finally{null==e||e.complete()}}))()}loadOnlineEntry(e){var n=this;return(0,o.A)((function*(){try{var t,o;const r=yield h.$.getEntry(e),i=g.WE.isOnline()&&(yield h.$.canDeleteEntries()),a=g.WE.isOnline()&&(yield h.$.canUpdateEntries());n.onlineEntry=r.entry,n.ratingInfo=r.ratinginfo,n.canDelete=i&&!(null===(t=r.permissions)||void 0===t||!t.candelete),n.canEdit=a&&!(null===(o=r.permissions)||void 0===o||!o.canupdate),yield n.loadGlossary(),n.logView()}catch(e){A.CoreAlerts.showError(e,{default:m.HT.instant("addon.mod_glossary.errorloadingentry")})}}))()}loadOfflineEntry(e){var n=this;return(0,o.A)((function*(){try{const t=yield n.loadGlossary();n.offlineEntry=yield i.e.getOfflineEntry(t.id,e),n.offlineEntryFiles=n.offlineEntry.attachments&&n.offlineEntry.attachments.offline>0?yield r.n.getStoredFiles(t.id,n.offlineEntry.concept,e):void 0,n.canEdit=!0,n.canDelete=!0}catch(e){A.CoreAlerts.showError(e,{default:m.HT.instant("addon.mod_glossary.errorloadingentry")})}}))()}loadGlossary(){var e=this;return(0,o.A)((function*(){if(e.glossary)return e.glossary;switch(e.glossary=yield h.$.getGlossary(e.courseId,e.cmId),e.componentId=e.glossary.coursemodule,e.glossary.displayformat){case"fullwithauthor":case"encyclopedia":e.showAuthor=!0,e.showDate=!0;break;case"fullwithoutauthor":e.showAuthor=!1,e.showDate=!0;break;default:e.showAuthor=!1,e.showDate=!1}return e.glossary}))()}ratingUpdated(){this.onlineEntry&&h.$.invalidateEntry(this.onlineEntry.id)}analyticsLogEvent(e,n){this.onlineEntry&&this.glossary&&p.OF.logEvent({type:p.qr.VIEW_ITEM,ws:e,name:this.onlineEntry.concept,data:{id:this.onlineEntry.id,glossaryid:this.glossary.id,category:"glossary"},url:n})}goBack(){var e=this;return(0,o.A)((function*(){var n;null!==(n=e.splitView)&&void 0!==n&&n.outletActivated?yield _.CoreNavigator.navigate((e.courseContentsPage?"../":"")+"../../"):yield _.CoreNavigator.back()}))()}}return(e=AddonModGlossaryEntryPage).ɵfac=function AddonModGlossaryEntryPage_Factory(n){return new(n||e)(b.rXU(w.M,8),b.rXU(C.nX),b.rXU(G.A,8))},e.ɵcmp=b.VBU({type:e,selectors:[["page-addon-mod-glossary-entry"]],viewQuery:function AddonModGlossaryEntryPage_Query(e,n){if(1&e&&b.GBs(l.L,5),2&e){let e;b.mGM(e=b.lsd())&&(n.comments=e.first)}},standalone:!0,features:[b.aNF],decls:15,vars:12,consts:[["slot","start"],[3,"text"],[4,"ngIf"],["slot","end"],[1,"limited-width",3,"core-swipe-navigation"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],["class","core-warning-card",4,"ngIf"],["contextLevel","module",3,"text","contextInstanceId","courseId","sanitize"],["core-reading-mode",""],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId","sanitize"],["contextLevel","module","component","mod_glossary","area","glossary_entry",3,"instanceId","itemId","courseId","showItem","title",4,"ngIf"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","itemSetId","courseId","aggregateMethod","scaleId","userId","onUpdate",4,"ngIf"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","courseId","aggregateMethod","scaleId",4,"ngIf"],[1,"core-warning-card"],["name","fas-triangle-exclamation","slot","start","aria-hidden","true"],["slot","start",3,"user"],["slot","end",4,"ngIf"],[1,"item-heading"],["contextLevel","module",3,"text","contextInstanceId","sanitize"],[3,"file","component","componentId",4,"ngFor","ngForOf"],[3,"file","component","componentId"],[3,"file",4,"ngFor","ngForOf"],[3,"file"],[3,"tags"],["fill","clear","color","danger",3,"ariaLabel","click",4,"ngIf"],["fill","clear",3,"ariaLabel","click",4,"ngIf"],["fill","clear","color","danger",3,"click","ariaLabel"],["slot","icon-only","name","fas-trash","aria-hidden","true"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-pen","aria-hidden","true"],["contextLevel","module","component","mod_glossary","area","glossary_entry",3,"instanceId","itemId","courseId","showItem","title"],["contextLevel","module",3,"onUpdate","ratingInfo","instanceId","itemId","itemSetId","courseId","aggregateMethod","scaleId","userId"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","courseId","aggregateMethod","scaleId"]],template:function AddonModGlossaryEntryPage_Template(e,n){1&e&&(b.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),b.nrm(3,"ion-back-button",1),b.nI1(4,"translate"),b.k0s(),b.j41(5,"ion-title"),b.DNE(6,AddonModGlossaryEntryPage_h1_6_Template,2,4,"h1",2),b.k0s(),b.nrm(7,"ion-buttons",3),b.k0s()(),b.j41(8,"ion-content",4)(9,"ion-refresher",5),b.bIt("ionRefresh",(function AddonModGlossaryEntryPage_Template_ion_refresher_ionRefresh_9_listener(e){return n.doRefresh(e.target)})),b.nrm(10,"ion-refresher-content",6),b.nI1(11,"translate"),b.k0s(),b.j41(12,"core-loading",7),b.DNE(13,AddonModGlossaryEntryPage_ng_container_13_Template,17,18,"ng-container",2)(14,AddonModGlossaryEntryPage_ion_card_14_Template,5,3,"ion-card",8),b.k0s()()),2&e&&(b.R7$(3),b.Y8G("text",b.bMT(4,8,"core.back")),b.R7$(3),b.Y8G("ngIf",n.entry),b.R7$(2),b.Y8G("core-swipe-navigation",n.entries),b.R7$(),b.Y8G("disabled",!n.loaded),b.R7$(),b.FS9("pullingText",b.bMT(11,10,"core.pulltorefresh")),b.R7$(2),b.Y8G("hideUntil",n.loaded),b.R7$(),b.Y8G("ngIf",n.entry&&n.loaded),b.R7$(),b.Y8G("ngIf",!n.entry))},dependencies:[P.n,k.Sq,k.bT,D.Jm,D.QW,D.b_,D.W9,D.eU,D.iq,D.uz,D.he,D.JI,D.To,D.Ki,D.BC,D.ai,D.el,S.t,F.R,O.a,Y.T,x.t,L.B,N.n,j.i,B.T,X.O,U.D9,V.Y,M.v,l.L,$.w,R.z],encapsulation:2}),AddonModGlossaryEntryPage})();class AddonModGlossaryEntryEntriesSwipeManager extends s.Z{getSelectedItemPathFromRoute(e){const n=_.CoreNavigator.getRouteParams(e);return`${this.getSource().GLOSSARY_PATH_PREFIX}entry/${n.entrySlug}`}}},25367:(e,n,t)=>{t.d(n,{v:()=>l});var o=t(15324),r=t(86654),i=t(54438),a=t(60177),s=t(2910);function CoreTagListComponent_ng_container_0_Template(e,n){if(1&e){const e=i.RV6();i.qex(0),i.j41(1,"ion-badge",1),i.bIt("click",(function CoreTagListComponent_ng_container_0_Template_ion_badge_click_1_listener(){const n=i.eBV(e).$implicit,t=i.XpG();return i.Njj(t.openTag(n))})),i.EFF(2),i.k0s(),i.bVm()}if(2&e){const e=n.$implicit;i.R7$(2),i.JRh(e.rawname)}}let l=(()=>{var e;class CoreTagListComponent{constructor(){this.tags=[]}openTag(e){o.CoreNavigator.navigateToSitePath("/tag/index",{params:{tagId:e.id,tagName:e.rawname,collectionId:e.tagcollid,fromContextId:e.taginstancecontextid}})}}return(e=CoreTagListComponent).ɵfac=function CoreTagListComponent_Factory(n){return new(n||e)},e.ɵcmp=i.VBU({type:e,selectors:[["core-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[i.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["role","link",1,"core-tag-list-tag",3,"click"]],template:function CoreTagListComponent_Template(e,n){1&e&&i.DNE(0,CoreTagListComponent_ng_container_0_Template,3,1,"ng-container",0),2&e&&i.Y8G("ngForOf",n.tags)},dependencies:[r.n,a.Sq,s.In],styles:["[_nghost-%COMP%]{line-height:1.6}[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]{cursor:pointer;margin-left:4px;margin-right:4px}"]}),CoreTagListComponent})()}}]);