"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[16215],{16215:(t,i,o)=>{o.r(i),o.d(i,{default:()=>G});var n=o(10467),e=o(82020),a=o(61340),r=o(98320),c=o(26005),s=o(75629),d=o(83696),f=o(52266),g=o(33504),_=o(22693),l=o(15324),m=o(25572),p=o(52749),u=o(79555),v=o(86654),P=o(54438),h=o(60177),x=o(2910),C=o(64422),N=o(16658),M=o(10892),O=o(86198),b=o(58197),I=o(28988),y=o(66731),A=o(88246),k=o(43570),w=o(73955),T=o(54048),R=o(93453);function AddonNotificationsNotificationPage_div_23_core_user_avatar_2_div_1_Template(t,i){if(1&t&&(P.j41(0,"div",21),P.nrm(1,"img",22),P.k0s()),2&t){const t=P.XpG(3);P.R7$(),P.Y8G("url",t.notification.iconurl)}}function AddonNotificationsNotificationPage_div_23_core_user_avatar_2_Template(t,i){if(1&t&&(P.j41(0,"core-user-avatar",19),P.DNE(1,AddonNotificationsNotificationPage_div_23_core_user_avatar_2_div_1_Template,2,1,"div",20),P.k0s()),2&t){const t=P.XpG(2);P.Y8G("userId",t.notification.useridfrom)("profileUrl",t.notification.profileimageurlfrom)("fullname",t.notification.userfromfullname),P.R7$(),P.Y8G("ngIf",t.notification.iconurl)}}function AddonNotificationsNotificationPage_div_23_ng_container_3_img_1_Template(t,i){if(1&t&&P.nrm(0,"img",25),2&t){const t=P.XpG(3);P.Y8G("url",t.notification.imgUrl)}}function AddonNotificationsNotificationPage_div_23_ng_container_3_div_2_img_1_Template(t,i){if(1&t&&P.nrm(0,"img",29),2&t){const t=P.XpG(4);P.Y8G("url",t.notification.iconurl)}}function AddonNotificationsNotificationPage_div_23_ng_container_3_div_2_ion_icon_2_Template(t,i){1&t&&P.nrm(0,"ion-icon",30)}function AddonNotificationsNotificationPage_div_23_ng_container_3_div_2_Template(t,i){if(1&t&&(P.j41(0,"div",26),P.DNE(1,AddonNotificationsNotificationPage_div_23_ng_container_3_div_2_img_1_Template,1,1,"img",27)(2,AddonNotificationsNotificationPage_div_23_ng_container_3_div_2_ion_icon_2_Template,1,0,"ion-icon",28),P.k0s()),2&t){const t=P.XpG(3);P.R7$(),P.Y8G("ngIf",t.notification.iconurl),P.R7$(),P.Y8G("ngIf",!t.notification.iconurl)}}function AddonNotificationsNotificationPage_div_23_ng_container_3_Template(t,i){if(1&t&&(P.qex(0),P.DNE(1,AddonNotificationsNotificationPage_div_23_ng_container_3_img_1_Template,1,1,"img",23)(2,AddonNotificationsNotificationPage_div_23_ng_container_3_div_2_Template,3,2,"div",24),P.bVm()),2&t){const t=P.XpG(2);P.R7$(),P.Y8G("ngIf",t.notification.imgUrl),P.R7$(),P.Y8G("ngIf",!t.notification.imgUrl)}}function AddonNotificationsNotificationPage_div_23_p_7_ng_container_3_Template(t,i){if(1&t&&(P.qex(0),P.EFF(1),P.bVm()),2&t){const t=P.XpG(3);P.R7$(),P.SpI(" · ",t.notification.userfromfullname,"")}}function AddonNotificationsNotificationPage_div_23_p_7_Template(t,i){if(1&t&&(P.j41(0,"p"),P.EFF(1),P.nI1(2,"coreTimeAgo"),P.DNE(3,AddonNotificationsNotificationPage_div_23_p_7_ng_container_3_Template,2,1,"ng-container",14),P.k0s()),2&t){const t=P.XpG(2);P.R7$(),P.SpI(" ",P.bMT(2,2,t.notification.timecreated)," "),P.R7$(2),P.Y8G("ngIf",t.notification.useridfrom>0)}}function AddonNotificationsNotificationPage_div_23_Template(t,i){if(1&t&&(P.j41(0,"div",11)(1,"ion-item",12),P.DNE(2,AddonNotificationsNotificationPage_div_23_core_user_avatar_2_Template,2,4,"core-user-avatar",13)(3,AddonNotificationsNotificationPage_div_23_ng_container_3_Template,3,2,"ng-container",14),P.j41(4,"ion-label")(5,"p",15),P.nrm(6,"core-format-text",16),P.k0s(),P.DNE(7,AddonNotificationsNotificationPage_div_23_p_7_Template,4,4,"p",14),P.k0s()(),P.j41(8,"ion-item",17)(9,"ion-label"),P.nrm(10,"core-format-text",18),P.nI1(11,"coreCreateLinks"),P.k0s()()()),2&t){const t=P.XpG();P.R7$(2),P.Y8G("ngIf",t.notification.useridfrom>0),P.R7$(),P.Y8G("ngIf",t.notification.useridfrom<=0),P.R7$(3),P.Y8G("text",t.notification.subject)("contextInstanceId",0)("wsNotFiltered",!0),P.R7$(),P.Y8G("ngIf",t.notification.timecreated>0),P.R7$(3),P.Y8G("text",P.bMT(11,8,t.notification.mobiletext))("contextInstanceId",0)}}function AddonNotificationsNotificationPage_div_24_ion_button_2_Template(t,i){if(1&t){const t=P.RV6();P.j41(0,"ion-button",34),P.bIt("click",(function AddonNotificationsNotificationPage_div_24_ion_button_2_Template_ion_button_click_0_listener(){const i=P.eBV(t).$implicit;return P.Njj(i.action(i.sites[0]))})),P.nrm(1,"ion-icon",35),P.EFF(2),P.nI1(3,"translate"),P.k0s()}if(2&t){const t=i.$implicit;P.R7$(),P.FS9("name",t.icon),P.R7$(),P.SpI(" ",P.bMT(3,2,t.message)," ")}}function AddonNotificationsNotificationPage_div_24_Template(t,i){if(1&t&&(P.j41(0,"div",31)(1,"div",32),P.DNE(2,AddonNotificationsNotificationPage_div_24_ion_button_2_Template,4,4,"ion-button",33),P.k0s()()),2&t){const t=P.XpG();P.R7$(2),P.Y8G("ngForOf",t.actions)}}let G=(()=>{var t;class AddonNotificationsNotificationPage{constructor(){this.loaded=!1,this.actions=[]}ngOnInit(){var t=this;return(0,n.A)((function*(){let i;try{i=yield t.getNotification()}catch(t){return m.CoreAlerts.showError(t),l.CoreNavigator.back(),void 0}if("mobiletext"in i)t.notification=i;else if("fullmessage"in i){const o=yield r.AddonNotifications.formatNotificationsData([i]);t.notification=o[0]}else t.notification=yield r.AddonNotifications.convertPushToMessage(i);yield t.loadActions(t.notification),c.AddonNotificationsHelper.markNotificationAsRead(t.notification),t.loaded=!0,i.id&&_.OF.logEvent({type:_.qr.VIEW_ITEM,ws:"core_message_get_messages",name:u.HT.instant("addon.notifications.notifications"),data:{id:i.id,category:"notifications"},url:`/message/output/popup/notifications.php?notificationid=${i.id}&offset=0`})}))()}getNotification(){var t=this;return(0,n.A)((function*(){var i,o;const n=l.CoreNavigator.getRouteParam("notification"),e=null!==(i=l.CoreNavigator.getRouteNumberParam("id"))&&void 0!==i?i:n&&"savedmessageid"in n?Number(n.savedmessageid):void 0,a=null!==(o=e?yield t.getNotificationById(e):void 0)&&void 0!==o?o:n;if(!a)throw new s.CoreError("Required param 'notification' not found.");return a}))()}getNotificationById(t){var i=this;return(0,n.A)((function*(){var o;const n=d.u.getOrCreateSource(p.CoreSites.getRequiredCurrentSite().isVersionGreaterEqualThan("4.0")?a.w:e.l,[]);yield n.waitForLoaded();const r=null===(o=n.getItems())||void 0===o?void 0:o.find((({id:i})=>i===t));if(r)return i.loadNotifications(n),r}))()}loadNotifications(t){var i=this;return(0,n.A)((function*(){i.notifications=new AddonNotificationSwipeItemsManager(t),yield i.notifications.start()}))()}loadActions(t){var i=this;return(0,n.A)((function*(){var o;if(!(t.contexturl||t.customdata&&t.customdata.appurl))return;let n=[];i.actionsData=t.customdata,i.contextUrl=t.contexturl||void 0,i.courseId="courseid"in t?t.courseid:void 0,null!==(o=i.actionsData)&&void 0!==o&&o.appurl&&(n=yield g.CoreContentLinksDelegate.getActionsFor(i.actionsData.appurl,i.courseId,void 0,i.actionsData)),!n.length&&i.contextUrl&&(n=yield g.CoreContentLinksDelegate.getActionsFor(i.contextUrl,i.courseId,void 0,i.actionsData)),n.length||n.push({message:"core.view",icon:"fas-eye",action:t=>i.openInBrowser(t)}),i.actions=n}))()}openInBrowser(t){var i=this;return(0,n.A)((function*(){var o;const n=(null===(o=i.actionsData)||void 0===o?void 0:o.appurl)||i.contextUrl;if(!n)return;(yield p.CoreSites.getSite(t)).openInBrowserWithAutoLogin(n)}))()}ngOnDestroy(){var t;null===(t=this.notifications)||void 0===t||t.destroy()}}return(t=AddonNotificationsNotificationPage).ɵfac=function AddonNotificationsNotificationPage_Factory(i){return new(i||t)},t.ɵcmp=P.VBU({type:t,selectors:[["page-addon-notifications-notification"]],standalone:!0,features:[P.aNF],decls:25,vars:14,consts:[["slot","start"],[3,"text"],[3,"core-swipe-navigation"],["placeholderType","free",3,"hideUntil"],["loading-placeholder","",1,"ion-padding","list-item-limited-width"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","100%","height","80px",3,"animated"],["class","list-item-limited-width",4,"ngIf"],["collapsible-footer","","appearOnBottom","","slot","fixed",4,"ngIf"],[1,"list-item-limited-width"],["lines","full",1,"ion-text-wrap","core-notification-title"],["slot","start",3,"userId","profileUrl","fullname",4,"ngIf"],[4,"ngIf"],[1,"item-heading"],["contextLevel","system",3,"text","contextInstanceId","wsNotFiltered"],[1,"ion-text-wrap","core-notification-body"],["contextLevel","system",3,"text","contextInstanceId"],["slot","start",3,"userId","profileUrl","fullname"],["class","core-avatar-extra-img",4,"ngIf"],[1,"core-avatar-extra-img"],["alt","","role","presentation","core-external-content","",3,"url"],["class","core-notification-img","core-external-content","","alt","","role","presentation","slot","start",3,"url",4,"ngIf"],["class","core-notification-icon","slot","start",4,"ngIf"],["core-external-content","","alt","","role","presentation","slot","start",1,"core-notification-img",3,"url"],["slot","start",1,"core-notification-icon"],["core-external-content","","alt","","role","presentation",3,"url",4,"ngIf"],["name","fas-bell","aria-hidden","true",4,"ngIf"],["core-external-content","","alt","","role","presentation",3,"url"],["name","fas-bell","aria-hidden","true"],["collapsible-footer","","appearOnBottom","","slot","fixed"],[1,"list-item-limited-width","adaptable-buttons-row"],["expand","block",3,"click",4,"ngFor","ngForOf"],["expand","block",3,"click"],["slot","start","aria-hidden","true",3,"name"]],template:function AddonNotificationsNotificationPage_Template(t,i){1&t&&(P.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),P.nrm(3,"ion-back-button",1),P.nI1(4,"translate"),P.k0s(),P.j41(5,"ion-title")(6,"h1"),P.EFF(7),P.nI1(8,"translate"),P.k0s()()()(),P.j41(9,"ion-content",2)(10,"core-loading",3)(11,"ion-list",4)(12,"ion-item")(13,"ion-avatar",0),P.nrm(14,"ion-skeleton-text",5),P.k0s(),P.j41(15,"ion-label")(16,"h3"),P.nrm(17,"ion-skeleton-text",6),P.k0s(),P.j41(18,"p"),P.nrm(19,"ion-skeleton-text",7),P.k0s()()(),P.j41(20,"ion-item")(21,"ion-label"),P.nrm(22,"ion-skeleton-text",8),P.k0s()()(),P.DNE(23,AddonNotificationsNotificationPage_div_23_Template,12,10,"div",9)(24,AddonNotificationsNotificationPage_div_24_Template,3,1,"div",10),P.k0s()()),2&t&&(P.R7$(3),P.Y8G("text",P.bMT(4,10,"core.back")),P.R7$(4),P.JRh(P.bMT(8,12,"addon.notifications.notifications")),P.R7$(2),P.Y8G("core-swipe-navigation",i.notifications),P.R7$(),P.Y8G("hideUntil",i.loaded),P.R7$(4),P.Y8G("animated",!0),P.R7$(3),P.Y8G("animated",!0),P.R7$(2),P.Y8G("animated",!0),P.R7$(3),P.Y8G("animated",!0),P.R7$(),P.Y8G("ngIf",i.notification),P.R7$(),P.Y8G("ngIf",i.loaded&&i.actions&&i.actions.length>0))},dependencies:[v.n,h.Sq,h.bT,x.mC,x.Jm,x.QW,x.W9,x.eU,x.iq,x.uz,x.he,x.nf,x.ds,x.BC,x.ai,x.el,C.R,N.T,M.l,O.t,b.B,I.n,y.i,A.i,k.T,w.D9,T.R,R.A],styles:["[_nghost-%COMP%]{--icon-size: 32px;--extra-icon-size: 12px}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]     core-user-avatar{--core-avatar-size: var(--icon-size)}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]     core-user-avatar .core-avatar-extra-img{margin:0!important;position:absolute;right:-4px;bottom:-4px;--module-icon-padding: .2rem}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]     core-user-avatar .core-avatar-extra-img{background:var(--background-color);border-radius:var(--mdl-shape-borderRadius-sm)}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]     core-user-avatar .core-avatar-extra-img img{max-width:var(--extra-icon-size);max-height:var(--extra-icon-size);width:var(--extra-icon-size);height:var(--extra-icon-size);display:block}[_nghost-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]{max-width:var(--icon-size);max-height:var(--icon-size);padding:0;background:var(--background-color);border-radius:var(--core-avatar-radius);margin-inline-start:0px;margin-inline-end:8px;margin-top:6px;margin-bottom:6px}[_nghost-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);padding:4px}[_nghost-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--icon-size)}[_nghost-%COMP%]   .core-notification-img[_ngcontent-%COMP%]{margin-inline-start:0px;margin-inline-end:8px;margin-top:6px;margin-bottom:6px;width:var(--icon-size);height:var(--icon-size);object-fit:cover;border-radius:var(--core-avatar-radius)}","[_nghost-%COMP%]{--icon-size: 44px;--extra-icon-size: 16px}[_nghost-%COMP%]   .core-notification-title[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{align-self:start;margin-top:16px}[_nghost-%COMP%]   .core-notification-title[_ngcontent-%COMP%]   p.item-heading[_ngcontent-%COMP%]{font:var(--mdl-typography-body-font-lg)}[_nghost-%COMP%]   .core-notification-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font:var(--mdl-typography-body-font-sm)}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]{font-size:var(--text-size)}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .forumpost{border:1px solid var(--gray-200);width:100%;margin:0 0 1em}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .forumpost td{padding:10px}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .forumpost .header{background-color:var(--light)}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .forumpost .header .picture{width:48px;text-align:center;padding-inline-start:4px;padding-inline-end:0px;padding-top:8px}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .forumpost .header .picture img{width:44px!important}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .forumpost .subject{font-weight:700;margin-bottom:1rem}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     a{text-decoration:none}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .userpicture{border-radius:50%}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .mdl-right{text-align:end}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .mdl-right a{display:none}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .mdl-right font{font-size:.9em}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .commands{display:none}[_nghost-%COMP%]   .core-notification-body[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     hr{margin-top:1.5rem;margin-bottom:1.5rem;background-color:var(--gray-200)}"]}),AddonNotificationsNotificationPage})();class AddonNotificationSwipeItemsManager extends f.Z{getSelectedItemPathFromRoute(t){return l.CoreNavigator.getRouteParams(t).id}}}}]);