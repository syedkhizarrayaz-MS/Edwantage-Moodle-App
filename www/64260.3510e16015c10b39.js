"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[64260],{64260:(e,n,t)=>{t.r(n),t.d(n,{CoreRemindersSetReminderMenuComponent:()=>C});var i=t(10467),o=t(21604),r=t(24813),a=t(53794),m=t(79555),s=t(86654),l=t(43959),u=t(54438),c=t(60177),d=t(2910),_=t(86198),p=t(88246),R=t(73955);function CoreRemindersSetReminderMenuComponent_ng_container_8_ion_item_1_ion_icon_4_Template(e,n){1&e&&u.nrm(0,"ion-icon",6)}function CoreRemindersSetReminderMenuComponent_ng_container_8_ion_item_1_Template(e,n){if(1&e){const e=u.RV6();u.j41(0,"ion-item",1),u.bIt("click",(function CoreRemindersSetReminderMenuComponent_ng_container_8_ion_item_1_Template_ion_item_click_0_listener(){u.eBV(e);const n=u.XpG().$implicit,t=u.XpG();return u.Njj(t.setReminder(n.radioValue))})),u.j41(1,"ion-label")(2,"p",2),u.EFF(3),u.k0s()(),u.DNE(4,CoreRemindersSetReminderMenuComponent_ng_container_8_ion_item_1_ion_icon_4_Template,1,0,"ion-icon",3),u.k0s()}if(2&e){const e=u.XpG().$implicit,n=u.XpG();u.Y8G("detail",!1),u.BMQ("aria-selected",n.currentValue===e.radioValue),u.R7$(3),u.JRh(e.label),u.R7$(),u.Y8G("ngIf",n.currentValue===e.radioValue)}}function CoreRemindersSetReminderMenuComponent_ng_container_8_Template(e,n){if(1&e&&(u.qex(0),u.DNE(1,CoreRemindersSetReminderMenuComponent_ng_container_8_ion_item_1_Template,5,4,"ion-item",5),u.bVm()),2&e){const e=n.$implicit;u.R7$(),u.Y8G("ngIf",e.enabled)}}function CoreRemindersSetReminderMenuComponent_ion_icon_16_Template(e,n){1&e&&u.nrm(0,"ion-icon",6)}function CoreRemindersSetReminderMenuComponent_ion_item_17_ion_icon_5_Template(e,n){1&e&&u.nrm(0,"ion-icon",6)}function CoreRemindersSetReminderMenuComponent_ion_item_17_Template(e,n){if(1&e){const e=u.RV6();u.j41(0,"ion-item",7),u.bIt("click",(function CoreRemindersSetReminderMenuComponent_ion_item_17_Template_ion_item_click_0_listener(){u.eBV(e);const n=u.XpG();return u.Njj(n.disableReminder())})),u.j41(1,"ion-label")(2,"p",2),u.EFF(3),u.nI1(4,"translate"),u.k0s()(),u.DNE(5,CoreRemindersSetReminderMenuComponent_ion_item_17_ion_icon_5_Template,1,0,"ion-icon",3),u.k0s()}if(2&e){const e=u.XpG();u.Y8G("detail",!1),u.BMQ("aria-selected","disabled"===e.currentValue),u.R7$(3),u.JRh(u.bMT(4,4,e.noReminderLabel)),u.R7$(2),u.Y8G("ngIf","disabled"===e.currentValue)}}let C=(()=>{var e;class CoreRemindersSetReminderMenuComponent{constructor(){this.noReminderLabel="",this.currentValue="0m",this.customLabel="",this.customValue=10,this.customUnits=l._6.MINUTE,this.presetOptions=[{radioValue:"0m",value:0,unit:l._6.MINUTE,label:"",enabled:!0},{radioValue:"1h",value:1,unit:l._6.HOUR,label:"",enabled:!0},{radioValue:"12h",value:12,unit:l._6.HOUR,label:"",enabled:!0},{radioValue:"1d",value:1,unit:l._6.DAY,label:"",enabled:!0}]}ngOnInit(){var e=this;return(0,i.A)((function*(){e.presetOptions.forEach((n=>{n.label=o.CoreReminders.getUnitValueLabel(n.value,n.unit),n.enabled=e.isValidTime(n.unit,n.value)}));const n=o.CoreRemindersService.convertSecondsToValueAndUnit(e.initialValue);if(n.value===l.Nc)return e.currentValue="disabled",void 0;const t=e.presetOptions.find((e=>e.value===(null==n?void 0:n.value)&&e.unit===n.unit));t?e.currentValue=t.radioValue:(e.currentValue="custom",e.customValue=n.value,e.customUnits=n.unit,e.customLabel=o.CoreReminders.getUnitValueLabel(e.customValue,e.customUnits))}))()}setReminder(e){const n=this.presetOptions.find((n=>n.radioValue===e));if(!n)return m.IE.dismiss(),void 0;m.IE.dismiss({timeBefore:n.unit*n.value})}disableReminder(){m.IE.dismiss({timeBefore:void 0})}isValidTime(e,n){if(!this.eventTime)return!0;return 1e3*(this.eventTime-e*n)>Date.now()}setCustom(e){var n=this;return(0,i.A)((function*(){e.stopPropagation(),e.preventDefault();const{CoreRemindersSetReminderCustomComponent:i}=yield t.e(42492).then(t.bind(t,42492)),s=yield r.CorePopovers.open({component:i,componentProps:{customValue:n.customValue,customUnits:n.customUnits},waitForDismissCompleted:!0});void 0!==s&&(n.currentValue="custom",n.customValue=s.value,n.customUnits=s.unit,n.customLabel=o.CoreReminders.getUnitValueLabel(n.customValue,n.customUnits),yield a.H.nextTick(),m.IE.dismiss({timeBefore:Math.abs(n.customValue)*n.customUnits}))}))()}}return(e=CoreRemindersSetReminderMenuComponent).ɵfac=function CoreRemindersSetReminderMenuComponent_Factory(n){return new(n||e)},e.ɵcmp=u.VBU({type:e,selectors:[["ng-component"]],inputs:{initialValue:"initialValue",eventTime:"eventTime",noReminderLabel:"noReminderLabel"},standalone:!0,features:[u.aNF],decls:18,vars:12,consts:[[4,"ngFor","ngForOf"],["button","",1,"ion-text-wrap",3,"click","detail"],[1,"item-heading"],["name","fas-check","slot","end","aria-hidden","true",4,"ngIf"],["button","","class","ion-text-wrap text-danger border-top",3,"detail","click",4,"ngIf"],["button","","class","ion-text-wrap",3,"detail","click",4,"ngIf"],["name","fas-check","slot","end","aria-hidden","true"],["button","",1,"ion-text-wrap","text-danger","border-top",3,"click","detail"]],template:function CoreRemindersSetReminderMenuComponent_Template(e,n){1&e&&(u.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title")(3,"h1"),u.EFF(4),u.nI1(5,"translate"),u.k0s()()()(),u.j41(6,"ion-content")(7,"ion-content"),u.DNE(8,CoreRemindersSetReminderMenuComponent_ng_container_8_Template,2,1,"ng-container",0),u.j41(9,"ion-item",1),u.bIt("click",(function CoreRemindersSetReminderMenuComponent_Template_ion_item_click_9_listener(e){return n.setCustom(e)})),u.j41(10,"ion-label")(11,"p",2),u.EFF(12),u.nI1(13,"translate"),u.k0s(),u.j41(14,"p"),u.EFF(15),u.k0s()(),u.DNE(16,CoreRemindersSetReminderMenuComponent_ion_icon_16_Template,1,0,"ion-icon",3),u.k0s(),u.DNE(17,CoreRemindersSetReminderMenuComponent_ion_item_17_Template,6,6,"ion-item",4),u.k0s()()),2&e&&(u.R7$(4),u.JRh(u.bMT(5,8,"core.reminders.setareminder")),u.R7$(4),u.Y8G("ngForOf",n.presetOptions),u.R7$(),u.Y8G("detail",!1),u.BMQ("aria-selected","custom"===n.currentValue),u.R7$(3),u.JRh(u.bMT(13,10,"core.reminders.custom")),u.R7$(3),u.JRh(n.customLabel),u.R7$(),u.Y8G("ngIf","custom"===n.currentValue),u.R7$(),u.Y8G("ngIf",n.noReminderLabel))},dependencies:[s.n,c.Sq,c.bT,d.W9,d.eU,d.iq,d.uz,d.he,d.BC,d.ai,_.t,p.i,R.D9],styles:["ion-item.border-top[_ngcontent-%COMP%]{border-top:1px solid var(--stroke)}"]}),CoreRemindersSetReminderMenuComponent})()}}]);