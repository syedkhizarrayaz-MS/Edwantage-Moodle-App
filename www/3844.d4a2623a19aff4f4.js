"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3844],{3844:(e,n,t)=>{t.r(n),t.d(n,{default:()=>K});var o=t(10467),i=t(94455),r=t(85190),a=t(52749),l=t(81690),s=t(82461),g=t(75629),c=t(74431),_=t(79555),m=t(8014),d=t(15324),u=t(85850),p=t(49588),C=t(63153),f=t(51092),h=t(21776),P=t(83804),S=t(99622),M=t(18022),O=t(246),b=t(54438);let v=(()=>{var e;class CoreReferrerService{consumeInstallReferrerUrl(){return(0,o.A)((function*(){const e=O.b.plugin("installReferrer");if(!e)return;if(!(yield r.CoreConfig.get(CoreReferrerService.INSTALL_REFERRER_CONSUMED,0)))try{var n;const t=(null!==(n=(yield e.getReferrer()).referrer)&&void 0!==n?n:"").match(/siteurl=([^&]+)/);return null==t?void 0:t[1]}catch{}finally{yield r.CoreConfig.set(CoreReferrerService.INSTALL_REFERRER_CONSUMED,1)}}))()}}return(e=CoreReferrerService).INSTALL_REFERRER_CONSUMED="install_referrer_consumed",e.ɵfac=function CoreReferrerService_Factory(n){return new(n||e)},e.ɵprov=b.jDH({token:e,factory:e.ɵfac,providedIn:"root"}),CoreReferrerService})();const y=(0,_.Qd)(v);var L=t(30454),R=t(84129),x=t(44426),T=t(93589),I=t(68831),k=t(33014),w=t(55554),E=t(85505),F=t(25572),U=t(86654),G=t(54843),$=t(89417),N=t(21626),j=t(60177),A=t(2910),Y=t(69901),D=t(10892),H=t(86198),V=t(88246),X=t(43570),B=t(73955);const Q=["siteFormEl"],_c1=e=>({$a:e}),_c2=e=>({site:e});function CoreLoginSitePage_form_11_ng_container_2_Template(e,n){if(1&e&&(b.qex(0),b.j41(1,"ion-item",9),b.nrm(2,"ion-input",10),b.nI1(3,"translate"),b.nI1(4,"translate"),b.k0s(),b.bVm()),2&e){const e=b.XpG(2);b.R7$(2),b.FS9("placeholder",b.bMT(3,4,"Enter Your Customer Key")),b.Y8G("core-auto-focus",e.showKeyboard&&!e.showScanQR)("label",b.bMT(4,6,"Your Customer Key"))("clearInput",!0)}}function CoreLoginSitePage_form_11_ng_container_3_ion_item_11_Template(e,n){if(1&e){const e=b.RV6();b.j41(0,"ion-item",20),b.nI1(1,"translate"),b.bIt("click",(function CoreLoginSitePage_form_11_ng_container_3_ion_item_11_Template_ion_item_click_0_listener(n){b.eBV(e);const t=b.XpG(3);return b.Njj(t.connect(t.enteredSiteUrl.url,n))})),b.j41(2,"ion-thumbnail",21),b.nrm(3,"ion-icon",22),b.k0s(),b.j41(4,"ion-label")(5,"h2",23),b.EFF(6),b.nI1(7,"translate"),b.k0s(),b.j41(8,"p"),b.EFF(9),b.k0s()()()}if(2&e){const e=b.XpG(3);b.Y8G("detail",!0),b.BMQ("aria-label",b.bMT(1,4,"core.login.connect")),b.R7$(6),b.JRh(b.bMT(7,6,"core.login.yourenteredsite")),b.R7$(3),b.JRh(e.enteredSiteUrl.noProtocolUrl)}}function CoreLoginSitePage_form_11_ng_container_3_div_13_Template(e,n){1&e&&(b.j41(0,"div",24),b.nrm(1,"ion-spinner"),b.nI1(2,"translate"),b.k0s()),2&e&&(b.R7$(),b.BMQ("aria-label",b.bMT(2,1,"core.loading")))}function CoreLoginSitePage_form_11_ng_container_3_ng_container_14_ng_container_1_Template(e,n){1&e&&b.eu8(0)}function CoreLoginSitePage_form_11_ng_container_3_ng_container_14_Template(e,n){if(1&e&&(b.qex(0),b.DNE(1,CoreLoginSitePage_form_11_ng_container_3_ng_container_14_ng_container_1_Template,1,0,"ng-container",25),b.bVm()),2&e){const e=n.$implicit;b.XpG(3);const t=b.sdS(14);b.R7$(),b.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",b.eq3(2,_c2,e))}}function CoreLoginSitePage_form_11_ng_container_3_div_15_Template(e,n){1&e&&(b.j41(0,"div",26),b.nrm(1,"ion-spinner"),b.nI1(2,"translate"),b.k0s()),2&e&&(b.R7$(),b.BMQ("aria-label",b.bMT(2,1,"core.loading")))}function CoreLoginSitePage_form_11_ng_container_3_Template(e,n){if(1&e){const e=b.RV6();b.qex(0),b.j41(1,"ion-item",9)(2,"ion-input",11),b.nI1(3,"translate"),b.nI1(4,"translate"),b.bIt("ionInput",(function CoreLoginSitePage_form_11_ng_container_3_Template_ion_input_ionInput_2_listener(n){b.eBV(e);const t=b.XpG(2);return b.Njj(t.searchSite(n,t.siteForm.value.siteUrl))})),b.k0s()(),b.j41(5,"ion-list",12)(6,"ion-item",13)(7,"ion-label")(8,"h2",14),b.EFF(9),b.nI1(10,"translate"),b.k0s()()(),b.DNE(11,CoreLoginSitePage_form_11_ng_container_3_ion_item_11_Template,10,8,"ion-item",15),b.j41(12,"div",16),b.DNE(13,CoreLoginSitePage_form_11_ng_container_3_div_13_Template,3,3,"div",17)(14,CoreLoginSitePage_form_11_ng_container_3_ng_container_14_Template,2,4,"ng-container",18),b.k0s()(),b.DNE(15,CoreLoginSitePage_form_11_ng_container_3_div_15_Template,3,3,"div",19),b.bVm()}if(2&e){const e=b.XpG(2);b.R7$(2),b.FS9("placeholder",b.bMT(3,15,"Enter Your Customer Key")),b.Y8G("core-auto-focus",e.showKeyboard&&!e.showScanQR)("label",b.bMT(4,17,"Your Customer Key"))("clearInput",!0),b.R7$(3),b.AVh("hidden",!e.hasSites&&!e.enteredSiteUrl),b.R7$(4),b.JRh(b.bMT(10,19,"core.login.selectsite")),b.R7$(2),b.Y8G("ngIf",e.enteredSiteUrl),b.R7$(),b.AVh("hidden",!e.hasSites)("dimmed",e.loadingSites),b.R7$(),b.Y8G("ngIf",e.loadingSites),b.R7$(),b.Y8G("ngForOf",e.sites),b.R7$(),b.Y8G("ngIf",!e.hasSites&&e.loadingSites)}}function CoreLoginSitePage_form_11_ion_item_4_Template(e,n){if(1&e&&(b.j41(0,"ion-item")(1,"ion-label")(2,"ion-button",27),b.EFF(3),b.nI1(4,"translate"),b.k0s()()()),2&e){const e=b.XpG(2);b.R7$(2),b.Y8G("disabled",!e.siteForm.valid),b.R7$(),b.SpI(" ",b.bMT(4,2,"core.login.connect")," ")}}function CoreLoginSitePage_form_11_Template(e,n){if(1&e){const e=b.RV6();b.j41(0,"form",8,1),b.bIt("ngSubmit",(function CoreLoginSitePage_form_11_Template_form_ngSubmit_0_listener(n){b.eBV(e);const t=b.XpG();return b.Njj(t.connect(t.siteForm.value.siteUrl,n))})),b.DNE(2,CoreLoginSitePage_form_11_ng_container_2_Template,5,8,"ng-container",7)(3,CoreLoginSitePage_form_11_ng_container_3_Template,16,21,"ng-container",7)(4,CoreLoginSitePage_form_11_ion_item_4_Template,5,4,"ion-item",7),b.k0s()}if(2&e){const e=b.XpG();b.Y8G("formGroup",e.siteForm),b.R7$(2),b.Y8G("ngIf","url"===e.siteSelector),b.R7$(),b.Y8G("ngIf","url"!==e.siteSelector),b.R7$(),b.Y8G("ngIf","url"===e.siteSelector)}}function CoreLoginSitePage_ng_container_12_ion_list_1_ion_searchbar_6_Template(e,n){if(1&e){const e=b.RV6();b.j41(0,"ion-searchbar",29),b.nI1(1,"translate"),b.mxI("ngModelChange",(function CoreLoginSitePage_ng_container_12_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ngModelChange_0_listener(n){b.eBV(e);const t=b.XpG(3);return b.DH7(t.filter,n)||(t.filter=n),b.Njj(n)})),b.bIt("ionInput",(function CoreLoginSitePage_ng_container_12_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ionInput_0_listener(n){b.eBV(e);const t=b.XpG(3);return b.Njj(t.filterChanged(n))}))("ionCancel",(function CoreLoginSitePage_ng_container_12_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ionCancel_0_listener(){b.eBV(e);const n=b.XpG(3);return b.Njj(n.filterChanged())})),b.k0s()}if(2&e){const e=b.XpG(3);b.R50("ngModel",e.filter),b.Y8G("placeholder",b.bMT(1,2,"core.login.findyoursite"))}}function CoreLoginSitePage_ng_container_12_ion_list_1_ng_container_7_ng_container_1_Template(e,n){1&e&&b.eu8(0)}function CoreLoginSitePage_ng_container_12_ion_list_1_ng_container_7_Template(e,n){if(1&e&&(b.qex(0),b.DNE(1,CoreLoginSitePage_ng_container_12_ion_list_1_ng_container_7_ng_container_1_Template,1,0,"ng-container",25),b.bVm()),2&e){const e=n.$implicit;b.XpG(3);const t=b.sdS(14);b.R7$(),b.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",b.eq3(2,_c2,e))}}function CoreLoginSitePage_ng_container_12_ion_list_1_Template(e,n){if(1&e&&(b.j41(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"h2",14),b.EFF(4),b.nI1(5,"translate"),b.k0s()()(),b.DNE(6,CoreLoginSitePage_ng_container_12_ion_list_1_ion_searchbar_6_Template,2,4,"ion-searchbar",28)(7,CoreLoginSitePage_ng_container_12_ion_list_1_ng_container_7_Template,2,4,"ng-container",18),b.k0s()),2&e){const e=b.XpG(2);b.R7$(4),b.JRh(b.bMT(5,3,"core.login.selectsite")),b.R7$(2),b.Y8G("ngIf",e.fixedSites.length>4),b.R7$(),b.Y8G("ngForOf",e.filteredSites)}}function CoreLoginSitePage_ng_container_12_Template(e,n){if(1&e&&(b.qex(0),b.DNE(1,CoreLoginSitePage_ng_container_12_ion_list_1_Template,8,5,"ion-list",7),b.bVm()),2&e){const e=b.XpG();b.R7$(),b.Y8G("ngIf","list"===e.siteSelector)}}function CoreLoginSitePage_ng_template_13_ion_thumbnail_1_img_1_Template(e,n){if(1&e&&b.nrm(0,"img",36),2&e){const e=b.XpG(2).site;b.Y8G("url",e.imageurl)}}function CoreLoginSitePage_ng_template_13_ion_thumbnail_1_img_2_Template(e,n){1&e&&b.nrm(0,"img",37)}function CoreLoginSitePage_ng_template_13_ion_thumbnail_1_Template(e,n){if(1&e&&(b.j41(0,"ion-thumbnail",33),b.DNE(1,CoreLoginSitePage_ng_template_13_ion_thumbnail_1_img_1_Template,1,1,"img",34)(2,CoreLoginSitePage_ng_template_13_ion_thumbnail_1_img_2_Template,1,0,"img",35),b.k0s()),2&e){const e=b.XpG().site;b.R7$(),b.Y8G("ngIf",e.imageurl),b.R7$(),b.Y8G("ngIf",!e.imageurl)}}function CoreLoginSitePage_ng_template_13_p_3_Template(e,n){if(1&e&&(b.j41(0,"p",38),b.EFF(1),b.k0s()),2&e){const e=b.XpG().site;b.R7$(),b.JRh(e.title)}}function CoreLoginSitePage_ng_template_13_p_4_Template(e,n){if(1&e&&(b.j41(0,"p"),b.EFF(1),b.k0s()),2&e){const e=b.XpG().site;b.R7$(),b.JRh(e.noProtocolUrl)}}function CoreLoginSitePage_ng_template_13_p_5_Template(e,n){if(1&e&&(b.j41(0,"p"),b.EFF(1),b.k0s()),2&e){const e=b.XpG().site;b.R7$(),b.JRh(e.location)}}function CoreLoginSitePage_ng_template_13_Template(e,n){if(1&e){const e=b.RV6();b.j41(0,"ion-item",30),b.bIt("click",(function CoreLoginSitePage_ng_template_13_Template_ion_item_click_0_listener(n){const t=b.eBV(e).site,o=b.XpG();return b.Njj(o.connect(t.url,n))})),b.DNE(1,CoreLoginSitePage_ng_template_13_ion_thumbnail_1_Template,3,2,"ion-thumbnail",31),b.j41(2,"ion-label"),b.DNE(3,CoreLoginSitePage_ng_template_13_p_3_Template,2,1,"p",32)(4,CoreLoginSitePage_ng_template_13_p_4_Template,2,1,"p",7)(5,CoreLoginSitePage_ng_template_13_p_5_Template,2,1,"p",7),b.k0s()()}if(2&e){const e=n.site,t=b.XpG();b.Y8G("ngClass",e.className)("detail",!0),b.BMQ("aria-label",e.name),b.R7$(),b.Y8G("ngIf",t.siteFinderSettings.displayimage),b.R7$(2),b.Y8G("ngIf",e.title),b.R7$(),b.Y8G("ngIf",t.displaySiteUrl(e.url)),b.R7$(),b.Y8G("ngIf",e.location)}}let K=(()=>{var e;class CoreLoginSitePage{constructor(e,n){this.formBuilder=e,this.http=n,this.siteSelector="sitefinder",this.showKeyboard=!1,this.filter="",this.sites=[],this.hasSites=!1,this.loadingSites=!1,this.appName=c.CoreConstants.CONFIG.appname}ngOnInit(){var e=this;return(0,o.A)((function*(){let n="";e.siteSelector=c.CoreConstants.CONFIG.multisitesdisplay;e.siteFinderSettings={displaysitename:!0,displayimage:!0,displayalias:!0,displaycity:!0,displaycountry:!0,displayurl:!0,...c.CoreConstants.CONFIG.sitefindersettings||{}};if((yield s.CoreLoginHelper.getAvailableSites()).length)n=yield e.initSiteSelector();else{var t;const n=null!==(t=yield e.consumeInstallReferrerUrl())&&void 0!==t?t:"",o=c.CoreConstants.CONFIG.enableonboarding&&!M.CorePlatform.isIOS();n?(e.connect(n),o&&r.CoreConfig.set(R.n5,1)):o&&e.initOnboarding()}e.showScanQR=s.CoreLoginHelper.displayQRInSiteScreen(),e.siteForm=e.formBuilder.group({siteUrl:[n,e.customerKeyValidator()]}),e.searchFunction=l.j.debounce(function(){var n=(0,o.A)((function*(n){if((n=n.trim()).length>=3){const t=yield a.CoreSites.findSites(n);e.sites=e.extendCoreLoginSiteInfo(t),e.hasSites=!!e.sites.length}else e.hasSites=!1;e.loadingSites=!1}));return function(e){return n.apply(this,arguments)}}(),1e3),e.showKeyboard=!!d.CoreNavigator.getRouteBooleanParam("showKeyboard")}))()}customerKeyValidator(){return e=>{const n=e.value.trim();return n.length>=20&&/^[A-Z0-9]+$/.test(n)?null:{invalidKey:!0}}}getUrlFromKey(e){var n=this;return(0,o.A)((function*(){try{const t=yield(0,G._)(n.http.get("https://dev.meteoricsolutions.com/KeyUrlMapBackend/geturl.php",{params:{key:e.toUpperCase()}}));if(t.success&&t.url)return t.url;throw new g.CoreError(t.message||"core.login.invalidcustomerkey")}catch(e){if(e instanceof g.CoreError)throw e;throw new g.CoreError("core.networkerrormsg")}}))()}initSiteSelector(){var e=this;return(0,o.A)((function*(){const n=yield s.CoreLoginHelper.getAvailableSites();return e.fixedSites=e.extendCoreLoginSiteInfo(n),e.siteSelector="list",e.fixedSites.some((e=>!!e.imageurl))||(e.siteFinderSettings.displayimage=!1),e.filteredSites=e.fixedSites,e.fixedSites[0].url}))()}consumeInstallReferrerUrl(){return(0,o.A)((function*(){const e=yield w.g.ignoreErrors(w.g.timeoutPromise(y.consumeInstallReferrerUrl(),1e3));if(!e)return;return(yield w.g.ignoreErrors(a.CoreSites.getSites(),[])).length>0?void 0:e}))()}initOnboarding(){var e=this;return(0,o.A)((function*(){(yield r.CoreConfig.get(R.n5,!1))||e.showOnboarding()}))()}extendCoreLoginSiteInfo(e){return e.map((e=>{e.noProtocolUrl=this.siteFinderSettings.displayurl&&e.url?m.F.removeUrlParts(e.url,"protocol"):"";const n=this.siteFinderSettings.displaysitename?e.name:"",t=this.siteFinderSettings.displayalias&&e.alias?e.alias:"";e.title=n&&t?`${n} (${t})`:n+t;const o=this.siteFinderSettings.displaycountry&&e.countrycode?E.A.getCountryName(e.countrycode):"",i=this.siteFinderSettings.displaycity&&e.city?e.city:"";return e.location=i&&o?`${i} - ${o}`:i+o,a.CoreSites.hasDefaultImage(e)&&this.siteFinderSettings.defaultimageurl&&(e.imageurl=this.siteFinderSettings.defaultimageurl),e}))}moodleUrlValidator(){return e=>{const n=e.value.trim();let t=n.length>=3&&m.F.isValidMoodleUrl(n);if(!t){!!a.CoreSites.getDemoSiteData(n)&&(t=!0)}return t?null:{siteUrl:{value:e.value}}}}showHelp(){return(0,o.A)((function*(){const{CoreLoginSiteHelpComponent:e}=yield t.e(71470).then(t.bind(t,71470));yield T.I.openModal({component:e,cssClass:"core-modal-fullscreen"})}))()}showOnboarding(){return(0,o.A)((function*(){const{CoreLoginSiteOnboardingComponent:e}=yield t.e(9818).then(t.bind(t,9818));yield T.I.openModal({component:e,cssClass:"core-modal-fullscreen"})}))()}connect(e,n){var t=this;return(0,o.A)((function*(){if(null==n||n.preventDefault(),null==n||n.stopPropagation(),x.p.close(),!e)return F.CoreAlerts.showError(_.HT.instant("core.login.siteurlrequired")),void 0;if(!i.WE.isOnline())return F.CoreAlerts.showError(_.HT.instant("core.networkerrormsg")),void 0;const o=yield k.CoreLoadings.show();try{const n=yield t.getUrlFromKey(e.trim());if(n.match(/^(https?:\/\/)?campus\.example\.edu/))return t.showLoginIssue(n,new g.CoreError(_.HT.instant("core.login.errorexampleurl"))),void 0;const o=a.CoreSites.getDemoSiteData(n);if(o)yield t.loginDemoSite(o);else{let e;try{e=yield a.CoreSites.checkSite(n,void 0,"Site URL page")}catch(t){const o=m.F.guessMoodleDomain(n);if(!o||o==n)throw t;e=yield a.CoreSites.checkSite(o,void 0,"Site URL page")}yield t.login(e)}}catch(n){t.showLoginIssue(e,n)}finally{o.dismiss()}}))()}loginDemoSite(e){var n=this;return(0,o.A)((function*(){const t=yield k.CoreLoadings.show();try{const t=yield a.CoreSites.getUserToken(e.url,e.username,e.password);return yield a.CoreSites.newSite(t.siteUrl,t.token,t.privateToken),C.R.triggerFormSubmittedEvent(n.formElement,!0),yield d.CoreNavigator.navigateToSiteHome(),void 0}catch(n){s.CoreLoginHelper.treatUserTokenError(e.url,n,e.username,e.password),n.loggedout&&d.CoreNavigator.navigate("/login/sites",{reset:!0})}finally{t.dismiss()}}))()}login(e){var n=this;return(0,o.A)((function*(){try{yield a.CoreSites.checkApplication(e.config),C.R.triggerFormSubmittedEvent(n.formElement,!0),d.CoreNavigator.navigate("/login/credentials",{params:{siteCheck:e}})}catch{}}))()}showLoginIssue(e,n){return(0,o.A)((function*(){let t,o,i,r,a=F.CoreAlerts.getErrorMessage(n);if("core.login.invalidcustomerkey"===n.message?a=_.HT.instant("core.login.invalidcustomerkey"):"core.networkerrormsg"===n.message&&(a=_.HT.instant("core.networkerrormsg")),n instanceof f.CoreSiteError&&(r=n.supportConfig,i=r instanceof P.Q?r.getSite():void 0,t=n.debug,s.CoreLoginHelper.isAppUnsupportedError(n)))return yield s.CoreLoginHelper.showAppUnsupportedModal(e,i,t),void 0;n instanceof S.CoreLoginError&&(o=n.title),t&&(a=`<p>${a}</p><div class="core-error-accordion-container"></div>`);const l=[{text:_.HT.instant("core.tryagain"),role:"cancel"}].filter((e=>!!e)),g=yield F.CoreAlerts.show({header:null!=o?o:_.HT.instant("core.cannotconnect"),message:null!=a?a:_.HT.instant("core.sitenotfoundhelp"),buttons:l});if(t){const e=g.querySelector(".core-error-accordion-container");e&&(yield h.S.render(e,t.details,t.code))}}))()}filterChanged(e){var n;const t=null==e||null===(n=e.target.value)||void 0===n?void 0:n.trim().toLowerCase();this.filteredSites=t&&this.fixedSites?this.fixedSites.filter((e=>e.title.toLowerCase().indexOf(t)>-1||e.noProtocolUrl.toLowerCase().indexOf(t)>-1||e.location.toLowerCase().indexOf(t)>-1)):this.fixedSites}searchSite(e,n){this.loadingSites=!0,n=n.trim(),this.enteredSiteUrl=this.siteForm.valid&&n.length>=3?{url:n,name:"connect",title:"",location:"",noProtocolUrl:m.F.removeUrlParts(n,"protocol")}:void 0,this.searchFunction(n.trim())}showInstructionsAndScanQR(){var e=this;return(0,o.A)((function*(){try{yield s.CoreLoginHelper.showScanQRInstructions(),yield e.scanQR()}catch{}}))()}scanQR(){var e=this;return(0,o.A)((function*(){const n=yield I.CoreQRScan.scanQR();if(!n)return;if(u.CoreCustomURLSchemes.isCustomURL(n)){try{yield u.CoreCustomURLSchemes.handleCustomURL(n)}catch(t){t&&t.data&&t.data.isAuthenticationURL&&t.data.siteUrl?e.treatErrorInAuthenticationCustomURL(n,t):u.CoreCustomURLSchemes.treatHandleCustomURLError(t,n,"CoreLoginSitePage")}return}const t=m.F.getUrlProtocol(n);if(t&&"http"!=t&&"https"!=t)return F.CoreAlerts.showError(_.HT.instant("core.errorurlschemeinvalidscheme",{$a:n})),void 0;(yield s.CoreLoginHelper.isSiteUrlAllowed(n))?(e.siteForm.controls.siteUrl.setValue(n),e.connect(n)):F.CoreAlerts.showError(_.HT.instant("core.errorurlschemeinvalidsite"))}))()}treatErrorInAuthenticationCustomURL(e,n){var t=this;return(0,o.A)((function*(){var o;const i=(null===(o=n.data)||void 0===o?void 0:o.siteUrl)||"",r=yield k.CoreLoadings.show();t.siteForm.controls.siteUrl.setValue(i);try{const e=yield a.CoreSites.checkSite(i,void 0,"Site URL page");yield a.CoreSites.checkApplication(e.config),s.CoreLoginHelper.isSSOLoginNeeded(e.code)||(yield d.CoreNavigator.navigate("/login/credentials",{params:{siteCheck:e}}))}catch{}finally{r.dismiss()}n.error=p.CoreErrorHelper.addTextToError(n.error,`<br><br>${_.HT.instant("core.login.youcanstillconnectwithcredentials")}`),u.CoreCustomURLSchemes.treatHandleCustomURLError(n,e,"CoreLoginSitePage")}))()}openSettings(){d.CoreNavigator.navigate("/settings")}displaySiteUrl(e){return L.a.makeUnauthenticatedSite(e).shouldDisplayInformativeLinks()}}return(e=CoreLoginSitePage).ɵfac=function CoreLoginSitePage_Factory(n){return new(n||e)(b.rXU($.ok),b.rXU(N.Qq))},e.ɵcmp=b.VBU({type:e,selectors:[["page-core-login-site"]],viewQuery:function CoreLoginSitePage_Query(e,n){if(1&e&&b.GBs(Q,5),2&e){let e;b.mGM(e=b.lsd())&&(n.formElement=e.first)}},standalone:!0,features:[b.aNF],decls:15,vars:13,consts:[["sitelisting",""],["siteFormEl",""],[1,"ion-padding"],[1,"list-item-limited-width"],[1,"ion-text-center","ion-padding","ion-margin-bottom","core-login-site-logo"],["src","assets/img/login_logo.png",1,"avatar-full","login-logo",3,"alt"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["lines","inset"],["name","url","type","url","formControlName","siteUrl","labelPlacement","stacked",3,"placeholder","core-auto-focus","label","clearInput"],["name","url","formControlName","siteUrl","labelPlacement","stacked",3,"ionInput","placeholder","core-auto-focus","label","clearInput"],[1,"core-login-site-list"],[1,"core-login-site-list-title"],[1,"item-heading"],["button","","class","core-login-entered-site",3,"detail","click",4,"ngIf"],[1,"core-login-site-list-found"],["class","core-login-site-list-loading",4,"ngIf"],[4,"ngFor","ngForOf"],["class","core-login-site-nolist-loading",4,"ngIf"],["button","",1,"core-login-entered-site",3,"click","detail"],["slot","start","aria-hidden","true"],["name","fas-pen","aria-hidden","true"],[1,"ion-text-wrap"],[1,"core-login-site-list-loading"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"core-login-site-nolist-loading"],["expand","block","type","submit",1,"ion-text-wrap",3,"disabled"],[3,"ngModel","placeholder","ngModelChange","ionInput","ionCancel",4,"ngIf"],[3,"ngModelChange","ionInput","ionCancel","ngModel","placeholder"],["button","",3,"click","ngClass","detail"],["slot","start",4,"ngIf"],["class","item-heading ion-text-wrap",4,"ngIf"],["slot","start"],["core-external-content","","onError","this.src='assets/icon/icon.png'","alt","","role","presentation",3,"url",4,"ngIf"],["src","assets/icon/icon.png","class","core-login-default-icon","alt","","role","presentation",4,"ngIf"],["core-external-content","","onError","this.src='assets/icon/icon.png'","alt","","role","presentation",3,"url"],["src","assets/icon/icon.png","alt","","role","presentation",1,"core-login-default-icon"],[1,"item-heading","ion-text-wrap"]],template:function CoreLoginSitePage_Template(e,n){1&e&&(b.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title")(3,"h1"),b.EFF(4),b.nI1(5,"translate"),b.k0s()()()(),b.j41(6,"ion-content",2)(7,"div",3)(8,"div",4),b.nrm(9,"img",5),b.nI1(10,"translate"),b.k0s(),b.DNE(11,CoreLoginSitePage_form_11_Template,5,4,"form",6)(12,CoreLoginSitePage_ng_container_12_Template,2,1,"ng-container",7),b.k0s()(),b.DNE(13,CoreLoginSitePage_ng_template_13_Template,6,7,"ng-template",null,0,b.C5r)),2&e&&(b.R7$(4),b.JRh(b.bMT(5,6,"Edwantage")),b.R7$(4),b.AVh("hidden",n.hasSites||n.enteredSiteUrl),b.R7$(),b.Y8G("alt",b.i5U(10,8,"core.login.logoof",b.eq3(11,_c1,n.appName))),b.R7$(2),b.Y8G("ngIf",!n.fixedSites&&n.siteForm),b.R7$(),b.Y8G("ngIf",n.fixedSites))},dependencies:[U.n,j.YU,j.Sq,j.bT,j.T3,$.qT,$.BC,$.cb,$.vS,A.Jm,A.W9,A.eU,A.iq,A.$w,A.uz,A.he,A.nf,A.S1,A.w2,A.Zx,A.BC,A.ai,A.Gw,$.j4,$.JD,Y.i,D.l,H.t,V.i,X.T,B.D9],styles:["[_nghost-%COMP%]{--list-item-max-width: 600px}.core-login-site-connect[_ngcontent-%COMP%]{margin-top:1.4rem}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{min-width:50px;min-height:50px;width:50px;height:50px;border-radius:20%;box-shadow:0 0 4px var(--gray-200);text-align:center;overflow:hidden}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50px;max-width:fit-content;width:auto;height:auto;margin:0 auto 0 50%;transform:translate3d(-50%,0,0);object-fit:cover;object-position:50% 50%}[dir=rtl][_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate3d(50%,0,0)}[dir=rtl][_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate3d(50%,0,0)}@supports selector(:dir(rtl)){.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:dir(rtl){transform:translate3d(50%,0,0)}}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 auto;font-size:2.1875rem;height:50px}[dir=rtl][_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:0;margin-right:50%}.core-login-site-logo[_ngcontent-%COMP%], .core-login-site-list[_ngcontent-%COMP%], .core-login-site-list-found[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:all .7s ease-in-out;max-height:9999px}.core-login-site-logo.hidden[_ngcontent-%COMP%], .core-login-site-list.hidden[_ngcontent-%COMP%], .core-login-site-list-found.hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;margin-top:0;margin-bottom:0;padding:0;max-height:0;display:block!important}.core-login-site-list-found.dimmed[_ngcontent-%COMP%]{pointer-events:none;position:relative}.core-login-site-list-loading[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;display:flex;align-content:center;align-items:center;background-color:#ffffff80;z-index:1}.core-login-site-list-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto}.core-login-site-nolist-loading[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.item.core-login-site-list-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .item.core-login-site-list-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2.item-heading[_ngcontent-%COMP%]{margin-top:0}@media (min-width: 768px){ion-content[_ngcontent-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]{margin-top:20%}ion-content[_ngcontent-%COMP%]   .core-login-site-logo.hidden[_ngcontent-%COMP%]{margin-top:0}}.core-login-entered-site[_ngcontent-%COMP%]{background-color:var(--light)}.core-login-entered-site[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{box-shadow:0 0 4px var(--gray-300)}.core-login-default-icon[_ngcontent-%COMP%]{filter:grayscale(100%)}",'[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{--background: var(--core-login-background);--ion-item-background: var(--core-login-background);--color: var(--core-login-text-color)}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{--color: var(--core-login-text-color)}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .core-oauth-icon[_ngcontent-%COMP%]{color:var(--color)}[_nghost-%COMP%]   ion-button.core-button-as-link[_ngcontent-%COMP%]{--color: var(--core-login-text-color);text-decoration-color:var(--color)}[_nghost-%COMP%]   .core-login-reconnect-warning[_ngcontent-%COMP%]{margin:0 0 32px}[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]{margin-bottom:32px}[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%]   core-site-logo[_ngcontent-%COMP%]{--core-site-logo-max-height: 120px;--core-site-logo-sitename-margin-bottom: 8px;--core-site-logo-sitename-font: var(--mdl-typography-subtitle-font-lg);--core-site-logo-max-width: 300px;--core-site-logo-width: 90%;--core-site-logo-margin: 0 auto}[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%]   .core-siteurl[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:0}[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%] + .core-login-user[_ngcontent-%COMP%]{margin-top:24px}[_nghost-%COMP%]   core-user-avatar.large-avatar[_ngcontent-%COMP%]{--core-avatar-size: var(--core-large-avatar-size)}[_nghost-%COMP%]   .core-login-fullname[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:0}[_nghost-%COMP%]   .core-login-methods[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], [_nghost-%COMP%]   .core-login-methods[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{--background: var(--core-login-input-background);--color: var(--core-login-input-color)}[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:0;margin-right:0}[_nghost-%COMP%]   .core-login-forgotten-password[_ngcontent-%COMP%]{text-decoration:underline}[_nghost-%COMP%]   .core-login-methods-separator[_ngcontent-%COMP%]{position:relative;padding:8px 0}[_nghost-%COMP%]   .core-login-methods-separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--core-login-background);padding:0 8px}[_nghost-%COMP%]   .core-login-methods-separator[_ngcontent-%COMP%]:before{height:1px;position:absolute;top:50%;left:0;right:0;border-bottom:1px solid var(--gray-300);content:"";z-index:-1}[_nghost-%COMP%]   .core-login-login-button[_ngcontent-%COMP%]{margin-top:32px}[_nghost-%COMP%]   .core-login-login-inbrowser-button[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   p.core-login-inbrowser[_ngcontent-%COMP%]{font:var(--mdl-typography-body-font-sm);margin-top:8px;margin-bottom:8px}[_nghost-%COMP%]   .core-login-sign-up[_ngcontent-%COMP%]{margin-top:8px;border-top:1px solid var(--gray-300)}[_nghost-%COMP%]   .core-login-identity-providers[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   .core-login-sign-up[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px;font:var(--mdl-typography-heading6-font)}:root.dark[_nghost-%COMP%]   core-loading[_ngcontent-%COMP%], :root.dark   [_nghost-%COMP%]   core-loading[_ngcontent-%COMP%]{--loading-background: var(--core-login-background-dark);--loading-text-color: #ffffff;--loading-spinner: #ffffff}']}),CoreLoginSitePage})()}}]);