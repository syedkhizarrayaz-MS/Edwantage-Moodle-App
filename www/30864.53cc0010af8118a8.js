"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[30864],{30864:(e,o,t)=>{t.r(o),t.d(o,{CoreCourseModuleNavigationComponent:()=>P});var n=t(10467),r=t(44682),i=t(94247),s=t(97086),a=t(33014),u=t(15324),c=t(52749),l=t(55554),d=t(49882),g=t(25572),v=t(79555),C=t(86654),p=t(95384),M=t(54438),m=t(2910),h=t(60177),_=t(64422),f=t(86198),b=t(43570),y=t(73955);function CoreCourseModuleNavigationComponent_ion_row_1_Template(e,o){if(1&e){const e=M.RV6();M.j41(0,"ion-row",2)(1,"ion-col",3)(2,"ion-button",4),M.bIt("click",(function CoreCourseModuleNavigationComponent_ion_row_1_Template_ion_button_click_2_listener(){M.eBV(e);const o=M.XpG();return M.Njj(o.goToActivity(!1))})),M.nrm(3,"ion-icon",5),M.j41(4,"div",6),M.EFF(5),M.nI1(6,"translate"),M.k0s()()(),M.j41(7,"ion-col",3)(8,"ion-button",7),M.bIt("click",(function CoreCourseModuleNavigationComponent_ion_row_1_Template_ion_button_click_8_listener(){M.eBV(e);const o=M.XpG();return M.Njj(o.goToActivity(!0))})),M.j41(9,"div",6),M.EFF(10),M.nI1(11,"translate"),M.k0s(),M.nrm(12,"ion-icon",8),M.k0s()()()}if(2&e){const e=M.XpG();M.R7$(2),M.Y8G("disabled",!e.previousModule),M.R7$(3),M.JRh(M.bMT(6,4,"core.course.previousactivity")),M.R7$(3),M.Y8G("disabled",!e.nextModule),M.R7$(2),M.JRh(M.bMT(11,6,"core.course.nextactivity"))}}let P=(()=>{var e;class CoreCourseModuleNavigationComponent{constructor(e,o){var t=this;this.ionContent=e,this.loaded=!1;const r=c.CoreSites.getCurrentSiteId();this.element=o.nativeElement,this.completionObserver=d.z.on(d.z.COMPLETION_MODULE_VIEWED,function(){var e=(0,n.A)((function*(e){e&&e.courseId==t.courseId&&(yield t.setNextAndPreviousModules(3,!t.nextModule,!t.previousModule))}));return function(o){return e.apply(this,arguments)}}(),r)}ngOnInit(){var e=this;return(0,n.A)((function*(){try{yield e.setNextAndPreviousModules(1)}finally{e.loaded=!0}}))()}ngOnDestroy(){var e=this;return(0,n.A)((function*(){e.completionObserver.off()}))()}setNextAndPreviousModules(e,o=!0,t=!0){var i=this;return(0,n.A)((function*(){if(!o&&!t)return;const n=c.CoreSites.getReadingStrategyPreSets(e),s=yield r.CoreCourse.getSections(i.courseId,!1,!0,n),a=yield r.CoreCourse.getSectionsModules(s,{ignoreSection:e=>!i.isSectionAvailable(e)}),u=a.findIndex((e=>e.id===i.currentModuleId));if(!(u<0)){if(o){i.nextModule=void 0;for(let e=u+1;e<a.length&&void 0===i.nextModule;e++){const o=a[e];i.isModuleAvailable(o)&&(i.nextModule=o)}}if(t){i.previousModule=void 0;for(let e=u-1;e>=0&&void 0===i.previousModule;e--){const o=a[e];i.isModuleAvailable(o)&&(i.previousModule=o)}}i.element.classList.toggle("empty",!i.nextModule&&!i.previousModule)}}))()}isModuleAvailable(e){return!i.CoreCourseHelper.isModuleStealth(e)&&p.CoreCourseModuleHelper.moduleHasView(e)}isSectionAvailable(e){return i.CoreCourseHelper.canUserViewSection(e)&&!i.CoreCourseHelper.isSectionStealth(e)}goToActivity(e=!0){var o=this;return(0,n.A)((function*(){if(!o.loaded)return;const t=yield a.CoreLoadings.show();yield l.g.ignoreErrors(o.setNextAndPreviousModules(3,e,!e)),t.dismiss();const n=e?o.nextModule:o.previousModule;if(!n)return g.CoreAlerts.showError(v.HT.instant(e?"core.course.nextactivitynotfound":"core.course.previousactivitynotfound")),void 0;const r={replace:!0,animationDirection:e?"forward":"back"};i.CoreCourseHelper.canUserViewModule(n)?s.CoreCourseModuleDelegate.openActivityPage(n.modname,n,o.courseId,r):(r.params={module:n},u.CoreNavigator.navigateToSitePath(`course/${o.courseId}/${n.id}/module-preview`,r))}))()}}return(e=CoreCourseModuleNavigationComponent).ɵfac=function CoreCourseModuleNavigationComponent_Factory(o){return new(o||e)(M.rXU(m.W9),M.rXU(M.aKT))},e.ɵcmp=M.VBU({type:e,selectors:[["core-course-module-navigation"]],inputs:{courseId:"courseId",currentModuleId:"currentModuleId"},standalone:!0,features:[M.aNF],decls:2,vars:3,consts:[[3,"hideUntil","fullscreen"],["class","ion-justify-content-between ion-align-items-center ion-no-padding",4,"ngIf"],[1,"ion-justify-content-between","ion-align-items-center","ion-no-padding"],["size","6",1,"ion-no-padding","core-course-module-navigation-arrow"],["fill","clear",1,"core-course-previous-module","ion-text-wrap",3,"click","disabled"],["name","fas-chevron-left","slot","start","aria-hidden","true"],[1,"button-text"],["fill","clear",1,"core-course-next-module","ion-text-wrap",3,"click","disabled"],["name","fas-chevron-right","slot","end","aria-hidden","true"]],template:function CoreCourseModuleNavigationComponent_Template(e,o){1&e&&(M.j41(0,"core-loading",0),M.DNE(1,CoreCourseModuleNavigationComponent_ion_row_1_Template,13,8,"ion-row",1),M.k0s()),2&e&&(M.Y8G("hideUntil",o.loaded)("fullscreen",!1),M.R7$(),M.Y8G("ngIf",o.previousModule||o.nextModule))},dependencies:[C.n,h.bT,m.Jm,m.hU,m.iq,m.ln,_.R,f.t,b.T,y.D9],styles:["[_nghost-%COMP%]{--height: var(--core-navigation-max-height);--background: var(--core-navigation-background);--button-color: var(--gray-700);height:var(--height);width:100%;background-color:var(--background);display:block;border-top:1px solid var(--stroke)}[_nghost-%COMP%]   core-loading[_ngcontent-%COMP%]{text-align:center;--loading-inline-min-height: var(--height)}.empty[_nghost-%COMP%]{display:none}[_nghost-%COMP%]   .core-course-module-navigation-arrow[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;--border-radius: 0;width:100%;font:var(--mdl-typography-body-font-sm);--color: var(--button-color)}[_nghost-%COMP%]   .core-course-module-navigation-arrow[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .core-course-module-navigation-arrow[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--mdl-typography-body-fontSize-sm)}[_nghost-%COMP%]   .core-course-module-navigation-arrow[_ngcontent-%COMP%]   .core-course-previous-module[_ngcontent-%COMP%]{text-align:start}[_nghost-%COMP%]   .core-course-module-navigation-arrow[_ngcontent-%COMP%]   .core-course-next-module[_ngcontent-%COMP%]{text-align:end}core-course-format.core-course-format-singleactivity[_nghost-%COMP%], core-course-format.core-course-format-singleactivity   [_nghost-%COMP%]{opacity:0!important;height:0!important}:root.dark[_nghost-%COMP%], :root.dark   [_nghost-%COMP%]{--button-color: var(--gray-100)}"]}),CoreCourseModuleNavigationComponent})()}}]);