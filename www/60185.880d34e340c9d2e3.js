"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[60185],{60185:(e,t,n)=>{n.r(t),n.d(t,{CoreRemindersDateComponent:()=>_});var i=n(10467),o=n(21604),r=n(24742),s=n(79555),a=n(86654),m=n(24813),l=n(47551),d=n(43959),c=n(54438),p=n(60177),u=n(2910),f=n(86198),b=n(43570),C=n(73955);const _c0=(e,t)=>({title:e,label:t});function CoreRemindersSetButtonComponent_ion_icon_2_Template(e,t){1&e&&c.nrm(0,"ion-icon",4)}function CoreRemindersSetButtonComponent_ion_icon_3_Template(e,t){1&e&&c.nrm(0,"ion-icon",5)}function CoreRemindersSetButtonComponent_span_4_Template(e,t){if(1&e&&(c.j41(0,"span",6),c.EFF(1),c.k0s()),2&e){const e=c.XpG();c.R7$(),c.JRh(e.reminderMessage)}}let R=(()=>{var e;class CoreRemindersSetButtonComponent{constructor(){this.label="",this.time=-1,this.title="",this.url="",this.labelClean=""}ngOnInit(){this.labelClean=this.label.replace(":",""),this.setTimebefore(this.initialTimebefore)}setReminder(e){var t=this;return(0,i.A)((function*(){if(void 0===t.component||void 0===t.instanceId||void 0===t.type)return;if(e.preventDefault(),e.stopPropagation(),void 0===t.timebefore)return t.saveReminder(0),void 0;const{CoreRemindersSetReminderMenuComponent:i}=yield n.e(64260).then(n.bind(n,64260)),o=yield m.CorePopovers.open({component:i,componentProps:{initialValue:t.timebefore,eventTime:t.time,noReminderLabel:"core.reminders.delete"},event:e});void 0!==o&&t.saveReminder(o.timeBefore)}))()}setTimebefore(e){if(this.timebefore=e,void 0!==this.timebefore){this.reminderMessage=s.HT.instant("core.reminders.reminderset",{$a:r.j.userDate(1e3*(this.time-this.timebefore))})}else this.reminderMessage=void 0}saveReminder(e){var t=this;return(0,i.A)((function*(){if(void 0===t.component||void 0===t.instanceId||void 0===t.type)return;if(yield o.CoreReminders.removeReminders({instanceId:t.instanceId,component:t.component,type:t.type}),void 0===e||e===d.Nc)return t.setTimebefore(void 0),l.CoreToasts.show({message:"core.reminders.reminderunset",translateMessage:!0}),void 0;t.setTimebefore(e);const n={timebefore:e,component:t.component,instanceId:t.instanceId,type:t.type,title:`${t.label} ${t.title}`,url:t.url,time:t.time};yield o.CoreReminders.addReminder(n);const i=s.HT.instant("core.reminders.reminderset",{$a:r.j.userDate(1e3*(t.time-e))});l.CoreToasts.show({message:i})}))()}}return(e=CoreRemindersSetButtonComponent).ɵfac=function CoreRemindersSetButtonComponent_Factory(t){return new(t||e)},e.ɵcmp=c.VBU({type:e,selectors:[["core-reminders-set-button"]],inputs:{component:"component",instanceId:"instanceId",type:"type",label:"label",initialTimebefore:"initialTimebefore",time:"time",title:"title",url:"url"},standalone:!0,features:[c.aNF],decls:5,vars:10,consts:[["fill","clear","size","small",3,"click","ariaLabel"],["name","fas-bell","slot","icon-only","aria-hidden","true",4,"ngIf"],["name","far-bell-slash","slot","icon-only","aria-hidden","true",4,"ngIf"],["class","sr-only","role","status",4,"ngIf"],["name","fas-bell","slot","icon-only","aria-hidden","true"],["name","far-bell-slash","slot","icon-only","aria-hidden","true"],["role","status",1,"sr-only"]],template:function CoreRemindersSetButtonComponent_Template(e,t){1&e&&(c.j41(0,"ion-button",0),c.nI1(1,"translate"),c.bIt("click",(function CoreRemindersSetButtonComponent_Template_ion_button_click_0_listener(e){return t.setReminder(e)})),c.DNE(2,CoreRemindersSetButtonComponent_ion_icon_2_Template,1,0,"ion-icon",1)(3,CoreRemindersSetButtonComponent_ion_icon_3_Template,1,0,"ion-icon",2),c.k0s(),c.DNE(4,CoreRemindersSetButtonComponent_span_4_Template,2,1,"span",3)),2&e&&(c.Y8G("ariaLabel",c.i5U(1,4,"core.reminders.setareminderfor",c.l_i(7,_c0,t.title,t.labelClean))),c.R7$(2),c.Y8G("ngIf",void 0!==t.timebefore),c.R7$(),c.Y8G("ngIf",void 0===t.timebefore),c.R7$(),c.Y8G("ngIf",t.reminderMessage))},dependencies:[a.n,p.bT,u.Jm,u.iq,f.t,b.T,C.D9],encapsulation:2}),CoreRemindersSetButtonComponent})();function CoreRemindersDateComponent_core_reminders_set_button_5_Template(e,t){if(1&e&&c.nrm(0,"core-reminders-set-button",2),2&e){const e=c.XpG();c.Y8G("component",e.component)("instanceId",e.instanceId)("type",e.type)("label",e.label)("initialTimebefore",e.timebefore)("time",e.time)("title",e.title)("url",e.url)}}let _=(()=>{var e;class CoreRemindersDateComponent{constructor(){this.label="",this.time=0,this.relativeTo=0,this.title="",this.url="",this.showReminderButton=!1,this.readableTime=""}ngOnInit(){var e=this;return(0,i.A)((function*(){var t;if(e.readableTime=e.getReadableTime(e.time,e.relativeTo),void 0===e.component||void 0===e.instanceId||void 0===e.type)return;const n=o.CoreReminders.isEnabled();if(e.showReminderButton=n&&e.time>r.j.timestamp(),!e.showReminderButton)return;const i=yield o.CoreReminders.getReminders({instanceId:e.instanceId,component:e.component,type:e.type});e.timebefore=null===(t=i[0])||void 0===t?void 0:t.timebefore}))()}getReadableTime(e,t=0){return t?s.HT.instant("core.course.relativedatessubmissionduedate"+(e>t?"after":"before"),{$a:{datediffstr:t===e?`0 ${s.HT.instant("core.secs")}`:r.j.formatTime(t-e,3)}}):r.j.userDate(1e3*e,"core.strftimedatetime",!0)}}return(e=CoreRemindersDateComponent).ɵfac=function CoreRemindersDateComponent_Factory(t){return new(t||e)},e.ɵcmp=c.VBU({type:e,selectors:[["core-reminders-date"]],inputs:{component:"component",instanceId:"instanceId",type:"type",label:"label",time:"time",relativeTo:"relativeTo",title:"title",url:"url"},standalone:!0,features:[c.aNF],decls:6,vars:3,consts:[["name","fas-calendar","aria-hidden","true"],["slot","end",3,"component","instanceId","type","label","initialTimebefore","time","title","url",4,"ngIf"],["slot","end",3,"component","instanceId","type","label","initialTimebefore","time","title","url"]],template:function CoreRemindersDateComponent_Template(e,t){1&e&&(c.j41(0,"div"),c.nrm(1,"ion-icon",0),c.j41(2,"strong"),c.EFF(3),c.k0s(),c.EFF(4),c.k0s(),c.DNE(5,CoreRemindersDateComponent_core_reminders_set_button_5_Template,1,8,"core-reminders-set-button",1)),2&e&&(c.R7$(3),c.JRh(t.label),c.R7$(),c.SpI(" ",t.readableTime,"\n"),c.R7$(),c.Y8G("ngIf",t.showReminderButton))},dependencies:[a.n,p.bT,u.iq,f.t,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;margin-top:8px;margin-inline-end:8px}div[_ngcontent-%COMP%]{flex-grow:1;font:var(--mdl-typography-body-font-md);line-height:normal;margin:0;align-self:center}div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:var(--display-icon, inline-block);margin-inline-start:0px;margin-inline-end:4px}"]}),CoreRemindersDateComponent})()}}]);