"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[87552],{67840:(o,e,t)=>{t.d(e,{X:()=>i});var n=t(54438);let i=(()=>{var o;class CoreCourseModuleCompletionBaseComponent{constructor(){this.completionChanged=new n.bkB}ngOnChanges(o){o.completion&&this.completion&&this.calculateData()}calculateData(){}}return(o=CoreCourseModuleCompletionBaseComponent).ɵfac=function CoreCourseModuleCompletionBaseComponent_Factory(e){return new(e||o)},o.ɵcmp=n.VBU({type:o,selectors:[["ng-component"]],inputs:{completion:"completion",moduleId:"moduleId",moduleName:"moduleName"},outputs:{completionChanged:"completionChanged"},features:[n.OA$],decls:0,vars:0,template:function CoreCourseModuleCompletionBaseComponent_Template(o,e){},encapsulation:2}),CoreCourseModuleCompletionBaseComponent})()},87552:(o,e,t)=>{t.r(e),t.d(e,{CoreCourseModuleCompletionLegacyComponent:()=>_});var n=t(10467),i=t(98870),l=t(40867),a=t(79555),c=t(67840),m=t(94247),r=t(49882),p=t(84412),s=t(86654),u=t(54438),C=t(2910),d=t(43570),g=t(60177);function CoreCourseModuleCompletionLegacyComponent_Conditional_0_Conditional_0_Template(o,e){if(1&o){const o=u.RV6();u.j41(0,"ion-button",1),u.nI1(1,"async"),u.bIt("click",(function CoreCourseModuleCompletionLegacyComponent_Conditional_0_Conditional_0_Template_ion_button_click_0_listener(e){u.eBV(o);const t=u.XpG(2);return u.Njj(t.completionClicked(e))})),u.nrm(2,"img",2),u.k0s()}if(2&o){const o=u.XpG(2);u.Y8G("title",u.bMT(1,2,o.completionDescription$)),u.R7$(2),u.Y8G("src",o.completionImage,u.B4B)}}function CoreCourseModuleCompletionLegacyComponent_Conditional_0_Conditional_1_Template(o,e){if(1&o&&(u.nrm(0,"img",3),u.nI1(1,"async")),2&o){const o=u.XpG(2);u.Y8G("src",o.completionImage,u.B4B)("alt",u.bMT(1,2,o.completionDescription$))}}function CoreCourseModuleCompletionLegacyComponent_Conditional_0_Template(o,e){if(1&o&&u.DNE(0,CoreCourseModuleCompletionLegacyComponent_Conditional_0_Conditional_0_Template,3,4,"ion-button",0)(1,CoreCourseModuleCompletionLegacyComponent_Conditional_0_Conditional_1_Template,2,4),2&o){const o=u.XpG();u.vxM(0,1===o.completion.tracking?0:1)}}let _=(()=>{var o;class CoreCourseModuleCompletionLegacyComponent extends c.X{constructor(){super(...arguments),this.completionDescription$=new p.t("")}ngOnInit(){this.completionObserver=r.z.on(r.z.MANUAL_COMPLETION_CHANGED,(o=>{this.completion&&this.completion.cmid==o.completion.cmid&&(this.completion=o.completion,this.calculateData(),this.completionChanged.emit(this.completion))}))}calculateData(){var o=this;return(0,n.A)((function*(){if(!o.completion)return;const e=o.moduleName||"";let t,n;if(1===o.completion.tracking?0===o.completion.state?(n="completion-manual-n",t="core.completion-alt-manual-n"):1===o.completion.state&&(n="completion-manual-y",t="core.completion-alt-manual-y"):2===o.completion.tracking&&(0===o.completion.state?(n="completion-auto-n",t="core.completion-alt-auto-n"):1===o.completion.state?(n="completion-auto-y",t="core.completion-alt-auto-y"):2===o.completion.state?(n="completion-auto-pass",t="core.completion-alt-auto-pass"):3===o.completion.state&&(n="completion-auto-fail",t="core.completion-alt-auto-fail")),n&&(o.completion.overrideby&&o.completion.overrideby>0&&(n+="-override"),o.completionImage=`assets/img/completion/${n}.svg`),!e||!o.moduleId||!t)return;const c=yield l.CoreFilterHelper.getFiltersAndFormatText(e,"module",o.moduleId,{clean:!0,singleLine:!0,shortenLength:50,courseId:o.completion.courseId});let m={$a:c.text};if(o.completion.overrideby&&o.completion.overrideby>0){t+="-override";m={$a:{overrideuser:(yield i.CoreUser.getProfile(o.completion.overrideby,o.completion.courseId,!0)).fullname,modname:c.text}}}o.completionDescription$.next(a.HT.instant(t,m))}))()}completionClicked(o){var e=this;return(0,n.A)((function*(){e.completion&&(o.stopPropagation(),o.preventDefault(),yield m.CoreCourseHelper.changeManualCompletion(e.completion),r.z.trigger(r.z.MANUAL_COMPLETION_CHANGED,{completion:e.completion}))}))()}ngOnDestroy(){var o;null===(o=this.completionObserver)||void 0===o||o.off()}}return(o=CoreCourseModuleCompletionLegacyComponent).ɵfac=(()=>{let e;return function CoreCourseModuleCompletionLegacyComponent_Factory(t){return(e||(e=u.xGo(o)))(t||o)}})(),o.ɵcmp=u.VBU({type:o,selectors:[["core-course-module-completion-legacy"]],standalone:!0,features:[u.Vt3,u.aNF],decls:1,vars:1,consts:[["fill","clear",1,"core-completion-manual",3,"title"],["fill","clear",1,"core-completion-manual",3,"click","title"],["role","presentation","alt","",3,"src"],[1,"core-completion-auto",3,"src","alt"]],template:function CoreCourseModuleCompletionLegacyComponent_Template(o,e){1&o&&u.DNE(0,CoreCourseModuleCompletionLegacyComponent_Conditional_0_Template,2,1),2&o&&u.vxM(0,e.completion?0:-1)},dependencies:[s.n,C.Jm,d.T,g.Jj],styles:["[_nghost-%COMP%]{display:contents;--size: 20px}[_nghost-%COMP%]   img.core-completion-auto[_ngcontent-%COMP%]{margin:6px}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:var(--size);max-width:none;vertical-align:middle}[_nghost-%COMP%]   ion-button.core-completion-manual[_ngcontent-%COMP%]{--padding-top: 0px;--padding-start: 0px;--padding-end: 0px;--padding-bottom: 0px;--a11y-target-min-size: 32px;width:var(--a11y-target-min-size);height:var(--a11y-target-min-size);min-width:var(--a11y-target-min-size);min-height:var(--a11y-target-min-size);margin:0}"]}),CoreCourseModuleCompletionLegacyComponent})()}}]);