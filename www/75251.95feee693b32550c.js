"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[75251,29905],{75251:(n,e,o)=>{o.r(e),o.d(e,{AddonModAssignEditPluginFeedbackModalComponent:()=>M});var i=o(10467),t=o(52749),d=o(63153),s=o(55554),a=o(79555),l=o(62007),g=o(86654),c=o(25572),u=o(29905),r=o(54438),m=o(60177),p=o(89417),f=o(2910),b=o(86198),_=o(88246),A=o(43570),k=o(73955);const F=["editFeedbackForm"];function AddonModAssignEditPluginFeedbackModalComponent_form_10_Template(n,e){if(1&n){const n=r.RV6();r.j41(0,"form",5,0),r.nrm(2,"addon-mod-assign-feedback-plugin",6),r.j41(3,"ion-button",7),r.bIt("click",(function AddonModAssignEditPluginFeedbackModalComponent_form_10_Template_ion_button_click_3_listener(e){r.eBV(n);const o=r.XpG();return r.Njj(o.done(e))})),r.EFF(4),r.nI1(5,"translate"),r.k0s()()}if(2&n){const n=r.XpG();r.R7$(2),r.Y8G("assign",n.assign)("submission",n.submission)("userId",n.userId)("plugin",n.plugin)("edit",!0),r.R7$(2),r.JRh(r.bMT(5,6,"core.done"))}}let M=(()=>{var n;class AddonModAssignEditPluginFeedbackModalComponent{closeModal(){var n=this;return(0,i.A)((function*(){(yield n.hasDataChanged())&&(yield c.CoreAlerts.confirmLeaveWithChanges()),d.R.triggerFormCancelledEvent(n.formElement,t.CoreSites.getCurrentSiteId()),a.W3.dismiss()}))()}done(n){n.preventDefault(),n.stopPropagation(),d.R.triggerFormSubmittedEvent(this.formElement,!1,t.CoreSites.getCurrentSiteId()),a.W3.dismiss(this.getInputData())}getInputData(){return d.R.getDataFromForm(document.forms["addon-mod_assign-edit-feedback-plugin-form"])}hasDataChanged(){var n=this;return(0,i.A)((function*(){return!!(yield s.g.ignoreErrors(l.AddonModAssignFeedbackDelegate.hasPluginDataChanged(n.assign,n.submission,n.plugin,n.getInputData(),n.userId),!0))}))()}}return(n=AddonModAssignEditPluginFeedbackModalComponent).ɵfac=function AddonModAssignEditPluginFeedbackModalComponent_Factory(e){return new(e||n)},n.ɵcmp=r.VBU({type:n,selectors:[["addon-mod-assign-edit-feedback-plugin-modal"]],viewQuery:function AddonModAssignEditPluginFeedbackModalComponent_Query(n,e){if(1&n&&r.GBs(F,5),2&n){let n;r.mGM(n=r.lsd())&&(e.formElement=n.first)}},inputs:{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId"},standalone:!0,features:[r.aNF],decls:11,vars:5,consts:[["editFeedbackForm",""],["slot","end"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-xmark","aria-hidden","true"],["name","addon-mod_assign-edit-feedback-plugin-form",4,"ngIf"],["name","addon-mod_assign-edit-feedback-plugin-form"],[3,"assign","submission","userId","plugin","edit"],["expand","block",3,"click"]],template:function AddonModAssignEditPluginFeedbackModalComponent_Template(n,e){1&n&&(r.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title")(3,"h1"),r.EFF(4),r.k0s()(),r.j41(5,"ion-buttons",1)(6,"ion-button",2),r.nI1(7,"translate"),r.bIt("click",(function AddonModAssignEditPluginFeedbackModalComponent_Template_ion_button_click_6_listener(){return e.closeModal()})),r.nrm(8,"ion-icon",3),r.k0s()()()(),r.j41(9,"ion-content"),r.DNE(10,AddonModAssignEditPluginFeedbackModalComponent_form_10_Template,6,8,"form",4),r.k0s()),2&n&&(r.R7$(4),r.JRh(e.plugin.name),r.R7$(2),r.Y8G("ariaLabel",r.bMT(7,3,"core.close")),r.R7$(4),r.Y8G("ngIf",e.userId&&e.plugin))},dependencies:[g.n,m.bT,p.qT,p.cb,p.cV,f.Jm,f.QW,f.W9,f.eU,f.iq,f.BC,f.ai,b.t,_.i,A.T,k.D9,u.AddonModAssignFeedbackPluginComponent],encapsulation:2}),AddonModAssignEditPluginFeedbackModalComponent})()},29905:(n,e,o)=>{o.r(e),o.d(e,{AddonModAssignFeedbackPluginComponent:()=>k});var i=o(10467),t=o(68162),d=o(5505),s=o(20218),a=o(62007),l=o(66016),g=o(91416),c=o(86654),u=o(54438),r=o(60177),m=o(2910),p=o(6128),f=o(64422),b=o(58197),_=o(35407),A=o(73955);function AddonModAssignFeedbackPluginComponent_ion_item_2_ion_badge_4_Template(n,e){1&n&&(u.j41(0,"ion-badge",7),u.EFF(1),u.nI1(2,"translate"),u.k0s()),2&n&&(u.R7$(),u.SpI(" ",u.bMT(2,1,"addon.mod_assign.feedbacknotsupported")," "))}function AddonModAssignFeedbackPluginComponent_ion_item_2_p_5_Template(n,e){if(1&n&&(u.j41(0,"p"),u.nrm(1,"core-format-text",8),u.k0s()),2&n){const n=u.XpG(2);u.R7$(),u.Y8G("component",n.component)("componentId",n.assign.cmid)("text",n.text)("contextInstanceId",n.assign.cmid)("courseId",n.assign.course)}}function AddonModAssignFeedbackPluginComponent_ion_item_2_core_file_6_Template(n,e){if(1&n&&u.nrm(0,"core-file",9),2&n){const n=e.$implicit,o=u.XpG(2);u.Y8G("file",n)("component",o.component)("componentId",o.assign.cmid)("alwaysDownload",!0)}}function AddonModAssignFeedbackPluginComponent_ion_item_2_Template(n,e){if(1&n&&(u.j41(0,"ion-item",3)(1,"ion-label")(2,"h2"),u.EFF(3),u.k0s(),u.DNE(4,AddonModAssignFeedbackPluginComponent_ion_item_2_ion_badge_4_Template,3,3,"ion-badge",4)(5,AddonModAssignFeedbackPluginComponent_ion_item_2_p_5_Template,2,5,"p",5)(6,AddonModAssignFeedbackPluginComponent_ion_item_2_core_file_6_Template,1,4,"core-file",6),u.k0s()()),2&n){const n=u.XpG();u.R7$(3),u.JRh(n.plugin.name),u.R7$(),u.Y8G("ngIf",n.notSupported),u.R7$(),u.Y8G("ngIf",n.text),u.R7$(),u.Y8G("ngForOf",n.files)}}let k=(()=>{var n;class AddonModAssignFeedbackPluginComponent{constructor(){this.canEdit=!1,this.edit=!1,this.component=l.It,this.text="",this.files=[],this.notSupported=!1,this.pluginLoaded=!1}ngOnInit(){var n=this;return(0,i.A)((function*(){if(!n.plugin)return n.pluginLoaded=!0,void 0;const e=a.AddonModAssignFeedbackDelegate.getPluginName(n.plugin);if(!e)return n.pluginLoaded=!0,void 0;n.plugin.name=e,n.pluginComponent=yield a.AddonModAssignFeedbackDelegate.getComponentForPlugin(n.plugin),n.pluginComponent?n.data={assign:n.assign,submission:n.submission,plugin:n.plugin,userId:n.userId,configs:s.AddonModAssignHelper.getPluginConfig(n.assign,"assignfeedback",n.plugin.type),edit:n.edit,canEdit:n.canEdit}:(n.text=d.AddonModAssign.getSubmissionPluginText(n.plugin),n.files=d.AddonModAssign.getSubmissionPluginAttachments(n.plugin),n.notSupported=a.AddonModAssignFeedbackDelegate.isPluginSupported(n.plugin.type),n.pluginLoaded=!0)}))()}invalidate(){var n=this;return(0,i.A)((function*(){yield n.dynamicComponent.callComponentMethod("invalidate")}))()}}return(n=AddonModAssignFeedbackPluginComponent).ɵfac=function AddonModAssignFeedbackPluginComponent_Factory(e){return new(e||n)},n.ɵcmp=u.VBU({type:n,selectors:[["addon-mod-assign-feedback-plugin"]],viewQuery:function AddonModAssignFeedbackPluginComponent_Query(n,e){if(1&n&&u.GBs(t.m,5),2&n){let n;u.mGM(n=u.lsd())&&(e.dynamicComponent=n.first)}},inputs:{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",canEdit:[u.Mj6.HasDecoratorInputTransform,"canEdit","canEdit",g.G],edit:[u.Mj6.HasDecoratorInputTransform,"edit","edit",g.G]},standalone:!0,features:[u.GFd,u.aNF],decls:3,vars:4,consts:[[3,"component","data"],[3,"hideUntil"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["color","primary",4,"ngIf"],[4,"ngIf"],[3,"file","component","componentId","alwaysDownload",4,"ngFor","ngForOf"],["color","primary"],["collapsible-item","","contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],[3,"file","component","componentId","alwaysDownload"]],template:function AddonModAssignFeedbackPluginComponent_Template(n,e){1&n&&(u.j41(0,"core-dynamic-component",0)(1,"core-loading",1),u.DNE(2,AddonModAssignFeedbackPluginComponent_ion_item_2_Template,7,4,"ion-item",2),u.k0s()()),2&n&&(u.Y8G("component",e.pluginComponent)("data",e.data),u.R7$(),u.Y8G("hideUntil",e.pluginLoaded),u.R7$(),u.Y8G("ngIf",e.text.length>0||e.files.length>0))},dependencies:[c.n,r.Sq,r.bT,m.In,m.uz,m.he,t.m,p.t,f.R,b.B,_.K,A.D9],encapsulation:2}),AddonModAssignFeedbackPluginComponent})()}}]);