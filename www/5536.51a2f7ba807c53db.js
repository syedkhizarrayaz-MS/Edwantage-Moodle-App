"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5536],{5536:(t,e,o)=>{o.r(e),o.d(e,{default:()=>I});var n=o(10467),i=o(98870),a=o(15324),d=o(55554),r=o(34961),l=o(24742),c=o(22693),_=o(9153),s=o(25572),p=o(86654),m=o(52749),u=o(73870),g=o(54438),A=o(60177),v=o(2910),P=o(64422),h=o(16658),y=o(86198),C=o(58197),R=o(37557),M=o(88246),f=o(73955);const _forTrack0=(t,e)=>e.id,_c0=t=>({answer:t}),_c1=t=>({$a:t});function AddonModH5PActivityAttemptResultsPage_Conditional_7_Template(t,e){if(1&t&&g.nrm(0,"core-format-text",3),2&t){const t=g.XpG();g.Y8G("text",t.h5pActivity.name)("contextInstanceId",t.h5pActivity.coursemodule)("courseId",t.courseId)}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_Conditional_3_Template(t,e){if(1&t&&(g.j41(0,"ion-card")(1,"ion-item",10),g.nrm(2,"core-user-avatar",11),g.j41(3,"ion-label"),g.EFF(4),g.k0s()()()),2&t){const t=g.XpG(2);g.R7$(),g.Y8G("userId",t.user.id)("courseId",t.courseId)("detail",!0),g.R7$(),g.Y8G("user",t.user)("courseId",t.courseId)("linkProfile",!1),g.R7$(2),g.JRh(t.user.fullname)}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_5_Template(t,e){if(1&t&&(g.j41(0,"ion-item")(1,"ion-label"),g.nrm(2,"core-format-text",13),g.k0s()()),2&t){const t=g.XpG().$implicit,e=g.XpG(2);g.R7$(2),g.Y8G("text",t.content)("component",e.component)("componentId",e.cmId)("contextInstanceId",e.cmId)("courseId",e.courseId)}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_4_ng_container_0_Template(t,e){1&t&&g.eu8(0)}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_4_Template(t,e){if(1&t&&g.DNE(0,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_4_ng_container_0_Template,1,0,"ng-container",23),2&t){const t=g.XpG().$implicit;g.XpG(4);const e=g.sdS(15);g.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",g.eq3(2,_c0,t.correctanswer))}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_6_ng_container_0_Template(t,e){1&t&&g.eu8(0)}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_6_Template(t,e){if(1&t&&g.DNE(0,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_6_ng_container_0_Template,1,0,"ng-container",23),2&t){const t=g.XpG().$implicit;g.XpG(4);const e=g.sdS(15);g.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",g.eq3(2,_c0,t.useranswer))}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Template(t,e){if(1&t&&(g.j41(0,"ion-row",18)(1,"ion-col",21),g.nrm(2,"core-format-text",13),g.k0s(),g.j41(3,"ion-col",22),g.DNE(4,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_4_Template,1,4,"ng-container"),g.k0s(),g.j41(5,"ion-col",22),g.DNE(6,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Conditional_6_Template,1,4,"ng-container"),g.k0s()()),2&t){const t=e.$implicit,o=g.XpG(4);g.R7$(2),g.Y8G("text",t.description)("component",o.component)("componentId",o.cmId)("contextInstanceId",o.cmId)("courseId",o.courseId),g.R7$(2),g.vxM(4,t.correctanswer?4:-1),g.R7$(2),g.vxM(6,t.useranswer?6:-1)}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_Template(t,e){if(1&t&&(g.j41(0,"ion-grid",15)(1,"ion-row",18)(2,"ion-col",19),g.EFF(3),g.k0s(),g.j41(4,"ion-col",20),g.EFF(5),g.k0s(),g.j41(6,"ion-col",20),g.EFF(7),g.k0s()(),g.Z7z(8,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_For_9_Template,7,7,"ion-row",18,_forTrack0),g.k0s()),2&t){const t=g.XpG().$implicit;g.R7$(3),g.JRh(t.optionslabel),g.R7$(2),g.JRh(t.correctlabel),g.R7$(2),g.JRh(t.answerlabel),g.R7$(),g.Dyx(t.options)}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_7_Template(t,e){if(1&t&&(g.j41(0,"p",16),g.EFF(1),g.nI1(2,"translate"),g.nI1(3,"translate"),g.k0s()),2&t){const t=g.XpG().$implicit;g.R7$(),g.Lme(" ",g.bMT(2,2,"addon.mod_h5pactivity.score"),": ",g.i5U(3,4,"addon.mod_h5pactivity.score_out_of",g.eq3(7,_c1,t))," ")}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_8_Template(t,e){if(1&t&&(g.j41(0,"ion-item",17),g.nrm(1,"ion-icon",24),g.j41(2,"ion-label"),g.EFF(3),g.nI1(4,"translate"),g.k0s()()),2&t){const t=g.XpG().$implicit;g.R7$(3),g.SpI(" ",g.i5U(4,1,"addon.mod_h5pactivity.no_compatible_track",g.eq3(4,_c1,t.interactiontype))," ")}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Template(t,e){if(1&t&&(g.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title",12),g.nrm(3,"core-format-text",13),g.k0s()(),g.j41(4,"ion-card-content",14),g.DNE(5,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_5_Template,3,5,"ion-item")(6,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_6_Template,10,3,"ion-grid",15)(7,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_7_Template,4,9,"p",16)(8,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Conditional_8_Template,5,6,"ion-item",17),g.k0s()()),2&t){const t=e.$implicit,o=g.XpG(2);g.R7$(3),g.Y8G("text",t.description)("component",o.component)("componentId",o.cmId)("contextInstanceId",o.cmId)("courseId",o.courseId),g.R7$(2),g.vxM(5,t.content?5:-1),g.R7$(),g.vxM(6,t.options&&t.options.length?6:-1),g.R7$(),g.vxM(7,t.maxscore&&t.track?7:-1),g.R7$(),g.vxM(8,t.track?-1:8)}}function AddonModH5PActivityAttemptResultsPage_Conditional_13_Template(t,e){if(1&t&&(g.j41(0,"h2",8),g.EFF(1),g.nI1(2,"translate"),g.k0s(),g.DNE(3,AddonModH5PActivityAttemptResultsPage_Conditional_13_Conditional_3_Template,5,7,"ion-card"),g.j41(4,"ion-card")(5,"ion-card-content"),g.nrm(6,"addon-mod-h5pactivity-attempt-summary",9),g.k0s()(),g.Z7z(7,AddonModH5PActivityAttemptResultsPage_Conditional_13_For_8_Template,9,9,"ion-card",null,_forTrack0)),2&t){const t=g.XpG();g.R7$(),g.Lme(" ",g.bMT(2,4,"addon.mod_h5pactivity.attempt")," ",t.attempt.attempt," "),g.R7$(2),g.vxM(3,t.user?3:-1),g.R7$(3),g.Y8G("attempt",t.attempt),g.R7$(),g.Dyx(t.attempt.results)}}function AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_0_Template(t,e){if(1&t&&(g.nrm(0,"ion-icon",25),g.nI1(1,"translate"),g.EFF(2)),2&t){const t=g.XpG().answer;g.BMQ("aria-label",g.bMT(1,2,"addon.mod_h5pactivity.answer_correct")),g.R7$(2),g.SpI(" ",t.answer," ")}}function AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_1_Template(t,e){if(1&t&&(g.nrm(0,"ion-icon",26),g.nI1(1,"translate"),g.EFF(2)),2&t){const t=g.XpG().answer;g.BMQ("aria-label",g.bMT(1,2,"addon.mod_h5pactivity.answer_incorrect")),g.R7$(2),g.SpI(" ",t.answer," ")}}function AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_2_Template(t,e){if(1&t&&g.EFF(0),2&t){const t=g.XpG().answer;g.SpI(" ",t.answer," ")}}function AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_3_Template(t,e){1&t&&(g.nrm(0,"ion-icon",27),g.nI1(1,"translate")),2&t&&g.BMQ("aria-label",g.bMT(1,1,"addon.mod_h5pactivity.answer_checked"))}function AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_4_Template(t,e){1&t&&(g.nrm(0,"ion-icon",25),g.nI1(1,"translate")),2&t&&g.BMQ("aria-label",g.bMT(1,1,"addon.mod_h5pactivity.answer_pass"))}function AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_5_Template(t,e){1&t&&(g.nrm(0,"ion-icon",26),g.nI1(1,"translate")),2&t&&g.BMQ("aria-label",g.bMT(1,1,"addon.mod_h5pactivity.answer_fail"))}function AddonModH5PActivityAttemptResultsPage_ng_template_14_Template(t,e){if(1&t&&g.DNE(0,AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_0_Template,3,4)(1,AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_1_Template,3,4)(2,AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_2_Template,1,1)(3,AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_3_Template,2,3)(4,AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_4_Template,2,3)(5,AddonModH5PActivityAttemptResultsPage_ng_template_14_Conditional_5_Template,2,3),2&t){const t=e.answer;g.vxM(0,t.correct?0:t.incorrect?1:t.text?2:t.checked?3:t.pass?4:t.fail?5:-1)}}let I=(()=>{var t;class AddonModH5PActivityAttemptResultsPage{constructor(){var t=this;this.loaded=!1,this.component=_.tU,this.logView=l.j.once((0,n.A)((function*(){t.h5pActivity&&(yield d.g.ignoreErrors(r.R.logViewReport(t.h5pActivity.id,{attemptId:t.attemptId})),c.OF.logEvent({type:c.qr.VIEW_ITEM,ws:"mod_h5pactivity_log_report_viewed",name:t.h5pActivity.name,data:{id:t.h5pActivity.id,attemptid:t.attemptId,category:"h5pactivity"},url:`/mod/h5pactivity/report.php?a=${t.h5pActivity.id}&attemptid=${t.attemptId}`}))})))}ngOnInit(){var t=this;return(0,n.A)((function*(){try{t.courseId=a.CoreNavigator.getRequiredRouteNumberParam("courseId"),t.cmId=a.CoreNavigator.getRequiredRouteNumberParam("cmId"),t.attemptId=a.CoreNavigator.getRequiredRouteNumberParam("attemptId")}catch(t){return s.CoreAlerts.showError(t),a.CoreNavigator.back(),void 0}yield t.fetchData()}))()}doRefresh(t){this.refreshData().finally((()=>{t.complete()}))}fetchData(){var t=this;return(0,n.A)((function*(){try{t.h5pActivity=yield r.R.getH5PActivity(t.courseId,t.cmId),t.attempt=yield r.R.getAttemptResults(t.h5pActivity.id,t.attemptId,{cmId:t.cmId}),yield t.fetchUserProfile(),t.logView()}catch(t){s.CoreAlerts.showError(t,{default:"Error loading attempt."})}finally{t.loaded=!0}}))()}fetchUserProfile(){var t=this;return(0,n.A)((function*(){var e;if(!t.attempt||(null===(e=t.attempt)||void 0===e?void 0:e.userid)===m.CoreSites.getCurrentSiteUserId())return t.user=void 0,void 0;try{t.user=yield i.CoreUser.getProfile(t.attempt.userid,t.courseId,!0)}catch{}}))()}refreshData(){var t=this;return(0,n.A)((function*(){const e=[r.R.invalidateActivityData(t.courseId)];t.h5pActivity&&e.push(r.R.invalidateAttemptResults(t.h5pActivity.id,t.attemptId)),yield d.g.ignoreErrors(Promise.all(e)),yield t.fetchData()}))()}}return(t=AddonModH5PActivityAttemptResultsPage).ɵfac=function AddonModH5PActivityAttemptResultsPage_Factory(e){return new(e||t)},t.ɵcmp=g.VBU({type:t,selectors:[["page-addon-mod-h5pactivity-attempt-results"]],standalone:!0,features:[g.aNF],decls:16,vars:10,consts:[["answerTemplate",""],["slot","start"],[3,"text"],["contextLevel","module",3,"text","contextInstanceId","courseId"],[1,"limited-width"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-margin"],[3,"attempt"],["core-user-link","","button","",3,"userId","courseId","detail"],["slot","start",3,"user","courseId","linkProfile"],["aria-level","3"],["contextLevel","module",3,"text","component","componentId","contextInstanceId","courseId"],[1,"ion-no-padding"],["role","grid",1,"addon-mod_h5pactivity-result-grid"],[1,"addon-mod_h5pactivity-result-score"],[1,"addon-mod_h5pactivity-result-unsupported"],["role","row"],["role","columnheader"],["role","columnheader",1,"ion-text-center"],["role","gridcell"],["role","gridcell",1,"ion-justify-content-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["slot","start","name","fas-triangle-exclamation","aria-hidden","true"],["name","fas-check","color","success"],["name","fas-xmark","color","danger"],["name","fas-circle-check"]],template:function AddonModH5PActivityAttemptResultsPage_Template(t,e){if(1&t){const t=g.RV6();g.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),g.nrm(3,"ion-back-button",2),g.nI1(4,"translate"),g.k0s(),g.j41(5,"ion-title")(6,"h1"),g.DNE(7,AddonModH5PActivityAttemptResultsPage_Conditional_7_Template,1,3,"core-format-text",3),g.k0s()()()(),g.j41(8,"ion-content",4)(9,"ion-refresher",5),g.bIt("ionRefresh",(function AddonModH5PActivityAttemptResultsPage_Template_ion_refresher_ionRefresh_9_listener(o){return g.eBV(t),g.Njj(e.doRefresh(o.target))})),g.nrm(10,"ion-refresher-content",6),g.nI1(11,"translate"),g.k0s(),g.j41(12,"core-loading",7),g.DNE(13,AddonModH5PActivityAttemptResultsPage_Conditional_13_Template,9,6),g.k0s()(),g.DNE(14,AddonModH5PActivityAttemptResultsPage_ng_template_14_Template,6,1,"ng-template",null,0,g.C5r)}2&t&&(g.R7$(3),g.Y8G("text",g.bMT(4,6,"core.back")),g.R7$(4),g.vxM(7,e.h5pActivity?7:-1),g.R7$(2),g.Y8G("disabled",!e.loaded),g.R7$(),g.FS9("pullingText",g.bMT(11,8,"core.pulltorefresh")),g.R7$(2),g.Y8G("hideUntil",e.loaded),g.R7$(),g.vxM(13,e.attempt?13:-1))},dependencies:[p.n,A.T3,v.QW,v.b_,v.I9,v.ME,v.tN,v.hU,v.W9,v.lO,v.eU,v.iq,v.uz,v.he,v.To,v.Ki,v.ln,v.BC,v.ai,v.el,P.R,h.T,y.t,C.B,R.O,M.i,f.D9,u.b],styles:["[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .core-warning-item[_ngcontent-%COMP%]{--inner-border-width: 0px}[_nghost-%COMP%]   .addon-mod_h5pactivity-result-grid[_ngcontent-%COMP%]{--ion-grid-padding: 0;--ion-grid-column-padding: 8px;font-size:1rem}[_nghost-%COMP%]   .addon-mod_h5pactivity-result-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding-inline-start:8px;padding-inline-end:8px}[_nghost-%COMP%]   .addon-mod_h5pactivity-result-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light)}[_nghost-%COMP%]   .addon-mod_h5pactivity-result-grid[_ngcontent-%COMP%]   ion-col[role=columnheader][_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   .addon-mod_h5pactivity-result-grid[_ngcontent-%COMP%]   ion-col[role=gridcell][_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;overflow-wrap:anywhere}[_nghost-%COMP%]   .addon-mod_h5pactivity-result-score[_ngcontent-%COMP%]{margin:16px;font-size:1rem;font-weight:700;text-align:end}[_nghost-%COMP%]   ion-item.addon-mod_h5pactivity-result-unsupported[_ngcontent-%COMP%]{--color-tint: var(--ion-color-warning-tint);--color-shade: var(--ion-color-warning-shade);--background: var(--color-tint);--color: var(--color-shade);border-radius:var(--mdl-shape-borderRadius-xs);margin-inline-start:16px;margin-inline-end:16px;margin-top:0;margin-bottom:16px}[_nghost-%COMP%]   ion-item.addon-mod_h5pactivity-result-unsupported[_ngcontent-%COMP%] > ion-icon[slot][_ngcontent-%COMP%]{color:var(--color-shade);margin-inline-end:16px}"]}),AddonModH5PActivityAttemptResultsPage})()}}]);