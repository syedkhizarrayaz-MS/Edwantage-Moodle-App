"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[81723],{31283:(e,t,n)=>{n.d(t,{m:()=>h});var o=n(10467),i=n(64766),a=n(20860),d=n(24742),r=n(79555),s=n(82907),l=n(20523),u=n(73793),m=n(86654),c=n(54438),p=n(2910),_=n(58197),g=n(73955),f=n(59528);const _forTrack0=(e,t)=>t.id;function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_8_Template(e,t){if(1&e&&(c.j41(0,"ion-item",5)(1,"ion-label")(2,"p",1),c.EFF(3),c.nI1(4,"translate"),c.k0s(),c.j41(5,"p"),c.EFF(6),c.k0s()()()),2&e){const e=c.XpG(2);c.R7$(3),c.JRh(c.bMT(4,2,"addon.mod_quiz.attemptduration")),c.R7$(3),c.JRh(e.timeTaken)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_9_Template(e,t){if(1&e&&(c.j41(0,"ion-item",6)(1,"ion-label")(2,"p",1),c.EFF(3),c.nI1(4,"translate"),c.k0s(),c.j41(5,"p"),c.EFF(6),c.k0s()()()),2&e){const e=c.XpG(2);c.R7$(3),c.JRh(c.bMT(4,2,"addon.mod_quiz.overdue")),c.R7$(3),c.JRh(e.overTime)}}function AddonModQuizAttemptInfoComponent_Conditional_14_For_11_Template(e,t){if(1&e&&(c.j41(0,"ion-item",7)(1,"ion-label")(2,"p",1),c.EFF(3),c.k0s(),c.nrm(4,"p",11),c.k0s()()),2&e){const e=t.$implicit;c.R7$(3),c.JRh(e.name),c.R7$(),c.Y8G("innerHTML",e.grade,c.npT)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_12_Template(e,t){if(1&e&&(c.j41(0,"ion-item",8)(1,"ion-label")(2,"p",1),c.EFF(3),c.nI1(4,"translate"),c.k0s(),c.j41(5,"p"),c.EFF(6),c.k0s()()()),2&e){const e=c.XpG(2);c.R7$(3),c.JRh(c.bMT(4,2,"addon.mod_quiz.marks")),c.R7$(3),c.JRh(e.readableMark)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_13_Template(e,t){if(1&e&&(c.j41(0,"ion-item",9)(1,"ion-label")(2,"p",1),c.EFF(3),c.nI1(4,"translate"),c.k0s(),c.nrm(5,"p",11),c.k0s()()),2&e){const e=c.XpG(2);c.R7$(3),c.JRh(c.bMT(4,2,"core.gradenoun")),c.R7$(2),c.Y8G("innerHTML",e.readableGrade,c.npT)}}function AddonModQuizAttemptInfoComponent_Conditional_14_For_15_Template(e,t){if(1&e&&(c.j41(0,"ion-item")(1,"ion-label")(2,"p",1),c.EFF(3),c.k0s(),c.nrm(4,"core-format-text",12),c.k0s()()),2&e){const e=t.$implicit,n=c.XpG(2);c.ZvI("ion-text-wrap addon-mod_quiz-attempt-",e.id,""),c.R7$(3),c.JRh(e.title),c.R7$(),c.Y8G("component",n.component)("componentId",n.quiz.coursemodule)("text",e.content)("contextInstanceId",n.quiz.coursemodule)("courseId",n.quiz.course)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Template(e,t){if(1&e&&(c.j41(0,"ion-item",4)(1,"ion-label")(2,"p",1),c.EFF(3),c.nI1(4,"translate"),c.k0s(),c.j41(5,"p"),c.EFF(6),c.nI1(7,"coreFormatDate"),c.k0s()()(),c.DNE(8,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_8_Template,7,4,"ion-item",5)(9,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_9_Template,7,4,"ion-item",6),c.Z7z(10,AddonModQuizAttemptInfoComponent_Conditional_14_For_11_Template,5,2,"ion-item",7,c.Vm6),c.DNE(12,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_12_Template,7,4,"ion-item",8)(13,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_13_Template,6,4,"ion-item",9),c.Z7z(14,AddonModQuizAttemptInfoComponent_Conditional_14_For_15_Template,5,9,"ion-item",10,_forTrack0)),2&e){const e=c.XpG();c.R7$(3),c.JRh(c.bMT(4,6,"addon.mod_quiz.completedon")),c.R7$(3),c.JRh(c.bMT(7,8,1e3*e.attempt.timefinish)),c.R7$(2),c.vxM(8,e.timeTaken?8:-1),c.R7$(),c.vxM(9,e.overTime?9:-1),c.R7$(),c.Dyx(e.gradeItemMarks),c.R7$(2),c.vxM(12,e.quiz.showAttemptsMarks&&e.readableMark&&null!==(null==e.attempt?null:e.attempt.sumgrades)?12:-1),c.R7$(),c.vxM(13,e.readableGrade?13:-1),c.R7$(),c.Dyx(e.additionalData)}}let h=(()=>{var e;class AddonModQuizAttemptInfoComponent{constructor(){this.isFinished=!1,this.readableMark="",this.readableGrade="",this.gradeItemMarks=[],this.component=a.Ar}ngOnChanges(e){var t=this;return(0,o.A)((function*(){var n;e.additionalData&&(null===(n=t.additionalData)||void 0===n||n.forEach((e=>{e.content=s.y.removeElementFromHtml(e.content,".helptooltip")})));if(!e.attempt)return;if(t.isFinished="finished"===t.attempt.state,!t.isFinished)return;const o=(t.attempt.timefinish||0)-(t.attempt.timestart||0);if(o>0?(t.timeTaken=d.j.formatTime(o),t.quiz.timelimit&&o>t.quiz.timelimit+60&&(t.overTime=d.j.formatTime(o-t.quiz.timelimit))):t.timeTaken=void 0,t.gradeItemMarks=null!==t.attempt.sumgrades&&t.attempt.gradeitemmarks?t.attempt.gradeitemmarks.map((e=>{var n,o;return{name:e.name,grade:r.HT.instant("addon.mod_quiz.outof",{$a:{grade:`<strong>${i.AddonModQuiz.formatGrade(e.grade,null===(n=t.quiz)||void 0===n?void 0:n.decimalpoints)}</strong>`,maxgrade:i.AddonModQuiz.formatGrade(e.maxgrade,null===(o=t.quiz)||void 0===o?void 0:o.decimalpoints)}})}})):[],!t.quiz.showAttemptsGrades)return;if(!(0,l.L)(t.attempt.rescaledGrade))return t.readableGrade=r.HT.instant("addon.mod_quiz.notyetgraded"),void 0;t.quiz.showAttemptsMarks&&(t.readableMark=r.HT.instant("addon.mod_quiz.outofshort",{$a:{grade:i.AddonModQuiz.formatGrade(t.attempt.sumgrades,t.quiz.decimalpoints),maxgrade:i.AddonModQuiz.formatGrade(t.quiz.sumgrades,t.quiz.decimalpoints)}}));const a={grade:`<strong>${i.AddonModQuiz.formatGrade(t.attempt.rescaledGrade,t.quiz.decimalpoints)}</strong>`,maxgrade:i.AddonModQuiz.formatGrade(t.quiz.grade,t.quiz.decimalpoints)};if(100!=t.quiz.grade){var u,m;const e=100*(null!==(u=t.attempt.sumgrades)&&void 0!==u?u:0)/(null!==(m=t.quiz.sumgrades)&&void 0!==m?m:1);a.percent=`<strong>${i.AddonModQuiz.formatGrade(e,t.quiz.decimalpoints)}</strong>`,t.readableGrade=r.HT.instant("addon.mod_quiz.outofpercent",{$a:a})}else t.readableGrade=r.HT.instant("addon.mod_quiz.outof",{$a:a})}))()}}return(e=AddonModQuizAttemptInfoComponent).ɵfac=function AddonModQuizAttemptInfoComponent_Factory(t){return new(t||e)},e.ɵcmp=c.VBU({type:e,selectors:[["addon-mod-quiz-attempt-info"]],inputs:{quiz:"quiz",attempt:"attempt",additionalData:"additionalData"},standalone:!0,features:[c.OA$,c.aNF],decls:15,vars:12,consts:[[1,"ion-text-wrap","addon-mod_quiz-attempt-status"],[1,"item-heading"],[3,"state","finishedOffline"],[1,"ion-text-wrap","addon-mod_quiz-attempt-startedon"],[1,"ion-text-wrap","addon-mod_quiz-attempt-completedon"],[1,"ion-text-wrap","addon-mod_quiz-attempt-duration"],[1,"ion-text-wrap","addon-mod_quiz-attempt-overdue"],[1,"ion-text-wrap","addon-mod_quiz-attempt-gradeitemmark"],[1,"ion-text-wrap","addon-mod_quiz-attempt-mark"],[1,"ion-text-wrap","addon-mod_quiz-attempt-grade"],[3,"class"],[3,"innerHTML"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"]],template:function AddonModQuizAttemptInfoComponent_Template(e,t){1&e&&(c.j41(0,"ion-item",0)(1,"ion-label")(2,"p",1),c.EFF(3),c.nI1(4,"translate"),c.k0s(),c.nrm(5,"addon-mod-quiz-attempt-state",2),c.k0s()(),c.j41(6,"ion-item",3)(7,"ion-label")(8,"p",1),c.EFF(9),c.nI1(10,"translate"),c.k0s(),c.j41(11,"p"),c.EFF(12),c.nI1(13,"coreFormatDate"),c.k0s()()(),c.DNE(14,AddonModQuizAttemptInfoComponent_Conditional_14_Template,16,10)),2&e&&(c.R7$(3),c.JRh(c.bMT(4,6,"addon.mod_quiz.attemptstate")),c.R7$(2),c.Y8G("state",t.attempt.state)("finishedOffline",t.attempt.finishedOffline),c.R7$(4),c.JRh(c.bMT(10,8,"addon.mod_quiz.startedon")),c.R7$(3),c.JRh(c.bMT(13,10,1e3*t.attempt.timestart)),c.R7$(2),c.vxM(14,t.isFinished?14:-1))},dependencies:[m.n,p.uz,p.he,_.B,g.D9,f.f,u.J],encapsulation:2}),AddonModQuizAttemptInfoComponent})()},73793:(e,t,n)=>{n.d(t,{J:()=>u});var o=n(10467),i=n(64766),a=n(91416),d=n(86654),r=n(54438),s=n(2910),l=n(86198);function AddonModQuizAttemptStateComponent_Conditional_1_Template(e,t){1&e&&r.nrm(0,"ion-icon",1)}let u=(()=>{var e;class AddonModQuizAttemptStateComponent{constructor(){this.state="",this.finishedOffline=!1,this.readableState="",this.color=""}ngOnChanges(){var e=this;return(0,o.A)((function*(){e.readableState=i.AddonModQuiz.getAttemptReadableStateName(e.state,e.finishedOffline),e.color=i.AddonModQuiz.getAttemptStateColor(e.state,e.finishedOffline)}))()}}return(e=AddonModQuizAttemptStateComponent).ɵfac=function AddonModQuizAttemptStateComponent_Factory(t){return new(t||e)},e.ɵcmp=r.VBU({type:e,selectors:[["addon-mod-quiz-attempt-state"]],inputs:{state:"state",finishedOffline:[r.Mj6.HasDecoratorInputTransform,"finishedOffline","finishedOffline",a.G]},standalone:!0,features:[r.GFd,r.OA$,r.aNF],decls:3,vars:3,consts:[[3,"color"],["name","fas-clock","aria-hidden","true"]],template:function AddonModQuizAttemptStateComponent_Template(e,t){1&e&&(r.j41(0,"ion-badge",0),r.DNE(1,AddonModQuizAttemptStateComponent_Conditional_1_Template,1,0,"ion-icon",1),r.EFF(2),r.k0s()),2&e&&(r.Y8G("color",t.color),r.R7$(),r.vxM(1,t.finishedOffline?1:-1),r.R7$(),r.SpI(" ",t.readableState,"\n"))},dependencies:[d.n,s.In,s.iq,l.t],styles:["[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-inline-start:0px;margin-inline-end:var(--mdl-spacing-1)}"]}),AddonModQuizAttemptStateComponent})()},81723:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var o=n(10467),i=n(69319),a=n(2910),d=n(15324),r=n(55554),s=n(82907),l=n(24742),u=n(64766),m=n(93918),c=n(22693),p=n(20860),_=n(93589),g=n(25572),f=n(79555),h=n(65377),z=n(31283),v=n(86654),A=n(58529),M=n(53794),R=n(33014),q=n(54438),I=n(60177),w=n(66198),b=n(64422),Q=n(86198),T=n(66731),P=n(88246),C=n(43570),k=n(73955);function AddonModQuizReviewPage_ion_button_10_Template(e,t){if(1&e){const e=q.RV6();q.j41(0,"ion-button",10),q.nI1(1,"translate"),q.bIt("click",(function AddonModQuizReviewPage_ion_button_10_Template_ion_button_click_0_listener(){q.eBV(e);const t=q.XpG();return q.Njj(t.openNavigation())})),q.nrm(2,"ion-icon",11),q.k0s()}2&e&&q.Y8G("ariaLabel",q.bMT(1,1,"addon.mod_quiz.opentoc"))}function AddonModQuizReviewPage_ion_card_16_Template(e,t){if(1&e&&(q.j41(0,"ion-card")(1,"ion-list"),q.nrm(2,"addon-mod-quiz-attempt-info",12),q.k0s()()),2&e){const e=q.XpG();q.R7$(2),q.Y8G("quiz",e.quiz)("attempt",e.attempt)("additionalData",e.additionalData)}}function AddonModQuizReviewPage_ng_container_17_ng_container_1_Template(e,t){if(1&e&&(q.qex(0),q.j41(1,"addon-mod-quiz-question-card",15),q.nrm(2,"core-question",16),q.k0s(),q.bVm()),2&e){const e=t.$implicit,n=q.XpG(2);q.R7$(),q.Y8G("question",e),q.R7$(),q.Y8G("question",e)("component",n.component)("componentId",n.cmId)("attemptId",n.attempt.id)("usageId",n.attempt.uniqueid)("offlineEnabled",!1)("contextInstanceId",n.cmId)("courseId",n.courseId)("review",!0)("preferredBehaviour",null==n.quiz?null:n.quiz.preferredbehaviour)}}function AddonModQuizReviewPage_ng_container_17_core_infinite_loading_2_Template(e,t){if(1&e){const e=q.RV6();q.j41(0,"core-infinite-loading",17),q.bIt("action",(function AddonModQuizReviewPage_ng_container_17_core_infinite_loading_2_Template_core_infinite_loading_action_0_listener(t){q.eBV(e);const n=q.XpG(2);return q.Njj(n.loadMore(t))})),q.k0s()}if(2&e){const e=q.XpG(2);q.Y8G("enabled",e.canLoadMore)}}function AddonModQuizReviewPage_ng_container_17_Template(e,t){if(1&e&&(q.qex(0),q.DNE(1,AddonModQuizReviewPage_ng_container_17_ng_container_1_Template,3,11,"ng-container",13)(2,AddonModQuizReviewPage_ng_container_17_core_infinite_loading_2_Template,1,1,"core-infinite-loading",14),q.bVm()),2&e){const e=q.XpG();q.R7$(),q.Y8G("ngForOf",e.questions),q.R7$(),q.Y8G("ngIf",e.showAll)}}function AddonModQuizReviewPage_div_18_ion_col_2_Template(e,t){if(1&e){const e=q.RV6();q.j41(0,"ion-col",24)(1,"ion-button",25),q.nI1(2,"translate"),q.bIt("click",(function AddonModQuizReviewPage_div_18_ion_col_2_Template_ion_button_click_1_listener(){q.eBV(e);const t=q.XpG(2);return q.Njj(t.changePage(t.previousPage))})),q.nrm(3,"ion-icon",26),q.k0s()()}if(2&e){const e=q.XpG(2);q.R7$(),q.Y8G("disabled",e.previousPage<0)("ariaLabel",q.bMT(2,2,"core.previous"))}}function AddonModQuizReviewPage_div_18_ion_button_4_span_1_Template(e,t){1&e&&(q.j41(0,"span"),q.EFF(1),q.nI1(2,"translate"),q.k0s()),2&e&&(q.R7$(),q.JRh(q.bMT(2,1,"addon.mod_quiz.showall")))}function AddonModQuizReviewPage_div_18_ion_button_4_span_2_Template(e,t){1&e&&(q.j41(0,"span"),q.EFF(1),q.nI1(2,"translate"),q.k0s()),2&e&&(q.R7$(),q.JRh(q.bMT(2,1,"addon.mod_quiz.showeachpage")))}function AddonModQuizReviewPage_div_18_ion_button_4_Template(e,t){if(1&e){const e=q.RV6();q.j41(0,"ion-button",27),q.bIt("click",(function AddonModQuizReviewPage_div_18_ion_button_4_Template_ion_button_click_0_listener(){q.eBV(e);const t=q.XpG(2);return q.Njj(t.switchMode())})),q.DNE(1,AddonModQuizReviewPage_div_18_ion_button_4_span_1_Template,3,3,"span",8)(2,AddonModQuizReviewPage_div_18_ion_button_4_span_2_Template,3,3,"span",8),q.k0s()}if(2&e){const e=q.XpG(2);q.R7$(),q.Y8G("ngIf",!e.showAll),q.R7$(),q.Y8G("ngIf",e.showAll)}}function AddonModQuizReviewPage_div_18_ion_col_5_Template(e,t){if(1&e){const e=q.RV6();q.j41(0,"ion-col",28)(1,"ion-button",25),q.nI1(2,"translate"),q.bIt("click",(function AddonModQuizReviewPage_div_18_ion_col_5_Template_ion_button_click_1_listener(){q.eBV(e);const t=q.XpG(2);return q.Njj(t.changePage(t.nextPage))})),q.nrm(3,"ion-icon",29),q.k0s()()}if(2&e){const e=q.XpG(2);q.R7$(),q.Y8G("disabled",e.nextPage>=e.numPages)("ariaLabel",q.bMT(2,2,"core.next"))}}function AddonModQuizReviewPage_div_18_Template(e,t){if(1&e&&(q.j41(0,"div",18)(1,"ion-row",19),q.DNE(2,AddonModQuizReviewPage_div_18_ion_col_2_Template,4,4,"ion-col",20),q.j41(3,"ion-col",21),q.DNE(4,AddonModQuizReviewPage_div_18_ion_button_4_Template,3,2,"ion-button",22),q.k0s(),q.DNE(5,AddonModQuizReviewPage_div_18_ion_col_5_Template,4,4,"ion-col",23),q.k0s()()),2&e){const e=q.XpG();q.R7$(2),q.Y8G("ngIf",!e.showAll),q.R7$(2),q.Y8G("ngIf",e.numPages>1),q.R7$(),q.Y8G("ngIf",!e.showAll)}}let $=(()=>{var e;class AddonModQuizReviewPage{constructor(e){this.elementRef=e,this.component=p.Ar,this.showAll=!1,this.numPages=1,this.showCompleted=!1,this.loaded=!1,this.navigation=[],this.questions=[],this.nextPage=-2,this.previousPage=-2,this.gradeItemMarks=[],this.canLoadMore=!1,this.allQuestions=[],this.logView=l.j.once((()=>this.performLogView(!0,{showAllDisabled:!this.showAll,page:this.currentPage})))}ngOnInit(){var e=this;return(0,o.A)((function*(){try{e.cmId=d.CoreNavigator.getRequiredRouteNumberParam("cmId"),e.courseId=d.CoreNavigator.getRequiredRouteNumberParam("courseId"),e.attemptId=d.CoreNavigator.getRequiredRouteNumberParam("attemptId"),e.currentPage=d.CoreNavigator.getRouteNumberParam("page")||0}catch(e){return g.CoreAlerts.showError(e),d.CoreNavigator.back(),void 0}try{yield e.fetchData()}finally{e.loaded=!0}}))()}changePage(e,t){var n=this;return(0,o.A)((function*(){var o,i;if(void 0!==t&&(-1===(null===(o=n.attempt)||void 0===o?void 0:o.currentpage)||e===n.currentPage))return n.scrollToQuestion(t),void 0;if(e!==n.currentPage){n.loaded=!1,null===(i=n.content)||void 0===i||i.scrollToTop();try{yield n.loadPage(e),n.performLogView(!1,{page:e})}catch(e){g.CoreAlerts.showError(e,{default:f.HT.instant("addon.mod_quiz.errorgetquestions")})}finally{n.loaded=!0,void 0!==t&&n.scrollToQuestion(t)}}}))()}fetchData(){var e=this;return(0,o.A)((function*(){try{e.quiz=yield u.AddonModQuiz.getQuiz(e.courseId,e.cmId),e.options=yield u.AddonModQuiz.getCombinedReviewOptions(e.quiz.id,{cmId:e.cmId}),m.AddonModQuizHelper.setQuizCalculatedData(e.quiz,e.options),yield e.loadNavigation(),yield e.loadPage(e.currentPage),e.logView()}catch(e){g.CoreAlerts.showError(e,{default:f.HT.instant("addon.mod_quiz.errorgetquiz")}),"noreview"!==e.errorcode&&"noreviewattempt"!==e.errorcode||d.CoreNavigator.back()}}))()}loadPage(e){var t=this;return(0,o.A)((function*(){if(!t.quiz)return;const n=yield u.AddonModQuiz.getAttemptReview(t.attemptId,{page:e,cmId:t.quiz.coursemodule});t.attempt=yield m.AddonModQuizHelper.setAttemptCalculatedData(t.quiz,n.attempt),t.attempt.currentpage=e,t.additionalData=n.additionaldata,t.currentPage=e,-1===e?(t.allQuestions=n.questions,t.questions=n.questions.slice(0,AddonModQuizReviewPage.QUESTIONS_PER_LOAD_WHEN_SHOW_ALL),t.canLoadMore=t.allQuestions.length>t.questions.length):(t.questions=n.questions,t.nextPage=e+1,t.previousPage=e-1),t.questions.forEach((e=>{e.readableMark=m.AddonModQuizHelper.getQuestionMarkFromHtml(e.html),i.CoreQuestionHelper.extractQuestionInfoBox(e,".info")}))}))()}loadMore(e){this.questions=this.questions.concat(this.allQuestions.slice(this.questions.length,this.questions.length+AddonModQuizReviewPage.QUESTIONS_PER_LOAD_WHEN_SHOW_ALL)),this.canLoadMore=this.allQuestions.length>this.questions.length,null==e||e()}loadNavigation(){var e=this;return(0,o.A)((function*(){var t;const n=yield u.AddonModQuiz.getAttemptReview(e.attemptId,{page:-1,cmId:null===(t=e.quiz)||void 0===t?void 0:t.coursemodule});e.navigation=n.questions,e.navigation.forEach((e=>{i.CoreQuestionHelper.populateQuestionStateClass(e)}));const o=n.questions[n.questions.length-1];e.numPages=o?o.page+1:0}))()}refreshData(e){var t=this;return(0,o.A)((function*(){const n=[];n.push(u.AddonModQuiz.invalidateQuizData(t.courseId)),n.push(u.AddonModQuiz.invalidateAttemptReview(t.attemptId)),t.quiz&&n.push(u.AddonModQuiz.invalidateCombinedReviewOptionsForUser(t.quiz.id)),yield r.g.ignoreErrors(Promise.all(n));try{yield t.fetchData()}finally{e.complete()}}))()}scrollToQuestion(e){var t=this;return(0,o.A)((function*(){if(t.showAll&&t.canLoadMore){const n=t.allQuestions.findIndex((t=>t.slot===e));if(n>t.questions.length){const e=yield R.CoreLoadings.show(),o=Math.ceil(n/AddonModQuizReviewPage.QUESTIONS_PER_LOAD_WHEN_SHOW_ALL)*AddonModQuizReviewPage.QUESTIONS_PER_LOAD_WHEN_SHOW_ALL;t.questions=t.questions.concat(t.allQuestions.slice(t.questions.length,o)),t.canLoadMore=t.allQuestions.length>t.questions.length,yield M.H.nextTicks(5),yield e.dismiss(),yield M.H.nextTick()}}s.y.scrollToElement(t.elementRef.nativeElement,`#addon-mod_quiz-question-${e}`)}))()}switchMode(){var e=this;return(0,o.A)((function*(){e.showAll=!e.showAll,yield e.loadPage(e.showAll?-1:0),e.performLogView(!1,{showAllDisabled:!e.showAll})}))()}openNavigation(){var e=this;return(0,o.A)((function*(){var t;const{AddonModQuizNavigationModalComponent:o}=yield n.e(12423).then(n.bind(n,12423)),i=yield _.I.openSideModal({component:o,componentProps:{navigation:e.navigation,summaryShown:!1,currentPage:null===(t=e.attempt)||void 0===t?void 0:t.currentpage,nextPage:e.nextPage,isReview:!0,isSequential:e.quiz&&u.AddonModQuiz.isNavigationSequential(e.quiz)}});i&&e.changePage(i.page,i.slot)}))()}performLogView(e=!1,t={}){var n=this;return(0,o.A)((function*(){if(!n.quiz)return;e&&(yield r.g.ignoreErrors(u.AddonModQuiz.logViewAttemptReview(n.attemptId,n.quiz.id)));let o=`/mod/quiz/review.php?attempt=${n.attemptId}&cmid=${n.cmId}`;t.showAllDisabled?o+="&showall=0":t.page&&t.page>0&&(o+=`&page=${t.page}`),c.OF.logEvent({type:c.qr.VIEW_ITEM,ws:"mod_quiz_view_attempt_review",name:n.quiz.name,data:{id:n.attemptId,quizid:n.quiz.id,page:t.page,category:"quiz"},url:o})}))()}}return(e=AddonModQuizReviewPage).QUESTIONS_PER_LOAD_WHEN_SHOW_ALL=10,e.ɵfac=function AddonModQuizReviewPage_Factory(t){return new(t||e)(q.rXU(q.aKT))},e.ɵcmp=q.VBU({type:e,selectors:[["page-addon-mod-quiz-review"]],viewQuery:function AddonModQuizReviewPage_Query(e,t){if(1&e&&q.GBs(a.W9,5),2&e){let e;q.mGM(e=q.lsd())&&(t.content=e.first)}},standalone:!0,features:[q.aNF],decls:19,vars:15,consts:[["slot","start"],[3,"text"],["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel","click",4,"ngIf"],[1,"limited-width"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],[4,"ngIf"],["collapsible-footer","","appearOnBottom","","slot","fixed",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-list-ul","slot","icon-only","aria-hidden","true"],[3,"quiz","attempt","additionalData"],[4,"ngFor","ngForOf"],[3,"enabled","action",4,"ngIf"],[3,"question"],["contextLevel","module",1,"ion-text-wrap",3,"question","component","componentId","attemptId","usageId","offlineEnabled","contextInstanceId","courseId","review","preferredBehaviour"],[3,"action","enabled"],["collapsible-footer","","appearOnBottom","","slot","fixed"],[1,"ion-justify-content-between","ion-align-items-center","ion-no-padding","ion-wrap"],["class","ion-text-start ion-no-padding core-navigation-arrow","size","auto",4,"ngIf"],[1,"ion-text-center"],["class","ion-text-wrap","fill","outline",3,"click",4,"ngIf"],["class","ion-text-end ion-no-padding core-navigation-arrow","size","auto",4,"ngIf"],["size","auto",1,"ion-text-start","ion-no-padding","core-navigation-arrow"],["fill","clear",3,"click","disabled","ariaLabel"],["name","fas-chevron-left","slot","icon-only","aria-hidden","true"],["fill","outline",1,"ion-text-wrap",3,"click"],["size","auto",1,"ion-text-end","ion-no-padding","core-navigation-arrow"],["name","fas-chevron-right","slot","icon-only","aria-hidden","true"]],template:function AddonModQuizReviewPage_Template(e,t){1&e&&(q.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),q.nrm(3,"ion-back-button",1),q.nI1(4,"translate"),q.k0s(),q.j41(5,"ion-title")(6,"h1"),q.EFF(7),q.nI1(8,"translate"),q.k0s()(),q.j41(9,"ion-buttons",2),q.DNE(10,AddonModQuizReviewPage_ion_button_10_Template,3,3,"ion-button",3),q.k0s()()(),q.j41(11,"ion-content",4)(12,"ion-refresher",5),q.bIt("ionRefresh",(function AddonModQuizReviewPage_Template_ion_refresher_ionRefresh_12_listener(e){return t.refreshData(e.target)})),q.nrm(13,"ion-refresher-content",6),q.nI1(14,"translate"),q.k0s(),q.j41(15,"core-loading",7),q.DNE(16,AddonModQuizReviewPage_ion_card_16_Template,3,3,"ion-card",8)(17,AddonModQuizReviewPage_ng_container_17_Template,3,2,"ng-container",8)(18,AddonModQuizReviewPage_div_18_Template,6,3,"div",9),q.k0s()()),2&e&&(q.R7$(3),q.Y8G("text",q.bMT(4,9,"core.back")),q.R7$(4),q.JRh(q.bMT(8,11,"addon.mod_quiz.review")),q.R7$(3),q.Y8G("ngIf",t.navigation.length),q.R7$(2),q.Y8G("disabled",!t.loaded),q.R7$(),q.FS9("pullingText",q.bMT(14,13,"core.pulltorefresh")),q.R7$(2),q.Y8G("hideUntil",t.loaded),q.R7$(),q.Y8G("ngIf",t.attempt),q.R7$(),q.Y8G("ngIf",t.attempt&&t.questions.length),q.R7$(),q.Y8G("ngIf",t.loaded&&t.numPages>1))},dependencies:[v.n,I.Sq,I.bT,a.Jm,a.QW,a.b_,a.hU,a.W9,a.eU,a.iq,a.nf,a.To,a.Ki,a.ln,a.BC,a.ai,a.el,w.b,b.R,Q.t,T.i,P.i,C.T,k.D9,z.m,h.P,A.CoreQuestionComponent],encapsulation:2}),AddonModQuizReviewPage})()}}]);