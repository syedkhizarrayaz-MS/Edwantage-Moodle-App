"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[43999],{43999:(n,o,t)=>{t.r(o),t.d(o,{AddonQtypeEssayComponent:()=>x});var e=t(10467),i=t(1762),a=t(69319),s=t(75383),d=t(24942),l=t(54090),p=t(41450),_=t(86654),m=t(54438),c=t(89417),r=t(60177),C=t(2910),u=t(95638),y=t(31498),f=t(58197),I=t(73955);const _c0=n=>({"core-monospaced":n});function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_1_Template(n,o){if(1&n&&m.nrm(0,"input",2),2&n){const n=m.XpG(4);m.Y8G("name",n.question.formatInput.name)("value",n.question.formatInput.value)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_2_Template(n,o){if(1&n&&m.nrm(0,"input",2),2&n){const n=m.XpG(4);m.Y8G("name",n.question.answerDraftIdInput.name)("value",n.question.answerDraftIdInput.value)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_3_Template(n,o){if(1&n&&(m.nrm(0,"ion-textarea",3),m.nI1(1,"translate"),m.nI1(2,"translate")),2&n){const n=m.XpG(4);m.FS9("placeholder",m.bMT(1,5,"core.question.answer")),m.Y8G("ariaLabel",m.bMT(2,7,"core.question.answer"))("ngClass",m.eq3(9,_c0,n.question.isMonospaced))("ngModel",n.question.textarea.text),m.BMQ("name",n.question.textarea.name)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_4_Template(n,o){if(1&n&&(m.nrm(0,"core-rich-text-editor",4),m.nI1(1,"translate"),m.nI1(2,"translate")),2&n){const n=m.XpG(4);m.FS9("placeholder",m.bMT(1,7,"core.question.answer")),m.Y8G("control",n.formControl)("name",n.question.textarea.name)("component",n.component)("componentId",n.componentId)("autoSave",!1),m.BMQ("aria-label",m.bMT(2,9,"core.question.answer"))}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Template(n,o){if(1&n&&(m.j41(0,"ion-item"),m.DNE(1,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_1_Template,1,2,"input",2)(2,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_2_Template,1,2,"input",2)(3,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_3_Template,3,11,"ion-textarea",3)(4,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Conditional_4_Template,3,11),m.k0s()),2&n){const n=m.XpG(3);m.R7$(),m.vxM(1,n.question.formatInput?1:-1),m.R7$(),m.vxM(2,n.question.answerDraftIdInput?2:-1),m.R7$(),m.vxM(3,n.question.isPlainText?3:4)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_1_Template(n,o){if(1&n&&(m.j41(0,"ion-item",5)(1,"ion-label",6),m.EFF(2),m.nI1(3,"translate"),m.k0s()(),m.j41(4,"ion-item",0)(5,"ion-label"),m.nrm(6,"core-format-text",1),m.k0s()()),2&n){const n=m.XpG(3);m.R7$(2),m.SpI(" ",m.bMT(3,7,"core.question.errorembeddedfilesnotsupportedinsite")," "),m.R7$(4),m.Y8G("component",n.component)("componentId",n.componentId)("text",n.question.textarea.text)("contextLevel",n.contextLevel)("contextInstanceId",n.contextInstanceId)("courseId",n.courseId)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Conditional_0_Template(n,o){if(1&n&&m.nrm(0,"core-attachments",7),2&n){const n=m.XpG(4);m.Y8G("files",n.attachments)("component",n.component)("componentId",n.componentId)("maxSize",n.question.attachmentsMaxBytes)("maxSubmissions",n.question.attachmentsMaxFiles)("allowOffline",n.offlineEnabled)("acceptedTypes",n.question.attachmentsAcceptedTypes)("courseId",n.courseId)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Conditional_1_Template(n,o){if(1&n&&m.nrm(0,"input",2),2&n){const n=m.XpG(4);m.Y8G("name",n.question.attachmentsDraftIdInput.name)("value",n.question.attachmentsDraftIdInput.value)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Conditional_2_Template(n,o){1&n&&(m.j41(0,"ion-item",5)(1,"ion-label",6),m.EFF(2),m.nI1(3,"translate"),m.k0s()()),2&n&&(m.R7$(2),m.SpI(" ",m.bMT(3,1,"core.question.errorattachmentsnotsupportedinsite")," "))}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Template(n,o){if(1&n&&m.DNE(0,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Conditional_0_Template,1,8,"core-attachments",7)(1,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Conditional_1_Template,1,2,"input",2)(2,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Conditional_2_Template,4,3,"ion-item",5),2&n){const n=m.XpG(3);m.vxM(0,n.uploadFilesSupported&&n.question.attachmentsDraftIdInput?0:-1),m.R7$(),m.vxM(1,n.question.attachmentsDraftIdInput?1:-1),m.R7$(),m.vxM(2,n.uploadFilesSupported?-1:2)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_4_Template(n,o){if(1&n&&m.DNE(0,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_0_Template,5,3,"ion-item")(1,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_1_Template,7,9)(2,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Conditional_2_Template,3,3),2&n){const n=m.XpG(2);m.vxM(0,!n.question.textarea||n.question.hasDraftFiles&&!n.uploadFilesSupported?n.question.textarea?1:-1:0),m.R7$(2),m.vxM(2,n.question.allowsAttachments?2:-1)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_0_Template(n,o){if(1&n&&(m.j41(0,"ion-item",0)(1,"ion-label"),m.nrm(2,"core-format-text",9),m.k0s()()),2&n){const n=m.XpG(3);m.R7$(2),m.Y8G("ngClass",m.eq3(7,_c0,n.question.isMonospaced))("component",n.component)("componentId",n.componentId)("text",n.question.answer)("contextLevel",n.contextLevel)("contextInstanceId",n.contextInstanceId)("courseId",n.courseId)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_1_Template(n,o){if(1&n&&(m.j41(0,"ion-item",0)(1,"ion-label"),m.nrm(2,"core-format-text",1),m.k0s()()),2&n){const n=m.XpG(3);m.R7$(2),m.Y8G("component",n.component)("componentId",n.componentId)("text",n.question.wordCountInfo)("contextLevel",n.contextLevel)("contextInstanceId",n.contextInstanceId)("courseId",n.courseId)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_2_Template(n,o){if(1&n&&(m.j41(0,"ion-item",0)(1,"ion-label"),m.nrm(2,"core-format-text",1),m.k0s()()),2&n){const n=m.XpG(3);m.R7$(2),m.Y8G("component",n.component)("componentId",n.componentId)("text",n.question.answerPlagiarism)("contextLevel",n.contextLevel)("contextInstanceId",n.contextInstanceId)("courseId",n.courseId)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_3_Template(n,o){if(1&n&&m.nrm(0,"core-files",8),2&n){const n=m.XpG(3);m.Y8G("files",n.question.attachments)("component",n.component)("componentId",n.componentId)("extraHtml",n.question.attachmentsPlagiarisms)}}function AddonQtypeEssayComponent_Conditional_0_Conditional_5_Template(n,o){if(1&n&&m.DNE(0,AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_0_Template,3,9,"ion-item",0)(1,AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_1_Template,3,6,"ion-item",0)(2,AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_2_Template,3,6,"ion-item",0)(3,AddonQtypeEssayComponent_Conditional_0_Conditional_5_Conditional_3_Template,1,4,"core-files",8),2&n){const n=m.XpG(2);m.vxM(0,n.question.answer||""===n.question.answer?0:-1),m.R7$(),m.vxM(1,n.question.wordCountInfo?1:-1),m.R7$(),m.vxM(2,n.question.answerPlagiarism?2:-1),m.R7$(),m.vxM(3,n.question.attachments?3:-1)}}function AddonQtypeEssayComponent_Conditional_0_Template(n,o){if(1&n&&(m.j41(0,"ion-list")(1,"ion-item",0)(2,"ion-label"),m.nrm(3,"core-format-text",1),m.k0s()(),m.DNE(4,AddonQtypeEssayComponent_Conditional_0_Conditional_4_Template,3,2)(5,AddonQtypeEssayComponent_Conditional_0_Conditional_5_Template,4,4),m.k0s()),2&n){const n=m.XpG();m.R7$(3),m.Y8G("component",n.component)("componentId",n.componentId)("text",n.question.text)("contextLevel",n.contextLevel)("contextInstanceId",n.contextInstanceId)("courseId",n.courseId),m.R7$(),m.vxM(4,n.review?-1:4),m.R7$(),m.vxM(5,n.review?5:-1)}}let x=(()=>{var n;class AddonQtypeEssayComponent extends i.g{constructor(n,o){super("AddonQtypeEssayComponent",n),this.fb=o,this.uploadFilesSupported=!1}init(){var n,o,t;if(!this.question)return this.onReadyPromise.resolve(),void 0;this.uploadFilesSupported=void 0!==this.question.responsefileareas,this.initEssayComponent(this.review),this.formControl=this.fb.control(null!==(n=null===(o=this.question)||void 0===o||null===(o=o.textarea)||void 0===o?void 0:o.text)&&void 0!==n?n:null),null!==(t=this.question)&&void 0!==t&&t.allowsAttachments&&this.uploadFilesSupported&&!this.review&&this.loadAttachments(),this.onReadyPromise.resolve()}loadAttachments(){var n=this;return(0,e.A)((function*(){var o;if(n.question){if(n.offlineEnabled&&null!==(o=n.question.localAnswers)&&void 0!==o&&o.attachments_offline){const o=s.Ni.parseJSON(n.question.localAnswers.attachments_offline,{online:[],offline:0});let t=[];o.offline&&(t=yield a.CoreQuestionHelper.getStoredQuestionFiles(n.question,n.component||"",n.componentId||-1)),n.attachments=[...o.online,...t]}else n.attachments=Array.from(a.CoreQuestionHelper.getResponseFileAreaFiles(n.question,"attachments"));d.CoreFileSession.setFiles(n.component||"",l.CoreQuestion.getQuestionComponentId(n.question,n.componentId||-1),n.attachments)}}))()}}return(n=AddonQtypeEssayComponent).ɵfac=function AddonQtypeEssayComponent_Factory(o){return new(o||n)(m.rXU(m.aKT),m.rXU(c.ok))},n.ɵcmp=m.VBU({type:n,selectors:[["addon-qtype-essay"]],standalone:!0,features:[m.Vt3,m.aNF],decls:1,vars:1,consts:[[1,"ion-text-wrap"],[3,"component","componentId","text","contextLevel","contextInstanceId","courseId"],["type","hidden",3,"name","value"],[1,"core-question-textarea",3,"ariaLabel","ngClass","placeholder","ngModel"],[3,"placeholder","control","name","component","componentId","autoSave"],[1,"ion-text-wrap","core-danger-item"],[1,"core-question-warning"],[3,"files","component","componentId","maxSize","maxSubmissions","allowOffline","acceptedTypes","courseId"],[3,"files","component","componentId","extraHtml"],[3,"ngClass","component","componentId","text","contextLevel","contextInstanceId","courseId"]],template:function AddonQtypeEssayComponent_Template(n,o){1&n&&m.DNE(0,AddonQtypeEssayComponent_Conditional_0_Template,6,8,"ion-list"),2&n&&m.vxM(0,o.question&&(o.question.text||""===o.question.text)?0:-1)},dependencies:[_.n,r.YU,c.BC,c.vS,C.uz,C.he,C.nf,C.nc,C.Gw,u.V,y.Y,f.B,I.D9,p.CoreEditorRichTextEditorComponent],encapsulation:2}),AddonQtypeEssayComponent})()}}]);