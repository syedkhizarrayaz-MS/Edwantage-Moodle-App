"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[75959,67192],{67192:(e,o,n)=>{n.r(o),n.d(o,{CoreBlockSideBlocksButtonComponent:()=>_});var t=n(10467),s=n(93589),r=n(82907),a=n(86654),i=n(74037),l=n(54438),c=n(2910),d=n(43570),u=n(73955);let b=(()=>{var e;class CoreBlockSideBlocksTourComponent{dismiss(){return(0,t.A)((function*(){yield i.E.dismiss()}))()}}return(e=CoreBlockSideBlocksTourComponent).ɵfac=function CoreBlockSideBlocksTourComponent_Factory(o){return new(o||e)},e.ɵcmp=l.VBU({type:e,selectors:[["core-block-side-blocks-tour"]],standalone:!0,features:[l.aNF],decls:9,vars:9,consts:[["expand","block",3,"click"]],template:function CoreBlockSideBlocksTourComponent_Template(e,o){1&e&&(l.j41(0,"h1"),l.EFF(1),l.nI1(2,"translate"),l.k0s(),l.j41(3,"p"),l.EFF(4),l.nI1(5,"translate"),l.k0s(),l.j41(6,"ion-button",0),l.bIt("click",(function CoreBlockSideBlocksTourComponent_Template_ion_button_click_6_listener(){return o.dismiss()})),l.EFF(7),l.nI1(8,"translate"),l.k0s()),2&e&&(l.R7$(),l.JRh(l.bMT(2,3,"core.block.tour_navigation_dashboard_title")),l.R7$(3),l.JRh(l.bMT(5,5,"core.block.tour_navigation_dashboard_content")),l.R7$(3),l.SpI(" ",l.bMT(8,7,"core.endonesteptour"),"\n"))},dependencies:[a.n,c.Jm,d.T,u.D9],styles:["[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:var(--mdl-typography-heading2-fontSize)}[_nghost-%COMP%]   h1[_ngcontent-%COMP%], [_nghost-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}"]}),CoreBlockSideBlocksTourComponent})();var C=n(86198),h=n(8759);let _=(()=>{var e;class CoreBlockSideBlocksButtonComponent{constructor(e){this.userTour={id:"side-blocks-button",component:b,side:"start",alignment:"center",after:"user-menu",afterTimeout:1e3,getFocusedElement:e=>{var o,n;const t=Array.from(null!==(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.children)&&void 0!==o?o:[]).find((e=>"BUTTON"===e.tagName));return null!=t?t:e}},this.element=e.nativeElement}ngOnInit(){var e=this;return(0,t.A)((function*(){e.slotPromise=r.y.slotOnContent(e.element)}))()}openBlocks(){var e=this;return(0,t.A)((function*(){const{CoreBlockSideBlocksComponent:o}=yield Promise.all([n.e(72076),n.e(262)]).then(n.bind(n,262));s.I.openSideModal({component:o,componentProps:{contextLevel:e.contextLevel,instanceId:e.instanceId,myDashboardPage:e.myDashboardPage}})}))()}ngOnDestroy(){var e;null===(e=this.slotPromise)||void 0===e||e.cancel()}}return(e=CoreBlockSideBlocksButtonComponent).ɵfac=function CoreBlockSideBlocksButtonComponent_Factory(o){return new(o||e)(l.rXU(l.aKT))},e.ɵcmp=l.VBU({type:e,selectors:[["core-block-side-blocks-button"]],inputs:{contextLevel:"contextLevel",instanceId:"instanceId",myDashboardPage:"myDashboardPage"},standalone:!0,features:[l.aNF],decls:3,vars:4,consts:[["color","secondary",3,"click","userTour","ariaLabel"],["name","fas-chevron-left","slot","icon-only","aria-hidden","true"]],template:function CoreBlockSideBlocksButtonComponent_Template(e,o){1&e&&(l.j41(0,"ion-button",0),l.nI1(1,"translate"),l.bIt("click",(function CoreBlockSideBlocksButtonComponent_Template_ion_button_click_0_listener(){return o.openBlocks()})),l.nrm(2,"ion-icon",1),l.k0s()),2&e&&l.Y8G("userTour",o.userTour)("ariaLabel",l.bMT(1,2,"core.block.opendrawerblocks"))},dependencies:[a.n,c.Jm,c.iq,C.t,d.T,h.g,u.D9],styles:["[_nghost-%COMP%]{top:50%;position:fixed;z-index:10;transform:translateY(-50%)}@supports (inset-inline-start: 0){[_nghost-%COMP%]{inset-inline-end:0px}}@supports not (inset-inline-start: 0){[_nghost-%COMP%]{right:0}[dir=rtl][_nghost-%COMP%], [dir=rtl]   [_nghost-%COMP%]{left:unset;right:unset;left:0}@supports selector(:dir(rtl)){[_nghost-%COMP%]:dir(rtl){left:unset;right:unset;left:0}}}[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;--padding-start: .5em;--padding-end: 0;--core-input-radius: 2em 0 0 2em;height:56px;--box-shadow: 0 3px 5px -1px rgb(0 0 0 / 20%), 0 6px 10px 0 rgb(0 0 0 / 14%), 0 1px 18px 0 rgb(0 0 0 / 12%)}[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){transition:padding .2s ease-in-out}[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--padding-end: 1.2em;--padding-start: 1em}[dir=rtl][_nghost-%COMP%]   ion-button[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]{--core-input-radius: 0 2em 2em 0}"]}),CoreBlockSideBlocksButtonComponent})()},75959:(e,o,n)=>{n.r(o),n.d(o,{default:()=>S});var t=n(10467),s=n(66110),r=n(49882),a=n(52749),i=n(50572),l=n(44666),c=n(15324),d=n(63114),u=n(24742),b=n(22693),C=n(79555),h=n(55554),_=n(25572),p=n(67192),g=n(86654),m=n(54438),k=n(60177),f=n(2910),B=n(16986),D=n(64422),P=n(13988),v=n(86198),T=n(88246),I=n(43570),y=n(73955);function CoreCoursesDashboardPage_ion_button_1_Template(e,o){if(1&e){const e=m.RV6();m.j41(0,"ion-button",8),m.nI1(1,"translate"),m.bIt("click",(function CoreCoursesDashboardPage_ion_button_1_Template_ion_button_click_0_listener(){m.eBV(e);const o=m.XpG();return m.Njj(o.openSearch())})),m.nrm(2,"ion-icon",9),m.k0s()}2&e&&m.Y8G("ariaLabel",m.bMT(1,1,"core.courses.searchcourses"))}function CoreCoursesDashboardPage_ion_list_7_ng_container_1_core_block_1_Template(e,o){if(1&e&&m.nrm(0,"core-block",13),2&e){const e=m.XpG().$implicit,o=m.XpG(2);m.Y8G("block",e)("instanceId",o.userId)}}function CoreCoursesDashboardPage_ion_list_7_ng_container_1_Template(e,o){if(1&e&&(m.qex(0),m.DNE(1,CoreCoursesDashboardPage_ion_list_7_ng_container_1_core_block_1_Template,1,2,"core-block",12),m.bVm()),2&e){const e=o.$implicit;m.R7$(),m.Y8G("ngIf",e.visible)}}function CoreCoursesDashboardPage_ion_list_7_Template(e,o){if(1&e&&(m.j41(0,"ion-list",10),m.DNE(1,CoreCoursesDashboardPage_ion_list_7_ng_container_1_Template,2,1,"ng-container",11),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.blocks)}}function CoreCoursesDashboardPage_core_block_side_blocks_button_8_Template(e,o){if(1&e&&m.nrm(0,"core-block-side-blocks-button",14),2&e){const e=m.XpG();m.Y8G("instanceId",e.userId)}}function CoreCoursesDashboardPage_core_empty_box_9_Template(e,o){1&e&&(m.nrm(0,"core-empty-box",15),m.nI1(1,"translate")),2&e&&m.Y8G("message",m.bMT(1,1,"core.course.nocontentavailable"))}let S=(()=>{var e;class CoreCoursesDashboardPage{constructor(){this.hasMainBlocks=!1,this.hasSideBlocks=!1,this.searchEnabled=!1,this.downloadCourseEnabled=!1,this.downloadCoursesEnabled=!1,this.blocks=[],this.loaded=!1,this.updateSiteObserver=r.z.on(r.z.SITE_UPDATED,(()=>{this.searchEnabled=!s.CoreCourses.isSearchCoursesDisabledInSite(),this.downloadCourseEnabled=!s.CoreCourses.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!s.CoreCourses.isDownloadCoursesDisabledInSite()}),a.CoreSites.getCurrentSiteId()),this.logView=u.j.once((0,t.A)((function*(){yield h.g.ignoreErrors(s.CoreCourses.logView("dashboard")),b.OF.logEvent({type:b.qr.VIEW_ITEM,ws:"core_my_view_page",name:C.HT.instant("core.courses.mymoodle"),data:{category:"course",page:"dashboard"},url:"/my/"})})))}ngOnInit(){this.searchEnabled=!s.CoreCourses.isSearchCoursesDisabledInSite(),this.downloadCourseEnabled=!s.CoreCourses.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!s.CoreCourses.isDownloadCoursesDisabledInSite(),this.loadContent()}loadContent(){var e=this;return(0,t.A)((function*(){const o=yield i.CoreCoursesDashboard.isAvailable(),n=yield i.CoreCoursesDashboard.isDisabled();if(o&&!n){e.userId=a.CoreSites.getCurrentSiteUserId();try{const o=yield i.CoreCoursesDashboard.getDashboardBlocks();e.blocks=o.mainBlocks,e.hasMainBlocks=d.CoreBlockDelegate.hasSupportedBlock(o.mainBlocks),e.hasSideBlocks=d.CoreBlockDelegate.hasSupportedBlock(o.sideBlocks)}catch(o){_.CoreAlerts.showError(o),e.loadFallbackBlocks()}}else o?e.blocks=[]:e.loadFallbackBlocks();e.loaded=!0,e.logView()}))()}loadFallbackBlocks(){this.blocks=[{name:"myoverview",visible:!0},{name:"timeline",visible:!0}],this.hasMainBlocks=d.CoreBlockDelegate.isBlockSupported("myoverview")||d.CoreBlockDelegate.isBlockSupported("timeline")}refreshDashboard(e){var o;const n=[];n.push(i.CoreCoursesDashboard.invalidateDashboardBlocks()),null===(o=this.blocksComponents)||void 0===o||o.forEach((e=>{n.push(e.invalidate().catch((()=>{})))})),Promise.all(n).finally((()=>{this.loadContent().finally((()=>{null==e||e.complete()}))}))}openSearch(){return(0,t.A)((function*(){c.CoreNavigator.navigateToSitePath("/courses/list",{params:{mode:"search"}})}))()}ngOnDestroy(){this.updateSiteObserver.off()}}return(e=CoreCoursesDashboardPage).ɵfac=function CoreCoursesDashboardPage_Factory(o){return new(o||e)},e.ɵcmp=m.VBU({type:e,selectors:[["page-core-courses-dashboard"]],viewQuery:function CoreCoursesDashboardPage_Query(e,o){if(1&e&&m.GBs(l.CoreBlockComponent,5),2&e){let e;m.mGM(e=m.lsd())&&(o.blocksComponents=e)}},standalone:!0,features:[m.aNF],decls:10,vars:9,consts:[["slot","end","prepend",""],[3,"ariaLabel","click",4,"ngIf"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],["placeholderType","column","placeholderHeight","96px",3,"hideUntil"],["class","list-item-limited-width",4,"ngIf"],["slot","fixed","contextLevel","user",3,"instanceId",4,"ngIf"],["icon","fas-cubes",3,"message",4,"ngIf"],[3,"click","ariaLabel"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],[1,"list-item-limited-width"],[4,"ngFor","ngForOf"],["contextLevel","user",3,"block","instanceId",4,"ngIf"],["contextLevel","user",3,"block","instanceId"],["slot","fixed","contextLevel","user",3,"instanceId"],["icon","fas-cubes",3,"message"]],template:function CoreCoursesDashboardPage_Template(e,o){1&e&&(m.j41(0,"core-navbar-buttons",0),m.DNE(1,CoreCoursesDashboardPage_ion_button_1_Template,3,3,"ion-button",1),m.k0s(),m.j41(2,"ion-content")(3,"ion-refresher",2),m.bIt("ionRefresh",(function CoreCoursesDashboardPage_Template_ion_refresher_ionRefresh_3_listener(e){return o.refreshDashboard(e.target)})),m.nrm(4,"ion-refresher-content",3),m.nI1(5,"translate"),m.k0s(),m.j41(6,"core-loading",4),m.DNE(7,CoreCoursesDashboardPage_ion_list_7_Template,2,1,"ion-list",5)(8,CoreCoursesDashboardPage_core_block_side_blocks_button_8_Template,1,1,"core-block-side-blocks-button",6)(9,CoreCoursesDashboardPage_core_empty_box_9_Template,2,3,"core-empty-box",7),m.k0s()()),2&e&&(m.R7$(),m.Y8G("ngIf",o.searchEnabled),m.R7$(2),m.Y8G("disabled",!o.loaded),m.R7$(),m.FS9("pullingText",m.bMT(5,7,"core.pulltorefresh")),m.R7$(2),m.Y8G("hideUntil",o.loaded),m.R7$(),m.Y8G("ngIf",o.hasMainBlocks),m.R7$(),m.Y8G("ngIf",o.hasSideBlocks),m.R7$(),m.Y8G("ngIf",!o.hasMainBlocks))},dependencies:[g.n,k.Sq,k.bT,f.Jm,f.W9,f.iq,f.nf,f.To,f.Ki,B.h,D.R,P.c,v.t,T.i,I.T,y.D9,l.CoreBlockComponent,p.CoreBlockSideBlocksButtonComponent],encapsulation:2}),CoreCoursesDashboardPage})()}}]);