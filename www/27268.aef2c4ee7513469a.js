"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[27268],{27268:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var o=n(10467),i=n(52749),a=n(82461),r=n(15324),l=n(7310),s=n(89818),c=n(33014),g=n(25572),d=n(79555),_=n(86654),u=n(54438),b=n(60177),p=n(2910),m=n(64422),f=n(69418),L=n(19858),h=n(86198),C=n(88246),S=n(43570),k=n(73955);const _c0=e=>({count:e});function CoreLoginSitesPage_ion_button_10_Template(e,t){if(1&e){const e=u.RV6();u.j41(0,"ion-button",14),u.nI1(1,"translate"),u.bIt("click",(function CoreLoginSitesPage_ion_button_10_Template_ion_button_click_0_listener(){u.eBV(e);const t=u.XpG();return u.Njj(t.toggleDelete())})),u.nrm(2,"ion-icon",15),u.k0s()}2&e&&u.Y8G("ariaLabel",u.bMT(1,1,"core.login.toggleremove"))}function CoreLoginSitesPage_ng_template_17_ion_badge_0_Template(e,t){if(1&e&&(u.j41(0,"ion-badge",3)(1,"span",18),u.EFF(2),u.k0s(),u.j41(3,"span",13),u.EFF(4),u.nI1(5,"translate"),u.k0s()()),2&e){const e=u.XpG().site;u.Y8G("@coreShowHideAnimation",void 0),u.R7$(2),u.JRh(e.badge),u.R7$(2),u.JRh(u.i5U(5,3,"core.login.sitebadgedescription",u.eq3(6,_c0,e.badge)))}}function CoreLoginSitesPage_ng_template_17_ion_button_1_Template(e,t){if(1&e){const e=u.RV6();u.j41(0,"ion-button",19),u.nI1(1,"translate"),u.bIt("click",(function CoreLoginSitesPage_ng_template_17_ion_button_1_Template_ion_button_click_0_listener(t){u.eBV(e);const n=u.XpG().site,o=u.XpG();return u.Njj(o.deleteSite(t,n))})),u.nrm(2,"ion-icon",20),u.k0s()}2&e&&u.Y8G("ariaLabel",u.bMT(1,2,"core.login.removeaccount"))("@coreSlideInOut","fromRight")}function CoreLoginSitesPage_ng_template_17_Template(e,t){if(1&e&&u.DNE(0,CoreLoginSitesPage_ng_template_17_ion_badge_0_Template,6,8,"ion-badge",16)(1,CoreLoginSitesPage_ng_template_17_ion_button_1_Template,3,4,"ion-button",17),2&e){const e=t.site,n=u.XpG();u.Y8G("ngIf",!n.showDelete&&e.badge),u.R7$(),u.Y8G("ngIf",n.showDelete)}}let T=(()=>{var e;class CoreLoginSitesPage{constructor(){this.accountsList={sameSite:[],otherSites:[],count:0},this.showDelete=!1,this.loaded=!1}ngOnInit(){var e=this;return(0,o.A)((function*(){r.CoreNavigator.getRouteBooleanParam("openAddSite")&&e.add(),e.accountsList=yield a.CoreLoginHelper.getAccountsList(),e.loaded=!0,0!=e.accountsList.count||r.CoreNavigator.getRouteBooleanParam("openAddSite")||e.add()}))()}add(){a.CoreLoginHelper.goToAddSite(!1,!0)}deleteSite(e,t){var n=this;return(0,o.A)((function*(){e.stopPropagation();let o=t.siteName||"";o=yield l.CoreFilter.formatText(o,{clean:!0,singleLine:!0,filter:!1},[],t.id);try{yield g.CoreAlerts.confirmDelete(d.HT.instant("core.login.confirmdeletesite",{sitename:o}))}catch(e){return}try{yield a.CoreLoginHelper.deleteAccountFromList(n.accountsList,t),n.showDelete=!1,0==n.accountsList.count&&a.CoreLoginHelper.goToAddSite(!0,!0)}catch(e){g.CoreAlerts.showError(e,{default:d.HT.instant("core.login.errordeletesite")})}}))()}login(e){return(0,o.A)((function*(){const t=yield c.CoreLoadings.show();try{if(yield i.CoreSites.loadSite(e.id))return yield r.CoreNavigator.navigateToSiteHome(),void 0}catch(e){g.CoreAlerts.showError(e,{default:"Error loading site."})}finally{t.dismiss()}}))()}toggleDelete(){this.showDelete=!this.showDelete}openSettings(){r.CoreNavigator.navigate("/settings")}}return(e=CoreLoginSitesPage).ɵfac=function CoreLoginSitesPage_Factory(t){return new(t||e)},e.ɵcmp=u.VBU({type:e,selectors:[["page-core-login-sites"]],standalone:!0,features:[u.aNF],decls:26,vars:19,consts:[["siteItem",""],["slot","start"],[3,"text"],["slot","end"],["fill","clear",3,"ariaLabel","click",4,"ngIf"],[3,"click","ariaLabel"],["slot","icon-only","name","fas-gear","aria-hidden","true"],[1,"limited-width"],[3,"hideUntil"],[3,"onSiteClicked","accountsList","sitesClickable"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end"],[3,"click"],["name","fas-plus","aria-hidden","true"],[1,"sr-only"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-pen","aria-hidden","true"],["slot","end",4,"ngIf"],["slot","end","fill","clear","color","danger",3,"ariaLabel","click",4,"ngIf"],["aria-hidden","true"],["slot","end","fill","clear","color","danger",3,"click","ariaLabel"],["name","fas-trash","slot","icon-only","aria-hidden","true"]],template:function CoreLoginSitesPage_Template(e,t){if(1&e){const e=u.RV6();u.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),u.nrm(3,"ion-back-button",2),u.nI1(4,"translate"),u.k0s(),u.j41(5,"ion-title")(6,"h1"),u.EFF(7),u.nI1(8,"translate"),u.k0s()(),u.j41(9,"ion-buttons",3),u.DNE(10,CoreLoginSitesPage_ion_button_10_Template,3,3,"ion-button",4),u.j41(11,"ion-button",5),u.nI1(12,"translate"),u.bIt("click",(function CoreLoginSitesPage_Template_ion_button_click_11_listener(){return u.eBV(e),u.Njj(t.openSettings())})),u.nrm(13,"ion-icon",6),u.k0s()()()(),u.j41(14,"ion-content",7)(15,"core-loading",8)(16,"core-sites-list",9),u.bIt("onSiteClicked",(function CoreLoginSitesPage_Template_core_sites_list_onSiteClicked_16_listener(n){return u.eBV(e),u.Njj(t.login(n))})),u.DNE(17,CoreLoginSitesPage_ng_template_17_Template,2,2,"ng-template",null,0,u.C5r),u.k0s()(),u.j41(19,"ion-fab",10)(20,"ion-fab-button",11),u.nI1(21,"translate"),u.bIt("click",(function CoreLoginSitesPage_Template_ion_fab_button_click_20_listener(){return u.eBV(e),u.Njj(t.add())})),u.nrm(22,"ion-icon",12),u.j41(23,"span",13),u.EFF(24),u.nI1(25,"translate"),u.k0s()()()()}2&e&&(u.R7$(3),u.Y8G("text",u.bMT(4,9,"core.back")),u.R7$(4),u.JRh(u.bMT(8,11,"core.login.accounts")),u.R7$(3),u.Y8G("ngIf",t.accountsList.count>0),u.R7$(),u.Y8G("ariaLabel",u.bMT(12,13,"core.settings.appsettings")),u.R7$(4),u.Y8G("hideUntil",t.loaded),u.R7$(),u.Y8G("accountsList",t.accountsList)("sitesClickable",!0),u.R7$(4),u.BMQ("aria-label",u.bMT(21,15,"core.login.add")),u.R7$(4),u.JRh(u.bMT(25,17,"core.login.add")))},dependencies:[_.n,b.bT,p.In,p.Jm,p.QW,p.W9,p.Q8,p.YW,p.eU,p.iq,p.BC,p.ai,p.el,m.R,f.L,L.A,h.t,C.i,S.T,k.D9],encapsulation:2,data:{animation:[s.d.SLIDE_IN_OUT,s.d.SHOW_HIDE]}}),CoreLoginSitesPage})()}}]);