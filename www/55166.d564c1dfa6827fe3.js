"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[55166],{2950:(e,t,o)=>{o.d(t,{L:()=>m});var n=o(10467),r=o(60378),s=o(86654),a=o(54438),i=o(60177),c=o(2910),l=o(86198),u=o(43570),p=o(73955);const d=["*"];function CoreLoginExceededAttemptsComponent_ion_button_6_Template(e,t){if(1&e){const e=a.RV6();a.j41(0,"ion-button",3),a.bIt("click",(function CoreLoginExceededAttemptsComponent_ion_button_6_Template_ion_button_click_0_listener(){a.eBV(e);const t=a.XpG();return a.Njj(t.contactSupport())})),a.EFF(1),a.nI1(2,"translate"),a.k0s()}2&e&&(a.R7$(),a.SpI(" ",a.bMT(2,1,"core.contactsupport")," "))}let m=(()=>{var e;class CoreLoginExceededAttemptsComponent{constructor(){this.canContactSupport=!1}ngOnInit(){this.canContactSupport=this.supportConfig.canContactSupport()}contactSupport(){var e=this;return(0,n.A)((function*(){yield r.I.contact({supportConfig:e.supportConfig,subject:e.supportSubject})}))()}}return(e=CoreLoginExceededAttemptsComponent).ɵfac=function CoreLoginExceededAttemptsComponent_Factory(t){return new(t||e)},e.ɵcmp=a.VBU({type:e,selectors:[["core-login-exceeded-attempts"]],inputs:{supportConfig:"supportConfig",supportSubject:"supportSubject"},standalone:!0,features:[a.aNF],ngContentSelectors:d,decls:7,vars:1,consts:[[1,"core-danger-card"],["name","fas-triangle-exclamation","slot","start","aria-hidden","true"],["fill","outline","color","medium",3,"click",4,"ngIf"],["fill","outline","color","medium",3,"click"]],template:function CoreLoginExceededAttemptsComponent_Template(e,t){1&e&&(a.NAR(),a.j41(0,"ion-card",0)(1,"ion-item"),a.nrm(2,"ion-icon",1),a.j41(3,"ion-label")(4,"p"),a.SdG(5),a.k0s(),a.DNE(6,CoreLoginExceededAttemptsComponent_ion_button_6_Template,3,3,"ion-button",2),a.k0s()()()),2&e&&(a.R7$(6),a.Y8G("ngIf",t.canContactSupport))},dependencies:[s.n,i.bT,c.Jm,c.b_,c.iq,c.uz,c.he,l.t,u.T,p.D9],styles:["[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:16px}"]}),CoreLoginExceededAttemptsComponent})()},55166:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var n=o(10467),r=o(89417),s=o(82461),a=o(79555),i=o(15324),c=o(63153),l=o(18022),u=o(83804),p=o(30454),d=o(33014),m=o(25572),g=o(86654),f=o(2950),C=o(54438),b=o(60177),w=o(2910),R=o(69901),_=o(88246),F=o(43570),h=o(73955);const v=["resetPasswordForm"];function CoreLoginForgottenPasswordPage_core_login_exceeded_attempts_11_Template(e,t){if(1&e&&(C.j41(0,"core-login-exceeded-attempts",14),C.nI1(1,"translate"),C.EFF(2),C.nI1(3,"translate"),C.k0s()),2&e){const e=C.XpG();C.Y8G("supportConfig",e.supportConfig)("supportSubject",C.bMT(1,3,"core.login.exceededpasswordresetattemptssupportsubject")),C.R7$(2),C.SpI(" ",C.bMT(3,5,"core.login.exceededpasswordresetattempts")," ")}}let P=(()=>{var e;class CoreLoginForgottenPasswordPage{constructor(e){this.formBuilder=e,this.wasPasswordResetRequestedRecently=!1}ngOnInit(){var e=this;return(0,n.A)((function*(){var t;const o=i.CoreNavigator.getRouteParam("siteUrl");if(!o)return m.CoreAlerts.showError("Site URL not supplied."),i.CoreNavigator.back(),void 0;const n=i.CoreNavigator.getRouteParam("siteConfig");e.site=p.a.makeUnauthenticatedSite(o,n),e.autoFocus=l.CorePlatform.is("tablet"),e.myForm=e.formBuilder.group({field:["username",r.k0.required],value:[i.CoreNavigator.getRouteParam("username")||"",r.k0.required]}),e.supportConfig=n&&new u.Q(e.site,n),e.canContactSupport=null===(t=e.supportConfig)||void 0===t?void 0:t.canContactSupport(),e.wasPasswordResetRequestedRecently=yield s.CoreLoginHelper.wasPasswordResetRequestedRecently(o)}))()}resetPassword(e){var t=this;return(0,n.A)((function*(){e.preventDefault(),e.stopPropagation();const o=t.myForm.value.field,n=t.myForm.value.value;if(!n)return m.CoreAlerts.showError(a.HT.instant("core.login.usernameoremail")),void 0;const r=yield d.CoreLoadings.show("core.sending",!0),l="email"===o;try{const e=yield s.CoreLoginHelper.requestPasswordReset(t.site.getURL(),l?"":n,l?n:"");if("dataerror"===e.status){var u;const t=null===(u=e.warnings)||void 0===u?void 0:u.find((e=>"email"===e.item&&l||"username"===e.item&&!l));t&&m.CoreAlerts.showError(t.message)}else"emailpasswordconfirmnotsent"===e.status||"emailpasswordconfirmnoemail"===e.status?m.CoreAlerts.showError(e.notice):(c.R.triggerFormSubmittedEvent(t.formElement,!0),yield m.CoreAlerts.show({header:a.HT.instant("core.success"),message:e.notice}),yield i.CoreNavigator.back(),yield s.CoreLoginHelper.passwordResetRequested(t.site.getURL()))}catch(e){m.CoreAlerts.showError(e)}finally{r.dismiss()}}))()}}return(e=CoreLoginForgottenPasswordPage).ɵfac=function CoreLoginForgottenPasswordPage_Factory(t){return new(t||e)(C.rXU(r.ok))},e.ɵcmp=C.VBU({type:e,selectors:[["page-core-login-forgotten-password"]],viewQuery:function CoreLoginForgottenPasswordPage_Query(e,t){if(1&e&&C.GBs(v,5),2&e){let e;C.mGM(e=C.lsd())&&(t.formElement=e.first)}},standalone:!0,features:[C.aNF],decls:41,vars:31,consts:[["resetPasswordForm",""],["slot","start"],[3,"text"],[1,"list-item-limited-width"],[3,"supportConfig","supportSubject",4,"ngIf"],[1,"ion-text-wrap"],[3,"ngSubmit","formGroup"],[1,"item-heading"],["formControlName","field"],["value","username"],["value","email"],["lines","full"],["type","text","name","value","formControlName","value","autocapitalize","none","autocorrect","off",3,"placeholder","core-auto-focus","ariaLabel"],["type","submit","expand","block",1,"ion-margin",3,"disabled"],[3,"supportConfig","supportSubject"]],template:function CoreLoginForgottenPasswordPage_Template(e,t){if(1&e){const e=C.RV6();C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),C.nrm(3,"ion-back-button",2),C.nI1(4,"translate"),C.k0s(),C.j41(5,"ion-title")(6,"h1"),C.EFF(7),C.nI1(8,"translate"),C.k0s()()()(),C.j41(9,"ion-content")(10,"div",3),C.DNE(11,CoreLoginForgottenPasswordPage_core_login_exceeded_attempts_11_Template,4,7,"core-login-exceeded-attempts",4),C.j41(12,"ion-list")(13,"ion-item",5)(14,"ion-label"),C.EFF(15),C.nI1(16,"translate"),C.k0s()()(),C.j41(17,"ion-card")(18,"form",6,0),C.bIt("ngSubmit",(function CoreLoginForgottenPasswordPage_Template_form_ngSubmit_18_listener(o){return C.eBV(e),C.Njj(t.resetPassword(o))})),C.j41(20,"ion-item-divider",5)(21,"ion-label")(22,"p",7),C.EFF(23),C.nI1(24,"translate"),C.k0s()()(),C.j41(25,"ion-radio-group",8)(26,"ion-item")(27,"ion-radio",9),C.EFF(28),C.nI1(29,"translate"),C.k0s()(),C.j41(30,"ion-item")(31,"ion-radio",10),C.EFF(32),C.nI1(33,"translate"),C.k0s()()(),C.j41(34,"ion-item",11),C.nrm(35,"ion-input",12),C.nI1(36,"translate"),C.nI1(37,"translate"),C.k0s(),C.j41(38,"ion-button",13),C.EFF(39),C.nI1(40,"translate"),C.k0s()()()()()}2&e&&(C.R7$(3),C.Y8G("text",C.bMT(4,13,"core.back")),C.R7$(4),C.JRh(C.bMT(8,15,"core.login.passwordforgotten")),C.R7$(4),C.Y8G("ngIf",t.canContactSupport&&t.wasPasswordResetRequestedRecently),C.R7$(4),C.JRh(C.bMT(16,17,"core.login.passwordforgotteninstructions2")),C.R7$(3),C.Y8G("formGroup",t.myForm),C.R7$(5),C.JRh(C.bMT(24,19,"core.login.searchby")),C.R7$(5),C.JRh(C.bMT(29,21,"core.login.username")),C.R7$(4),C.JRh(C.bMT(33,23,"core.user.email")),C.R7$(3),C.FS9("placeholder",C.bMT(36,25,"core.login.usernameoremail")),C.Y8G("core-auto-focus",t.autoFocus)("ariaLabel",C.bMT(37,27,"core.login.usernameoremail")),C.R7$(3),C.Y8G("disabled",!t.myForm.valid),C.R7$(),C.SpI(" ",C.bMT(40,29,"core.courses.search")," "))},dependencies:[g.n,b.bT,r.qT,r.BC,r.cb,w.Jm,w.QW,w.b_,w.W9,w.eU,w.$w,w.uz,w.Dg,w.he,w.nf,w.KO,w.f0,w.BC,w.ai,w.Je,w.Gw,w.el,r.j4,r.JD,R.i,_.i,F.T,h.D9,f.L],encapsulation:2}),CoreLoginForgottenPasswordPage})()}}]);