"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8901,69006],{31283:(n,e,o)=>{o.d(e,{m:()=>h});var t=o(10467),i=o(64766),d=o(20860),a=o(24742),r=o(79555),s=o(82907),u=o(20523),l=o(73793),m=o(86654),p=o(54438),_=o(2910),c=o(58197),f=o(73955),g=o(59528);const _forTrack0=(n,e)=>e.id;function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_8_Template(n,e){if(1&n&&(p.j41(0,"ion-item",5)(1,"ion-label")(2,"p",1),p.EFF(3),p.nI1(4,"translate"),p.k0s(),p.j41(5,"p"),p.EFF(6),p.k0s()()()),2&n){const n=p.XpG(2);p.R7$(3),p.JRh(p.bMT(4,2,"addon.mod_quiz.attemptduration")),p.R7$(3),p.JRh(n.timeTaken)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_9_Template(n,e){if(1&n&&(p.j41(0,"ion-item",6)(1,"ion-label")(2,"p",1),p.EFF(3),p.nI1(4,"translate"),p.k0s(),p.j41(5,"p"),p.EFF(6),p.k0s()()()),2&n){const n=p.XpG(2);p.R7$(3),p.JRh(p.bMT(4,2,"addon.mod_quiz.overdue")),p.R7$(3),p.JRh(n.overTime)}}function AddonModQuizAttemptInfoComponent_Conditional_14_For_11_Template(n,e){if(1&n&&(p.j41(0,"ion-item",7)(1,"ion-label")(2,"p",1),p.EFF(3),p.k0s(),p.nrm(4,"p",11),p.k0s()()),2&n){const n=e.$implicit;p.R7$(3),p.JRh(n.name),p.R7$(),p.Y8G("innerHTML",n.grade,p.npT)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_12_Template(n,e){if(1&n&&(p.j41(0,"ion-item",8)(1,"ion-label")(2,"p",1),p.EFF(3),p.nI1(4,"translate"),p.k0s(),p.j41(5,"p"),p.EFF(6),p.k0s()()()),2&n){const n=p.XpG(2);p.R7$(3),p.JRh(p.bMT(4,2,"addon.mod_quiz.marks")),p.R7$(3),p.JRh(n.readableMark)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_13_Template(n,e){if(1&n&&(p.j41(0,"ion-item",9)(1,"ion-label")(2,"p",1),p.EFF(3),p.nI1(4,"translate"),p.k0s(),p.nrm(5,"p",11),p.k0s()()),2&n){const n=p.XpG(2);p.R7$(3),p.JRh(p.bMT(4,2,"core.gradenoun")),p.R7$(2),p.Y8G("innerHTML",n.readableGrade,p.npT)}}function AddonModQuizAttemptInfoComponent_Conditional_14_For_15_Template(n,e){if(1&n&&(p.j41(0,"ion-item")(1,"ion-label")(2,"p",1),p.EFF(3),p.k0s(),p.nrm(4,"core-format-text",12),p.k0s()()),2&n){const n=e.$implicit,o=p.XpG(2);p.ZvI("ion-text-wrap addon-mod_quiz-attempt-",n.id,""),p.R7$(3),p.JRh(n.title),p.R7$(),p.Y8G("component",o.component)("componentId",o.quiz.coursemodule)("text",n.content)("contextInstanceId",o.quiz.coursemodule)("courseId",o.quiz.course)}}function AddonModQuizAttemptInfoComponent_Conditional_14_Template(n,e){if(1&n&&(p.j41(0,"ion-item",4)(1,"ion-label")(2,"p",1),p.EFF(3),p.nI1(4,"translate"),p.k0s(),p.j41(5,"p"),p.EFF(6),p.nI1(7,"coreFormatDate"),p.k0s()()(),p.DNE(8,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_8_Template,7,4,"ion-item",5)(9,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_9_Template,7,4,"ion-item",6),p.Z7z(10,AddonModQuizAttemptInfoComponent_Conditional_14_For_11_Template,5,2,"ion-item",7,p.Vm6),p.DNE(12,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_12_Template,7,4,"ion-item",8)(13,AddonModQuizAttemptInfoComponent_Conditional_14_Conditional_13_Template,6,4,"ion-item",9),p.Z7z(14,AddonModQuizAttemptInfoComponent_Conditional_14_For_15_Template,5,9,"ion-item",10,_forTrack0)),2&n){const n=p.XpG();p.R7$(3),p.JRh(p.bMT(4,6,"addon.mod_quiz.completedon")),p.R7$(3),p.JRh(p.bMT(7,8,1e3*n.attempt.timefinish)),p.R7$(2),p.vxM(8,n.timeTaken?8:-1),p.R7$(),p.vxM(9,n.overTime?9:-1),p.R7$(),p.Dyx(n.gradeItemMarks),p.R7$(2),p.vxM(12,n.quiz.showAttemptsMarks&&n.readableMark&&null!==(null==n.attempt?null:n.attempt.sumgrades)?12:-1),p.R7$(),p.vxM(13,n.readableGrade?13:-1),p.R7$(),p.Dyx(n.additionalData)}}let h=(()=>{var n;class AddonModQuizAttemptInfoComponent{constructor(){this.isFinished=!1,this.readableMark="",this.readableGrade="",this.gradeItemMarks=[],this.component=d.Ar}ngOnChanges(n){var e=this;return(0,t.A)((function*(){var o;n.additionalData&&(null===(o=e.additionalData)||void 0===o||o.forEach((n=>{n.content=s.y.removeElementFromHtml(n.content,".helptooltip")})));if(!n.attempt)return;if(e.isFinished="finished"===e.attempt.state,!e.isFinished)return;const t=(e.attempt.timefinish||0)-(e.attempt.timestart||0);if(t>0?(e.timeTaken=a.j.formatTime(t),e.quiz.timelimit&&t>e.quiz.timelimit+60&&(e.overTime=a.j.formatTime(t-e.quiz.timelimit))):e.timeTaken=void 0,e.gradeItemMarks=null!==e.attempt.sumgrades&&e.attempt.gradeitemmarks?e.attempt.gradeitemmarks.map((n=>{var o,t;return{name:n.name,grade:r.HT.instant("addon.mod_quiz.outof",{$a:{grade:`<strong>${i.AddonModQuiz.formatGrade(n.grade,null===(o=e.quiz)||void 0===o?void 0:o.decimalpoints)}</strong>`,maxgrade:i.AddonModQuiz.formatGrade(n.maxgrade,null===(t=e.quiz)||void 0===t?void 0:t.decimalpoints)}})}})):[],!e.quiz.showAttemptsGrades)return;if(!(0,u.L)(e.attempt.rescaledGrade))return e.readableGrade=r.HT.instant("addon.mod_quiz.notyetgraded"),void 0;e.quiz.showAttemptsMarks&&(e.readableMark=r.HT.instant("addon.mod_quiz.outofshort",{$a:{grade:i.AddonModQuiz.formatGrade(e.attempt.sumgrades,e.quiz.decimalpoints),maxgrade:i.AddonModQuiz.formatGrade(e.quiz.sumgrades,e.quiz.decimalpoints)}}));const d={grade:`<strong>${i.AddonModQuiz.formatGrade(e.attempt.rescaledGrade,e.quiz.decimalpoints)}</strong>`,maxgrade:i.AddonModQuiz.formatGrade(e.quiz.grade,e.quiz.decimalpoints)};if(100!=e.quiz.grade){var l,m;const n=100*(null!==(l=e.attempt.sumgrades)&&void 0!==l?l:0)/(null!==(m=e.quiz.sumgrades)&&void 0!==m?m:1);d.percent=`<strong>${i.AddonModQuiz.formatGrade(n,e.quiz.decimalpoints)}</strong>`,e.readableGrade=r.HT.instant("addon.mod_quiz.outofpercent",{$a:d})}else e.readableGrade=r.HT.instant("addon.mod_quiz.outof",{$a:d})}))()}}return(n=AddonModQuizAttemptInfoComponent).ɵfac=function AddonModQuizAttemptInfoComponent_Factory(e){return new(e||n)},n.ɵcmp=p.VBU({type:n,selectors:[["addon-mod-quiz-attempt-info"]],inputs:{quiz:"quiz",attempt:"attempt",additionalData:"additionalData"},standalone:!0,features:[p.OA$,p.aNF],decls:15,vars:12,consts:[[1,"ion-text-wrap","addon-mod_quiz-attempt-status"],[1,"item-heading"],[3,"state","finishedOffline"],[1,"ion-text-wrap","addon-mod_quiz-attempt-startedon"],[1,"ion-text-wrap","addon-mod_quiz-attempt-completedon"],[1,"ion-text-wrap","addon-mod_quiz-attempt-duration"],[1,"ion-text-wrap","addon-mod_quiz-attempt-overdue"],[1,"ion-text-wrap","addon-mod_quiz-attempt-gradeitemmark"],[1,"ion-text-wrap","addon-mod_quiz-attempt-mark"],[1,"ion-text-wrap","addon-mod_quiz-attempt-grade"],[3,"class"],[3,"innerHTML"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"]],template:function AddonModQuizAttemptInfoComponent_Template(n,e){1&n&&(p.j41(0,"ion-item",0)(1,"ion-label")(2,"p",1),p.EFF(3),p.nI1(4,"translate"),p.k0s(),p.nrm(5,"addon-mod-quiz-attempt-state",2),p.k0s()(),p.j41(6,"ion-item",3)(7,"ion-label")(8,"p",1),p.EFF(9),p.nI1(10,"translate"),p.k0s(),p.j41(11,"p"),p.EFF(12),p.nI1(13,"coreFormatDate"),p.k0s()()(),p.DNE(14,AddonModQuizAttemptInfoComponent_Conditional_14_Template,16,10)),2&n&&(p.R7$(3),p.JRh(p.bMT(4,6,"addon.mod_quiz.attemptstate")),p.R7$(2),p.Y8G("state",e.attempt.state)("finishedOffline",e.attempt.finishedOffline),p.R7$(4),p.JRh(p.bMT(10,8,"addon.mod_quiz.startedon")),p.R7$(3),p.JRh(p.bMT(13,10,1e3*e.attempt.timestart)),p.R7$(2),p.vxM(14,e.isFinished?14:-1))},dependencies:[m.n,_.uz,_.he,c.B,f.D9,g.f,l.J],encapsulation:2}),AddonModQuizAttemptInfoComponent})()},73793:(n,e,o)=>{o.d(e,{J:()=>l});var t=o(10467),i=o(64766),d=o(91416),a=o(86654),r=o(54438),s=o(2910),u=o(86198);function AddonModQuizAttemptStateComponent_Conditional_1_Template(n,e){1&n&&r.nrm(0,"ion-icon",1)}let l=(()=>{var n;class AddonModQuizAttemptStateComponent{constructor(){this.state="",this.finishedOffline=!1,this.readableState="",this.color=""}ngOnChanges(){var n=this;return(0,t.A)((function*(){n.readableState=i.AddonModQuiz.getAttemptReadableStateName(n.state,n.finishedOffline),n.color=i.AddonModQuiz.getAttemptStateColor(n.state,n.finishedOffline)}))()}}return(n=AddonModQuizAttemptStateComponent).ɵfac=function AddonModQuizAttemptStateComponent_Factory(e){return new(e||n)},n.ɵcmp=r.VBU({type:n,selectors:[["addon-mod-quiz-attempt-state"]],inputs:{state:"state",finishedOffline:[r.Mj6.HasDecoratorInputTransform,"finishedOffline","finishedOffline",d.G]},standalone:!0,features:[r.GFd,r.OA$,r.aNF],decls:3,vars:3,consts:[[3,"color"],["name","fas-clock","aria-hidden","true"]],template:function AddonModQuizAttemptStateComponent_Template(n,e){1&n&&(r.j41(0,"ion-badge",0),r.DNE(1,AddonModQuizAttemptStateComponent_Conditional_1_Template,1,0,"ion-icon",1),r.EFF(2),r.k0s()),2&n&&(r.Y8G("color",e.color),r.R7$(),r.vxM(1,e.finishedOffline?1:-1),r.R7$(),r.SpI(" ",e.readableState,"\n"))},dependencies:[a.n,s.In,s.iq,u.t],styles:["[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-inline-start:0px;margin-inline-end:var(--mdl-spacing-1)}"]}),AddonModQuizAttemptStateComponent})()},8901:(n,e,o)=>{o.r(e),o.d(e,{AddonModQuizIndexComponent:()=>S});var t=o(10467),i=o(74431),d=o(20523),a=o(69006),r=o(51024),s=o(13482),u=o(15324),l=o(75383),m=o(55554),p=o(79555),_=o(49882),c=o(93267),f=o(64766),g=o(93918),h=o(74149),z=o(20860),C=o(25572),M=o(31283),A=o(73793),v=o(30864),I=o(6736),b=o(86654),Q=o(54438),R=o(2910),x=o(60177),q=o(69502),T=o(17388),F=o(64422),k=o(13988),y=o(86198),w=o(58197),$=o(23007),G=o(66731),O=o(43570),E=o(73955);const _forTrack0=(n,e)=>e.id,_c0=(n,e)=>({grade:n,maxgrade:e}),_c1=n=>({$a:n}),_c2=(n,e)=>({grade:n,max:e});function AddonModQuizIndexComponent_Conditional_1_Template(n,e){if(1&n){const n=Q.RV6();Q.j41(0,"ion-button",7),Q.nI1(1,"translate"),Q.bIt("click",(function AddonModQuizIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){Q.eBV(n);const e=Q.XpG();return Q.Njj(e.openModuleSummary())})),Q.nrm(2,"ion-icon",8),Q.k0s()}2&n&&Q.Y8G("ariaLabel",Q.bMT(1,1,"core.info"))}function AddonModQuizIndexComponent_Conditional_2_Template(n,e){if(1&n){const n=Q.RV6();Q.j41(0,"core-context-menu")(1,"core-context-menu-item",9),Q.nI1(2,"translate"),Q.bIt("action",(function AddonModQuizIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){Q.eBV(n);const e=Q.XpG();return Q.Njj(e.openModuleSummary())})),Q.k0s()()}2&n&&(Q.R7$(),Q.Y8G("priority",5e3)("content",Q.bMT(2,2,"core.info")))}function AddonModQuizIndexComponent_ion_card_5_ion_item_2_Template(n,e){if(1&n&&(Q.j41(0,"ion-item",12)(1,"ion-label")(2,"p"),Q.EFF(3),Q.k0s()()()),2&n){const n=e.$implicit;Q.R7$(3),Q.JRh(n)}}function AddonModQuizIndexComponent_ion_card_5_ion_item_3_Template(n,e){if(1&n&&(Q.j41(0,"ion-item",12)(1,"ion-label")(2,"p",13),Q.EFF(3),Q.nI1(4,"translate"),Q.k0s(),Q.j41(5,"p"),Q.EFF(6),Q.k0s()()()),2&n){const n=Q.XpG(2);Q.R7$(3),Q.JRh(Q.bMT(4,2,"addon.mod_quiz.grademethod")),Q.R7$(3),Q.JRh(n.gradeMethodReadable)}}function AddonModQuizIndexComponent_ion_card_5_ion_item_4_Template(n,e){if(1&n&&(Q.j41(0,"ion-item",12)(1,"ion-label")(2,"p",13),Q.EFF(3),Q.nI1(4,"translate"),Q.k0s(),Q.j41(5,"p"),Q.EFF(6),Q.nI1(7,"translate"),Q.k0s()()()),2&n){const n=Q.XpG(2);Q.R7$(3),Q.JRh(Q.bMT(4,2,"core.grades.gradepass")),Q.R7$(3),Q.JRh(Q.i5U(7,4,"addon.mod_quiz.outof",Q.eq3(10,_c1,Q.l_i(7,_c0,n.bestGrade.gradetopass,n.quiz.gradeFormatted))))}}function AddonModQuizIndexComponent_ion_card_5_ion_item_5_Template(n,e){if(1&n&&(Q.j41(0,"ion-item",12)(1,"ion-label")(2,"p",13),Q.EFF(3),Q.nI1(4,"translate"),Q.k0s(),Q.j41(5,"p"),Q.EFF(6),Q.k0s()()()),2&n){const n=Q.XpG(2);Q.R7$(3),Q.JRh(Q.bMT(4,2,"core.lastsync")),Q.R7$(3),Q.JRh(n.syncTime)}}function AddonModQuizIndexComponent_ion_card_5_Template(n,e){if(1&n&&(Q.j41(0,"ion-card")(1,"ion-list"),Q.DNE(2,AddonModQuizIndexComponent_ion_card_5_ion_item_2_Template,4,1,"ion-item",10)(3,AddonModQuizIndexComponent_ion_card_5_ion_item_3_Template,7,4,"ion-item",11)(4,AddonModQuizIndexComponent_ion_card_5_ion_item_4_Template,8,12,"ion-item",11)(5,AddonModQuizIndexComponent_ion_card_5_ion_item_5_Template,7,4,"ion-item",11),Q.k0s()()),2&n){const n=Q.XpG();Q.R7$(2),Q.Y8G("ngForOf",n.accessRules),Q.R7$(),Q.Y8G("ngIf",n.gradeMethodReadable),Q.R7$(),Q.Y8G("ngIf",n.bestGrade&&n.bestGrade.gradetopass&&n.quiz&&n.quiz.gradeFormatted),Q.R7$(),Q.Y8G("ngIf",n.syncTime)}}function AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Conditional_3_Template(n,e){if(1&n&&(Q.j41(0,"span"),Q.EFF(1),Q.k0s(),Q.j41(2,"span"),Q.EFF(3),Q.k0s()),2&n){const n=Q.XpG(4);Q.R7$(),Q.JRh(n.gradeMethodReadable),Q.R7$(2),Q.JRh(n.gradeResult)}}function AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Conditional_4_Template(n,e){if(1&n&&(Q.j41(0,"span"),Q.EFF(1),Q.nI1(2,"translate"),Q.k0s()),2&n){const n=Q.XpG(4);Q.R7$(),Q.JRh(Q.i5U(2,1,"addon.mod_quiz.yourfinalgradeis",Q.eq3(4,_c1,n.gradeResult)))}}function AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Conditional_5_Template(n,e){1&n&&(Q.j41(0,"p",19),Q.nrm(1,"ion-icon",20),Q.EFF(2),Q.nI1(3,"translate"),Q.k0s()),2&n&&(Q.R7$(2),Q.SpI(" ",Q.bMT(3,1,"core.course.overriddennotice")," "))}function AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Template(n,e){if(1&n&&(Q.j41(0,"ion-item",16)(1,"ion-label")(2,"div",18),Q.DNE(3,AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Conditional_3_Template,4,2)(4,AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Conditional_4_Template,3,6),Q.k0s(),Q.DNE(5,AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Conditional_5_Template,4,3,"p",19),Q.k0s()()),2&n){const n=Q.XpG(3);Q.R7$(3),Q.vxM(3,n.moreAttempts?3:4),Q.R7$(2),Q.vxM(5,n.gradeOverridden?5:-1)}}function AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_1_Template(n,e){if(1&n&&(Q.j41(0,"ion-item",17)(1,"ion-label")(2,"p",13),Q.EFF(3),Q.nI1(4,"translate"),Q.k0s(),Q.j41(5,"p"),Q.nrm(6,"core-format-text",21),Q.k0s()()()),2&n){const n=Q.XpG(3);Q.R7$(3),Q.JRh(Q.bMT(4,6,"addon.mod_quiz.comment")),Q.R7$(3),Q.Y8G("component",n.component)("componentId",n.componentId)("text",n.gradebookFeedback)("contextInstanceId",n.module.id)("courseId",n.courseId)}}function AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_2_Template(n,e){if(1&n&&(Q.nrm(0,"hr"),Q.j41(1,"ion-item",22)(2,"ion-label")(3,"p",13),Q.EFF(4),Q.nI1(5,"translate"),Q.k0s(),Q.j41(6,"p"),Q.nrm(7,"core-format-text",21),Q.k0s()()()),2&n){const n=Q.XpG(3);Q.R7$(4),Q.JRh(Q.bMT(5,6,"addon.mod_quiz.overallfeedback")),Q.R7$(3),Q.Y8G("component",n.component)("componentId",n.componentId)("text",n.overallFeedback)("contextInstanceId",n.module.id)("courseId",n.courseId)}}function AddonModQuizIndexComponent_Conditional_6_Conditional_5_Template(n,e){if(1&n&&Q.DNE(0,AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_0_Template,6,2,"ion-item",16)(1,AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_1_Template,7,8,"ion-item",17)(2,AddonModQuizIndexComponent_Conditional_6_Conditional_5_Conditional_2_Template,8,8),2&n){const n=Q.XpG(2);Q.vxM(0,n.overallStats&&n.gradeResult?0:-1),Q.R7$(),Q.vxM(1,n.gradebookFeedback?1:-1),Q.R7$(),Q.vxM(2,n.quiz.showFeedback&&n.overallFeedback?2:-1)}}function AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_8_Conditional_0_Template(n,e){if(1&n&&(Q.j41(0,"p"),Q.EFF(1),Q.nI1(2,"translate"),Q.k0s()),2&n){const n=Q.XpG(2).$implicit,e=Q.XpG(2);Q.R7$(),Q.SpI(" ",Q.i5U(2,1,"core.grades.gradelong",Q.eq3(7,_c1,Q.l_i(4,_c2,n.formattedGrade,e.quiz.gradeFormatted)))," ")}}function AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_8_Conditional_1_Template(n,e){1&n&&(Q.j41(0,"p"),Q.EFF(1),Q.nI1(2,"translate"),Q.k0s()),2&n&&(Q.R7$(),Q.JRh(Q.bMT(2,1,"addon.mod_quiz.notyetgraded")))}function AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_8_Template(n,e){if(1&n&&Q.DNE(0,AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_8_Conditional_0_Template,3,9,"p")(1,AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_8_Conditional_1_Template,3,3),2&n){const n=Q.XpG().$implicit;Q.vxM(0,void 0!==n.rescaledGrade&&n.rescaledGrade>=0?0:1)}}function AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_11_Template(n,e){if(1&n){const n=Q.RV6();Q.nrm(0,"hr"),Q.j41(1,"ion-button",28),Q.bIt("click",(function AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_11_Template_ion_button_click_1_listener(){Q.eBV(n);const e=Q.XpG().$implicit,o=Q.XpG(2);return Q.Njj(o.reviewAttempt(e.id))})),Q.nrm(2,"ion-icon",29),Q.EFF(3),Q.nI1(4,"translate"),Q.k0s()}2&n&&(Q.R7$(3),Q.SpI(" ",Q.bMT(4,1,"addon.mod_quiz.review")," "))}function AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_12_Template(n,e){if(1&n&&(Q.nrm(0,"hr"),Q.j41(1,"ion-item",30)(2,"ion-label")(3,"p"),Q.nrm(4,"ion-icon",20),Q.EFF(5),Q.k0s()()()),2&n){const n=Q.XpG().$implicit;Q.R7$(5),Q.SpI(" ",n.cannotReviewMessage," ")}}function AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_13_Template(n,e){1&n&&(Q.nrm(0,"hr"),Q.j41(1,"ion-item",31)(2,"ion-label")(3,"p"),Q.nrm(4,"ion-icon",32),Q.EFF(5),Q.nI1(6,"translate"),Q.k0s()()()),2&n&&(Q.R7$(5),Q.SpI(" ",Q.bMT(6,1,"addon.mod_quiz.finishedofflinenotice")," "))}function AddonModQuizIndexComponent_Conditional_6_For_8_Template(n,e){if(1&n&&(Q.j41(0,"ion-accordion",15)(1,"ion-item",23)(2,"ion-label")(3,"h3"),Q.EFF(4),Q.nI1(5,"translate"),Q.k0s()(),Q.j41(6,"div",24),Q.nrm(7,"addon-mod-quiz-attempt-state",25),Q.DNE(8,AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_8_Template,2,1),Q.k0s()(),Q.j41(9,"div",26),Q.nrm(10,"addon-mod-quiz-attempt-info",27),Q.DNE(11,AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_11_Template,5,3)(12,AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_12_Template,6,1)(13,AddonModQuizIndexComponent_Conditional_6_For_8_Conditional_13_Template,7,3),Q.k0s()()),2&n){const n=e.$implicit,o=Q.XpG(2);Q.Y8G("value",n.id),Q.R7$(4),Q.JRh(Q.i5U(5,9,"addon.mod_quiz.attempt",Q.eq3(12,_c1,n.attempt))),Q.R7$(3),Q.Y8G("state",n.state)("finishedOffline",n.finishedOffline),Q.R7$(),Q.vxM(8,n.finished&&o.quiz.showAttemptsGrades?8:-1),Q.R7$(2),Q.Y8G("quiz",o.quiz)("attempt",n)("additionalData",n.additionalData),Q.R7$(),Q.vxM(11,n.canReview?11:n.completed&&n.cannotReviewMessage?12:n.finishedOffline?13:-1)}}function AddonModQuizIndexComponent_Conditional_6_Template(n,e){if(1&n&&(Q.j41(0,"ion-card",5)(1,"ion-card-header",12)(2,"ion-card-title"),Q.EFF(3),Q.nI1(4,"translate"),Q.k0s()(),Q.DNE(5,AddonModQuizIndexComponent_Conditional_6_Conditional_5_Template,3,3),Q.j41(6,"ion-accordion-group",14),Q.Z7z(7,AddonModQuizIndexComponent_Conditional_6_For_8_Template,14,14,"ion-accordion",15,_forTrack0),Q.k0s()()),2&n){const n=Q.XpG();Q.R7$(3),Q.JRh(Q.bMT(4,2,"addon.mod_quiz.summaryofattempts")),Q.R7$(2),Q.vxM(5,n.quiz&&n.showResults&&(n.gradeResult||n.gradeOverridden||n.gradebookFeedback||n.quiz.showFeedback&&n.overallFeedback)?5:-1),Q.R7$(2),Q.Dyx(n.attempts)}}function AddonModQuizIndexComponent_ng_container_7_ion_item_2_Template(n,e){if(1&n&&(Q.j41(0,"ion-item",12)(1,"ion-label")(2,"p"),Q.EFF(3),Q.k0s()()()),2&n){const n=e.$implicit;Q.R7$(3),Q.JRh(n)}}function AddonModQuizIndexComponent_ng_container_7_ion_card_3_Template(n,e){1&n&&(Q.j41(0,"ion-card",38)(1,"ion-item",12)(2,"ion-label")(3,"p"),Q.EFF(4),Q.nI1(5,"translate"),Q.k0s()()()()),2&n&&(Q.R7$(4),Q.JRh(Q.bMT(5,1,"addon.mod_quiz.noquestions")))}function AddonModQuizIndexComponent_ng_container_7_ion_card_4_p_6_Template(n,e){if(1&n&&(Q.j41(0,"p"),Q.EFF(1),Q.k0s()),2&n){const n=e.$implicit;Q.ZvI("addon-mod_quiz-unsupported-question addon-mod_quiz-unsupported-question-",n,""),Q.R7$(),Q.SpI(" ",n," ")}}function AddonModQuizIndexComponent_ng_container_7_ion_card_4_Template(n,e){if(1&n&&(Q.j41(0,"ion-card",39)(1,"ion-item",12)(2,"ion-label")(3,"p",13),Q.EFF(4),Q.nI1(5,"translate"),Q.k0s(),Q.DNE(6,AddonModQuizIndexComponent_ng_container_7_ion_card_4_p_6_Template,2,4,"p",40),Q.k0s()()()),2&n){const n=Q.XpG(2);Q.R7$(4),Q.JRh(Q.bMT(5,2,"addon.mod_quiz.errorquestionsnotsupported")),Q.R7$(2),Q.Y8G("ngForOf",n.unsupportedQuestions)}}function AddonModQuizIndexComponent_ng_container_7_ion_card_5_p_6_Template(n,e){if(1&n&&(Q.j41(0,"p"),Q.EFF(1),Q.k0s()),2&n){const n=e.$implicit;Q.ZvI("addon-mod_quiz-unsupported-rule addon-mod_quiz-unsupported-rule-",n,""),Q.R7$(),Q.SpI(" ",n," ")}}function AddonModQuizIndexComponent_ng_container_7_ion_card_5_Template(n,e){if(1&n&&(Q.j41(0,"ion-card",41)(1,"ion-item",12)(2,"ion-label")(3,"p",13),Q.EFF(4),Q.nI1(5,"translate"),Q.k0s(),Q.DNE(6,AddonModQuizIndexComponent_ng_container_7_ion_card_5_p_6_Template,2,4,"p",40),Q.k0s()()()),2&n){const n=Q.XpG(2);Q.R7$(4),Q.JRh(Q.bMT(5,2,"addon.mod_quiz.errorrulesnotsupported")),Q.R7$(2),Q.Y8G("ngForOf",n.unsupportedRules)}}function AddonModQuizIndexComponent_ng_container_7_ion_card_6_Template(n,e){if(1&n&&(Q.j41(0,"ion-card",42)(1,"ion-item",12)(2,"ion-label")(3,"p",13),Q.EFF(4),Q.nI1(5,"translate"),Q.k0s(),Q.j41(6,"p",43),Q.EFF(7),Q.k0s()()()()),2&n){const n=Q.XpG(2);Q.R7$(4),Q.JRh(Q.bMT(5,2,"addon.mod_quiz.errorbehaviournotsupported")),Q.R7$(3),Q.JRh(n.quiz.preferredbehaviour)}}function AddonModQuizIndexComponent_ng_container_7_ion_card_7_p_9_Template(n,e){if(1&n&&(Q.j41(0,"p"),Q.EFF(1),Q.k0s()),2&n){const n=e.$implicit;Q.R7$(),Q.JRh(n)}}function AddonModQuizIndexComponent_ng_container_7_ion_card_7_Template(n,e){if(1&n&&(Q.j41(0,"ion-card",44)(1,"ion-item",12)(2,"ion-label")(3,"p",13),Q.EFF(4),Q.nI1(5,"translate"),Q.k0s(),Q.j41(6,"p"),Q.EFF(7),Q.nI1(8,"translate"),Q.k0s(),Q.DNE(9,AddonModQuizIndexComponent_ng_container_7_ion_card_7_p_9_Template,2,1,"p",45),Q.k0s()()()),2&n){const n=Q.XpG(2);Q.R7$(4),Q.JRh(Q.bMT(5,3,"addon.mod_quiz.canattemptbutnotsubmit")),Q.R7$(3),Q.JRh(Q.bMT(8,5,"addon.mod_quiz.warningquestionsnotsupported")),Q.R7$(2),Q.Y8G("ngForOf",n.unsupportedQuestions)}}function AddonModQuizIndexComponent_ng_container_7_Template(n,e){if(1&n&&(Q.qex(0),Q.j41(1,"ion-card"),Q.DNE(2,AddonModQuizIndexComponent_ng_container_7_ion_item_2_Template,4,1,"ion-item",10),Q.k0s(),Q.DNE(3,AddonModQuizIndexComponent_ng_container_7_ion_card_3_Template,6,3,"ion-card",33)(4,AddonModQuizIndexComponent_ng_container_7_ion_card_4_Template,7,4,"ion-card",34)(5,AddonModQuizIndexComponent_ng_container_7_ion_card_5_Template,7,4,"ion-card",35)(6,AddonModQuizIndexComponent_ng_container_7_ion_card_6_Template,8,4,"ion-card",36)(7,AddonModQuizIndexComponent_ng_container_7_ion_card_7_Template,10,7,"ion-card",37),Q.bVm()),2&n){const n=Q.XpG();Q.R7$(),Q.ZvI("core-",n.preventMessagesColor,"-card addon-mod_quiz-prevent-messages"),Q.R7$(),Q.Y8G("ngForOf",n.preventMessages),Q.R7$(),Q.Y8G("ngIf",!n.hasQuestions),Q.R7$(),Q.Y8G("ngIf",!n.hasSupportedQuestions&&n.unsupportedQuestions.length),Q.R7$(),Q.Y8G("ngIf",n.unsupportedRules.length),Q.R7$(),Q.Y8G("ngIf",!1===n.behaviourSupported),Q.R7$(),Q.Y8G("ngIf",n.hasSupportedQuestions&&n.unsupportedQuestions.length)}}function AddonModQuizIndexComponent_div_8_div_1_ion_button_1_ion_spinner_1_Template(n,e){1&n&&Q.nrm(0,"ion-spinner",54)}function AddonModQuizIndexComponent_div_8_div_1_ion_button_1_Template(n,e){if(1&n){const n=Q.RV6();Q.j41(0,"ion-button",52),Q.bIt("click",(function AddonModQuizIndexComponent_div_8_div_1_ion_button_1_Template_ion_button_click_0_listener(){Q.eBV(n);const e=Q.XpG(3);return Q.Njj(e.attemptQuiz())})),Q.DNE(1,AddonModQuizIndexComponent_div_8_div_1_ion_button_1_ion_spinner_1_Template,1,0,"ion-spinner",53),Q.EFF(2),Q.nI1(3,"translate"),Q.k0s()}if(2&n){const n=Q.XpG(3);Q.Y8G("disabled",n.showStatusSpinner),Q.R7$(),Q.Y8G("ngIf",n.showStatusSpinner),Q.R7$(),Q.SpI(" ",Q.bMT(3,3,n.buttonText)," ")}}function AddonModQuizIndexComponent_div_8_div_1_ion_button_2_Template(n,e){if(1&n&&(Q.j41(0,"ion-button",55),Q.EFF(1),Q.nI1(2,"translate"),Q.nrm(3,"ion-icon",56),Q.k0s()),2&n){const n=Q.XpG(3);Q.Y8G("href",n.module.url)("showBrowserWarning",!1),Q.R7$(),Q.SpI(" ",Q.bMT(2,3,"core.openinbrowser")," ")}}function AddonModQuizIndexComponent_div_8_div_1_Template(n,e){if(1&n&&(Q.j41(0,"div",49),Q.DNE(1,AddonModQuizIndexComponent_div_8_div_1_ion_button_1_Template,4,5,"ion-button",50)(2,AddonModQuizIndexComponent_div_8_div_1_ion_button_2_Template,4,5,"ion-button",51),Q.k0s()),2&n){const n=Q.XpG(2);Q.R7$(),Q.Y8G("ngIf",n.buttonText),Q.R7$(),Q.Y8G("ngIf",!n.buttonText&&(!n.hasSupportedQuestions&&n.unsupportedQuestions.length||n.unsupportedRules.length||!1===n.behaviourSupported))}}function AddonModQuizIndexComponent_div_8_Template(n,e){if(1&n&&(Q.j41(0,"div",46),Q.DNE(1,AddonModQuizIndexComponent_div_8_div_1_Template,3,2,"div",47),Q.nrm(2,"core-course-module-navigation",48),Q.k0s()),2&n){const n=Q.XpG();Q.R7$(),Q.Y8G("ngIf",n.quiz),Q.R7$(),Q.Y8G("courseId",n.courseId)("currentModuleId",n.module.id)}}let S=(()=>{var n;class AddonModQuizIndexComponent extends a.y{constructor(n,e){super("AddonModQuizIndexComponent",n,e),this.content=n,this.component=z.Ar,this.pluginName="quiz",this.hasOffline=!1,this.hasSupportedQuestions=!1,this.accessRules=[],this.unsupportedRules=[],this.unsupportedQuestions=[],this.behaviourSupported=!1,this.showResults=!1,this.gradeOverridden=!1,this.preventMessages=[],this.preventMessagesColor="danger",this.showStatusSpinner=!0,this.showReviewColumn=!1,this.attempts=[],this.hasQuestions=!1,this.fetchContentDefaultError="addon.mod_quiz.errorgetquiz",this.syncEventName=z.Po,this.moreAttempts=!1,this.overallStats=!1,this.hasPlayed=!1}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,t.A)((function*(){_superprop_getNgOnInit().call(n),n.finishedObserver=_.z.on(z.I5,(e=>{n.quiz&&e.quizId==n.quiz.id&&(n.autoReview=e)}),n.siteId),yield n.loadContent(!1,!0)}))()}attemptQuiz(){var n=this;return(0,t.A)((function*(){if(n.showStatusSpinner||!n.quiz)return;if(!f.AddonModQuiz.isQuizOffline(n.quiz))return n.openQuiz(),void 0;if(n.currentStatus===i.DownloadStatus.DOWNLOADED)return n.openQuiz(),void 0;n.showStatusSpinner=!0;try{yield c.n.prefetch(n.module,n.courseId,!0),n.openQuiz()}catch(e){n.hasOffline?n.openQuiz():C.CoreAlerts.showError(e,{default:p.HT.instant("core.errordownloading")})}finally{n.showStatusSpinner=!1}}))()}fetchContent(n,e=!1,o=!1){var i=this;return(0,t.A)((function*(){const n=yield f.AddonModQuiz.getQuiz(i.courseId,i.module.id);i.gradeMethodReadable=f.AddonModQuiz.getQuizGradeMethod(n.grademethod),i.now=Date.now(),i.dataRetrieved.emit(n),i.description=n.intro||i.description,i.candidateQuiz=n;const t=yield h.AddonModQuizSync.getSyncWarnings(n.id);null!=t&&t.length&&(C.CoreAlerts.showError(l.Ni.buildMessage(t)),yield h.AddonModQuizSync.setSyncWarnings(n.id,[])),f.AddonModQuiz.isQuizOffline(n)?e&&(yield m.g.ignoreErrors(i.syncActivity(o))):i.showStatusSpinner=!1,f.AddonModQuiz.isQuizOffline(n)&&(i.setStatusListener(),i.syncTime=yield h.AddonModQuizSync.getReadableSyncTime(n.id),i.hasOffline=yield h.AddonModQuizSync.hasDataToSync(n.id)),i.quizAccessInfo=yield f.AddonModQuiz.getQuizAccessInformation(n.id,{cmId:i.module.id}),i.showReviewColumn=i.quizAccessInfo.canreviewmyattempts,i.accessRules=i.quizAccessInfo.accessrules,i.unsupportedRules=f.AddonModQuiz.getUnsupportedRules(i.quizAccessInfo.activerulenames),n.preferredbehaviour&&(i.behaviourSupported=s.CoreQuestionBehaviourDelegate.isBehaviourSupported(n.preferredbehaviour));const d=yield f.AddonModQuiz.getQuizRequiredQtypes(n.id,{cmId:i.module.id});i.hasQuestions=void 0!==n.hasquestions?0!==n.hasquestions:d.length>0,i.unsupportedQuestions=f.AddonModQuiz.getUnsupportedQuestions(d),i.hasSupportedQuestions=!!d.find((n=>"random"!=n&&-1==i.unsupportedQuestions.indexOf(n))),yield i.getAttempts(n,i.quizAccessInfo),i.quiz=n}))()}getAttempts(n,e){var o=this;return(0,t.A)((function*(){o.bestGrade=yield f.AddonModQuiz.getUserBestGrade(n.id,{cmId:o.module.id}),o.attemptAccessInfo=yield f.AddonModQuiz.getAttemptAccessInformation(n.id,0,{cmId:o.module.id});const t=yield f.AddonModQuiz.getUserAttempts(n.id,{cmId:o.module.id});if(o.attempts=yield o.treatAttempts(n,e,t),o.attempts.length){o.moreAttempts=!f.AddonModQuiz.isAttemptCompleted(o.attempts[0].state)||!o.attemptAccessInfo.isfinished}else o.moreAttempts=!o.attemptAccessInfo.isfinished;o.getButtonText(),yield o.getResultInfo(n)}))()}getButtonText(){var n,e,o,t;const i=!(null===(n=this.quizAccessInfo)||void 0===n||!n.canpreview||null!==(e=this.quizAccessInfo)&&void 0!==e&&e.canattempt);var d,a,r,s,u;(this.buttonText="",this.preventMessagesColor=i?"warning":"danger",this.hasQuestions)&&(this.attempts.length&&!f.AddonModQuiz.isAttemptCompleted(this.attempts[0].state)?null!==(d=this.quizAccessInfo)&&void 0!==d&&d.canattempt?this.buttonText="addon.mod_quiz.continueattemptquiz":null!==(a=this.quizAccessInfo)&&void 0!==a&&a.canpreview&&(this.buttonText="addon.mod_quiz.continuepreview"):null!==(r=this.quizAccessInfo)&&void 0!==r&&r.canattempt?(this.preventMessages=(null===(u=this.attemptAccessInfo)||void 0===u?void 0:u.preventnewattemptreasons)||[],this.preventMessages.length||(this.buttonText=this.attempts.length?"addon.mod_quiz.reattemptquiz":"addon.mod_quiz.attemptquiznow")):null!==(s=this.quizAccessInfo)&&void 0!==s&&s.canpreview&&(this.buttonText="addon.mod_quiz.previewquiznow"));this.buttonText&&(this.preventMessages=(null===(o=this.quizAccessInfo)||void 0===o?void 0:o.preventaccessreasons)||[],this.moreAttempts||i?null!==(t=this.quizAccessInfo)&&void 0!==t&&t.canattempt&&this.preventMessages.length?this.buttonText="":this.hasSupportedQuestions&&!this.unsupportedRules.length&&this.behaviourSupported||(this.buttonText=""):this.buttonText="")}getResultInfo(n){var e=this;return(0,t.A)((function*(){var o,t;if(!e.attempts.length||!n.showAttemptsGrades||null===(o=e.bestGrade)||void 0===o||!o.hasgrade||void 0===(null===(t=e.gradebookData)||void 0===t?void 0:t.grade))return e.showResults=!1,void 0;const i=e.bestGrade.grade,d=f.AddonModQuiz.formatGrade(e.gradebookData.grade,n.decimalpoints),a=f.AddonModQuiz.formatGrade(i,n.decimalpoints);let r=d;if(e.showResults=!0,e.gradeOverridden=d!=a,e.gradebookFeedback=e.gradebookData.feedback,i&&i>e.gradebookData.grade&&e.gradebookData.grade==n.grade&&(e.gradeOverridden=!1,r=a),e.gradeResult=p.HT.instant("core.grades.gradelong",{$a:{grade:r,max:n.gradeFormatted}}),n.showFeedback){const o=yield f.AddonModQuiz.getFeedbackForGrade(n.id,e.gradebookData.grade,{cmId:e.module.id});e.overallFeedback=o.feedbacktext}}))()}logActivity(){var n=this;return(0,t.A)((function*(){n.quiz&&(yield m.g.ignoreErrors(f.AddonModQuiz.logViewQuiz(n.quiz.id)),n.analyticsLogEvent("mod_quiz_view_quiz"))}))()}goToAutoReview(n){var e=this;return(0,t.A)((function*(){if(!e.autoReview)return;e.checkCompletion();const o=n.find((n=>{var o;return n.id===(null===(o=e.autoReview)||void 0===o?void 0:o.attemptId)}));if(e.autoReview=void 0,!e.quiz||!e.quizAccessInfo||!o)return;(yield g.AddonModQuizHelper.canReviewAttempt(e.quiz,e.quizAccessInfo,o))&&(yield e.reviewAttempt(o.id))}))()}hasSyncSucceed(n){return n.attemptFinished&&this.checkCompletion(),n.updated}ionViewDidEnter(){var _superprop_getIonViewDidEnter=()=>super.ionViewDidEnter,n=this;return(0,t.A)((function*(){var e;if(_superprop_getIonViewDidEnter().call(n),!n.hasPlayed)return n.autoReview=void 0,void 0;n.hasPlayed=!1,n.showLoading=!0,null===(e=n.content)||void 0===e||e.scrollToTop(),yield m.g.ignoreErrors(n.refreshContent(!0)),n.showLoading=!1,n.autoReview=void 0}))()}ionViewDidLeave(){super.ionViewDidLeave(),this.autoReview=void 0}invalidateContent(){var n=this;return(0,t.A)((function*(){const e=[];e.push(f.AddonModQuiz.invalidateQuizData(n.courseId)),n.quiz&&(e.push(f.AddonModQuiz.invalidateUserAttemptsForUser(n.quiz.id)),e.push(f.AddonModQuiz.invalidateQuizAccessInformation(n.quiz.id)),e.push(f.AddonModQuiz.invalidateQuizRequiredQtypes(n.quiz.id)),e.push(f.AddonModQuiz.invalidateAttemptAccessInformation(n.quiz.id)),e.push(f.AddonModQuiz.invalidateCombinedReviewOptionsForUser(n.quiz.id)),e.push(f.AddonModQuiz.invalidateUserBestGradeForUser(n.quiz.id)),e.push(f.AddonModQuiz.invalidateGradeFromGradebook(n.courseId))),yield Promise.all(e)}))()}isRefreshSyncNeeded(n){return!(!this.courseId||!this.module)&&(n.attemptFinished&&this.checkCompletion(),!(!this.quiz||n.quizId!=this.quiz.id)&&(null===(e=this.content)||void 0===e||e.scrollToTop(),!0));var e}openQuiz(){var n=this;return(0,t.A)((function*(){n.hasPlayed=!0,yield u.CoreNavigator.navigateToSitePath(`${z.mF}/${n.courseId}/${n.module.id}/player`,{params:{moduleUrl:n.module.url}})}))()}showStatus(n,e){this.showStatusSpinner=n===i.DownloadStatus.DOWNLOADING,n===i.DownloadStatus.DOWNLOADED&&e===i.DownloadStatus.DOWNLOADING&&this.showLoadingAndFetch()}sync(){var n=this;return(0,t.A)((function*(){return n.candidateQuiz?h.AddonModQuizSync.syncQuiz(n.candidateQuiz,!0):{warnings:[],attemptFinished:!1,updated:!1}}))()}treatAttempts(n,e,o){var i=this;return(0,t.A)((function*(){if(!o||!o.length)return n.gradeFormatted=f.AddonModQuiz.formatGrade(n.grade,n.decimalpoints),[];const a=f.AddonModQuiz.getLastCompletedAttemptFromList(o);let r=!1;i.autoReview&&a&&a.id>=i.autoReview.attemptId&&!i.isDestroyed&&i.isCurrentView&&(r=!0);const[s]=yield Promise.all([f.AddonModQuiz.getCombinedReviewOptions(n.id,{cmId:i.module.id}),i.getQuizGrade(),r?i.goToAutoReview(o):void 0]);i.options=s,g.AddonModQuizHelper.setQuizCalculatedData(n,i.options),i.overallStats=!!a&&i.options.alloptions.marks>=2;const u=yield Promise.all(o.map(function(){var o=(0,t.A)((function*(o){const[t,i]=yield Promise.all([g.AddonModQuizHelper.setAttemptCalculatedData(n,o),g.AddonModQuizHelper.canReviewAttempt(n,e,o)]);if(t.canReview=i,i||(t.cannotReviewMessage=g.AddonModQuizHelper.getCannotReviewMessage(n,o,!0)),n.showFeedback&&"finished"===o.state&&s.someoptions.overallfeedback&&(0,d.L)(t.rescaledGrade)){const e=yield f.AddonModQuiz.getFeedbackForGrade(n.id,t.rescaledGrade,{cmId:n.coursemodule});e.feedbacktext&&(t.additionalData=[{id:"feedback",title:p.HT.instant("addon.mod_quiz.feedback"),content:e.feedbacktext}])}return t}));return function(n){return o.apply(this,arguments)}}()));return u.reverse()}))()}getQuizGrade(){var n=this;return(0,t.A)((function*(){try{const o=yield f.AddonModQuiz.getGradeFromGradebook(n.courseId,n.module.id);if(o){var e;const t=null!==(e=o.graderaw)&&void 0!==e?e:null!=o.grade?Number(o.grade):void 0;n.gradebookData={grade:(0,d.J)(t),feedback:o.feedback}}}catch{var o;n.gradebookData={grade:null===(o=n.bestGrade)||void 0===o?void 0:o.grade}}}))()}reviewAttempt(n){var e=this;return(0,t.A)((function*(){yield u.CoreNavigator.navigateToSitePath(`${z.mF}/${e.courseId}/${e.module.id}/review/${n}`)}))()}ngOnDestroy(){var n;super.ngOnDestroy(),null===(n=this.finishedObserver)||void 0===n||n.off()}}return(n=AddonModQuizIndexComponent).ɵfac=function AddonModQuizIndexComponent_Factory(e){return new(e||n)(Q.rXU(R.W9),Q.rXU(r.A,8))},n.ɵcmp=Q.VBU({type:n,selectors:[["addon-mod-quiz-index"]],standalone:!0,features:[Q.Vt3,Q.aNF],decls:9,vars:12,consts:[["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[4,"ngIf"],[1,"addon-mod_quiz-attempts-summary"],["collapsible-footer","","slot","fixed",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],["class","ion-text-wrap",4,"ngFor","ngForOf"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],[1,"item-heading"],[1,"striped"],["toggleIconSlot","start",3,"value"],[1,"ion-text-wrap","addon-mod_quiz-grade-result"],[1,"ion-text-wrap","addon-mod_quiz-gradebook-feedback"],[1,"addon-mod_quiz-grade-result-grade"],[1,"addon-mod_quiz-grade-overridden-notice"],["name","fas-circle-info","color","info","slot","start","aria-hidden","true"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],[1,"ion-text-wrap","addon-mod_quiz-overall-feedback"],["slot","header","lines","none",1,"ion-text-wrap","addon-mod_quiz-attempt-title"],["slot","end",1,"addon-mod_quiz-attempt-title-info","hide_on_expand"],[3,"state","finishedOffline"],["slot","content",1,"addon-mod_quiz-attempt-details"],[3,"quiz","attempt","additionalData"],["expand","block","fill","outline",1,"ion-text-wrap","ion-margin",3,"click"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"],[1,"ion-text-wrap","addon-mod_quiz-attempt-noreview"],[1,"ion-text-wrap","addon-mod_quiz-attempt-finishedoffline"],["name","fas-clock","slot","start","aria-hidden","true"],["class","core-danger-card addon-mod_quiz-no-questions",4,"ngIf"],["class","core-danger-card addon-mod_quiz-unsupported-questions",4,"ngIf"],["class","core-danger-card addon-mod_quiz-unsupported-rules",4,"ngIf"],["class","core-danger-card addon-mod_quiz-unsupported-behaviours",4,"ngIf"],["class","core-warning-card",4,"ngIf"],[1,"core-danger-card","addon-mod_quiz-no-questions"],[1,"core-danger-card","addon-mod_quiz-unsupported-questions"],[3,"class",4,"ngFor","ngForOf"],[1,"core-danger-card","addon-mod_quiz-unsupported-rules"],[1,"core-danger-card","addon-mod_quiz-unsupported-behaviours"],[1,"addon-mod_quiz-unsupported-behaviour"],[1,"core-warning-card"],[4,"ngFor","ngForOf"],["collapsible-footer","","slot","fixed"],["class","list-item-limited-width",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width"],["expand","block","class","ion-margin ion-text-wrap",3,"disabled","click",4,"ngIf"],["class","ion-text-wrap ion-margin","expand","block","core-link","",3,"href","showBrowserWarning",4,"ngIf"],["expand","block",1,"ion-margin","ion-text-wrap",3,"click","disabled"],["slot","start","aria-hidden","true",4,"ngIf"],["slot","start","aria-hidden","true"],["expand","block","core-link","",1,"ion-text-wrap","ion-margin",3,"href","showBrowserWarning"],["name","fas-up-right-from-square","slot","end","aria-hidden","true"]],template:function AddonModQuizIndexComponent_Template(n,e){1&n&&(Q.j41(0,"core-navbar-buttons",0),Q.DNE(1,AddonModQuizIndexComponent_Conditional_1_Template,3,3,"ion-button",1)(2,AddonModQuizIndexComponent_Conditional_2_Template,3,4),Q.k0s(),Q.j41(3,"core-loading",2)(4,"core-course-module-info",3),Q.bIt("completionChanged",(function AddonModQuizIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return e.onCompletionChange()})),Q.k0s(),Q.DNE(5,AddonModQuizIndexComponent_ion_card_5_Template,6,4,"ion-card",4)(6,AddonModQuizIndexComponent_Conditional_6_Template,9,4,"ion-card",5)(7,AddonModQuizIndexComponent_ng_container_7_Template,8,9,"ng-container",4)(8,AddonModQuizIndexComponent_div_8_Template,3,3,"div",6),Q.k0s()),2&n&&(Q.R7$(),Q.vxM(1,e.courseContentsPage?2:1),Q.R7$(2),Q.Y8G("hideUntil",!e.showLoading),Q.R7$(),Q.Y8G("module",e.module)("description",e.description)("component",e.component)("componentId",e.componentId)("courseId",e.courseId)("hasDataToSync",!!e.buttonText&&e.hasOffline),Q.R7$(),Q.Y8G("ngIf",e.gradeMethodReadable||e.accessRules.length||e.syncTime),Q.R7$(),Q.vxM(6,e.quiz&&e.attempts.length?6:-1),Q.R7$(),Q.Y8G("ngIf",e.quiz),Q.R7$(),Q.Y8G("ngIf",!e.showLoading))},dependencies:[b.n,x.Sq,x.bT,R.xk,R.YH,R.Jm,R.b_,R.ME,R.tN,R.iq,R.uz,R.he,R.nf,R.w2,q.B,T.Q,F.R,k.c,y.t,w.B,$.j,G.i,O.T,E.D9,I.CoreCourseModuleInfoComponent,v.CoreCourseModuleNavigationComponent,A.J,M.m],styles:["[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--stroke)}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   .addon-mod_quiz-grade-result[_ngcontent-%COMP%]{margin-top:var(--mdl-spacing-2)}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   .addon-mod_quiz-grade-result[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-inline-start:0px;margin-inline-end:0px}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   .addon-mod_quiz-grade-result[_ngcontent-%COMP%]   .addon-mod_quiz-grade-overridden-notice[_ngcontent-%COMP%]{margin-top:var(--mdl-spacing-2);margin-bottom:0}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   .addon-mod_quiz-grade-result[_ngcontent-%COMP%]   .addon-mod_quiz-grade-result-grade[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   .addon-mod_quiz-grade-result[_ngcontent-%COMP%]   .addon-mod_quiz-grade-result-grade[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{flex-grow:1}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   .addon-mod_quiz-attempt-title-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;justify-content:center;min-height:60px;padding-top:var(--mdl-spacing-2);padding-bottom:var(--mdl-spacing-2);margin-inline-start:var(--mdl-spacing-2);font:var(--mdl-typography-body-font-md)}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   .addon-mod_quiz-attempt-title-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;margin-top:var(--mdl-spacing-2)}[_nghost-%COMP%]   .addon-mod_quiz-attempts-summary[_ngcontent-%COMP%]   ion-accordion-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:var(--mdl-typography-subtitle-font-md)}"]}),AddonModQuizIndexComponent})()},69006:(n,e,o)=>{o.d(e,{y:()=>f});var t=o(10467),i=o(23063),d=o(49882),a=o(44682),r=o(55554),s=o(51024),u=o(52749),l=o(25572),m=o(79555),p=o(95384),_=o(54438),c=o(2910);let f=(()=>{var n;class CoreCourseModuleMainActivityComponent extends i.x{constructor(n="CoreCourseModuleMainResourceComponent",e,o){super(n,o),this.content=e,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,t.A)((function*(){yield _superprop_getNgOnInit().call(n),n.hasOffline=!1,n.moduleName=p.CoreCourseModuleHelper.translateModuleName(n.pluginName||n.moduleName||""),n.syncEventName&&(n.syncObserver=d.z.on(n.syncEventName,(e=>{n.autoSyncEventReceived(e)}),n.siteId))}))()}isRefreshSyncNeeded(n){return!1}autoSyncEventReceived(n){this.isRefreshSyncNeeded(n)&&this.showLoadingAndRefresh(!1)}refreshContent(n=!1,e=!1){var o=this;return(0,t.A)((function*(){o.module&&(yield r.g.ignoreErrors(Promise.all([o.invalidateContent(),o.showCompletion?a.CoreCourse.invalidateModule(o.module.id):void 0])),yield o.loadContent(!0,n,e))}))()}showLoadingAndFetch(n=!1,e=!1){var o=this;return(0,t.A)((function*(){var t;o.showLoading=!0,null===(t=o.content)||void 0===t||t.scrollToTop(),yield o.loadContent(!1,n,e)}))()}showLoadingAndRefresh(n=!1,e=!1){var o;return this.showLoading=!0,null===(o=this.content)||void 0===o||o.scrollToTop(),this.refreshContent(n,e)}fetchContent(n=!1,e=!1,o=!1){return(0,t.A)((function*(){}))()}loadContent(n,e=!1,o=!1){var i=this;return(0,t.A)((function*(){if(i.module)try{n&&i.showCompletion&&(yield r.g.ignoreErrors(i.fetchModule())),yield i.fetchContent(n,e,o),i.finishSuccessfulFetch()}catch(o){var t;if(!n&&(null===(t=u.CoreSites.getCurrentSite())||void 0===t||!t.isOfflineDisabled())&&p.CoreCourseModuleHelper.isNotFoundError(o))return yield i.refreshContent(e);l.CoreAlerts.showError(o,{default:m.HT.instant(i.fetchContentDefaultError)})}finally{i.showLoading=!1}}))()}sync(){return(0,t.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(n){return n.updated}syncActivity(n=!1){var e=this;return(0,t.A)((function*(){try{const n=yield e.sync();return n.warnings.length&&l.CoreAlerts.show({message:n.warnings[0]}),e.hasSyncSucceed(n)}catch(e){return n&&l.CoreAlerts.showError(e,{default:m.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var n;super.ngOnDestroy(),null===(n=this.syncObserver)||void 0===n||n.off()}}return(n=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(e){return new(e||n)(_.rXU("",8),_.rXU(c.W9),_.rXU(s.A))},n.ɵcmp=_.VBU({type:n,selectors:[["ng-component"]],inputs:{group:"group"},features:[_.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(n,e){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);