"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[14198,69006],{92010:(e,t,n)=>{n.d(t,{E:()=>AddonModGlossaryEntriesSource});var o=n(10467),i=n(99522),s=n(21113),r=n(20119),a=n(59829);class AddonModGlossaryEntriesSource extends i.F{constructor(e,t,n){super(),this.isSearch=!1,this.hasSearched=!1,this.onlineEntries=[],this.offlineEntries=[],this.COURSE_ID=e,this.CM_ID=t,this.GLOSSARY_PATH_PREFIX=n}isOnlineEntry(e){return"id"in e}isOfflineEntry(e){return!this.isOnlineEntry(e)}getItemPath(e){return this.isOfflineEntry(e)?`${this.GLOSSARY_PATH_PREFIX}entry/new-${e.timecreated}`:`${this.GLOSSARY_PATH_PREFIX}entry/${e.id}`}getItemQueryParams(){return{cmId:this.CM_ID,courseId:this.COURSE_ID}}getPagesLoaded(){return null===this.items?0:Math.ceil(this.onlineEntries.length/this.getPageLength())}startSearch(){this.isSearch=!0,this.setDirty(!0)}stopSearch(e,t){this.fetchMode&&(this.isSearch=!1,this.hasSearched=!1,this.onlineEntries=e,this.hasMoreItems=t,this.setDirty(!0))}search(e){if(!this.glossary)return;const t=this.glossary.id;this.fetchFunction=n=>s.$.getEntriesBySearch(t,e,!0,n),this.fetchInvalidate=()=>s.$.invalidateEntriesBySearch(t,e,!0),this.hasSearched=!0,this.setDirty(!0)}loadGlossary(){var e=this;return(0,o.A)((function*(){e.glossary=yield s.$.getGlossary(e.COURSE_ID,e.CM_ID)}))()}invalidateCache(e=!0){var t=this;return(0,o.A)((function*(){yield Promise.all([t.fetchInvalidate&&t.fetchInvalidate(),e&&s.$.invalidateCourseGlossaries(t.COURSE_ID),e&&t.glossary&&s.$.invalidateCategories(t.glossary.id)])}))()}switchMode(e){if(!this.glossary)throw new Error("Can't switch entries mode without a glossary!");const t=this.glossary.id;switch(this.fetchMode=e,this.isSearch=!1,this.setDirty(!0),e){case"author_all":this.viewMode="author",this.fetchFunction=e=>s.$.getEntriesByAuthor(t,e),this.fetchInvalidate=()=>s.$.invalidateEntriesByAuthor(t);break;case"cat_all":this.viewMode="cat",this.fetchFunction=e=>s.$.getEntriesByCategory(t,e),this.fetchInvalidate=()=>s.$.invalidateEntriesByCategory(t);break;case"newest_first":this.viewMode="date",this.fetchFunction=e=>s.$.getEntriesByDate(t,"CREATION",e),this.fetchInvalidate=()=>s.$.invalidateEntriesByDate(t,"CREATION");break;case"recently_updated":this.viewMode="date",this.fetchFunction=e=>s.$.getEntriesByDate(t,"UPDATE",e),this.fetchInvalidate=()=>s.$.invalidateEntriesByDate(t,"UPDATE");break;default:this.viewMode="letter",this.fetchMode="letter_all",this.fetchFunction=e=>s.$.getEntriesByLetter(t,e),this.fetchInvalidate=()=>s.$.invalidateEntriesByLetter(t)}}loadPageItems(e){var t=this;return(0,o.A)((function*(){const n=t.glossary,o=t.fetchFunction;if(!n||!o)throw new Error("Can't load entries without glossary or fetch function");const i=[];if(0===e){const e=yield r.e.getGlossaryOfflineEntries(n.id);e.sort(((e,t)=>e.concept.localeCompare(t.concept))),i.push(...e)}const s=e*t.getPageLength(),a=yield o({from:s,cmId:t.CM_ID});return i.push(...a.entries),{items:i,hasMoreItems:s+a.entries.length<a.count}}))()}getPageLength(){return a.sT}setItems(e,t){this.onlineEntries=[],this.offlineEntries=[],e.forEach((e=>{this.isOnlineEntry(e)&&this.onlineEntries.push(e),this.isOfflineEntry(e)&&this.offlineEntries.push(e)})),super.setItems(e,t)}reset(){this.onlineEntries=[],this.offlineEntries=[],super.reset()}}},14198:(e,t,n)=>{n.r(t),n.d(t,{AddonModGlossaryIndexComponent:()=>z});var o=n(10467),i=n(2401),s=n(83696),r=n(25124),a=n(29492),l=n(69006),d=n(51024),c=n(44682),u=n(87326),h=n(32440),g=n(82308),m=n(15324),f=n(52749),_=n(75383),p=n(79555),y=n(49882),v=n(92010),C=n(21113),I=n(88712),M=n(24742),b=n(59829),S=n(24813),A=n(25572),E=n(30864),G=n(6736),R=n(75357),x=n(86654),w=n(54438),T=n(21182),O=n(2910),k=n(60177),L=n(69502),D=n(17388),$=n(16986),N=n(66198),V=n(64422),j=n(13988),F=n(19858),P=n(86198),B=n(58197),X=n(66731),Y=n(43570),U=n(73955);function AddonModGlossaryIndexComponent_ion_button_1_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"ion-button",14),w.nI1(1,"translate"),w.bIt("click",(function AddonModGlossaryIndexComponent_ion_button_1_Template_ion_button_click_0_listener(t){w.eBV(e);const n=w.XpG();return w.Njj(n.openModePicker(t))})),w.nrm(2,"ion-icon",15),w.k0s()}2&e&&w.Y8G("ariaLabel",w.bMT(1,1,"addon.mod_glossary.browsemode"))}function AddonModGlossaryIndexComponent_ion_button_2_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"ion-button",14),w.nI1(1,"translate"),w.bIt("click",(function AddonModGlossaryIndexComponent_ion_button_2_Template_ion_button_click_0_listener(){w.eBV(e);const t=w.XpG();return w.Njj(t.toggleSearch())})),w.nrm(2,"ion-icon",16),w.k0s()}2&e&&w.Y8G("ariaLabel",w.bMT(1,1,"addon.mod_glossary.bysearch"))}function AddonModGlossaryIndexComponent_Conditional_3_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"ion-button",17),w.nI1(1,"translate"),w.bIt("click",(function AddonModGlossaryIndexComponent_Conditional_3_Template_ion_button_click_0_listener(){w.eBV(e);const t=w.XpG();return w.Njj(t.openModuleSummary())})),w.nrm(2,"ion-icon",18),w.k0s()}2&e&&w.Y8G("ariaLabel",w.bMT(1,1,"core.info"))}function AddonModGlossaryIndexComponent_Conditional_4_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"core-context-menu")(1,"core-context-menu-item",19),w.nI1(2,"translate"),w.bIt("action",(function AddonModGlossaryIndexComponent_Conditional_4_Template_core_context_menu_item_action_1_listener(){w.eBV(e);const t=w.XpG();return w.Njj(t.openModuleSummary())})),w.k0s()()}2&e&&(w.R7$(),w.Y8G("priority",5e3)("content",w.bMT(2,2,"core.info")))}function AddonModGlossaryIndexComponent_core_search_box_9_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"core-search-box",20),w.nI1(1,"translate"),w.bIt("onSubmit",(function AddonModGlossaryIndexComponent_core_search_box_9_Template_core_search_box_onSubmit_0_listener(t){w.eBV(e);const n=w.XpG();return w.Njj(n.search(t))}))("onClear",(function AddonModGlossaryIndexComponent_core_search_box_9_Template_core_search_box_onClear_0_listener(){w.eBV(e);const t=w.XpG();return w.Njj(t.toggleSearch())})),w.k0s()}if(2&e){const e=w.XpG();w.Mz_("searchArea","AddonModGlossary-",e.module.id,""),w.Y8G("placeholder",w.bMT(1,5,"addon.mod_glossary.searchquery"))("autoFocus",!0)("lengthCheck",2)}}function AddonModGlossaryIndexComponent_core_course_module_info_11_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"core-course-module-info",21),w.bIt("completionChanged",(function AddonModGlossaryIndexComponent_core_course_module_info_11_Template_core_course_module_info_completionChanged_0_listener(){w.eBV(e);const t=w.XpG();return w.Njj(t.onCompletionChange())})),w.k0s()}if(2&e){const e=w.XpG();w.Y8G("module",e.module)("description",e.description)("component",e.component)("componentId",e.componentId)("courseId",e.courseId)("hasDataToSync",e.hasOffline)}}function AddonModGlossaryIndexComponent_ion_list_12_ion_item_6_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"ion-item",25),w.bIt("click",(function AddonModGlossaryIndexComponent_ion_list_12_ion_item_6_Template_ion_item_click_0_listener(){const t=w.eBV(e).$implicit,n=w.XpG(2);return w.Njj(n.entries.select(t))})),w.j41(1,"ion-label")(2,"div",26),w.nrm(3,"ion-icon",27),w.nI1(4,"translate"),w.nrm(5,"core-format-text",28),w.k0s()()()}if(2&e){const e=t.$implicit,n=w.XpG(2);w.Y8G("detail",!1),w.BMQ("aria-current",n.entries.getItemAriaCurrent(e)),w.R7$(3),w.BMQ("aria-label",w.bMT(4,7,"core.notsent")),w.R7$(2),w.Y8G("text",e.concept)("contextInstanceId",n.glossary.coursemodule)("courseId",n.courseId)("sanitize",!0)}}function AddonModGlossaryIndexComponent_ion_list_12_Template(e,t){if(1&e&&(w.j41(0,"ion-list",22)(1,"ion-item-divider")(2,"ion-label")(3,"h2",23),w.EFF(4),w.nI1(5,"translate"),w.k0s()()(),w.DNE(6,AddonModGlossaryIndexComponent_ion_list_12_ion_item_6_Template,6,9,"ion-item",24),w.k0s()),2&e){const e=w.XpG();w.R7$(4),w.JRh(w.bMT(5,2,"addon.mod_glossary.entriestobesynced")),w.R7$(2),w.Y8G("ngForOf",e.entries.offlineEntries)}}function AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_ion_item_divider_1_Template(e,t){if(1&e&&(w.j41(0,"ion-item-divider")(1,"ion-label")(2,"h2",23),w.EFF(3),w.k0s()()()),2&e){const e=w.XpG().$implicit,t=w.XpG(2);w.R7$(3),w.JRh(t.getDivider(e))}}function AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_Template(e,t){if(1&e){const e=w.RV6();w.qex(0),w.DNE(1,AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_ion_item_divider_1_Template,4,1,"ion-item-divider",9),w.j41(2,"ion-item",25),w.bIt("click",(function AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_Template_ion_item_click_2_listener(){const t=w.eBV(e).$implicit,n=w.XpG(2);return w.Njj(n.entries.select(t))})),w.j41(3,"ion-label"),w.nrm(4,"core-format-text",30),w.k0s()(),w.bVm()}if(2&e){const e=t.$implicit,n=t.index,o=w.XpG(2);w.R7$(),w.Y8G("ngIf",o.getDivider&&o.showDivider(e,o.entries.onlineEntries[n-1])),w.R7$(),w.Y8G("detail",!1),w.BMQ("aria-current",o.entries.getItemAriaCurrent(e)),w.R7$(2),w.Y8G("text",e.concept)("contextInstanceId",o.glossary.coursemodule)("courseId",o.courseId)}}function AddonModGlossaryIndexComponent_ion_list_13_Template(e,t){if(1&e&&(w.j41(0,"ion-list"),w.DNE(1,AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_Template,5,6,"ng-container",29),w.k0s()),2&e){const e=w.XpG();w.R7$(),w.Y8G("ngForOf",e.entries.onlineEntries)}}function AddonModGlossaryIndexComponent_core_empty_box_14_Template(e,t){if(1&e&&(w.nrm(0,"core-empty-box",31),w.nI1(1,"translate")),2&e){const e=w.XpG();w.Y8G("message",w.bMT(1,2,"addon.mod_glossary.noentriesfound")),w.BMQ("role",e.hasSearched?"alert":null)}}function AddonModGlossaryIndexComponent_ion_fab_17_Template(e,t){if(1&e){const e=w.RV6();w.j41(0,"ion-fab",32)(1,"ion-fab-button",33),w.nI1(2,"translate"),w.bIt("click",(function AddonModGlossaryIndexComponent_ion_fab_17_Template_ion_fab_button_click_1_listener(){w.eBV(e);const t=w.XpG();return w.Njj(t.openNewEntry())})),w.nrm(3,"ion-icon",34),w.j41(4,"span",35),w.EFF(5),w.nI1(6,"translate"),w.k0s()()()}2&e&&(w.R7$(),w.BMQ("aria-label",w.bMT(2,2,"addon.mod_glossary.addentry")),w.R7$(4),w.JRh(w.bMT(6,4,"addon.mod_glossary.addentry")))}let z=(()=>{var e;class AddonModGlossaryIndexComponent extends l.y{constructor(e,t,n){super("AddonModGlossaryIndexComponent",t,n),this.route=e,this.content=t,this.courseContentsPage=n,this.component=b.pV,this.pluginName="glossary",this.canAdd=!1,this.loadMoreError=!1,this.hasOfflineEntries=!1,this.hasOfflineRatings=!1,this.syncEventName=b.iW,this.fetchedEntriesCanLoadMore=!1,this.fetchedEntries=[],this.checkCompletionAfterLog=!1,this.showDivider=()=>!1,this.loadingMessage=p.HT.instant("core.loading"),this.promisedEntries=new r._}get entries(){return this.promisedEntries.value}get glossary(){var e;return null===(e=this.entries)||void 0===e?void 0:e.getSource().glossary}get isSearch(){var e,t;return null!==(e=null===(t=this.entries)||void 0===t?void 0:t.getSource().isSearch)&&void 0!==e&&e}get hasSearched(){var e,t;return null!==(e=null===(t=this.entries)||void 0===t?void 0:t.getSource().hasSearched)&&void 0!==e&&e}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,o.A)((function*(){yield _superprop_getNgOnInit().call(e);const t=s.u.getOrCreateSource(v.E,[e.courseId,e.module.id,e.courseContentsPage?`${b.Z9}/`:""]);e.promisedEntries.resolve(new AddonModGlossaryEntriesManager(t,e)),e.sourceUnsubscribe=t.addListener({onItemsUpdated:n=>{e.hasOfflineEntries=!!n.find((e=>t.isOfflineEntry(e))),e.hasOffline=e.hasOfflineEntries||e.hasOfflineRatings}}),e.observers=[y.z.on(b.Z_,(({glossaryId:t})=>{var n;(null===(n=e.glossary)||void 0===n?void 0:n.id)===t&&(e.checkCompletion(),e.showLoadingAndRefresh(!1))})),y.z.on(b.uw,(({glossaryId:t})=>{var n;(null===(n=e.glossary)||void 0===n?void 0:n.id)===t&&e.showLoadingAndRefresh(!1)})),y.z.on(b.OL,(({glossaryId:t})=>{var n;(null===(n=e.glossary)||void 0===n?void 0:n.id)===t&&e.showLoadingAndRefresh(!1)}))],e.observers.push(y.z.on(u.CoreRatingProvider.RATING_SAVED_EVENT,(t=>{e.glossary&&"mod_glossary"==t.component&&"entry"==t.ratingArea&&"module"==t.contextLevel&&t.instanceId==e.glossary.coursemodule&&(e.hasOfflineRatings=!0,e.hasOffline=!0)}))),e.observers.push(y.z.on(g.CoreRatingSyncProvider.SYNCED_EVENT,(t=>{e.glossary&&"mod_glossary"==t.component&&"entry"==t.ratingArea&&"module"==t.contextLevel&&t.instanceId==e.glossary.coursemodule&&(e.hasOfflineRatings=!1,e.hasOffline=e.hasOfflineEntries)})))}))()}ngAfterViewInit(){var e=this;return(0,o.A)((function*(){const t=yield e.promisedEntries;yield e.loadContent(!1,!0),yield t.start(e.splitView)}))()}fetchContent(e=!1,t=!1,n=!1){var i=this;return(0,o.A)((function*(){const o=yield i.promisedEntries;if(yield o.getSource().loadGlossary(),!i.glossary)return;i.description=i.glossary.intro||i.description,i.canAdd=!!i.glossary.canaddentry||!1,i.dataRetrieved.emit(i.glossary),o.getSource().fetchMode||i.switchMode("letter_all"),t&&(yield i.syncActivity(n));const[s]=yield Promise.all([h.CoreRatingOffline.hasRatings("mod_glossary","entry","module",i.glossary.coursemodule),e?o.reload():o.load()]);i.hasOfflineRatings=s,i.hasOffline=i.hasOfflineEntries||i.hasOfflineRatings,i.isSearch&&i.logSearch&&i.logSearch()}))()}invalidateContent(){var e=this;return(0,o.A)((function*(){var t;yield null===(t=e.entries)||void 0===t?void 0:t.getSource().invalidateCache()}))()}sync(){return I.A.sync(this.module,this.courseId)}isRefreshSyncNeeded(e){return!!this.glossary&&e.glossaryId==this.glossary.id&&e.userId==f.CoreSites.getCurrentSiteUserId()}switchMode(e){var t;switch(null===(t=this.entries)||void 0===t||t.getSource().switchMode(e),e){case"author_all":this.getDivider=e=>e.userfullname,this.showDivider=(e,t)=>!t||e.userid!=t.userid;break;case"cat_all":{const getDivider=e=>e.categoryname||"";this.getDivider=getDivider,this.showDivider=(e,t)=>!t||getDivider(e)!=getDivider(t);break}case"newest_first":case"recently_updated":this.getDivider=void 0,this.showDivider=()=>!1;break;default:{const getDivider=e=>(_.Ni.cleanTags(e.concept)||e.concept).substring(0,1).toUpperCase();this.getDivider=getDivider,this.showDivider=(e,t)=>!t||getDivider(e)!=getDivider(t);break}}}loadMoreEntries(e){var t=this;return(0,o.A)((function*(){const n=yield t.promisedEntries;try{t.loadMoreError=!1,yield n.load()}catch(e){t.loadMoreError=!0,A.CoreAlerts.showError(e,{default:p.HT.instant("addon.mod_glossary.errorloadingentries")})}finally{e&&e()}}))()}openModePicker(e){var t=this;return(0,o.A)((function*(){if(!t.glossary)return;const{AddonModGlossaryModePickerPopoverComponent:o}=yield n.e(3454).then(n.bind(n,3454)),i=(yield t.promisedEntries).getSource().fetchMode,s=yield S.CorePopovers.open({component:o,componentProps:{browseModes:t.glossary.browsemodes,selectedMode:t.isSearch?"":i},event:e});return s?s!==i?(t.changeFetchMode(s),void 0):t.isSearch?(t.toggleSearch(),void 0):void 0:void 0}))()}toggleSearch(){if(this.entries){if(this.isSearch){const e=this.entries.getSource().fetchMode;return e&&this.switchMode(e),this.entries.getSource().stopSearch(this.fetchedEntries,this.fetchedEntriesCanLoadMore),void 0}this.fetchedEntries=this.entries.getSource().onlineEntries,this.fetchedEntriesCanLoadMore=!this.entries.completed,this.getDivider=void 0,this.showDivider=()=>!1,this.entries.reset(),this.entries.getSource().startSearch()}}changeFetchMode(e){var t;this.loadingMessage=p.HT.instant("core.loading"),null===(t=this.content)||void 0===t||t.scrollToTop(),this.switchMode(e),this.showLoading=!0,this.loadContent()}openNewEntry(){m.CoreNavigator.navigateToSitePath(`${b.Z9}/${this.courseId}/${this.module.id}/entry/new`)}search(e){var t;this.loadingMessage=p.HT.instant("core.searching"),this.showLoading=!0,this.logSearch=M.j.once((()=>this.performLogSearch(e))),null===(t=this.entries)||void 0===t||t.getSource().search(e),this.loadContent()}performLogSearch(e){var t=this;return(0,o.A)((function*(){t.analyticsLogEvent("mod_glossary_get_entries_by_search",{data:{mode:"search",hook:e,fullsearch:1}})}))()}ngOnDestroy(){var e,t,n;super.ngOnDestroy(),null===(e=this.observers)||void 0===e||e.forEach((e=>e.off())),null===(t=this.sourceUnsubscribe)||void 0===t||t.call(null),null===(n=this.entries)||void 0===n||n.destroy()}}return(e=AddonModGlossaryIndexComponent).ɵfac=function AddonModGlossaryIndexComponent_Factory(t){return new(t||e)(w.rXU(T.nX),w.rXU(O.W9),w.rXU(d.A,8))},e.ɵcmp=w.VBU({type:e,selectors:[["addon-mod-glossary-index"]],viewQuery:function AddonModGlossaryIndexComponent_Query(e,t){if(1&e&&w.GBs(a.M,5),2&e){let e;w.mGM(e=w.lsd())&&(t.splitView=e.first)}},standalone:!0,features:[w.Vt3,w.aNF],decls:18,vars:20,consts:[["slot","end"],[3,"ariaLabel","click",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"placeholder","autoFocus","lengthCheck","searchArea","onSubmit","onClear",4,"ngIf"],[3,"hideUntil","message"],[3,"module","description","component","componentId","courseId","hasDataToSync","completionChanged",4,"ngIf"],["class","addon-mod-glossary-index--offline-entries",4,"ngIf"],[4,"ngIf"],["icon","fas-list",3,"message",4,"ngIf"],[3,"action","enabled","error"],["collapsible-footer","",3,"hidden","courseId","currentModuleId"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end",4,"ngIf"],[3,"click","ariaLabel"],["name","fas-sort","slot","icon-only","aria-hidden","true"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],[3,"onSubmit","onClear","placeholder","autoFocus","lengthCheck","searchArea"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[1,"addon-mod-glossary-index--offline-entries"],[1,"big"],["button","",3,"detail","click",4,"ngFor","ngForOf"],["button","",3,"click","detail"],[1,"addon-mod-glossary-index--offline-entry"],["name","fas-clock",1,"ion-margin-end"],["contextLevel","module",3,"text","contextInstanceId","courseId","sanitize"],[4,"ngFor","ngForOf"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["icon","fas-list",3,"message"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end"],[3,"click"],["name","fas-plus","aria-hidden","true"],[1,"sr-only"]],template:function AddonModGlossaryIndexComponent_Template(e,t){1&e&&(w.j41(0,"core-navbar-buttons",0),w.DNE(1,AddonModGlossaryIndexComponent_ion_button_1_Template,3,3,"ion-button",1)(2,AddonModGlossaryIndexComponent_ion_button_2_Template,3,3,"ion-button",1)(3,AddonModGlossaryIndexComponent_Conditional_3_Template,3,3,"ion-button",2)(4,AddonModGlossaryIndexComponent_Conditional_4_Template,3,4),w.k0s(),w.j41(5,"core-split-view")(6,"ion-refresher",3),w.bIt("ionRefresh",(function AddonModGlossaryIndexComponent_Template_ion_refresher_ionRefresh_6_listener(e){return t.doRefresh(e.target)})),w.nrm(7,"ion-refresher-content",4),w.nI1(8,"translate"),w.k0s(),w.DNE(9,AddonModGlossaryIndexComponent_core_search_box_9_Template,2,7,"core-search-box",5),w.j41(10,"core-loading",6),w.DNE(11,AddonModGlossaryIndexComponent_core_course_module_info_11_Template,1,6,"core-course-module-info",7)(12,AddonModGlossaryIndexComponent_ion_list_12_Template,7,4,"ion-list",8)(13,AddonModGlossaryIndexComponent_ion_list_13_Template,2,1,"ion-list",9)(14,AddonModGlossaryIndexComponent_core_empty_box_14_Template,2,4,"core-empty-box",10),w.j41(15,"core-infinite-loading",11),w.bIt("action",(function AddonModGlossaryIndexComponent_Template_core_infinite_loading_action_15_listener(e){return t.loadMoreEntries(e)})),w.k0s()(),w.nrm(16,"core-course-module-navigation",12),w.DNE(17,AddonModGlossaryIndexComponent_ion_fab_17_Template,7,6,"ion-fab",13),w.k0s()),2&e&&(w.R7$(),w.Y8G("ngIf",!t.showLoading&&t.glossary&&t.glossary.browsemodes&&t.glossary.browsemodes.length>1),w.R7$(),w.Y8G("ngIf",!t.showLoading&&t.glossary),w.R7$(),w.vxM(3,t.courseContentsPage?4:3),w.R7$(3),w.Y8G("disabled",t.showLoading),w.R7$(),w.FS9("pullingText",w.bMT(8,18,"core.pulltorefresh")),w.R7$(2),w.Y8G("ngIf",t.isSearch),w.R7$(),w.Y8G("hideUntil",!t.showLoading)("message",t.loadingMessage),w.R7$(),w.Y8G("ngIf",!t.isSearch),w.R7$(),w.Y8G("ngIf",!t.isSearch&&t.entries&&t.entries.offlineEntries.length>0),w.R7$(),w.Y8G("ngIf",t.entries&&t.entries.onlineEntries.length>0),w.R7$(),w.Y8G("ngIf",(!t.entries||!t.entries.hasEntries)&&(!t.isSearch||t.hasSearched)),w.R7$(),w.Y8G("enabled",t.entries&&!t.entries.completed&&(!t.isSearch||t.hasSearched))("error",t.loadMoreError),w.R7$(),w.Y8G("hidden",t.showLoading)("courseId",t.courseId)("currentModuleId",t.module.id),w.R7$(),w.Y8G("ngIf",t.canAdd&&!t.showLoading))},dependencies:[x.n,k.Sq,k.bT,O.Jm,O.Q8,O.YW,O.iq,O.uz,O.Dg,O.he,O.nf,O.To,O.Ki,L.B,D.Q,$.h,N.b,V.R,j.c,a.M,F.A,P.t,B.B,X.i,Y.T,U.D9,R.CoreSearchBoxComponent,G.CoreCourseModuleInfoComponent,E.CoreCourseModuleNavigationComponent],styles:["[_nghost-%COMP%]   .addon-mod-glossary-index--offline-entries[_ngcontent-%COMP%]{border-bottom:1px solid var(--stroke)}[_nghost-%COMP%]   .addon-mod-glossary-index--offline-entry[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}"]}),AddonModGlossaryIndexComponent})();class AddonModGlossaryEntriesManager extends i.R{constructor(e,t){super(e,t.route.component),this.page=t}get offlineEntries(){return this.getSource().offlineEntries}get onlineEntries(){return this.getSource().onlineEntries}getDefaultItem(){return this.getSource().onlineEntries[0]||null}logActivity(){var e=this;return(0,o.A)((function*(){const t=e.getSource().glossary,n=e.getSource().viewMode;if(t&&n){try{yield C.$.logView(t.id,n),c.CoreCourse.checkModuleCompletion(e.page.courseId,e.page.module.completiondata)}catch{}e.page.analyticsLogEvent("mod_glossary_view_glossary",{data:{mode:n}})}}))()}get hasEntries(){return this.getSource().onlineEntries.length>0||this.getSource().offlineEntries.length>0}}},2401:(e,t,n)=>{n.d(t,{R:()=>CoreListItemsManager});var o=n(10467),i=n(21182),s=n(15324),r=n(93417),a=n(81690),l=n(95990),d=n(82907),c=n(24742),u=n(55554);class CoreListItemsManager extends l.u{constructor(e,t){super(e);const n=a.j.debounce((()=>this.scrollToCurrentElement()),300);this.pageRouteLocator=t,this.addListener({onSelectedItemUpdated:n}),this.finishSuccessfulFetch=c.j.once((()=>u.g.ignoreErrors(this.logActivity())))}get items(){return this.getSource().getItems()||[]}get loaded(){return null!==this.itemsMap}get completed(){return this.getSource().isCompleted()}get empty(){const e=this.getSource().getItems();return null===e||0===e.length}start(e){var t=this;return(0,o.A)((function*(){e&&t.watchSplitViewOutlet(e),t.updateSelectedItem()}))()}destroy(){var e;super.destroy(),null===(e=this.splitViewOutletSubscription)||void 0===e||e.unsubscribe()}watchSplitViewOutlet(e){var t;this.splitView=e,this.splitViewOutletSubscription=e.outletRouteObservable.subscribe((e=>this.updateSelectedItem(this.getPageRouteFromSplitViewOutlet(e)))),this.updateSelectedItem(null!==(t=this.getPageRouteFromSplitViewOutlet(e.outletRoute))&&void 0!==t?t:null)}isSelected(e){return this.selectedItem===e}getItemAriaCurrent(e){return this.isSelected(e)?"page":"false"}select(e){var t=this;return(0,o.A)((function*(){if(!e)return yield t.navigateToIndex({reset:t.resetNavigation()}),void 0;yield t.navigateToItem(e,{reset:t.resetNavigation()})}))()}reset(){this.getSource().reset()}reload(){var e=this;return(0,o.A)((function*(){yield e.getSource().reload(),e.finishSuccessfulFetch()}))()}load(){var e=this;return(0,o.A)((function*(){yield e.getSource().load(),e.finishSuccessfulFetch()}))()}logActivity(){return(0,o.A)((function*(){}))()}resetNavigation(){var e;return!!r.CoreScreen.isTablet&&!(!this.splitView||null!==(e=this.splitView)&&void 0!==e&&e.isNested)}updateSelectedItem(e=null){super.updateSelectedItem(e);this.select(r.CoreScreen.isTablet&&null===this.selectedItem&&this.splitView&&!this.splitView.isNested?this.getDefaultItem():this.selectedItem)}scrollToCurrentElement(){var e=this;return(0,o.A)((function*(){var t,n,o;if(r.CoreScreen.isMobile)return;const i=(null!==(t=null===(n=e.splitView)||void 0===n?void 0:n.nativeElement)&&void 0!==t?t:document).querySelector('[aria-current="page"]');if(!i)return;d.y.isElementInViewport(i,1,null===(o=e.splitView)||void 0===o?void 0:o.nativeElement)||i.scrollIntoView({behavior:"smooth"})}))()}getDefaultItem(){return this.items[0]||null}getCurrentPageRoute(){return this.pageRouteLocator instanceof i.nX?s.CoreNavigator.isRouteActive(this.pageRouteLocator)?this.pageRouteLocator:null:s.CoreNavigator.getCurrentRoute({pageComponent:this.pageRouteLocator})}getSelectedItemPathFromRoute(e){const t=[];for(;e.firstChild;)t.push(...s.CoreNavigator.getRouteUrl(e=e.firstChild));return t.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}getPageRouteFromSplitViewOutlet(e){const t=this.buildRouteMatcher();for(;e&&!t(e);)e=e.parent;return e}buildRouteMatcher(){if(this.pageRouteLocator instanceof i.nX){const e=s.CoreNavigator.getRouteFullPath(this.pageRouteLocator);return t=>s.CoreNavigator.getRouteFullPath(t)===e}return e=>e.component===this.pageRouteLocator}}},69006:(e,t,n)=>{n.d(t,{y:()=>f});var o=n(10467),i=n(23063),s=n(49882),r=n(44682),a=n(55554),l=n(51024),d=n(52749),c=n(25572),u=n(79555),h=n(95384),g=n(54438),m=n(2910);let f=(()=>{var e;class CoreCourseModuleMainActivityComponent extends i.x{constructor(e="CoreCourseModuleMainResourceComponent",t,n){super(e,n),this.content=t,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,o.A)((function*(){yield _superprop_getNgOnInit().call(e),e.hasOffline=!1,e.moduleName=h.CoreCourseModuleHelper.translateModuleName(e.pluginName||e.moduleName||""),e.syncEventName&&(e.syncObserver=s.z.on(e.syncEventName,(t=>{e.autoSyncEventReceived(t)}),e.siteId))}))()}isRefreshSyncNeeded(e){return!1}autoSyncEventReceived(e){this.isRefreshSyncNeeded(e)&&this.showLoadingAndRefresh(!1)}refreshContent(e=!1,t=!1){var n=this;return(0,o.A)((function*(){n.module&&(yield a.g.ignoreErrors(Promise.all([n.invalidateContent(),n.showCompletion?r.CoreCourse.invalidateModule(n.module.id):void 0])),yield n.loadContent(!0,e,t))}))()}showLoadingAndFetch(e=!1,t=!1){var n=this;return(0,o.A)((function*(){var o;n.showLoading=!0,null===(o=n.content)||void 0===o||o.scrollToTop(),yield n.loadContent(!1,e,t)}))()}showLoadingAndRefresh(e=!1,t=!1){var n;return this.showLoading=!0,null===(n=this.content)||void 0===n||n.scrollToTop(),this.refreshContent(e,t)}fetchContent(e=!1,t=!1,n=!1){return(0,o.A)((function*(){}))()}loadContent(e,t=!1,n=!1){var i=this;return(0,o.A)((function*(){if(i.module)try{e&&i.showCompletion&&(yield a.g.ignoreErrors(i.fetchModule())),yield i.fetchContent(e,t,n),i.finishSuccessfulFetch()}catch(n){var o;if(!e&&(null===(o=d.CoreSites.getCurrentSite())||void 0===o||!o.isOfflineDisabled())&&h.CoreCourseModuleHelper.isNotFoundError(n))return yield i.refreshContent(t);c.CoreAlerts.showError(n,{default:u.HT.instant(i.fetchContentDefaultError)})}finally{i.showLoading=!1}}))()}sync(){return(0,o.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(e){return e.updated}syncActivity(e=!1){var t=this;return(0,o.A)((function*(){try{const e=yield t.sync();return e.warnings.length&&c.CoreAlerts.show({message:e.warnings[0]}),t.hasSyncSucceed(e)}catch(t){return e&&c.CoreAlerts.showError(t,{default:u.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.syncObserver)||void 0===e||e.off()}}return(e=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(t){return new(t||e)(g.rXU("",8),g.rXU(m.W9),g.rXU(l.A))},e.ɵcmp=g.VBU({type:e,selectors:[["ng-component"]],inputs:{group:"group"},features:[g.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(e,t){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);