"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[78497,69006],{78497:(n,e,o)=>{o.r(e),o.d(e,{AddonModAssignIndexComponent:()=>V});var s=o(10467),i=o(75629),t=o(69006),d=o(51024),a=o(15221),r=o(15324),u=o(52749),m=o(24742),c=o(55554),l=o(79555),_=o(49882),g=o(5505),p=o(4175),f=o(75217),A=o(81679),I=o(66016),b=o(25572),h=o(86654),C=o(6736),y=o(30864),v=o(54438),M=o(2910),R=o(60177),T=o(69502),x=o(17388),G=o(6128),w=o(97818),S=o(64422),k=o(13988),j=o(86198),F=o(66731),$=o(43570),E=o(73955);const _c0=n=>({count:n});function AddonModAssignIndexComponent_Conditional_1_Template(n,e){if(1&n){const n=v.RV6();v.j41(0,"ion-button",7),v.nI1(1,"translate"),v.bIt("click",(function AddonModAssignIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){v.eBV(n);const e=v.XpG();return v.Njj(e.openModuleSummary())})),v.nrm(2,"ion-icon",8),v.k0s()}2&n&&v.Y8G("ariaLabel",v.bMT(1,1,"core.info"))}function AddonModAssignIndexComponent_Conditional_2_Template(n,e){if(1&n){const n=v.RV6();v.j41(0,"core-context-menu")(1,"core-context-menu-item",9),v.nI1(2,"translate"),v.bIt("action",(function AddonModAssignIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){v.eBV(n);const e=v.XpG();return v.Njj(e.openModuleSummary())})),v.k0s()()}2&n&&(v.R7$(),v.Y8G("priority",5e3)("content",v.bMT(2,2,"core.info")))}function AddonModAssignIndexComponent_div_5_core_file_1_Template(n,e){if(1&n&&v.nrm(0,"core-file",12),2&n){const n=e.$implicit,o=v.XpG(2);v.Y8G("file",n)("component",o.component)("componentId",o.componentId)}}function AddonModAssignIndexComponent_div_5_Template(n,e){if(1&n&&(v.j41(0,"div",10),v.DNE(1,AddonModAssignIndexComponent_div_5_core_file_1_Template,1,3,"core-file",11),v.k0s()),2&n){const n=v.XpG();v.R7$(),v.Y8G("ngForOf",n.assign.introattachments)}}function AddonModAssignIndexComponent_ng_container_6_p_8_Template(n,e){1&n&&(v.j41(0,"p"),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&n&&(v.R7$(),v.JRh(v.bMT(2,1,"core.no")))}function AddonModAssignIndexComponent_ng_container_6_p_9_Template(n,e){1&n&&(v.j41(0,"p"),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&n&&(v.R7$(),v.JRh(v.bMT(2,1,"core.yes")))}function AddonModAssignIndexComponent_ng_container_6_ion_item_10_Template(n,e){if(1&n&&(v.j41(0,"ion-item",15)(1,"ion-label")(2,"p",16),v.EFF(3),v.nI1(4,"translate"),v.k0s(),v.j41(5,"p"),v.EFF(6),v.k0s()()()),2&n){const n=v.XpG(2);v.R7$(3),v.JRh(v.bMT(4,2,"addon.mod_assign.timeremaining")),v.R7$(3),v.JRh(n.timeRemaining)}}function AddonModAssignIndexComponent_ng_container_6_ion_item_11_Template(n,e){if(1&n&&(v.j41(0,"ion-item",15)(1,"ion-label")(2,"p",16),v.EFF(3),v.nI1(4,"translate"),v.k0s(),v.j41(5,"p"),v.EFF(6),v.k0s()()()),2&n){const n=v.XpG(2);v.R7$(3),v.JRh(v.bMT(4,2,"addon.mod_assign.latesubmissions")),v.R7$(3),v.JRh(n.lateSubmissions)}}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_2_Template(n,e){1&n&&(v.j41(0,"p",16),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&n&&(v.R7$(),v.JRh(v.bMT(2,1,"addon.mod_assign.numberofteams")))}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_3_Template(n,e){1&n&&(v.j41(0,"p",16),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&n&&(v.R7$(),v.JRh(v.bMT(2,1,"addon.mod_assign.numberofparticipants")))}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_7_Template(n,e){if(1&n&&(v.j41(0,"span",27),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&n){const n=v.XpG(3);v.R7$(),v.SpI(" ",v.i5U(2,1,"addon.mod_assign.numberofparticipantscountdescription",v.eq3(4,_c0,n.summary.participantcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_8_Template(n,e){if(1&n&&(v.j41(0,"span",27),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&n){const n=v.XpG(3);v.R7$(),v.SpI(" ",v.i5U(2,1,"addon.mod_assign.numberofteamscountdescription",v.eq3(4,_c0,n.summary.participantcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_Template(n,e){if(1&n){const n=v.RV6();v.j41(0,"ion-item",22),v.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_12_Template_ion_item_click_0_listener(){v.eBV(n);const e=v.XpG(2);return v.Njj(e.goToSubmissionList())})),v.j41(1,"ion-label"),v.DNE(2,AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_2_Template,3,3,"p",23)(3,AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_3_Template,3,3,"p",23),v.k0s(),v.j41(4,"ion-badge",24)(5,"span",25),v.EFF(6),v.k0s(),v.DNE(7,AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_7_Template,3,6,"span",26)(8,AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_8_Template,3,6,"span",26),v.k0s()()}if(2&n){const n=v.XpG(2);v.Y8G("detail",!0),v.R7$(2),v.Y8G("ngIf",n.assign.teamsubmission),v.R7$(),v.Y8G("ngIf",!n.assign.teamsubmission),v.R7$(3),v.JRh(n.summary.participantcount),v.R7$(),v.Y8G("ngIf",!n.assign.teamsubmission),v.R7$(),v.Y8G("ngIf",n.assign.teamsubmission)}}function AddonModAssignIndexComponent_ng_container_6_ion_item_13_Template(n,e){if(1&n){const n=v.RV6();v.j41(0,"ion-item",28),v.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_13_Template_ion_item_click_0_listener(){v.eBV(n);const e=v.XpG(2);return v.Njj(e.goToSubmissionList(e.submissionStatusDraft,!!e.summary.submissiondraftscount))})),v.j41(1,"ion-label")(2,"p",16),v.EFF(3),v.nI1(4,"translate"),v.k0s()(),v.j41(5,"ion-badge",24)(6,"span",25),v.EFF(7),v.k0s(),v.j41(8,"span",27),v.EFF(9),v.nI1(10,"translate"),v.k0s()()()}if(2&n){const n=v.XpG(2);v.AVh("hide-detail",!n.summary.submissiondraftscount),v.Y8G("detail",!0)("button",n.summary.submissiondraftscount),v.R7$(3),v.JRh(v.bMT(4,7,"addon.mod_assign.numberofdraftsubmissions")),v.R7$(4),v.JRh(n.summary.submissiondraftscount),v.R7$(2),v.SpI(" ",v.i5U(10,9,"addon.mod_assign.numberofdraftsubmissionscountdescription",v.eq3(12,_c0,n.summary.submissiondraftscount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_14_Template(n,e){if(1&n){const n=v.RV6();v.j41(0,"ion-item",28),v.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_14_Template_ion_item_click_0_listener(){v.eBV(n);const e=v.XpG(2);return v.Njj(e.goToSubmissionList(e.submissionStatusSubmitted,!!e.summary.submissionssubmittedcount))})),v.j41(1,"ion-label")(2,"p",16),v.EFF(3),v.nI1(4,"translate"),v.k0s()(),v.j41(5,"ion-badge",24)(6,"span",25),v.EFF(7),v.k0s(),v.j41(8,"span",27),v.EFF(9),v.nI1(10,"translate"),v.k0s()()()}if(2&n){const n=v.XpG(2);v.AVh("hide-detail",!n.summary.submissionssubmittedcount),v.Y8G("detail",!0)("button",n.summary.submissionssubmittedcount),v.R7$(3),v.JRh(v.bMT(4,7,"addon.mod_assign.numberofsubmittedassignments")),v.R7$(4),v.JRh(n.summary.submissionssubmittedcount),v.R7$(2),v.SpI(" ",v.i5U(10,9,"addon.mod_assign.numberofsubmittedassignmentscountdescription",v.eq3(12,_c0,n.summary.submissionssubmittedcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_15_Template(n,e){if(1&n){const n=v.RV6();v.j41(0,"ion-item",28),v.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_15_Template_ion_item_click_0_listener(){v.eBV(n);const e=v.XpG(2);return v.Njj(e.goToSubmissionList(e.needGrading,e.needsGradingAvailable))})),v.j41(1,"ion-label")(2,"p",16),v.EFF(3),v.nI1(4,"translate"),v.k0s()(),v.j41(5,"ion-badge",24)(6,"span",25),v.EFF(7),v.k0s(),v.j41(8,"span",27),v.EFF(9),v.nI1(10,"translate"),v.k0s()()()}if(2&n){const n=v.XpG(2);v.AVh("hide-detail",!n.needsGradingAvailable),v.Y8G("detail",!0)("button",n.needsGradingAvailable),v.R7$(3),v.JRh(v.bMT(4,7,"addon.mod_assign.numberofsubmissionsneedgrading")),v.R7$(4),v.JRh(n.summary.submissionsneedgradingcount),v.R7$(2),v.SpI(" ",v.i5U(10,9,"addon.mod_assign.numberofsubmissionsneedgradingcountdescription",v.eq3(12,_c0,n.summary.submissionsneedgradingcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_card_16_Template(n,e){if(1&n&&(v.j41(0,"ion-card",29)(1,"ion-item"),v.nrm(2,"ion-icon",30),v.j41(3,"ion-label"),v.EFF(4),v.nI1(5,"translate"),v.k0s()()()),2&n){const n=v.XpG(2);v.R7$(4),v.JRh(v.bMT(5,1,"addon.mod_assign."+n.summary.warnofungroupedusers))}}function AddonModAssignIndexComponent_ng_container_6_div_17_Template(n,e){if(1&n&&(v.j41(0,"div",31),v.nrm(1,"core-course-module-navigation",32),v.k0s()),2&n){const n=v.XpG(2);v.R7$(),v.Y8G("courseId",n.courseId)("currentModuleId",n.module.id)}}function AddonModAssignIndexComponent_ng_container_6_Template(n,e){if(1&n){const n=v.RV6();v.qex(0),v.j41(1,"ion-list",13)(2,"core-group-selector",14),v.mxI("selectedChange",(function AddonModAssignIndexComponent_ng_container_6_Template_core_group_selector_selectedChange_2_listener(e){v.eBV(n);const o=v.XpG();return v.DH7(o.group,e)||(o.group=e),v.Njj(e)})),v.bIt("selectedChange",(function AddonModAssignIndexComponent_ng_container_6_Template_core_group_selector_selectedChange_2_listener(){v.eBV(n);const e=v.XpG();return v.Njj(e.setGroup(e.group))})),v.k0s(),v.j41(3,"ion-item",15)(4,"ion-label")(5,"p",16),v.EFF(6),v.nI1(7,"translate"),v.k0s(),v.DNE(8,AddonModAssignIndexComponent_ng_container_6_p_8_Template,3,3,"p",5)(9,AddonModAssignIndexComponent_ng_container_6_p_9_Template,3,3,"p",5),v.k0s()(),v.DNE(10,AddonModAssignIndexComponent_ng_container_6_ion_item_10_Template,7,4,"ion-item",17)(11,AddonModAssignIndexComponent_ng_container_6_ion_item_11_Template,7,4,"ion-item",17)(12,AddonModAssignIndexComponent_ng_container_6_ion_item_12_Template,9,6,"ion-item",18)(13,AddonModAssignIndexComponent_ng_container_6_ion_item_13_Template,11,14,"ion-item",19)(14,AddonModAssignIndexComponent_ng_container_6_ion_item_14_Template,11,14,"ion-item",19)(15,AddonModAssignIndexComponent_ng_container_6_ion_item_15_Template,11,14,"ion-item",19),v.k0s(),v.DNE(16,AddonModAssignIndexComponent_ng_container_6_ion_card_16_Template,6,3,"ion-card",20)(17,AddonModAssignIndexComponent_ng_container_6_div_17_Template,2,2,"div",21),v.bVm()}if(2&n){const n=v.XpG();v.R7$(2),v.Y8G("groupInfo",n.groupInfo),v.R50("selected",n.group),v.Y8G("courseId",n.courseId),v.R7$(4),v.JRh(v.bMT(7,14,"core.course.hiddenfromstudents")),v.R7$(2),v.Y8G("ngIf",n.module.visible),v.R7$(),v.Y8G("ngIf",!n.module.visible),v.R7$(),v.Y8G("ngIf",n.timeRemaining),v.R7$(),v.Y8G("ngIf",n.lateSubmissions),v.R7$(),v.Y8G("ngIf",n.summary&&n.summary.participantcount),v.R7$(),v.Y8G("ngIf",n.assign.submissiondrafts&&n.summary&&n.summary.submissionsenabled),v.R7$(),v.Y8G("ngIf",n.summary&&n.summary.submissionsenabled),v.R7$(),v.Y8G("ngIf",n.summary&&n.summary.submissionsenabled&&!n.assign.teamsubmission),v.R7$(),v.Y8G("ngIf",n.assign.teamsubmission&&n.summary&&n.summary.warnofungroupedusers),v.R7$(),v.Y8G("ngIf",!n.showLoading)}}function AddonModAssignIndexComponent_addon_mod_assign_submission_7_Template(n,e){if(1&n&&v.nrm(0,"addon-mod-assign-submission",33),2&n){const n=v.XpG();v.Y8G("courseId",n.courseId)("moduleId",n.module.id)}}let V=(()=>{var n;class AddonModAssignIndexComponent extends t.y{constructor(n,e){super("AddonModLessonIndexComponent",n,e),this.content=n,this.component=I.It,this.pluginName=I.KZ,this.canViewAllSubmissions=!1,this.canViewOwnSubmission=!1,this.needsGradingAvailable=!1,this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1,defaultGroupId:0,canAccessAllGroups:!1},this.submissionStatusSubmitted="submitted",this.submissionStatusDraft="draft",this.needGrading="needgrading",this.syncEventName=I.zi,this.currentSite=u.CoreSites.getRequiredCurrentSite(),this.currentUserId=this.currentSite.getUserId()}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,s.A)((function*(){_superprop_getNgOnInit().call(n),n.savedObserver=_.z.on(I.Ad,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&n.showLoadingAndRefresh(!0,!1)}),n.siteId),n.savedObserver=_.z.on(I.ze,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&n.showLoadingAndRefresh(!0,!1)}),n.siteId),n.submittedObserver=_.z.on(I._K,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&(n.checkCompletion(),n.showLoadingAndRefresh(!0,!1))}),n.siteId),n.gradedObserver=_.z.on(I.$P,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&n.showLoadingAndRefresh(!0,!1)}),n.siteId),n.startedObserver=_.z.on(I.dl,(e=>{n.assign&&e.assignmentId==n.assign.id&&n.showLoadingAndRefresh(!1,!1)}),n.siteId),yield n.loadContent(!1,!0)}))()}fetchContent(n,e=!1,o=!1){var i=this;return(0,s.A)((function*(){i.assign=yield g.AddonModAssign.getAssignment(i.courseId,i.module.id),i.dataRetrieved.emit(i.assign),i.description=i.assign.intro,e&&(yield c.g.ignoreErrors(i.syncActivity(o))),i.hasOffline=yield p.AddonModAssignOffline.hasAssignOfflineData(i.assign.id);const n=yield g.AddonModAssign.getSubmissions(i.assign.id,{cmId:i.module.id}),s=m.j.timestamp();if(i.canViewAllSubmissions=n.canviewsubmissions,n.canviewsubmissions)return i.timeRemaining="",i.lateSubmissions="",i.assign.duedate>0&&(i.timeRemaining=i.assign.duedate-s<=0?l.HT.instant("addon.mod_assign.assignmentisdue"):m.j.formatTime(i.assign.duedate-s),i.assign.duedate<s&&i.assign.cutoffdate&&(i.lateSubmissions=i.assign.cutoffdate>s?l.HT.instant("addon.mod_assign.latesubmissionsaccepted",{$a:m.j.userDate(1e3*i.assign.cutoffdate)}):l.HT.instant("addon.mod_assign.nomoresubmissionsaccepted"))),i.groupInfo=yield a.CoreGroups.getActivityGroupInfo(i.assign.cmid,!1),yield i.setGroup(a.CoreGroups.validateGroupId(i.group,i.groupInfo)),void 0;try{yield g.AddonModAssign.getSubmissionStatus(i.assign,{cmId:i.module.id}),i.canViewOwnSubmission=!0}catch(n){if(i.canViewOwnSubmission=!1,"nopermission"!==n.errorcode)throw n}}))()}logActivity(){var n=this;return(0,s.A)((function*(){n.assign&&(yield c.g.ignoreErrors(g.AddonModAssign.logView(n.assign.id)),n.analyticsLogEvent("mod_assign_view_assign"),n.canViewAllSubmissions?(yield c.g.ignoreErrors(g.AddonModAssign.logGradingView(n.assign.id)),n.analyticsLogEvent("mod_assign_view_grading_table",{sendUrl:!1})):n.canViewOwnSubmission&&(yield c.g.ignoreErrors(g.AddonModAssign.logSubmissionView(n.assign.id)),n.analyticsLogEvent("mod_assign_view_submission_status",{sendUrl:!1})))}))()}setGroup(n=0){var e=this;return(0,s.A)((function*(){if(e.group=n,!e.assign)return;const o=yield g.AddonModAssign.getSubmissionStatus(e.assign,{groupId:e.group,cmId:e.module.id});if(e.summary=o.gradingsummary,!e.summary)return e.needsGradingAvailable=!1,void 0;if(!0===e.summary.warnofungroupedusers)e.summary.warnofungroupedusers="ungroupedusers";else switch(e.summary.warnofungroupedusers){case I.aE:e.summary.warnofungroupedusers="ungroupedusers";break;case I.hq:e.summary.warnofungroupedusers="ungroupedusersoptional";break;default:e.summary.warnofungroupedusers=""}e.needsGradingAvailable=e.summary.submissionsneedgradingcount>0}))()}goToSubmissionList(n,e=!1){if(void 0!==n&&!e)return;const o={groupId:this.group||0,moduleName:this.moduleName};void 0!==n&&(o.status=n),r.CoreNavigator.navigateToSitePath(`${I.gU}/${this.courseId}/${this.module.id}/submission`,{params:o})}hasSyncSucceed(n){var e;n.updated&&(null===(e=this.submissionComponent)||void 0===e||e.invalidateAndRefresh(!1));return n.updated}invalidateContent(){var n=this;return(0,s.A)((function*(){var e;const o=[];o.push(g.AddonModAssign.invalidateAssignmentData(n.courseId)),o.push((null===(e=n.submissionComponent)||void 0===e?void 0:e.invalidateAndRefresh(!0))||Promise.resolve()),n.assign&&(o.push(g.AddonModAssign.invalidateAllSubmissionData(n.assign.id)),n.canViewAllSubmissions&&o.push(g.AddonModAssign.invalidateSubmissionStatusData(n.assign.id,void 0,n.group))),yield Promise.all(o)}))()}isRefreshSyncNeeded(n){return!(!this.assign||n.assignId!=this.assign.id)&&(n.warnings&&n.warnings.length&&b.CoreAlerts.show({message:n.warnings[0]}),!0)}sync(){var n=this;return(0,s.A)((function*(){if(!n.assign)throw new i.CoreError("Cannot sync without a assign.");return f.AddonModAssignSync.syncAssign(n.assign.id)}))()}ngOnDestroy(){var n,e,o,s;super.ngOnDestroy(),null===(n=this.savedObserver)||void 0===n||n.off(),null===(e=this.submittedObserver)||void 0===e||e.off(),null===(o=this.gradedObserver)||void 0===o||o.off(),null===(s=this.startedObserver)||void 0===s||s.off()}}return(n=AddonModAssignIndexComponent).ɵfac=function AddonModAssignIndexComponent_Factory(e){return new(e||n)(v.rXU(M.W9),v.rXU(d.A,8))},n.ɵcmp=v.VBU({type:n,selectors:[["addon-mod-assign-index"]],viewQuery:function AddonModAssignIndexComponent_Query(n,e){if(1&n&&v.GBs(A.B,5),2&n){let n;v.mGM(n=v.lsd())&&(e.submissionComponent=n.first)}},standalone:!0,features:[v.Vt3,v.aNF],decls:8,vars:11,consts:[["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],["description","",4,"ngIf"],[4,"ngIf"],[3,"courseId","moduleId",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],["description",""],[3,"file","component","componentId",4,"ngFor","ngForOf"],[3,"file","component","componentId"],[1,"core-list-align-detail-right"],[3,"selectedChange","groupInfo","selected","courseId"],[1,"ion-text-wrap"],[1,"item-heading"],["class","ion-text-wrap",4,"ngIf"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngIf"],["class","ion-text-wrap",3,"hide-detail","detail","button","click",4,"ngIf"],["class","core-info-card",4,"ngIf"],["collapsible-footer","","slot","fixed",4,"ngIf"],["button","",1,"ion-text-wrap",3,"click","detail"],["class","item-heading",4,"ngIf"],["slot","end","color","primary"],["aria-hidden","true"],["class","sr-only",4,"ngIf"],[1,"sr-only"],[1,"ion-text-wrap",3,"click","detail","button"],[1,"core-info-card"],["name","fas-circle-question","slot","start","aria-hidden","true"],["collapsible-footer","","slot","fixed"],[3,"courseId","currentModuleId"],[3,"courseId","moduleId"]],template:function AddonModAssignIndexComponent_Template(n,e){1&n&&(v.j41(0,"core-navbar-buttons",0),v.DNE(1,AddonModAssignIndexComponent_Conditional_1_Template,3,3,"ion-button",1)(2,AddonModAssignIndexComponent_Conditional_2_Template,3,4),v.k0s(),v.j41(3,"core-loading",2)(4,"core-course-module-info",3),v.bIt("completionChanged",(function AddonModAssignIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return e.onCompletionChange()})),v.DNE(5,AddonModAssignIndexComponent_div_5_Template,2,1,"div",4),v.k0s(),v.DNE(6,AddonModAssignIndexComponent_ng_container_6_Template,18,16,"ng-container",5)(7,AddonModAssignIndexComponent_addon_mod_assign_submission_7_Template,1,2,"addon-mod-assign-submission",6),v.k0s()),2&n&&(v.R7$(),v.vxM(1,e.courseContentsPage?2:1),v.R7$(2),v.Y8G("hideUntil",!e.showLoading),v.R7$(),v.Y8G("module",e.module)("description",e.description)("component",e.component)("componentId",e.componentId)("courseId",e.courseId)("hasDataToSync",e.hasOffline),v.R7$(),v.Y8G("ngIf",e.assign&&(null==e.assign.introattachments?null:e.assign.introattachments.length)&&!e.assign.submissionattachments),v.R7$(),v.Y8G("ngIf",e.assign&&e.canViewAllSubmissions),v.R7$(),v.Y8G("ngIf",!e.showLoading&&!e.canViewAllSubmissions&&e.canViewOwnSubmission))},dependencies:[h.n,R.Sq,R.bT,M.In,M.Jm,M.b_,M.iq,M.uz,M.he,M.nf,T.B,x.Q,G.t,w.F,S.R,k.c,j.t,F.i,$.T,E.D9,A.B,C.CoreCourseModuleInfoComponent,y.CoreCourseModuleNavigationComponent],encapsulation:2}),AddonModAssignIndexComponent})()},69006:(n,e,o)=>{o.d(e,{y:()=>p});var s=o(10467),i=o(23063),t=o(49882),d=o(44682),a=o(55554),r=o(51024),u=o(52749),m=o(25572),c=o(79555),l=o(95384),_=o(54438),g=o(2910);let p=(()=>{var n;class CoreCourseModuleMainActivityComponent extends i.x{constructor(n="CoreCourseModuleMainResourceComponent",e,o){super(n,o),this.content=e,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,s.A)((function*(){yield _superprop_getNgOnInit().call(n),n.hasOffline=!1,n.moduleName=l.CoreCourseModuleHelper.translateModuleName(n.pluginName||n.moduleName||""),n.syncEventName&&(n.syncObserver=t.z.on(n.syncEventName,(e=>{n.autoSyncEventReceived(e)}),n.siteId))}))()}isRefreshSyncNeeded(n){return!1}autoSyncEventReceived(n){this.isRefreshSyncNeeded(n)&&this.showLoadingAndRefresh(!1)}refreshContent(n=!1,e=!1){var o=this;return(0,s.A)((function*(){o.module&&(yield a.g.ignoreErrors(Promise.all([o.invalidateContent(),o.showCompletion?d.CoreCourse.invalidateModule(o.module.id):void 0])),yield o.loadContent(!0,n,e))}))()}showLoadingAndFetch(n=!1,e=!1){var o=this;return(0,s.A)((function*(){var s;o.showLoading=!0,null===(s=o.content)||void 0===s||s.scrollToTop(),yield o.loadContent(!1,n,e)}))()}showLoadingAndRefresh(n=!1,e=!1){var o;return this.showLoading=!0,null===(o=this.content)||void 0===o||o.scrollToTop(),this.refreshContent(n,e)}fetchContent(n=!1,e=!1,o=!1){return(0,s.A)((function*(){}))()}loadContent(n,e=!1,o=!1){var i=this;return(0,s.A)((function*(){if(i.module)try{n&&i.showCompletion&&(yield a.g.ignoreErrors(i.fetchModule())),yield i.fetchContent(n,e,o),i.finishSuccessfulFetch()}catch(o){var s;if(!n&&(null===(s=u.CoreSites.getCurrentSite())||void 0===s||!s.isOfflineDisabled())&&l.CoreCourseModuleHelper.isNotFoundError(o))return yield i.refreshContent(e);m.CoreAlerts.showError(o,{default:c.HT.instant(i.fetchContentDefaultError)})}finally{i.showLoading=!1}}))()}sync(){return(0,s.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(n){return n.updated}syncActivity(n=!1){var e=this;return(0,s.A)((function*(){try{const n=yield e.sync();return n.warnings.length&&m.CoreAlerts.show({message:n.warnings[0]}),e.hasSyncSucceed(n)}catch(e){return n&&m.CoreAlerts.showError(e,{default:c.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var n;super.ngOnDestroy(),null===(n=this.syncObserver)||void 0===n||n.off()}}return(n=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(e){return new(e||n)(_.rXU("",8),_.rXU(g.W9),_.rXU(r.A))},n.ɵcmp=_.VBU({type:n,selectors:[["ng-component"]],inputs:{group:"group"},features:[_.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(n,e){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);