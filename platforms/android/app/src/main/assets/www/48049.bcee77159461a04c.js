"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[48049,69006],{48049:(o,n,e)=>{e.r(n),e.d(n,{AddonModWorkshopIndexComponent:()=>j});var s=e(10467),i=e(75629),t=e(69006),d=e(51024),r=e(15221),a=e(15324),_=e(18022),c=e(93589),p=e(58364),m=e(49882),l=e(67193),u=e(80178),h=e(26327),k=e(36553),f=e(81552),g=e(55554),I=e(86552),b=e(61919),v=e(86654),A=e(30864),w=e(6736),M=e(54438),C=e(2910),x=e(60177),T=e(69502),W=e(17388),S=e(97818),R=e(64422),G=e(13988),y=e(86198),E=e(58197),$=e(35407),N=e(66731),F=e(43570),Y=e(73955);const _c0=()=>[];function AddonModWorkshopIndexComponent_Conditional_1_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-button",6),M.nI1(1,"translate"),M.bIt("click",(function AddonModWorkshopIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){M.eBV(o);const n=M.XpG();return M.Njj(n.openModuleSummary())})),M.nrm(2,"ion-icon",7),M.k0s()}2&o&&M.Y8G("ariaLabel",M.bMT(1,1,"core.info"))}function AddonModWorkshopIndexComponent_Conditional_2_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"core-context-menu")(1,"core-context-menu-item",8),M.nI1(2,"translate"),M.bIt("action",(function AddonModWorkshopIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){M.eBV(o);const n=M.XpG();return M.Njj(n.openModuleSummary())})),M.k0s()()}2&o&&(M.R7$(),M.Y8G("priority",5e3)("content",M.bMT(2,2,"core.info")))}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_1_Template(o,n){1&o&&(M.nrm(0,"ion-icon",20),M.nI1(1,"translate")),2&o&&M.BMQ("aria-label",M.bMT(1,1,"addon.mod_workshop.tasktodo"))}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_2_Template(o,n){1&o&&(M.nrm(0,"ion-icon",21),M.nI1(1,"translate")),2&o&&M.BMQ("aria-label",M.bMT(1,1,"addon.mod_workshop.taskfail"))}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_3_Template(o,n){1&o&&(M.nrm(0,"ion-icon",22),M.nI1(1,"translate")),2&o&&M.BMQ("aria-label",M.bMT(1,1,"addon.mod_workshop.taskinfo"))}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_4_Template(o,n){1&o&&(M.nrm(0,"ion-icon",23),M.nI1(1,"translate")),2&o&&M.BMQ("aria-label",M.bMT(1,1,"addon.mod_workshop.taskdone"))}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_p_8_Template(o,n){if(1&o&&M.nrm(0,"p",24),2&o){const o=M.XpG().$implicit;M.Y8G("innerHTML",o.details,M.npT)}}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_9_Template(o,n){1&o&&M.nrm(0,"ion-icon",25)}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-item",12),M.bIt("click",(function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_Template_ion_item_click_0_listener(){const n=M.eBV(o).$implicit,e=M.XpG(3);return M.Njj(e.runTask(n))})),M.DNE(1,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_1_Template,2,3,"ion-icon",13)(2,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_2_Template,2,3,"ion-icon",14)(3,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_3_Template,2,3,"ion-icon",15)(4,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_4_Template,2,3,"ion-icon",16),M.j41(5,"ion-label")(6,"p",17),M.EFF(7),M.k0s(),M.DNE(8,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_p_8_Template,1,1,"p",18),M.k0s(),M.DNE(9,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_ion_icon_9_Template,1,0,"ion-icon",19),M.k0s()}if(2&o){const o=n.$implicit,e=M.XpG(3);M.AVh("item-dimmed","submit"===o.code&&!e.showSubmit),M.Y8G("detail",!1),M.R7$(),M.Y8G("ngIf",null===o.completed),M.R7$(),M.Y8G("ngIf",""===o.completed),M.R7$(),M.Y8G("ngIf","info"===o.completed),M.R7$(),M.Y8G("ngIf","1"===o.completed),M.R7$(3),M.JRh(o.title),M.R7$(),M.Y8G("ngIf",o.details),M.R7$(),M.Y8G("ngIf",o.link&&"submit"!==o.code)}}function AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_Template(o,n){if(1&o&&(M.qex(0),M.DNE(1,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_ion_item_1_Template,10,10,"ion-item",11),M.bVm()),2&o){const o=M.XpG(2);M.R7$(),M.Y8G("ngForOf",o.phases[o.workshop.phase].tasks)}}function AddonModWorkshopIndexComponent_ion_card_5_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-card")(1,"ion-item",9),M.bIt("click",(function AddonModWorkshopIndexComponent_ion_card_5_Template_ion_item_click_1_listener(){M.eBV(o);const n=M.XpG();return M.Njj(n.viewPhaseInfo())})),M.j41(2,"ion-label")(3,"h2",10),M.EFF(4),M.k0s()()(),M.DNE(5,AddonModWorkshopIndexComponent_ion_card_5_ng_container_5_Template,2,1,"ng-container",4),M.k0s()}if(2&o){const o=M.XpG();M.R7$(),M.Y8G("detail",!0),M.R7$(3),M.JRh(o.phases[o.workshop.phase].title),M.R7$(),M.Y8G("ngIf",o.phases&&o.phases[o.workshop.phase]&&o.phases[o.workshop.phase].tasks&&o.phases[o.workshop.phase].tasks.length)}}function AddonModWorkshopIndexComponent_ion_card_6_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item",10)(2,"ion-label")(3,"h3",17),M.EFF(4),M.nI1(5,"translate"),M.k0s(),M.nrm(6,"core-format-text",26),M.k0s()()()),2&o){const o=M.XpG();M.R7$(4),M.JRh(M.bMT(5,6,"core.description")),M.R7$(2),M.Y8G("text",o.description)("component",o.component)("componentId",o.componentId)("contextInstanceId",o.module.id)("courseId",o.courseId)}}function AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_1_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item",10)(2,"ion-label")(3,"h3",17),M.EFF(4),M.nI1(5,"translate"),M.k0s(),M.nrm(6,"core-format-text",27),M.k0s()()()),2&o){const o=M.XpG(3);M.R7$(4),M.JRh(M.bMT(5,6,"addon.mod_workshop.conclusion")),M.R7$(2),M.Y8G("component",o.component)("componentId",o.module.id)("text",o.workshop.conclusion)("contextInstanceId",o.module.id)("courseId",o.courseId)}}function AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_2_ion_item_6_Template(o,n){if(1&o&&(M.j41(0,"ion-item",10)(1,"ion-label")(2,"p",17),M.EFF(3),M.nI1(4,"translate"),M.k0s(),M.j41(5,"p"),M.EFF(6),M.k0s()()()),2&o){const o=M.XpG(4);M.R7$(3),M.JRh(M.bMT(4,2,"addon.mod_workshop.submissiongrade")),M.R7$(3),M.JRh(o.userGrades.submissionlongstrgrade)}}function AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_2_ion_item_7_Template(o,n){if(1&o&&(M.j41(0,"ion-item",10)(1,"ion-label")(2,"p",17),M.EFF(3),M.nI1(4,"translate"),M.k0s(),M.j41(5,"p"),M.EFF(6),M.k0s()()()),2&o){const o=M.XpG(4);M.R7$(3),M.JRh(M.bMT(4,2,"addon.mod_workshop.gradinggrade")),M.R7$(3),M.JRh(o.userGrades.assessmentlongstrgrade)}}function AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_2_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item-divider",10)(2,"ion-label")(3,"h3",17),M.EFF(4),M.nI1(5,"translate"),M.k0s()()(),M.DNE(6,AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_2_ion_item_6_Template,7,4,"ion-item",28)(7,AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_2_ion_item_7_Template,7,4,"ion-item",28),M.k0s()),2&o){const o=M.XpG(3);M.R7$(4),M.JRh(M.bMT(5,3,"addon.mod_workshop.yourgrades")),M.R7$(2),M.Y8G("ngIf",o.userGrades.submissionlongstrgrade),M.R7$(),M.Y8G("ngIf",o.userGrades.assessmentlongstrgrade)}}function AddonModWorkshopIndexComponent_div_7_ng_container_1_Template(o,n){if(1&o&&(M.qex(0),M.DNE(1,AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_1_Template,7,8,"ion-card",4)(2,AddonModWorkshopIndexComponent_div_7_ng_container_1_ion_card_2_Template,8,5,"ion-card",4),M.bVm()),2&o){const o=M.XpG(2);M.R7$(),M.Y8G("ngIf",o.workshop.conclusion),M.R7$(),M.Y8G("ngIf",o.userGrades)}}function AddonModWorkshopIndexComponent_div_7_ion_card_2_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item",10)(2,"ion-label")(3,"h3",17),M.EFF(4),M.nI1(5,"translate"),M.k0s(),M.nrm(6,"core-format-text",27),M.k0s()()()),2&o){const o=M.XpG(2);M.R7$(4),M.JRh(M.bMT(5,6,"addon.mod_workshop.areainstructauthors")),M.R7$(2),M.Y8G("component",o.component)("componentId",o.module.id)("text",o.workshop.instructauthors)("contextInstanceId",o.module.id)("courseId",o.courseId)}}function AddonModWorkshopIndexComponent_div_7_ion_card_3_h3_3_Template(o,n){1&o&&(M.j41(0,"h3",17),M.EFF(1),M.nI1(2,"translate"),M.k0s()),2&o&&(M.R7$(),M.SpI(" ",M.bMT(2,1,"addon.mod_workshop.yoursubmission")," "))}function AddonModWorkshopIndexComponent_div_7_ion_card_3_h3_4_Template(o,n){1&o&&(M.j41(0,"h3",17),M.EFF(1),M.nI1(2,"translate"),M.k0s()),2&o&&(M.R7$(),M.SpI(" ",M.bMT(2,1,"addon.mod_workshop.yoursubmissionwithassessments")," "))}function AddonModWorkshopIndexComponent_div_7_ion_card_3_ion_item_5_p_2_Template(o,n){1&o&&(M.j41(0,"p"),M.EFF(1),M.nI1(2,"translate"),M.k0s()),2&o&&(M.R7$(),M.JRh(M.bMT(2,1,"addon.mod_workshop.noyoursubmission")))}function AddonModWorkshopIndexComponent_div_7_ion_card_3_ion_item_5_Template(o,n){if(1&o&&(M.j41(0,"ion-item",10)(1,"ion-label"),M.DNE(2,AddonModWorkshopIndexComponent_div_7_ion_card_3_ion_item_5_p_2_Template,3,3,"p",4),M.k0s()()),2&o){const o=M.XpG(3);M.R7$(2),M.Y8G("ngIf",!o.submission)}}function AddonModWorkshopIndexComponent_div_7_ion_card_3_addon_mod_workshop_submission_6_Template(o,n){if(1&o&&M.nrm(0,"addon-mod-workshop-submission",31),2&o){const o=M.XpG(3);M.Y8G("submission",o.submission)("courseId",o.workshop.course)("module",o.module)("workshop",o.workshop)("access",o.access)}}function AddonModWorkshopIndexComponent_div_7_ion_card_3_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item-divider",10)(2,"ion-label"),M.DNE(3,AddonModWorkshopIndexComponent_div_7_ion_card_3_h3_3_Template,3,3,"h3",29)(4,AddonModWorkshopIndexComponent_div_7_ion_card_3_h3_4_Template,3,3,"h3",29),M.k0s()(),M.DNE(5,AddonModWorkshopIndexComponent_div_7_ion_card_3_ion_item_5_Template,3,1,"ion-item",28)(6,AddonModWorkshopIndexComponent_div_7_ion_card_3_addon_mod_workshop_submission_6_Template,1,5,"addon-mod-workshop-submission",30),M.k0s()),2&o){const o=M.XpG(2);M.R7$(3),M.Y8G("ngIf",o.workshop.phase!==o.PHASE_CLOSED||!o.submission),M.R7$(),M.Y8G("ngIf",o.workshop.phase===o.PHASE_CLOSED&&o.submission),M.R7$(),M.Y8G("ngIf",!o.submission),M.R7$(),M.Y8G("ngIf",o.submission)}}function AddonModWorkshopIndexComponent_div_7_ng_container_4_ion_card_1_ng_container_6_Template(o,n){if(1&o&&(M.qex(0),M.nrm(1,"addon-mod-workshop-submission",33),M.bVm()),2&o){const o=n.$implicit,e=M.XpG(4);M.R7$(),M.Y8G("submission",o)("courseId",e.workshop.course)("module",e.module)("workshop",e.workshop)("access",e.access)("summary",!0)}}function AddonModWorkshopIndexComponent_div_7_ng_container_4_ion_card_1_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item-divider",10)(2,"ion-label")(3,"h3",17),M.EFF(4),M.nI1(5,"translate"),M.k0s()()(),M.DNE(6,AddonModWorkshopIndexComponent_div_7_ng_container_4_ion_card_1_ng_container_6_Template,2,6,"ng-container",32),M.k0s()),2&o){const o=M.XpG(3);M.R7$(4),M.JRh(M.bMT(5,2,"addon.mod_workshop.publishedsubmissions")),M.R7$(2),M.Y8G("ngForOf",o.publishedSubmissions)}}function AddonModWorkshopIndexComponent_div_7_ng_container_4_Template(o,n){if(1&o&&(M.qex(0),M.DNE(1,AddonModWorkshopIndexComponent_div_7_ng_container_4_ion_card_1_Template,7,4,"ion-card",4),M.bVm()),2&o){const o=M.XpG(2);M.R7$(),M.Y8G("ngIf",o.publishedSubmissions&&o.publishedSubmissions.length)}}function AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_1_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item",10)(2,"ion-label")(3,"h3",17),M.EFF(4),M.nI1(5,"translate"),M.k0s(),M.nrm(6,"core-format-text",27),M.k0s()()()),2&o){const o=M.XpG(3);M.R7$(4),M.JRh(M.bMT(5,6,"addon.mod_workshop.areainstructreviewers")),M.R7$(2),M.Y8G("component",o.component)("componentId",o.module.id)("text",o.workshop.instructreviewers)("contextInstanceId",o.module.id)("courseId",o.courseId)}}function AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_2_ion_item_6_Template(o,n){1&o&&(M.j41(0,"ion-item",10)(1,"ion-label")(2,"p"),M.EFF(3),M.nI1(4,"translate"),M.k0s()()()),2&o&&(M.R7$(3),M.JRh(M.bMT(4,1,"addon.mod_workshop.assignedassessmentsnone")))}function AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_2_ng_container_7_Template(o,n){if(1&o&&(M.qex(0),M.nrm(1,"addon-mod-workshop-submission",34),M.bVm()),2&o){const o=n.$implicit,e=M.XpG(4);M.R7$(),M.Y8G("submission",o.submission)("assessment",o)("courseId",e.workshop.course)("module",e.module)("workshop",e.workshop)("access",e.access)("summary",!0)}}function AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_2_Template(o,n){if(1&o&&(M.j41(0,"ion-card")(1,"ion-item-divider",10)(2,"ion-label")(3,"h3",17),M.EFF(4),M.nI1(5,"translate"),M.k0s()()(),M.DNE(6,AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_2_ion_item_6_Template,5,3,"ion-item",28)(7,AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_2_ng_container_7_Template,2,7,"ng-container",32),M.k0s()),2&o){const o=M.XpG(3);M.R7$(4),M.JRh(M.bMT(5,3,"addon.mod_workshop.assignedassessments")),M.R7$(2),M.Y8G("ngIf",!o.assessments||!o.assessments.length),M.R7$(),M.Y8G("ngForOf",o.assessments||M.lJ4(5,_c0))}}function AddonModWorkshopIndexComponent_div_7_ng_container_5_Template(o,n){if(1&o&&(M.qex(0),M.DNE(1,AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_1_Template,7,8,"ion-card",4)(2,AddonModWorkshopIndexComponent_div_7_ng_container_5_ion_card_2_Template,8,6,"ion-card",4),M.bVm()),2&o){const o=M.XpG(2);M.R7$(),M.Y8G("ngIf",o.workshop.phase===o.PHASE_ASSESSMENT&&o.workshop.instructreviewers),M.R7$(),M.Y8G("ngIf",o.canAssess)}}function AddonModWorkshopIndexComponent_div_7_ion_card_6_h3_3_Template(o,n){1&o&&(M.j41(0,"h3",17),M.EFF(1),M.nI1(2,"translate"),M.k0s()),2&o&&(M.R7$(),M.JRh(M.bMT(2,1,"addon.mod_workshop.submissionsreport")))}function AddonModWorkshopIndexComponent_div_7_ion_card_6_h3_4_Template(o,n){1&o&&(M.j41(0,"h3",17),M.EFF(1),M.nI1(2,"translate"),M.k0s()),2&o&&(M.R7$(),M.SpI("",M.bMT(2,1,"addon.mod_workshop.gradesreport")," "))}function AddonModWorkshopIndexComponent_div_7_ion_card_6_ng_container_6_Template(o,n){if(1&o&&(M.qex(0),M.nrm(1,"addon-mod-workshop-submission",33),M.bVm()),2&o){const o=n.$implicit,e=M.XpG(3);M.R7$(),M.Y8G("submission",o)("courseId",e.workshop.course)("module",e.module)("workshop",e.workshop)("access",e.access)("summary",!0)}}function AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_ion_col_2_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-col")(1,"ion-button",37),M.bIt("click",(function AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_ion_col_2_Template_ion_button_click_1_listener(){M.eBV(o);const n=M.XpG(4);return M.Njj(n.gotoSubmissionsPage(n.page-1))})),M.nrm(2,"ion-icon",38),M.EFF(3),M.nI1(4,"translate"),M.k0s()()}2&o&&(M.R7$(3),M.SpI(" ",M.bMT(4,1,"core.previous")," "))}function AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_ion_col_3_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-col")(1,"ion-button",39),M.bIt("click",(function AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_ion_col_3_Template_ion_button_click_1_listener(){M.eBV(o);const n=M.XpG(4);return M.Njj(n.gotoSubmissionsPage(n.page+1))})),M.EFF(2),M.nI1(3,"translate"),M.nrm(4,"ion-icon",40),M.k0s()()}2&o&&(M.R7$(2),M.SpI(" ",M.bMT(3,1,"core.next")," "))}function AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_Template(o,n){if(1&o&&(M.j41(0,"ion-grid")(1,"ion-row",36),M.DNE(2,AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_ion_col_2_Template,5,3,"ion-col",4)(3,AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_ion_col_3_Template,5,3,"ion-col",4),M.k0s()()),2&o){const o=M.XpG(3);M.R7$(2),M.Y8G("ngIf",o.page>0),M.R7$(),M.Y8G("ngIf",o.hasNextPage)}}function AddonModWorkshopIndexComponent_div_7_ion_card_6_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-card")(1,"ion-item-divider",10)(2,"ion-label"),M.DNE(3,AddonModWorkshopIndexComponent_div_7_ion_card_6_h3_3_Template,3,3,"h3",29)(4,AddonModWorkshopIndexComponent_div_7_ion_card_6_h3_4_Template,3,3,"h3",29),M.k0s()(),M.j41(5,"core-group-selector",35),M.mxI("selectedChange",(function AddonModWorkshopIndexComponent_div_7_ion_card_6_Template_core_group_selector_selectedChange_5_listener(n){M.eBV(o);const e=M.XpG(2);return M.DH7(e.group,n)||(e.group=n),M.Njj(n)})),M.bIt("selectedChange",(function AddonModWorkshopIndexComponent_div_7_ion_card_6_Template_core_group_selector_selectedChange_5_listener(){M.eBV(o);const n=M.XpG(2);return M.Njj(n.setGroup(n.group))})),M.k0s(),M.DNE(6,AddonModWorkshopIndexComponent_div_7_ion_card_6_ng_container_6_Template,2,6,"ng-container",32)(7,AddonModWorkshopIndexComponent_div_7_ion_card_6_ion_grid_7_Template,4,2,"ion-grid",4),M.k0s()}if(2&o){const o=M.XpG(2);M.R7$(3),M.Y8G("ngIf",o.workshop.phase===o.PHASE_SUBMISSION),M.R7$(),M.Y8G("ngIf",o.workshop.phase>o.PHASE_SUBMISSION),M.R7$(),M.Y8G("groupInfo",o.groupInfo),M.R50("selected",o.group),M.Y8G("courseId",o.courseId),M.R7$(),M.Y8G("ngForOf",o.grades),M.R7$(),M.Y8G("ngIf",o.page>0||o.hasNextPage)}}function AddonModWorkshopIndexComponent_div_7_Template(o,n){if(1&o&&(M.j41(0,"div"),M.DNE(1,AddonModWorkshopIndexComponent_div_7_ng_container_1_Template,3,2,"ng-container",4)(2,AddonModWorkshopIndexComponent_div_7_ion_card_2_Template,7,8,"ion-card",4)(3,AddonModWorkshopIndexComponent_div_7_ion_card_3_Template,7,4,"ion-card",4)(4,AddonModWorkshopIndexComponent_div_7_ng_container_4_Template,2,1,"ng-container",4)(5,AddonModWorkshopIndexComponent_div_7_ng_container_5_Template,3,2,"ng-container",4)(6,AddonModWorkshopIndexComponent_div_7_ion_card_6_Template,8,7,"ion-card",4),M.k0s()),2&o){const o=M.XpG();M.R7$(),M.Y8G("ngIf",o.workshop.phase>=o.PHASE_CLOSED),M.R7$(),M.Y8G("ngIf",o.workshop.phase===o.PHASE_SUBMISSION&&o.workshop.instructauthors),M.R7$(),M.Y8G("ngIf",o.canSubmit),M.R7$(),M.Y8G("ngIf",o.workshop.phase>=o.PHASE_CLOSED),M.R7$(),M.Y8G("ngIf",o.workshop.phase>=o.PHASE_ASSESSMENT),M.R7$(),M.Y8G("ngIf",o.access.canviewallsubmissions&&o.workshop.phase>=o.PHASE_SUBMISSION&&(o.grades&&o.grades.length||o.groupInfo&&(o.groupInfo.separateGroups||o.groupInfo.visibleGroups)))}}function AddonModWorkshopIndexComponent_div_8_div_1_ion_button_1_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-button",46),M.bIt("click",(function AddonModWorkshopIndexComponent_div_8_div_1_ion_button_1_Template_ion_button_click_0_listener(){M.eBV(o);const n=M.XpG(3);return M.Njj(n.gotoSubmit())})),M.nrm(1,"ion-icon",47),M.EFF(2),M.nI1(3,"translate"),M.k0s()}2&o&&(M.R7$(2),M.SpI(" ",M.bMT(3,1,"addon.mod_workshop.createsubmission")," "))}function AddonModWorkshopIndexComponent_div_8_div_1_ion_button_2_Template(o,n){if(1&o){const o=M.RV6();M.j41(0,"ion-button",46),M.bIt("click",(function AddonModWorkshopIndexComponent_div_8_div_1_ion_button_2_Template_ion_button_click_0_listener(){M.eBV(o);const n=M.XpG(3);return M.Njj(n.gotoSubmit())})),M.nrm(1,"ion-icon",48),M.EFF(2),M.nI1(3,"translate"),M.k0s()}2&o&&(M.R7$(2),M.SpI(" ",M.bMT(3,1,"addon.mod_workshop.editsubmission")," "))}function AddonModWorkshopIndexComponent_div_8_div_1_Template(o,n){if(1&o&&(M.j41(0,"div",44),M.DNE(1,AddonModWorkshopIndexComponent_div_8_div_1_ion_button_1_Template,4,3,"ion-button",45)(2,AddonModWorkshopIndexComponent_div_8_div_1_ion_button_2_Template,4,3,"ion-button",45),M.k0s()),2&o){const o=M.XpG(2);M.R7$(),M.Y8G("ngIf",o.access.creatingsubmissionallowed&&!o.submission),M.R7$(),M.Y8G("ngIf",o.access.modifyingsubmissionallowed&&o.submission)}}function AddonModWorkshopIndexComponent_div_8_Template(o,n){if(1&o&&(M.j41(0,"div",41),M.DNE(1,AddonModWorkshopIndexComponent_div_8_div_1_Template,3,2,"div",42),M.nrm(2,"core-course-module-navigation",43),M.k0s()),2&o){const o=M.XpG();M.R7$(),M.Y8G("ngIf",o.access&&(null==o.workshop?null:o.workshop.phase)>=o.PHASE_SUBMISSION&&o.showSubmit),M.R7$(),M.Y8G("courseId",o.courseId)("currentModuleId",o.module.id)}}let j=(()=>{var o;class AddonModWorkshopIndexComponent extends t.y{constructor(o,n){super("AddonModWorkshopIndexComponent",o,n),this.group=0,this.component=f.Ug,this.pluginName="workshop",this.page=0,this.grades=[],this.assessments=[],this.publishedSubmissions=[],this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1,defaultGroupId:0,canAccessAllGroups:!1},this.canSubmit=!1,this.showSubmit=!1,this.canAssess=!1,this.hasNextPage=!1,this.PHASE_SETUP=10,this.PHASE_SUBMISSION=20,this.PHASE_ASSESSMENT=30,this.PHASE_EVALUATION=40,this.PHASE_CLOSED=50,this.offlineSubmissions=[],this.syncEventName=f.N7,this.obsSubmissionChanged=m.z.on(f.AZ,(o=>{this.eventReceived(o)}),this.siteId),this.obsAssessmentSaved=m.z.on(f.Px,(o=>{this.eventReceived(o)}),this.siteId),this.appResumeSubscription=_.CorePlatform.resume.subscribe((()=>{this.showLoadingAndRefresh(!0)})),this.syncObserver=m.z.on(f.N7,(o=>{this.eventReceived(o)}),this.siteId)}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,o=this;return(0,s.A)((function*(){_superprop_getNgOnInit().call(o),yield o.loadContent(!1,!0)}))()}eventReceived(o){var n;(null===(n=this.workshop)||void 0===n?void 0:n.id)===o.workshopId&&(this.showLoadingAndRefresh(!0),this.checkCompletion())}invalidateContent(){var o=this;return(0,s.A)((function*(){const n=[];var e;(n.push(l.AddonModWorkshop.invalidateWorkshopData(o.courseId)),o.workshop)&&(n.push(l.AddonModWorkshop.invalidateWorkshopAccessInformationData(o.workshop.id)),n.push(l.AddonModWorkshop.invalidateUserPlanPhasesData(o.workshop.id)),o.canSubmit&&n.push(l.AddonModWorkshop.invalidateSubmissionsData(o.workshop.id)),o.submission&&n.push(l.AddonModWorkshop.invalidateSubmissionData(o.workshop.id,o.submission.id)),null!==(e=o.access)&&void 0!==e&&e.canviewallsubmissions&&(n.push(l.AddonModWorkshop.invalidateGradeReportData(o.workshop.id)),n.push(r.CoreGroups.invalidateActivityAllowedGroups(o.workshop.coursemodule)),n.push(r.CoreGroups.invalidateActivityGroupMode(o.workshop.coursemodule))),o.canAssess&&n.push(l.AddonModWorkshop.invalidateReviewerAssesmentsData(o.workshop.id)),n.push(l.AddonModWorkshop.invalidateGradesData(o.workshop.id)),n.push(l.AddonModWorkshop.invalidateWorkshopWSData(o.workshop.id)));yield Promise.all(n)}))()}isRefreshSyncNeeded(o){var n;return!(!this.workshop||o.workshopId!=this.workshop.id)&&(null===(n=this.content)||void 0===n||n.scrollToTop(),!0)}fetchContent(o,n=!1,e=!1){var i=this;return(0,s.A)((function*(){i.workshop=yield l.AddonModWorkshop.getWorkshop(i.courseId,i.module.id),i.description=i.workshop.intro,i.dataRetrieved.emit(i.workshop),n&&(yield i.syncActivity(e)),i.access=yield l.AddonModWorkshop.getWorkshopAccessInformation(i.workshop.id,{cmId:i.module.id}),i.access.canviewallsubmissions&&(i.groupInfo=yield r.CoreGroups.getActivityGroupInfo(i.workshop.coursemodule),i.group=r.CoreGroups.validateGroupId(i.group,i.groupInfo)),i.phases=yield l.AddonModWorkshop.getUserPlanPhases(i.workshop.id,{cmId:i.module.id}),i.phases[i.workshop.phase].tasks.forEach((o=>{o.link||"examples"!=o.code&&"prepareexamples"!=o.code||(o.link=i.module.url||"")})),i.hasOffline=yield h.AddonModWorkshopOffline.hasWorkshopOfflineData(i.workshop.id),i.offlineSubmissions=i.hasOffline?yield h.AddonModWorkshopOffline.getSubmissions(i.workshop.id):[],yield i.setPhaseInfo()}))()}logActivity(){var o=this;return(0,s.A)((function*(){o.workshop&&(yield g.g.ignoreErrors(l.AddonModWorkshop.logView(o.workshop.id)),o.analyticsLogEvent("mod_workshop_view_workshop"))}))()}gotoSubmissionsPage(o){var n=this;return(0,s.A)((function*(){if(!n.workshop)return;const e=n.workshop,i=yield l.AddonModWorkshop.getGradesReport(e.id,{groupId:n.group,page:o,cmId:n.module.id}),t=i&&i.grades&&i.grades.length||0;n.page=o,n.hasNextPage=t>=f.Cy&&(n.page+1)*f.Cy<i.totalcount;const d=i.grades||[];n.grades=[],yield Promise.all(d.map(function(){var o=(0,s.A)((function*(o){const s={id:o.submissionid||0,workshopid:e.id,example:!1,authorid:o.userid,timecreated:o.submissionmodified||0,timemodified:o.submissionmodified||0,title:o.submissiontitle||"",content:"",contenttrust:0,attachment:0,grade:o.submissiongrade,gradeover:o.submissiongradeover,gradeoverby:o.submissiongradeoverby,published:!!o.submissionpublished,gradinggrade:o.gradinggrade,late:0,reviewedby:n.parseReviewer(o.reviewedby),reviewerof:n.parseReviewer(o.reviewerof)};var i,t,d,r;30==e.phase&&(s.reviewedbydone=(null===(i=o.reviewedby)||void 0===i?void 0:i.reduce(((o,n)=>o+(n.grade?1:0)),0))||0,s.reviewerofdone=(null===(t=o.reviewerof)||void 0===t?void 0:t.reduce(((o,n)=>o+(n.grade?1:0)),0))||0,s.reviewedbycount=(null===(d=o.reviewedby)||void 0===d?void 0:d.length)||0,s.reviewerofcount=(null===(r=o.reviewerof)||void 0===r?void 0:r.length)||0);const a=yield u.AddonModWorkshopHelper.applyOfflineData(s,n.offlineSubmissions);void 0!==a&&n.grades.push(a)}));return function(n){return o.apply(this,arguments)}}()))}))()}parseReviewer(o=[]){return o.map((o=>({grade:o.grade,gradinggrade:o.gradinggrade,gradinggradeover:o.gradinggradeover,id:o.assessmentid,reviewerid:o.userid,submissionid:o.submissionid,weight:o.weight,timecreated:0,timemodified:0,feedbackauthor:"",gradinggradeoverby:0,feedbackattachmentfiles:[],feedbackcontentfiles:[],feedbackauthorattachment:0})))}runTask(o){var n=this;return(0,s.A)((function*(){"submit"==o.code?n.gotoSubmit():o.link&&I.j.openInBrowser(o.link)}))()}gotoSubmit(){if(this.canSubmit&&this.access&&(this.access.creatingsubmissionallowed&&!this.submission||this.access.modifyingsubmissionallowed&&this.submission)){var o;const n=(null===(o=this.submission)||void 0===o?void 0:o.id)||0;a.CoreNavigator.navigateToSitePath(`${f.q3}/${this.courseId}/${this.module.id}/${n}/edit`,{params:{module:this.module,access:this.access}})}}viewPhaseInfo(){var o=this;return(0,s.A)((function*(){if(!o.phases||!o.workshop)return;const{AddonModWorkshopPhaseInfoModalComponent:n}=yield e.e(69489).then(e.bind(e,69489));!0===(yield c.I.openModal({component:n,componentProps:{phases:p.T.toArray(o.phases),workshopPhase:o.workshop.phase,externalUrl:o.module.url,showSubmit:o.showSubmit}}))&&o.gotoSubmit()}))()}setGroup(o){var n=this;return(0,s.A)((function*(){n.group=o,yield n.gotoSubmissionsPage(0)}))()}setPhaseInfo(){var o=this;return(0,s.A)((function*(){if(!o.phases||!o.workshop||!o.access)return;o.submission=void 0,o.canAssess=!1,o.assessments=[],o.userGrades=void 0,o.publishedSubmissions=[];const n=o.workshop;o.canSubmit=u.AddonModWorkshopHelper.canSubmit(o.workshop,o.access,o.phases[20].tasks);const e=[];o.canSubmit&&e.push(o.loadUserSubmission()),o.access.canviewallsubmissions&&o.workshop.phase>=20&&e.push(o.gotoSubmissionsPage(o.page));let i=Promise.resolve();o.workshop.phase>=30&&(o.canAssess=u.AddonModWorkshopHelper.canAssess(o.workshop,o.access),o.canAssess&&(i=u.AddonModWorkshopHelper.getReviewerAssessments(o.workshop.id,{cmId:o.module.id,canAssess:u.AddonModWorkshopHelper.canEditAssessments(o.workshop,o.access)}).then(function(){var e=(0,s.A)((function*(e){yield Promise.all(e.map(function(){var e=(0,s.A)((function*(e){if(e.strategy=n.strategy,o.hasOffline)try{const o=yield h.AddonModWorkshopOffline.getAssessment(n.id,e.id);e.offline=!0,e.timemodified=Math.floor(o.timemodified/1e3)}catch{}}));return function(o){return e.apply(this,arguments)}}())),o.assessments=e}));return function(o){return e.apply(this,arguments)}}()))),50===o.workshop.phase&&(e.push(l.AddonModWorkshop.getGrades(o.workshop.id,{cmId:o.module.id}).then((n=>{o.userGrades=n.submissionlongstrgrade||n.assessmentlongstrgrade?n:void 0}))),o.access.canviewpublishedsubmissions&&e.push(i.then((0,s.A)((function*(){const e=yield l.AddonModWorkshop.getSubmissions(n.id,{cmId:o.module.id});o.publishedSubmissions=e.filter((e=>!!e.published&&(e.reviewedby=o.assessments.filter((o=>o.submissionid===e.id)).map((o=>u.AddonModWorkshopHelper.realGradeValue(n,o))),!0)))}))))),yield Promise.all(e)}))()}loadUserSubmission(){var o=this;return(0,s.A)((function*(){if(!o.workshop||!o.access)return;const n=o.access,e=yield u.AddonModWorkshopHelper.getUserSubmission(o.workshop.id,{cmId:o.module.id,canEdit:o.access.modifyingsubmissionallowed});o.showSubmit=n.creatingsubmissionallowed&&!e||n.modifyingsubmissionallowed&&!!e,o.submission=yield u.AddonModWorkshopHelper.applyOfflineData(e,o.offlineSubmissions)}))()}sync(){if(!this.workshop)throw new i.CoreError("Cannot sync without a workshop.");return k.AddonModWorkshopSync.syncWorkshop(this.workshop.id)}ngOnDestroy(){var o,n,e;super.ngOnDestroy(),null===(o=this.obsSubmissionChanged)||void 0===o||o.off(),null===(n=this.obsAssessmentSaved)||void 0===n||n.off(),null===(e=this.appResumeSubscription)||void 0===e||e.unsubscribe()}}return(o=AddonModWorkshopIndexComponent).ɵfac=function AddonModWorkshopIndexComponent_Factory(n){return new(n||o)(M.rXU(C.W9,8),M.rXU(d.A,8))},o.ɵcmp=M.VBU({type:o,selectors:[["addon-mod-workshop-index"]],inputs:{group:"group"},standalone:!0,features:[M.Vt3,M.aNF],decls:9,vars:11,consts:[["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","component","componentId","courseId","hasDataToSync"],[4,"ngIf"],["collapsible-footer","","slot","fixed",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],["button","",3,"click","detail"],[1,"ion-text-wrap"],["button","","class","ion-text-wrap",3,"item-dimmed","detail","click",4,"ngFor","ngForOf"],["button","",1,"ion-text-wrap",3,"click","detail"],["slot","start","name","far-circle",4,"ngIf"],["slot","start","name","fas-circle-xmark","color","danger",4,"ngIf"],["slot","start","name","fas-circle-info","color","info",4,"ngIf"],["slot","start","name","fas-circle-check","color","success",4,"ngIf"],[1,"item-heading"],[3,"innerHTML",4,"ngIf"],["slot","end","name","fas-up-right-from-square","aria-hidden","true",4,"ngIf"],["slot","start","name","far-circle"],["slot","start","name","fas-circle-xmark","color","danger"],["slot","start","name","fas-circle-info","color","info"],["slot","start","name","fas-circle-check","color","success"],[3,"innerHTML"],["slot","end","name","fas-up-right-from-square","aria-hidden","true"],["contextLevel","module",3,"text","component","componentId","contextInstanceId","courseId"],["collapsible-item","","contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],["class","ion-text-wrap",4,"ngIf"],["class","item-heading",4,"ngIf"],[3,"submission","courseId","module","workshop","access",4,"ngIf"],[3,"submission","courseId","module","workshop","access"],[4,"ngFor","ngForOf"],[1,"core-as-item",3,"submission","courseId","module","workshop","access","summary"],[1,"core-as-item",3,"submission","assessment","courseId","module","workshop","access","summary"],[3,"selectedChange","groupInfo","selected","courseId"],[1,"ion-align-items-center"],["expand","block","fill","outline",3,"click"],["name","fas-chevron-left","slot","start","aria-hidden","true"],["expand","block",3,"click"],["name","fas-chevron-right","slot","end","aria-hidden","true"],["collapsible-footer","","slot","fixed"],["class","list-item-limited-width",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width"],["expand","block","class","ion-text-wrap ion-margin",3,"click",4,"ngIf"],["expand","block",1,"ion-text-wrap","ion-margin",3,"click"],["slot","start","name","fas-plus","aria-hidden","true"],["slot","start","name","fas-pen","aria-hidden","true"]],template:function AddonModWorkshopIndexComponent_Template(o,n){1&o&&(M.j41(0,"core-navbar-buttons",0),M.DNE(1,AddonModWorkshopIndexComponent_Conditional_1_Template,3,3,"ion-button",1)(2,AddonModWorkshopIndexComponent_Conditional_2_Template,3,4),M.k0s(),M.j41(3,"core-loading",2)(4,"core-course-module-info",3),M.bIt("completionChanged",(function AddonModWorkshopIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return n.onCompletionChange()})),M.k0s(),M.DNE(5,AddonModWorkshopIndexComponent_ion_card_5_Template,6,3,"ion-card",4)(6,AddonModWorkshopIndexComponent_ion_card_6_Template,7,8,"ion-card",4)(7,AddonModWorkshopIndexComponent_div_7_Template,7,6,"div",4)(8,AddonModWorkshopIndexComponent_div_8_Template,3,3,"div",5),M.k0s()),2&o&&(M.R7$(),M.vxM(1,n.courseContentsPage?2:1),M.R7$(2),M.Y8G("hideUntil",!n.showLoading),M.R7$(),M.Y8G("module",n.module)("component",n.component)("componentId",n.componentId)("courseId",n.courseId)("hasDataToSync",n.hasOffline),M.R7$(),M.Y8G("ngIf",n.phases&&n.workshop),M.R7$(),M.Y8G("ngIf",n.description&&n.workshop&&n.workshop.phase===n.PHASE_SETUP),M.R7$(),M.Y8G("ngIf",n.access&&n.workshop&&n.workshop.phase>=n.PHASE_SUBMISSION),M.R7$(),M.Y8G("ngIf",!n.showLoading))},dependencies:[v.n,x.Sq,x.bT,C.Jm,C.b_,C.hU,C.lO,C.iq,C.uz,C.Dg,C.he,C.ln,T.B,W.Q,S.F,R.R,G.c,y.t,E.B,$.K,N.i,F.T,Y.D9,b.J,A.CoreCourseModuleNavigationComponent,w.CoreCourseModuleInfoComponent],encapsulation:2}),AddonModWorkshopIndexComponent})()},69006:(o,n,e)=>{e.d(n,{y:()=>h});var s=e(10467),i=e(23063),t=e(49882),d=e(44682),r=e(55554),a=e(51024),_=e(52749),c=e(25572),p=e(79555),m=e(95384),l=e(54438),u=e(2910);let h=(()=>{var o;class CoreCourseModuleMainActivityComponent extends i.x{constructor(o="CoreCourseModuleMainResourceComponent",n,e){super(o,e),this.content=n,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,o=this;return(0,s.A)((function*(){yield _superprop_getNgOnInit().call(o),o.hasOffline=!1,o.moduleName=m.CoreCourseModuleHelper.translateModuleName(o.pluginName||o.moduleName||""),o.syncEventName&&(o.syncObserver=t.z.on(o.syncEventName,(n=>{o.autoSyncEventReceived(n)}),o.siteId))}))()}isRefreshSyncNeeded(o){return!1}autoSyncEventReceived(o){this.isRefreshSyncNeeded(o)&&this.showLoadingAndRefresh(!1)}refreshContent(o=!1,n=!1){var e=this;return(0,s.A)((function*(){e.module&&(yield r.g.ignoreErrors(Promise.all([e.invalidateContent(),e.showCompletion?d.CoreCourse.invalidateModule(e.module.id):void 0])),yield e.loadContent(!0,o,n))}))()}showLoadingAndFetch(o=!1,n=!1){var e=this;return(0,s.A)((function*(){var s;e.showLoading=!0,null===(s=e.content)||void 0===s||s.scrollToTop(),yield e.loadContent(!1,o,n)}))()}showLoadingAndRefresh(o=!1,n=!1){var e;return this.showLoading=!0,null===(e=this.content)||void 0===e||e.scrollToTop(),this.refreshContent(o,n)}fetchContent(o=!1,n=!1,e=!1){return(0,s.A)((function*(){}))()}loadContent(o,n=!1,e=!1){var i=this;return(0,s.A)((function*(){if(i.module)try{o&&i.showCompletion&&(yield r.g.ignoreErrors(i.fetchModule())),yield i.fetchContent(o,n,e),i.finishSuccessfulFetch()}catch(e){var s;if(!o&&(null===(s=_.CoreSites.getCurrentSite())||void 0===s||!s.isOfflineDisabled())&&m.CoreCourseModuleHelper.isNotFoundError(e))return yield i.refreshContent(n);c.CoreAlerts.showError(e,{default:p.HT.instant(i.fetchContentDefaultError)})}finally{i.showLoading=!1}}))()}sync(){return(0,s.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(o){return o.updated}syncActivity(o=!1){var n=this;return(0,s.A)((function*(){try{const o=yield n.sync();return o.warnings.length&&c.CoreAlerts.show({message:o.warnings[0]}),n.hasSyncSucceed(o)}catch(n){return o&&c.CoreAlerts.showError(n,{default:p.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var o;super.ngOnDestroy(),null===(o=this.syncObserver)||void 0===o||o.off()}}return(o=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(n){return new(n||o)(l.rXU("",8),l.rXU(u.W9),l.rXU(a.A))},o.ɵcmp=l.VBU({type:o,selectors:[["ng-component"]],inputs:{group:"group"},features:[l.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(o,n){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);