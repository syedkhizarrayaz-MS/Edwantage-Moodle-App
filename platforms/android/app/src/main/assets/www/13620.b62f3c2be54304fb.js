"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[13620],{13620:(e,t,r)=>{r.r(t),r.d(t,{CoreUserToursUserTourComponent:()=>f});var o=r(10467),s=r(54438),i=r(25124);function renderInlineStyles(e){return Object.entries(e).reduce(((e,[t,r])=>`${t}:${"string"==typeof r?r:`${r}px`};${e}`),"")}class CoreUserToursFocusLayout{constructor(e){this.targetBoundingBox=e.getBoundingClientRect(),this.targetComputedStyle=window.getComputedStyle(e),this.calculateStyles()}calculateStyles(){this.inlineStyles=renderInlineStyles({top:this.targetBoundingBox.top,left:this.targetBoundingBox.left,width:this.targetBoundingBox.width,height:this.targetBoundingBox.height,"border-top-left-radius":this.targetComputedStyle.borderTopLeftRadius,"border-top-right-radius":this.targetComputedStyle.borderTopRightRadius,"border-bottom-left-radius":this.targetComputedStyle.borderBottomLeftRadius,"border-bottom-right-radius":this.targetComputedStyle.borderBottomRightRadius})}}var n=r(18022);const a=22;class CoreUserToursPopoverLayout{constructor(e,t,r){this.targetBoundingBox=e.getBoundingClientRect(),this.side=t,this.alignment=r,this.wrapperArrowStyles={},this.wrapperStyles={},this.calculateStyles()}calculateStyles(){({top:this.calculateWrapperTopSideStyles,bottom:this.calculateWrapperBottomSideStyles,right:this.calculateWrapperRightSideStyles,left:this.calculateWrapperLeftSideStyles,start:n.CorePlatform.isRTL?this.calculateWrapperRightSideStyles:this.calculateWrapperLeftSideStyles,end:n.CorePlatform.isRTL?this.calculateWrapperLeftSideStyles:this.calculateWrapperRightSideStyles})[this.side].call(this),this.wrapperInlineStyles=renderInlineStyles(this.wrapperStyles),this.wrapperArrowInlineStyles=renderInlineStyles(this.wrapperArrowStyles)}calculateWrapperHorizontalAlignmentStyles(){({start:n.CorePlatform.isRTL?this.calculateWrapperRightAlignmentStyles:this.calculateWrapperLeftAlignmentStyles,center:this.calculateWrapperCenterHorizontalAlignmentStyles,end:n.CorePlatform.isRTL?this.calculateWrapperLeftAlignmentStyles:this.calculateWrapperRightAlignmentStyles})[this.alignment].call(this)}calculateWrapperVerticalAlignmentStyles(){({start:this.calculateWrapperTopAlignmentStyles,center:this.calculateWrapperCenterVerticalAlignmentStyles,end:this.calculateWrapperBottomAlignmentStyles})[this.alignment].call(this)}calculateWrapperArrowHorizontalStyles(){this.wrapperArrowStyles["border-width"]="17.5px 22px"}calculateWrapperArrowVerticalStyles(){this.wrapperArrowStyles["border-width"]="22px 17.5px"}calculateWrapperTopSideStyles(){this.wrapperStyles.bottom=window.innerHeight-this.targetBoundingBox.y+a+16,this.wrapperArrowStyles.bottom=-44,this.wrapperArrowStyles["border-top-color"]="var(--popover-background)",this.calculateWrapperArrowVerticalStyles(),this.calculateWrapperHorizontalAlignmentStyles()}calculateWrapperBottomSideStyles(){this.wrapperStyles.top=this.targetBoundingBox.y+this.targetBoundingBox.height+a+16,this.wrapperArrowStyles.top=-44,this.wrapperArrowStyles["border-bottom-color"]="var(--popover-background)",this.calculateWrapperArrowVerticalStyles(),this.calculateWrapperHorizontalAlignmentStyles()}calculateWrapperRightSideStyles(){this.wrapperStyles.left=this.targetBoundingBox.x+this.targetBoundingBox.width+a+16,this.wrapperArrowStyles.left=-44,this.wrapperArrowStyles["border-right-color"]="var(--popover-background)",this.calculateWrapperArrowHorizontalStyles(),this.calculateWrapperVerticalAlignmentStyles()}calculateWrapperLeftSideStyles(){this.wrapperStyles.right=window.innerWidth-this.targetBoundingBox.x+a+16,this.wrapperArrowStyles.right=-44,this.wrapperArrowStyles["border-left-color"]="var(--popover-background)",this.calculateWrapperArrowHorizontalStyles(),this.calculateWrapperVerticalAlignmentStyles()}calculateWrapperTopAlignmentStyles(){this.wrapperStyles.top=this.targetBoundingBox.y,this.wrapperArrowStyles.top=8}calculateWrapperBottomAlignmentStyles(){this.wrapperStyles.bottom=window.innerHeight-this.targetBoundingBox.y-this.targetBoundingBox.height,this.wrapperArrowStyles.bottom=8}calculateWrapperRightAlignmentStyles(){this.wrapperStyles.right=window.innerWidth-this.targetBoundingBox.x-this.targetBoundingBox.width,this.wrapperArrowStyles.right=8}calculateWrapperLeftAlignmentStyles(){this.wrapperStyles.left=this.targetBoundingBox.x,this.wrapperArrowStyles.left=8}calculateWrapperCenterHorizontalAlignmentStyles(){this.wrapperStyles.left=this.targetBoundingBox.x+this.targetBoundingBox.width/2,this.wrapperStyles.transform="translateX(-50%)",this.wrapperStyles["transform-origin"]="0 50%",this.wrapperArrowStyles.left="50%",this.wrapperArrowStyles.transform="translateX(-50%)"}calculateWrapperCenterVerticalAlignmentStyles(){this.wrapperStyles.top=this.targetBoundingBox.y+this.targetBoundingBox.height/2,this.wrapperStyles.transform="translateY(-50%)",this.wrapperStyles["transform-origin"]="50% 0",this.wrapperArrowStyles.top="50%",this.wrapperArrowStyles.transform="translateY(-50%)"}}var l=r(74037),p=r(53794),c=r(79555),u=r(62393),h=r(82907),d=r(49882),m=r(68273),y=r(36684),g=r(86654),w=r(60177);const S=["wrapper"];function CoreUserToursUserTourComponent_div_0_Template(e,t){if(1&e&&s.nrm(0,"div",5),2&e){const e=s.XpG();s.Aen(e.focusStyles)}}function CoreUserToursUserTourComponent_div_1_Template(e,t){1&e&&s.nrm(0,"div",6)}function CoreUserToursUserTourComponent_span_4_Template(e,t){if(1&e&&s.nrm(0,"span",7),2&e){const e=s.XpG();s.Aen(e.popoverWrapperArrowStyles)}}let f=(()=>{var e;class CoreUserToursUserTourComponent{constructor({nativeElement:e}){this.beforeDismiss=new s.bkB,this.afterDismiss=new s.bkB,this.active=!1,this.popover=!1,this.backdrop=!0,this.wrapperTransform="",this.wrapperElement=new i._,this.lastActivatedTime=0,this.element=e,u.D.register(e,this),this.element.addEventListener("click",(e=>this.dismissOnBackOrBackdrop(e.target)))}ngAfterViewInit(){this.wrapper&&this.wrapperElement.resolve(this.wrapper.nativeElement)}show(){var e=this;return(0,o.A)((function*(){var t;const r=yield e.wrapperElement;if(e.tour=yield c.yG.attachViewToDom(r,e.component,null!==(t=e.componentProps)&&void 0!==t?t:{}),e.tour){if(yield p.H.waitForImages(e.tour),e.focus&&!h.y.isElementVisible(e.focus))return yield e.dismiss(!1),void 0;e.calculateStyles(),e.activate(),yield e.playEnterAnimation()}}))()}hide(){var e=this;return(0,o.A)((function*(){const t=yield e.wrapperElement;yield e.playLeaveAnimation(),yield c.yG.removeViewFromDom(t,e.tour),e.deactivate()}))()}dismiss(e=!0){var t=this;return(0,o.A)((function*(){t.beforeDismiss.emit(),t.active&&(yield t.playLeaveAnimation()),yield c.yG.removeViewFromDom(t.container,t.element),t.deactivate(),e&&(yield l.E.acknowledge(t.id)),t.afterDismiss.emit()}))()}calculateStyles(){var e;if(!this.focus)return;const t=new CoreUserToursFocusLayout(this.focus);if(this.focusStyles=t.inlineStyles,!this.side||!this.alignment)throw new Error("Cannot create a focused user tour without side and alignment");const r=new CoreUserToursPopoverLayout(this.focus,this.side,this.alignment);this.popover=!0,this.popoverWrapperStyles=r.wrapperInlineStyles,this.popoverWrapperArrowStyles=r.wrapperArrowInlineStyles,this.wrapperTransform=`${null!==(e=r.wrapperStyles.transform)&&void 0!==e?e:""}`}playEnterAnimation(){var e=this;return(0,o.A)((function*(){var t;if(!("animate"in e.element))return;const r=[e.element.animate({opacity:["0","1"]},{duration:CoreUserToursUserTourComponent.ANIMATION_DURATION}),null===(t=e.wrapperElement.value)||void 0===t?void 0:t.animate({transform:[`scale(1.2) ${e.wrapperTransform}`,`scale(1) ${e.wrapperTransform}`]},{duration:CoreUserToursUserTourComponent.ANIMATION_DURATION})];yield Promise.all(r.map((e=>null==e?void 0:e.finished)))}))()}playLeaveAnimation(){var e=this;return(0,o.A)((function*(){var t;if(!("animate"in e.element))return;const r=[e.element.animate({opacity:["1","0"]},{duration:CoreUserToursUserTourComponent.ANIMATION_DURATION}),null===(t=e.wrapperElement.value)||void 0===t?void 0:t.animate({transform:[`scale(1) ${e.wrapperTransform}`,`scale(1.2) ${e.wrapperTransform}`]},{duration:CoreUserToursUserTourComponent.ANIMATION_DURATION})];yield Promise.all(r.map((e=>null==e?void 0:e.finished)))}))()}ngOnDestroy(){this.deactivate()}activate(){var e,t,r,o;this.active||(this.active=!0,this.lastActivatedTime=Date.now(),this.backButtonListener||document.addEventListener("ionBackButton",this.backButtonListener=({detail:e})=>e.register(100,(()=>{this.dismissOnBackOrBackdrop()}))),this.focus&&(this.collapsibleHeaderListener=null!==(e=this.collapsibleHeaderListener)&&void 0!==e?e:d.z.on(m.r,(()=>this.calculateStyles())),this.mainMenuListener=null!==(t=this.mainMenuListener)&&void 0!==t?t:d.z.on(y.MAIN_MENU_VISIBILITY_UPDATED_EVENT,(()=>this.calculateStyles())),this.resizeListener=null!==(r=this.resizeListener)&&void 0!==r?r:h.y.onWindowResize((()=>this.calculateStyles())),this.content=null!==(o=this.content)&&void 0!==o?o:h.y.closest(this.focus,"ion-content"),!this.scrollListener&&this.content&&(this.content.scrollEvents=!0,this.content.addEventListener("ionScrollEnd",this.scrollListener=()=>{this.calculateStyles()}))))}deactivate(){var e,t,r;this.active&&(this.active=!1,null===(e=this.collapsibleHeaderListener)||void 0===e||e.off(),null===(t=this.mainMenuListener)||void 0===t||t.off(),null===(r=this.resizeListener)||void 0===r||r.off(),this.backButtonListener&&document.removeEventListener("ionBackButton",this.backButtonListener),this.backButtonListener=void 0,this.collapsibleHeaderListener=void 0,this.mainMenuListener=void 0,this.resizeListener=void 0,this.content&&this.scrollListener&&this.content.removeEventListener("ionScrollEnd",this.scrollListener))}dismissOnBackOrBackdrop(e){!this.active||Date.now()-this.lastActivatedTime<CoreUserToursUserTourComponent.BACKDROP_DISMISS_SAFETY_TRESHOLD||e&&e.closest(".user-tour-wrapper")||this.dismiss(!0)}}return(e=CoreUserToursUserTourComponent).ANIMATION_DURATION=200,e.BACKDROP_DISMISS_SAFETY_TRESHOLD=1e3,e.ɵfac=function CoreUserToursUserTourComponent_Factory(t){return new(t||e)(s.rXU(s.aKT))},e.ɵcmp=s.VBU({type:e,selectors:[["core-user-tours-user-tour"]],viewQuery:function CoreUserToursUserTourComponent_Query(e,t){if(1&e&&s.GBs(S,5),2&e){let e;s.mGM(e=s.lsd())&&(t.wrapper=e.first)}},hostVars:6,hostBindings:function CoreUserToursUserTourComponent_HostBindings(e,t){2&e&&s.AVh("is-active",t.active)("is-popover",t.popover)("backdrop",t.backdrop)},inputs:{container:"container",id:"id",component:"component",componentProps:"componentProps",focus:"focus",side:"side",alignment:"alignment"},outputs:{beforeDismiss:"beforeDismiss",afterDismiss:"afterDismiss"},standalone:!0,features:[s.aNF],decls:5,vars:5,consts:[["wrapper",""],["class","user-tour-focus",3,"style",4,"ngIf"],["class","user-tour-overlay",4,"ngIf"],[1,"user-tour-wrapper"],["class","user-tour-wrapper-arrow",3,"style",4,"ngIf"],[1,"user-tour-focus"],[1,"user-tour-overlay"],[1,"user-tour-wrapper-arrow"]],template:function CoreUserToursUserTourComponent_Template(e,t){1&e&&(s.DNE(0,CoreUserToursUserTourComponent_div_0_Template,1,2,"div",1)(1,CoreUserToursUserTourComponent_div_1_Template,1,0,"div",2),s.j41(2,"div",3,0),s.DNE(4,CoreUserToursUserTourComponent_span_4_Template,1,2,"span",4),s.k0s()),2&e&&(s.Y8G("ngIf",t.focusStyles),s.R7$(),s.Y8G("ngIf",!t.focusStyles),s.R7$(),s.Aen(t.popoverWrapperStyles),s.R7$(2),s.Y8G("ngIf",t.popover))},dependencies:[g.n,w.bT],styles:["[_nghost-%COMP%]{--popover-background: var(--ion-overlay-background-color, var(--ion-background-color, #fff));z-index:105;width:100%;height:100%;display:none;color:#fff}[_nghost-%COMP%]   .user-tour-focus[_ngcontent-%COMP%]{position:absolute;box-shadow:0 0 0 9999px #000000bf}[_nghost-%COMP%]   .user-tour-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#000000bf}[_nghost-%COMP%]   .user-tour-wrapper[_ngcontent-%COMP%]{position:absolute}.is-active[_nghost-%COMP%]{display:block}.is-popover[_nghost-%COMP%]   .user-tour-wrapper[_ngcontent-%COMP%]{color:var(--ion-text-color, #000);background:var(--popover-background);width:70vw;max-width:400px;padding:16px;border-radius:8px}.is-popover[_nghost-%COMP%]   .user-tour-wrapper[_ngcontent-%COMP%]   .user-tour-wrapper-arrow[_ngcontent-%COMP%]{position:absolute;border-style:solid;border-color:transparent}[_nghost-%COMP%]:not(.is-popover)   .user-tour-wrapper[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0}:root.dark[_nghost-%COMP%], :root.dark   [_nghost-%COMP%]{--popover-background: var(--gray-700)}"]}),CoreUserToursUserTourComponent})()}}]);