"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[91983,69006],{91983:(e,n,t)=>{t.r(n),t.d(n,{AddonModFeedbackIndexComponent:()=>Y});var o=t(10467),a=t(75629),i=t(73564),d=t(69006),c=t(51024),_=t(15221),s=t(15324),l=t(52749),r=t(75383),m=t(24742),p=t(55554),u=t(49882),b=t(4593),f=t(26463),g=t(99073),I=t(19634),k=t(30864),h=t(6736),C=t(86654),v=t(54438),A=t(2910),F=t(60177),T=t(47222),x=t(69502),M=t(17388),y=t(97818),R=t(64422),w=t(13988),G=t(72597),E=t(86198),$=t(58197),N=t(66731),j=t(43570),S=t(73955);const _c0=e=>({count:e});function AddonModFeedbackIndexComponent_Conditional_1_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"ion-button",11),v.nI1(1,"translate"),v.bIt("click",(function AddonModFeedbackIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){v.eBV(e);const n=v.XpG();return v.Njj(n.openModuleSummary())})),v.nrm(2,"ion-icon",12),v.k0s()}2&e&&v.Y8G("ariaLabel",v.bMT(1,1,"core.info"))}function AddonModFeedbackIndexComponent_Conditional_2_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"core-context-menu")(1,"core-context-menu-item",13),v.nI1(2,"translate"),v.bIt("action",(function AddonModFeedbackIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){v.eBV(e);const n=v.XpG();return v.Njj(n.openModuleSummary())})),v.k0s()()}2&e&&(v.R7$(),v.Y8G("priority",5e3)("content",v.bMT(2,2,"core.info")))}function AddonModFeedbackIndexComponent_ng_template_8_ng_container_0_Template(e,n){1&e&&v.eu8(0)}function AddonModFeedbackIndexComponent_ng_template_8_Template(e,n){if(1&e&&v.DNE(0,AddonModFeedbackIndexComponent_ng_template_8_ng_container_0_Template,1,0,"ng-container",14),2&e){v.XpG();const e=v.sdS(14);v.Y8G("ngTemplateOutlet",e)}}function AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_ng_container_0_Template(e,n){1&e&&v.eu8(0)}function AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_Template(e,n){if(1&e&&v.DNE(0,AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_ng_container_0_Template,1,0,"ng-container",14),2&e){v.XpG(2);const e=v.sdS(16);v.Y8G("ngTemplateOutlet",e)}}function AddonModFeedbackIndexComponent_core_tab_9_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"core-tab",15),v.nI1(1,"translate"),v.bIt("ionSelect",(function AddonModFeedbackIndexComponent_core_tab_9_Template_core_tab_ionSelect_0_listener(){v.eBV(e);const n=v.XpG();return v.Njj(n.tabChanged(n.tabs.analysis.name))})),v.DNE(2,AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_Template,1,1,"ng-template"),v.k0s()}if(2&e){const e=v.XpG();v.Y8G("id",e.tabs.analysis.name)("title",v.bMT(1,2,e.tabs.analysis.label))}}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_1_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"ion-button",22),v.bIt("click",(function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_1_Template_ion_button_click_0_listener(){v.eBV(e);const n=v.XpG(3);return v.Njj(n.gotoAnswerQuestions(!0))})),v.nrm(1,"ion-icon",23),v.EFF(2),v.nI1(3,"translate"),v.k0s()}2&e&&(v.R7$(2),v.SpI(" ",v.bMT(3,1,"addon.mod_feedback.preview")," "))}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_1_Template(e,n){1&e&&(v.qex(0),v.EFF(1),v.nI1(2,"translate"),v.bVm()),2&e&&(v.R7$(),v.SpI(" ",v.bMT(2,1,"addon.mod_feedback.complete_the_form")," "))}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_2_Template(e,n){1&e&&(v.qex(0),v.EFF(1),v.nI1(2,"translate"),v.bVm()),2&e&&(v.R7$(),v.SpI(" ",v.bMT(2,1,"addon.mod_feedback.continue_the_form")," "))}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"ion-button",24),v.bIt("click",(function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_Template_ion_button_click_0_listener(){v.eBV(e);const n=v.XpG(3);return v.Njj(n.gotoAnswerQuestions())})),v.DNE(1,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_1_Template,3,3,"ng-container",25)(2,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_2_Template,3,3,"ng-container",25),v.k0s()}if(2&e){const e=v.XpG(3);v.R7$(),v.Y8G("ngIf",!e.goPage),v.R7$(),v.Y8G("ngIf",e.goPage)}}function AddonModFeedbackIndexComponent_div_10_div_1_Template(e,n){if(1&e&&(v.j41(0,"div",19),v.DNE(1,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_1_Template,4,3,"ion-button",20)(2,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_Template,3,2,"ion-button",21),v.k0s()),2&e){const e=v.XpG(2);v.R7$(),v.Y8G("ngIf",e.access.canedititems||e.access.canviewreports),v.R7$(),v.Y8G("ngIf",e.access.cancomplete&&e.access.cansubmit&&e.access.isopen)}}function AddonModFeedbackIndexComponent_div_10_Template(e,n){if(1&e&&(v.j41(0,"div",16),v.DNE(1,AddonModFeedbackIndexComponent_div_10_div_1_Template,3,2,"div",17),v.nrm(2,"core-course-module-navigation",18),v.k0s()),2&e){const e=v.XpG();v.R7$(),v.Y8G("ngIf",e.access&&(e.access.canedititems||e.access.canviewreports||!e.access.isempty)),v.R7$(),v.Y8G("courseId",e.courseId)("currentModuleId",e.module.id)}}function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_ion_item_13_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"ion-item",33),v.bIt("click",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_ion_item_13_Template_ion_item_click_0_listener(){v.eBV(e);const n=v.XpG(3);return v.Njj(n.openNonRespondents())})),v.j41(1,"ion-label")(2,"p",28),v.EFF(3),v.nI1(4,"translate"),v.k0s()()()}2&e&&(v.Y8G("detail",!0),v.R7$(3),v.JRh(v.bMT(4,2,"addon.mod_feedback.show_nonrespondents")))}function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"ion-list")(1,"core-group-selector",26),v.mxI("selectedChange",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template_core_group_selector_selectedChange_1_listener(n){v.eBV(e);const t=v.XpG(2);return v.DH7(t.group,n)||(t.group=n),v.Njj(n)})),v.bIt("selectedChange",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template_core_group_selector_selectedChange_1_listener(){v.eBV(e);const n=v.XpG(2);return v.Njj(n.setGroup(n.group))})),v.k0s(),v.j41(2,"ion-item",27),v.bIt("click",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template_ion_item_click_2_listener(){v.eBV(e);const n=v.XpG(2);return v.Njj(n.openAttempts())})),v.j41(3,"ion-label")(4,"p",28),v.EFF(5),v.nI1(6,"translate"),v.k0s()(),v.j41(7,"ion-badge",3)(8,"span",29),v.EFF(9),v.k0s(),v.j41(10,"span",30),v.EFF(11),v.nI1(12,"translate"),v.k0s()()(),v.DNE(13,AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_ion_item_13_Template,5,4,"ion-item",31),v.j41(14,"ion-item",32)(15,"ion-label")(16,"p",28),v.EFF(17),v.nI1(18,"translate"),v.k0s()(),v.j41(19,"ion-badge",3)(20,"span",29),v.EFF(21),v.k0s(),v.j41(22,"span",30),v.EFF(23),v.nI1(24,"translate"),v.k0s()()()()}if(2&e){const e=v.XpG(2);v.R7$(),v.Y8G("groupInfo",e.groupInfo),v.R50("selected",e.group),v.Y8G("courseId",e.courseId),v.R7$(),v.AVh("hide-detail",!(e.access.canviewreports&&e.completedCount>0)),v.Y8G("detail",!0)("button",e.access.canviewreports&&e.completedCount>0),v.R7$(3),v.JRh(v.bMT(6,14,"addon.mod_feedback.completed_feedbacks")),v.R7$(4),v.JRh(e.completedCount),v.R7$(2),v.SpI(" ",v.i5U(12,16,"addon.mod_feedback.completedfeedbackscountdescription",v.eq3(24,_c0,e.completedCount))," "),v.R7$(2),v.Y8G("ngIf",!e.access.isanonymous&&e.access.canviewreports),v.R7$(4),v.JRh(v.bMT(18,19,"addon.mod_feedback.questions")),v.R7$(4),v.JRh(e.itemsCount),v.R7$(2),v.SpI(" ",v.i5U(24,21,"addon.mod_feedback.questionscountdescription",v.eq3(26,_c0,e.itemsCount))," ")}}function AddonModFeedbackIndexComponent_ng_template_11_Template(e,n){if(1&e&&v.DNE(0,AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template,25,28,"ion-list",25),2&e){const e=v.XpG();v.Y8G("ngIf",e.access&&e.access.canviewanalysis&&!e.access.isempty)}}function AddonModFeedbackIndexComponent_ng_template_13_ng_container_1_Template(e,n){1&e&&v.eu8(0)}function AddonModFeedbackIndexComponent_ng_template_13_ion_card_2_Template(e,n){1&e&&(v.j41(0,"ion-card",36)(1,"ion-item"),v.nrm(2,"ion-icon",37),v.j41(3,"ion-label"),v.EFF(4),v.nI1(5,"translate"),v.k0s()()()),2&e&&(v.R7$(4),v.JRh(v.bMT(5,1,"addon.mod_feedback.feedback_is_not_open")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_card_3_Template(e,n){1&e&&(v.j41(0,"ion-card",38)(1,"ion-item"),v.nrm(2,"ion-icon",39),v.j41(3,"ion-label"),v.EFF(4),v.nI1(5,"translate"),v.k0s()()()),2&e&&(v.R7$(4),v.JRh(v.bMT(5,1,"addon.mod_feedback.this_feedback_is_already_submitted")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_1_Template(e,n){if(1&e&&(v.j41(0,"ion-item",32)(1,"ion-label")(2,"p",28),v.EFF(3),v.nI1(4,"translate"),v.k0s(),v.j41(5,"p"),v.EFF(6),v.k0s()()()),2&e){const e=v.XpG(3);v.R7$(3),v.JRh(v.bMT(4,2,"addon.mod_feedback.feedbackopen")),v.R7$(3),v.JRh(e.overview.openTimeReadable)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_2_Template(e,n){if(1&e&&(v.j41(0,"ion-item",32)(1,"ion-label")(2,"p",28),v.EFF(3),v.nI1(4,"translate"),v.k0s(),v.j41(5,"p"),v.EFF(6),v.k0s()()()),2&e){const e=v.XpG(3);v.R7$(3),v.JRh(v.bMT(4,2,"addon.mod_feedback.feedbackclose")),v.R7$(3),v.JRh(e.overview.closeTimeReadable)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_3_Template(e,n){if(1&e&&(v.j41(0,"ion-item",32)(1,"ion-label")(2,"p",28),v.EFF(3),v.nI1(4,"translate"),v.k0s(),v.nrm(5,"core-format-text",41),v.k0s()()),2&e){const e=v.XpG(3);v.R7$(3),v.JRh(v.bMT(4,6,"addon.mod_feedback.page_after_submit")),v.R7$(2),v.Y8G("component",e.component)("componentId",e.componentId)("text",e.feedback.page_after_submit)("contextInstanceId",e.module.id)("courseId",e.courseId)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_6_Template(e,n){1&e&&(v.j41(0,"p"),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&e&&(v.R7$(),v.JRh(v.bMT(2,1,"addon.mod_feedback.anonymous")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_7_Template(e,n){1&e&&(v.j41(0,"p"),v.EFF(1),v.nI1(2,"translate"),v.k0s()),2&e&&(v.R7$(),v.JRh(v.bMT(2,1,"addon.mod_feedback.non_anonymous")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_Template(e,n){if(1&e&&(v.qex(0),v.j41(1,"ion-item",32)(2,"ion-label")(3,"p",28),v.EFF(4),v.nI1(5,"translate"),v.k0s(),v.DNE(6,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_6_Template,3,3,"p",25)(7,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_7_Template,3,3,"p",25),v.k0s()(),v.bVm()),2&e){const e=v.XpG(3);v.R7$(4),v.JRh(v.bMT(5,3,"addon.mod_feedback.mode")),v.R7$(2),v.Y8G("ngIf",e.access.isanonymous),v.R7$(),v.Y8G("ngIf",!e.access.isanonymous)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_Template(e,n){if(1&e&&(v.j41(0,"ion-list"),v.DNE(1,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_1_Template,7,4,"ion-item",40)(2,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_2_Template,7,4,"ion-item",40)(3,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_3_Template,6,8,"ion-item",40)(4,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_Template,8,5,"ng-container",25),v.k0s()),2&e){const e=v.XpG(2);v.R7$(),v.Y8G("ngIf",e.access.canedititems&&e.overview.timeopen),v.R7$(),v.Y8G("ngIf",e.access.canedititems&&e.overview.timeclose),v.R7$(),v.Y8G("ngIf",e.access.canedititems&&e.feedback&&e.feedback.page_after_submit),v.R7$(),v.Y8G("ngIf",!e.access.isempty)}}function AddonModFeedbackIndexComponent_ng_template_13_Template(e,n){if(1&e&&(v.j41(0,"core-loading",5),v.DNE(1,AddonModFeedbackIndexComponent_ng_template_13_ng_container_1_Template,1,0,"ng-container",14)(2,AddonModFeedbackIndexComponent_ng_template_13_ion_card_2_Template,6,3,"ion-card",34)(3,AddonModFeedbackIndexComponent_ng_template_13_ion_card_3_Template,6,3,"ion-card",35)(4,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_Template,5,4,"ion-list",25),v.k0s()),2&e){const e=v.XpG(),n=v.sdS(12);v.Y8G("hideUntil",e.tabs.overview.loaded),v.R7$(),v.Y8G("ngTemplateOutlet",n),v.R7$(),v.Y8G("ngIf",e.access&&e.access.cancomplete&&!e.access.isopen),v.R7$(),v.Y8G("ngIf",e.access&&e.access.cancomplete&&e.access.isopen&&!e.access.cansubmit),v.R7$(),v.Y8G("ngIf",e.access&&(e.access.canedititems||e.access.canviewreports||!e.access.isempty))}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_1_Template(e,n){1&e&&v.eu8(0)}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_card_1_Template(e,n){if(1&e&&(v.j41(0,"ion-card",36)(1,"ion-item"),v.nrm(2,"ion-icon",37),v.j41(3,"ion-label"),v.EFF(4),v.k0s()()()),2&e){const e=v.XpG(3);v.R7$(4),v.JRh(e.warning)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_li_2_Template(e,n){if(1&e&&(v.j41(0,"li"),v.EFF(1),v.k0s()),2&e){const e=n.$implicit;v.R7$(),v.JRh(e)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_Template(e,n){if(1&e&&(v.qex(0),v.j41(1,"ul"),v.DNE(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_li_2_Template,2,1,"li",46),v.k0s(),v.j41(3,"p"),v.EFF(4),v.nI1(5,"translate"),v.nI1(6,"number"),v.k0s(),v.bVm()),2&e){const e=v.XpG().$implicit;v.R7$(2),v.Y8G("ngForOf",e.data),v.R7$(2),v.Lme("",v.bMT(5,3,"addon.mod_feedback.average"),": ",v.i5U(6,5,e.average,"1.2-2"),"")}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_li_1_Template(e,n){if(1&e&&(v.j41(0,"li"),v.EFF(1),v.k0s()),2&e){const e=v.XpG().$implicit;v.R7$(),v.JRh(e)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_Template(e,n){if(1&e&&(v.qex(0),v.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_li_1_Template,2,1,"li",25),v.bVm()),2&e){const e=n.$implicit;v.R7$(),v.Y8G("ngIf",e)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_Template(e,n){if(1&e&&(v.qex(0),v.j41(1,"ul"),v.DNE(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_Template,2,1,"ng-container",46),v.k0s(),v.bVm()),2&e){const e=v.XpG().$implicit;v.R7$(2),v.Y8G("ngForOf",e.data)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_p_2_Template(e,n){if(1&e&&(v.j41(0,"p"),v.EFF(1),v.nI1(2,"translate"),v.nI1(3,"number"),v.k0s()),2&e){const e=v.XpG(2).$implicit;v.R7$(),v.Lme(" ",v.bMT(2,2,"addon.mod_feedback.average"),": ",v.i5U(3,4,e.average,"1.2-2")," ")}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_Template(e,n){if(1&e&&(v.qex(0),v.nrm(1,"core-chart",47),v.DNE(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_p_2_Template,4,7,"p",25),v.bVm()),2&e){const e=v.XpG().$implicit,n=v.XpG(4);v.R7$(),v.Y8G("type",e.chartType)("data",e.chartData)("labels",e.labels)("contextInstanceId",n.module.id)("wsNotFiltered",!0)("courseId",n.courseId),v.R7$(),v.Y8G("ngIf",e.average)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_Template(e,n){if(1&e&&(v.j41(0,"ion-item",43)(1,"ion-label")(2,"p",28),v.EFF(3),v.nrm(4,"core-format-text",41),v.k0s(),v.j41(5,"p"),v.nrm(6,"core-format-text",41),v.k0s(),v.qex(7,44),v.DNE(8,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_Template,7,8,"ng-container",45)(9,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_Template,3,1,"ng-container",45)(10,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_Template,3,7,"ng-container",45),v.bVm(),v.k0s()()),2&e){const e=n.$implicit,t=v.XpG(4);v.R7$(3),v.SpI(" ",e.num,". "),v.R7$(),v.Y8G("component",t.component)("componentId",t.componentId)("text",e.name)("contextInstanceId",t.module.id)("courseId",t.courseId),v.R7$(2),v.Y8G("component",t.component)("componentId",t.componentId)("text",e.label)("contextInstanceId",t.module.id)("courseId",t.courseId),v.R7$(),v.Y8G("ngSwitch",e.templateName),v.R7$(),v.Y8G("ngSwitchCase","numeric"),v.R7$(),v.Y8G("ngSwitchCase","list"),v.R7$(),v.Y8G("ngSwitchCase","chart")}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_Template(e,n){if(1&e&&(v.j41(0,"ion-list"),v.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_Template,11,15,"ion-item",42),v.k0s()),2&e){const e=v.XpG(3);v.R7$(),v.Y8G("ngForOf",e.items)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_Template(e,n){if(1&e&&(v.qex(0),v.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_card_1_Template,5,1,"ion-card",34)(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_Template,2,1,"ion-list",25),v.bVm()),2&e){const e=v.XpG(2);v.R7$(),v.Y8G("ngIf",e.warning),v.R7$(),v.Y8G("ngIf",e.items&&e.items.length)}}function AddonModFeedbackIndexComponent_ng_template_15_Template(e,n){if(1&e&&(v.j41(0,"core-loading",5),v.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_1_Template,1,0,"ng-container",14)(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_Template,3,2,"ng-container",25),v.k0s()),2&e){const e=v.XpG(),n=v.sdS(12);v.Y8G("hideUntil",e.tabs.analysis.loaded),v.R7$(),v.Y8G("ngTemplateOutlet",n),v.R7$(),v.Y8G("ngIf",e.access&&(e.access.canedititems||!e.access.isempty))}}let Y=(()=>{var e;class AddonModFeedbackIndexComponent extends d.y{constructor(e,n){var t;super("AddonModLessonIndexComponent",e,n),t=this,this.content=e,this.selectedTab=I.sT.OVERVIEW,this.group=0,this.component=I.yH,this.pluginName="feedback",this.items=[],this.showAnalysis=!1,this.tabsReady=!1,this.completedCount=0,this.itemsCount=0,this.overview={timeopen:0,openTimeReadable:"",timeclose:0,closeTimeReadable:""},this.tabs={overview:{name:I.sT.OVERVIEW,label:"addon.mod_feedback.overview",loaded:!1},analysis:{name:I.sT.ANALYSIS,label:"addon.mod_feedback.analysis",loaded:!1}},this.syncEventName=I.$5,this.checkCompletionAfterLog=!1,this.submitObserver=u.z.on(I.bN,function(){var e=(0,o.A)((function*(e){t.feedback&&e.feedbackId===t.feedback.id&&(t.tabs.analysis.loaded=!1,t.tabs.overview.loaded=!1,t.showLoading=!0,!e.offline&&t.isPrefetched()&&(yield p.g.ignoreErrors(g.V.prefetchModuleAfterUpdate(t.module,t.courseId))),e.tab!==t.selectedTab?t.tabChanged(e.tab):t.loadContent(!0))}));return function(n){return e.apply(this,arguments)}}(),this.siteId)}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,o.A)((function*(){_superprop_getNgOnInit().call(e);try{yield e.loadContent(!1,!0)}finally{e.tabsReady=!0}}))()}logActivity(){var e=this;return(0,o.A)((function*(){e.feedback&&(yield b.o.logView(e.feedback.id),e.callAnalyticsLogEvent())}))()}callAnalyticsLogEvent(){this.analyticsLogEvent("mod_feedback_view_feedback",{url:this.selectedTab===I.sT.ANALYSIS?`/mod/feedback/analysis.php?id=${this.module.id}`:void 0})}invalidateContent(){var e=this;return(0,o.A)((function*(){const n=[];n.push(b.o.invalidateFeedbackData(e.courseId)),e.feedback&&(n.push(b.o.invalidateFeedbackAccessInformationData(e.feedback.id)),n.push(b.o.invalidateAnalysisData(e.feedback.id)),n.push(_.CoreGroups.invalidateActivityAllowedGroups(e.feedback.coursemodule)),n.push(_.CoreGroups.invalidateActivityGroupMode(e.feedback.coursemodule)),n.push(b.o.invalidateResumePageData(e.feedback.id))),e.tabs.analysis.loaded=!1,e.tabs.overview.loaded=!1,yield Promise.all(n)}))()}isRefreshSyncNeeded(e){var n,t;return e.feedbackId===(null===(n=this.feedback)||void 0===n?void 0:n.id)&&(null===(t=this.content)||void 0===t||t.scrollToTop(),!0)}fetchContent(e,n=!1,t=!1){var a=this;return(0,o.A)((function*(){try{if(a.feedback=yield b.o.getFeedback(a.courseId,a.module.id),yield a.fixPageAfterSubmitFileUrls(),a.description=a.feedback.intro,a.dataRetrieved.emit(a.feedback),n&&(yield a.syncActivity(t)),a.access=yield b.o.getFeedbackAccessInformation(a.feedback.id,{cmId:a.module.id}),a.showAnalysis=(a.access.canviewreports||a.access.canviewanalysis)&&!a.access.isempty,a.tabs.analysis.label=a.access.canviewreports?"addon.mod_feedback.analysis":"addon.mod_feedback.completed_feedbacks",a.firstSelectedTab=0,a.showAnalysis||(a.selectedTab=I.sT.OVERVIEW),a.selectedTab===I.sT.ANALYSIS)return a.firstSelectedTab=1,yield a.fetchFeedbackAnalysisData();yield a.fetchFeedbackOverviewData()}finally{var e,o;if(a.feedback&&(a.hasOffline=yield f.X.hasFeedbackOfflineData(a.feedback.id)),a.tabsReady)null===(e=a.tabsComponent)||void 0===e||e.selectTab(null!==(o=a.selectedTab)&&void 0!==o?o:I.sT.OVERVIEW)}}))()}fixPageAfterSubmitFileUrls(){var e=this;return(0,o.A)((function*(){var n;if((yield l.CoreSites.getSite(e.siteId)).isVersionGreaterEqualThan("4.2")&&null!==(n=e.feedback)&&void 0!==n&&n.page_after_submit&&e.feedback.pageaftersubmitfiles)for(const n of e.feedback.pageaftersubmitfiles){const t=n.fileurl.replace("/page_after_submit/0/","/page_after_submit/"),o=new RegExp(r.Ni.escapeForRegex(t),"g");e.feedback.page_after_submit=e.feedback.page_after_submit.replace(o,n.fileurl)}}))()}fetchFeedbackOverviewData(){var e=this;return(0,o.A)((function*(){if(!e.access||!e.feedback)return;const n=[];e.access.cancomplete&&e.access.cansubmit&&e.access.isopen&&n.push(b.o.getResumePage(e.feedback.id,{cmId:e.module.id}).then((n=>{e.goPage=n>0?n:void 0}))),e.access.canedititems&&(e.overview.timeopen=1e3*(e.feedback.timeopen||0),e.overview.openTimeReadable=e.overview.timeopen?m.j.userDate(e.overview.timeopen):"",e.overview.timeclose=1e3*(e.feedback.timeclose||0),e.overview.closeTimeReadable=e.overview.timeclose?m.j.userDate(e.overview.timeclose):""),e.access.canviewanalysis&&n.push(e.fetchGroupInfo(e.module.id));try{yield Promise.all(n)}finally{e.tabs.overview.loaded=!0}}))()}fetchFeedbackAnalysisData(){var e=this;return(0,o.A)((function*(){try{var n;null!==(n=e.access)&&void 0!==n&&n.canviewanalysis?yield e.fetchGroupInfo(e.module.id):e.tabChanged(I.sT.OVERVIEW)}finally{e.tabs.analysis.loaded=!0}}))()}fetchGroupInfo(e){var n=this;return(0,o.A)((function*(){n.groupInfo=yield _.CoreGroups.getActivityGroupInfo(e),yield n.setGroup(_.CoreGroups.validateGroupId(n.group,n.groupInfo))}))()}parseAnalysisInfo(e){switch(e.typ){case I.AB.NUMERIC:e.average=e.data.reduce(((e,n)=>e+Number(n)),0)/e.data.length,e.templateName=I.Qt.NUMERIC;break;case I.AB.INFO:e.data=e.data.map((e=>{const n=r.Ni.parseJSON(e);return void 0!==n.show&&n.show})).filter((e=>e));case I.AB.TEXTFIELD:case I.AB.TEXTAREA:e.templateName=I.Qt.LIST;break;case I.AB.MULTICHOICERATED:case I.AB.MULTICHOICE:{const n=e.data.map((e=>{const n=r.Ni.parseJSON(e);return void 0!==n.answertext&&n})).filter((e=>e));e.labels=n.map((e=>{e.quotient=(100*e.quotient).toFixed(2);let n="";return void 0!==e.value&&(n=`(${e.value}) `),n+=e.answertext,n+=Number(e.quotient)>0?` (${e.quotient}%)`:"",n})),e.chartData=n.map((e=>Number(e.answercount))),e.typ===I.AB.MULTICHOICERATED&&(e.average=n.reduce(((e,n)=>e+Number(n.avg)),0));const t=e.presentation.charAt(0)!==I.gL.CHECKBOX&&e.chartData.some((e=>e>0));e.chartType=t?"doughnut":"bar",e.templateName=I.Qt.CHART;break}}return e}gotoAnswerQuestions(e=!1){s.CoreNavigator.navigateToSitePath(`${I.qY}/${this.courseId}/${this.module.id}/form`,{params:{preview:e,fromIndex:!0}})}ionViewDidEnter(){var e;super.ionViewDidEnter(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidEnter()}ionViewDidLeave(){var e;super.ionViewDidLeave(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidLeave()}openNonRespondents(){s.CoreNavigator.navigateToSitePath(`${I.qY}/${this.courseId}/${this.module.id}/nonrespondents`,{params:{group:this.group}})}openAttempts(){!this.access||!this.access.canviewreports||this.completedCount<=0||s.CoreNavigator.navigateToSitePath(`${I.qY}/${this.courseId}/${this.module.id}/attempts`,{params:{group:this.group}})}tabChanged(e){const n=void 0!==this.selectedTab&&this.selectedTab!==e;this.selectedTab=e,this.tabs[this.selectedTab].loaded||this.loadContent(!1,!1,!0),n&&this.callAnalyticsLogEvent()}setGroup(e){var n=this;return(0,o.A)((function*(){if(!n.feedback)return;n.group=e;const t=yield b.o.getAnalysis(n.feedback.id,{groupId:e,cmId:n.module.id});if(n.completedCount=t.completedcount,n.itemsCount=t.itemscount,n.selectedTab===I.sT.ANALYSIS){var o;let e=1;if(n.items=t.itemsdata.map((t=>{const o=Object.assign(t.item,{data:t.data,num:e++});return!(!o.data||!o.data.length)&&n.parseAnalysisInfo(o)})).filter((e=>e)),n.warning="",null!==(o=t.warnings)&&void 0!==o&&o.length){const e=t.warnings.find((e=>"insufficientresponsesforthisgroup"==e.warningcode));n.warning=null==e?void 0:e.message}}}))()}sync(){if(!this.feedback)throw new a.CoreError("Cannot sync without a feedback.");return g.V.syncFeedback(this.feedback.id)}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.submitObserver)||void 0===e||e.off()}}return(e=AddonModFeedbackIndexComponent).ɵfac=function AddonModFeedbackIndexComponent_Factory(n){return new(n||e)(v.rXU(A.W9),v.rXU(c.A,8))},e.ɵcmp=v.VBU({type:e,selectors:[["addon-mod-feedback-index"]],viewQuery:function AddonModFeedbackIndexComponent_Query(e,n){if(1&e&&v.GBs(i.h,5),2&e){let e;v.mGM(e=v.lsd())&&(n.tabsComponent=e.first)}},inputs:{selectedTab:"selectedTab",group:"group"},standalone:!0,features:[v.Vt3,v.aNF],decls:17,vars:16,consts:[["basicInfo",""],["tabOverview",""],["tabAnalysis",""],["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[3,"hideUntil","selectedIndex"],[3,"ionSelect","title","id"],[3,"id","title","ionSelect",4,"ngIf"],["collapsible-footer","","slot","fixed",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],[4,"ngTemplateOutlet"],[3,"ionSelect","id","title"],["collapsible-footer","","slot","fixed"],["class","list-item-limited-width adaptable-buttons-row",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width","adaptable-buttons-row"],["expand","block","fill","outline","class","ion-margin ion-text-wrap",3,"click",4,"ngIf"],["expand","block","class","ion-margin ion-text-wrap",3,"click",4,"ngIf"],["expand","block","fill","outline",1,"ion-margin","ion-text-wrap",3,"click"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"],["expand","block",1,"ion-margin","ion-text-wrap",3,"click"],[4,"ngIf"],[3,"selectedChange","groupInfo","selected","courseId"],[1,"ion-text-wrap",3,"click","detail","button"],[1,"item-heading"],["aria-hidden","true"],[1,"sr-only"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngIf"],[1,"ion-text-wrap"],["button","",1,"ion-text-wrap",3,"click","detail"],["class","core-info-card",4,"ngIf"],["class","core-success-card",4,"ngIf"],[1,"core-info-card"],["name","fas-circle-question","slot","start","aria-hidden","true"],[1,"core-success-card"],["name","fas-check","slot","start","aria-hidden","true"],["class","ion-text-wrap",4,"ngIf"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],["class","ion-text-wrap core-analysis",4,"ngFor","ngForOf"],[1,"ion-text-wrap","core-analysis"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf"],["height","300","contextLevel","module",3,"type","data","labels","contextInstanceId","wsNotFiltered","courseId"]],template:function AddonModFeedbackIndexComponent_Template(e,n){if(1&e){const e=v.RV6();v.j41(0,"core-navbar-buttons",3),v.DNE(1,AddonModFeedbackIndexComponent_Conditional_1_Template,3,3,"ion-button",4)(2,AddonModFeedbackIndexComponent_Conditional_2_Template,3,4),v.k0s(),v.j41(3,"core-loading",5)(4,"core-course-module-info",6),v.bIt("completionChanged",(function AddonModFeedbackIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return v.eBV(e),v.Njj(n.onCompletionChange())})),v.k0s(),v.j41(5,"core-tabs",7)(6,"core-tab",8),v.nI1(7,"translate"),v.bIt("ionSelect",(function AddonModFeedbackIndexComponent_Template_core_tab_ionSelect_6_listener(){return v.eBV(e),v.Njj(n.tabChanged(n.tabs.overview.name))})),v.DNE(8,AddonModFeedbackIndexComponent_ng_template_8_Template,1,1,"ng-template"),v.k0s(),v.DNE(9,AddonModFeedbackIndexComponent_core_tab_9_Template,3,4,"core-tab",9),v.k0s(),v.DNE(10,AddonModFeedbackIndexComponent_div_10_Template,3,3,"div",10),v.k0s(),v.DNE(11,AddonModFeedbackIndexComponent_ng_template_11_Template,1,1,"ng-template",null,0,v.C5r)(13,AddonModFeedbackIndexComponent_ng_template_13_Template,5,5,"ng-template",null,1,v.C5r)(15,AddonModFeedbackIndexComponent_ng_template_15_Template,3,3,"ng-template",null,2,v.C5r)}2&e&&(v.R7$(),v.vxM(1,n.courseContentsPage?2:1),v.R7$(2),v.Y8G("hideUntil",!n.showLoading),v.R7$(),v.Y8G("module",n.module)("description",n.description)("component",n.component)("componentId",n.componentId)("courseId",n.courseId)("hasDataToSync",n.hasOffline),v.R7$(),v.Y8G("hideUntil",n.tabsReady)("selectedIndex",n.firstSelectedTab),v.R7$(),v.Y8G("title",v.bMT(7,14,n.tabs.overview.label))("id",n.tabs.overview.name),v.R7$(3),v.Y8G("ngIf",n.showAnalysis&&n.access),v.R7$(),v.Y8G("ngIf",!n.showLoading))},dependencies:[C.n,F.Sq,F.bT,F.T3,F.ux,F.e1,A.In,A.Jm,A.b_,A.iq,A.uz,A.he,A.nf,T.B,x.B,M.Q,y.F,R.R,w.c,G.K,i.h,E.t,$.B,N.i,j.T,F.QX,S.D9,h.CoreCourseModuleInfoComponent,k.CoreCourseModuleNavigationComponent],encapsulation:2}),AddonModFeedbackIndexComponent})()},69006:(e,n,t)=>{t.d(n,{y:()=>b});var o=t(10467),a=t(23063),i=t(49882),d=t(44682),c=t(55554),_=t(51024),s=t(52749),l=t(25572),r=t(79555),m=t(95384),p=t(54438),u=t(2910);let b=(()=>{var e;class CoreCourseModuleMainActivityComponent extends a.x{constructor(e="CoreCourseModuleMainResourceComponent",n,t){super(e,t),this.content=n,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,o.A)((function*(){yield _superprop_getNgOnInit().call(e),e.hasOffline=!1,e.moduleName=m.CoreCourseModuleHelper.translateModuleName(e.pluginName||e.moduleName||""),e.syncEventName&&(e.syncObserver=i.z.on(e.syncEventName,(n=>{e.autoSyncEventReceived(n)}),e.siteId))}))()}isRefreshSyncNeeded(e){return!1}autoSyncEventReceived(e){this.isRefreshSyncNeeded(e)&&this.showLoadingAndRefresh(!1)}refreshContent(e=!1,n=!1){var t=this;return(0,o.A)((function*(){t.module&&(yield c.g.ignoreErrors(Promise.all([t.invalidateContent(),t.showCompletion?d.CoreCourse.invalidateModule(t.module.id):void 0])),yield t.loadContent(!0,e,n))}))()}showLoadingAndFetch(e=!1,n=!1){var t=this;return(0,o.A)((function*(){var o;t.showLoading=!0,null===(o=t.content)||void 0===o||o.scrollToTop(),yield t.loadContent(!1,e,n)}))()}showLoadingAndRefresh(e=!1,n=!1){var t;return this.showLoading=!0,null===(t=this.content)||void 0===t||t.scrollToTop(),this.refreshContent(e,n)}fetchContent(e=!1,n=!1,t=!1){return(0,o.A)((function*(){}))()}loadContent(e,n=!1,t=!1){var a=this;return(0,o.A)((function*(){if(a.module)try{e&&a.showCompletion&&(yield c.g.ignoreErrors(a.fetchModule())),yield a.fetchContent(e,n,t),a.finishSuccessfulFetch()}catch(t){var o;if(!e&&(null===(o=s.CoreSites.getCurrentSite())||void 0===o||!o.isOfflineDisabled())&&m.CoreCourseModuleHelper.isNotFoundError(t))return yield a.refreshContent(n);l.CoreAlerts.showError(t,{default:r.HT.instant(a.fetchContentDefaultError)})}finally{a.showLoading=!1}}))()}sync(){return(0,o.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(e){return e.updated}syncActivity(e=!1){var n=this;return(0,o.A)((function*(){try{const e=yield n.sync();return e.warnings.length&&l.CoreAlerts.show({message:e.warnings[0]}),n.hasSyncSucceed(e)}catch(n){return e&&l.CoreAlerts.showError(n,{default:r.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.syncObserver)||void 0===e||e.off()}}return(e=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(n){return new(n||e)(p.rXU("",8),p.rXU(u.W9),p.rXU(_.A))},e.ɵcmp=p.VBU({type:e,selectors:[["ng-component"]],inputs:{group:"group"},features:[p.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(e,n){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);