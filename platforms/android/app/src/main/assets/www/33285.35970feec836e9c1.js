"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[33285],{58866:(e,t,s)=>{s.d(t,{i:()=>CoreItemsManagerSource});class CoreItemsManagerSource{constructor(){this.items=null,this.listeners=[],this.dirty=!1,this.loaded=!1,this.loadedPromise=new Promise((e=>this.resolveLoaded=e))}isDirty(){return this.dirty}isLoaded(){return this.loaded}waitForLoaded(){return this.loadedPromise}setLoaded(){this.loaded=!0,this.resolveLoaded()}setDirty(e){this.dirty=e}getItems(){return this.items}reset(){this.items=null,this.dirty=!1,this.loaded=!1,this.listeners.forEach((e=>{var t;return null===(t=e.onReset)||void 0===t?void 0:t.call(e)}))}addListener(e){return this.listeners.push(e),()=>this.removeListener(e)}removeListener(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}setItems(e){this.items=e,this.setLoaded(),this.notifyItemsUpdated()}notifyItemsUpdated(){this.listeners.forEach((e=>{var t;return null===(t=e.onItemsUpdated)||void 0===t?void 0:t.call(e,this.items)}))}}},42022:(e,t,s)=>{s.d(t,{f:()=>CoreItemsManager});var r=s(29306);class CoreItemsManager{constructor(e){this.itemsMap=null,this.selectedItem=null,this.listeners=[],this.setSource(e)}getSource(){if(!this.source)throw new r.CoreSilentError("Source is missing from items manager");return this.source.instance}setSource(e){if(this.source&&(this.source.unsubscribe(),delete this.source,this.onSourceReset()),e){this.source={instance:e,unsubscribe:e.addListener({onItemsUpdated:e=>this.onSourceItemsUpdated(e),onReset:()=>this.onSourceReset()})};const t=e.getItems();t&&this.onSourceItemsUpdated(t)}}destroy(){this.setSource(null)}getSelectedItem(){return this.selectedItem}setSelectedItem(e){e!==this.selectedItem&&(this.selectedItem=e,this.listeners.forEach((t=>{var s;return null===(s=t.onSelectedItemUpdated)||void 0===s?void 0:s.call(t,e)})))}addListener(e){return this.listeners.push(e),()=>this.removeListener(e)}removeListener(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}onSourceItemsUpdated(e){this.itemsMap=e.reduce(((e,t)=>(e[this.getItemId(t)]=t,e)),{})}onSourceReset(){this.itemsMap=null,this.selectedItem=null}getItemById(e){var t,s;return null!==(t=null===(s=this.itemsMap)||void 0===s?void 0:s[e])&&void 0!==t?t:null}}},35716:(e,t,s)=>{s.d(t,{z:()=>CorePaginatedItemsManagerSource});var r=s(10467),n=s(58866);class CorePaginatedItemsManagerSource extends n.i{constructor(){super(...arguments),this.hasMoreItems=!0}isCompleted(){return!this.hasMoreItems}isEmpty(){var e;return!this.isLoaded()||0===(null!==(e=this.getItems())&&void 0!==e?e:[]).length}getPagesLoaded(){if(null===this.items)return 0;const e=this.getPageLength();return null===e?1:Math.ceil(this.items.length/e)}reset(){this.hasMoreItems=!0,super.reset()}reload(){var e=this;return(0,r.A)((function*(){e.dirty=!0,yield e.load()}))()}load(){var e=this;return(0,r.A)((function*(){var t;if(e.dirty){const{items:t,hasMoreItems:s}=yield e.loadPageItems(0);return e.dirty=!1,e.setItems(t,null!=s&&s),void 0}if(!e.hasMoreItems)return;const{items:s,hasMoreItems:r}=yield e.loadPageItems(e.getPagesLoaded());e.setItems((null!==(t=e.items)&&void 0!==t?t:[]).concat(s),null!=r&&r)}))()}getPageLength(){return null}setItems(e,t=!1){this.hasMoreItems=t,super.setItems(e)}}},99522:(e,t,s)=>{s.d(t,{F:()=>CoreRoutedItemsManagerSource});var r=s(35716);class CoreRoutedItemsManagerSource extends r.z{static getSourceId(...e){return e.map((e=>String(e))).join("-")}getItemQueryParams(e){return{}}}},83696:(e,t,s)=>{var r;s.d(t,{u:()=>CoreRoutedItemsManagerSourcesTracker});class CoreRoutedItemsManagerSourcesTracker{static getSource(e,t){var s,r;const n="string"==typeof t?t:e.getSourceId(...t);return null!==(s=null===(r=this.getConstructorInstances(e)[n])||void 0===r?void 0:r.instance)&&void 0!==s?s:null}static getOrCreateSource(e,t){var s;const r=e.getSourceId(...t);return null!==(s=this.getSource(e,r))&&void 0!==s?s:this.createInstance(r,e,t)}static addReference(e,t){const s=this.getConstructorInstances(e.constructor),r=this.instanceIds.get(e);void 0!==r&&(r in s||(s[r]={instance:e,references:[]}),s[r].references.push(t))}static removeReference(e,t){var s,r;const n=this.instances.get(e.constructor),i=this.instanceIds.get(e),o=null!==(s=null==n||null===(r=n[null!=i?i:""])||void 0===r?void 0:r.references.indexOf(t))&&void 0!==s?s:-1;n&&void 0!==i&&-1!==o&&(n[i].references.splice(o,1),0===n[i].references.length&&delete n[i])}static getConstructorInstances(e){var t;return null!==(t=this.instances.get(e))&&void 0!==t?t:this.initialiseConstructorInstances(e)}static initialiseConstructorInstances(e){const t={};return this.instances.set(e,t),t}static createInstance(e,t,s){const r=new t(...s);return this.instanceIds.set(r,e),r}}(r=CoreRoutedItemsManagerSourcesTracker).instances=new WeakMap,r.instanceIds=new WeakMap},95990:(e,t,s)=>{s.d(t,{u:()=>CoreRoutedItemsManager});var r=s(10467),n=s(15324),i=s(42022),o=s(83696);class CoreRoutedItemsManager extends i.f{setSource(e){this.source&&o.u.removeReference(this.source.instance,this),e&&o.u.addReference(e,this),super.setSource(e)}getSelectedItemPath(e){return e?this.getSelectedItemPathFromRoute(e):null}updateSelectedItem(e=null){var t,s,r;e=null!==(t=null!=e?e:this.getCurrentPageRoute())&&void 0!==t?t:null;const n=this.getSelectedItemPath(e),i=n&&null!==(s=null===(r=this.itemsMap)||void 0===r?void 0:r[n])&&void 0!==s?s:null;this.setSelectedItem(i)}navigateToItem(e,t={}){var s=this;return(0,r.A)((function*(){const r=s.getCurrentPageRoute();if(null===r)return;const i=s.getSource().getItemPath(e),o=s.getSelectedItemPath(r);if(o===i)return;const a=s.getSource().getItemQueryParams(e),u=o?o.split("/").fill("../").join(""):"";yield n.CoreNavigator.navigate(u+i,{params:a,...t})}))()}navigateToIndex(e={}){var t=this;return(0,r.A)((function*(){const s=t.getCurrentPageRoute();if(null===s)return;const r=t.getSelectedItemPath(s);if(null===r)return;const i=r?r.split("/").fill("../").join(""):"";yield n.CoreNavigator.navigate(i,e)}))()}onSourceItemsUpdated(e){super.onSourceItemsUpdated(e);const t=this.selectedItem;null!==t&&e.some((e=>e===t))||this.updateSelectedItem()}getItemId(e){return this.getSource().getItemPath(e)}}}}]);