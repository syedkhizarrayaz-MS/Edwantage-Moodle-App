"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7980],{7980:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var o=n(10467),c=n(41140),a=n(15324),m=n(55554),r=n(49697),p=n(24742),i=n(22693),d=n(25572),y=n(86654),s=n(54438),l=n(60177),u=n(2910),_=n(64422),g=n(58197),C=n(88246),I=n(73955);function AddonCompetencyCompetencySummaryPage_h1_6_Template(e,t){if(1&e&&(s.j41(0,"h1"),s.nrm(1,"core-format-text",7),s.j41(2,"small"),s.EFF(3),s.k0s()()),2&e){const e=s.XpG();s.R7$(),s.Y8G("text",e.competency.competency.shortname)("contextLevel",e.contextLevel)("contextInstanceId",e.contextInstanceId),s.R7$(2),s.JRh(e.competency.competency.idnumber)}}function AddonCompetencyCompetencySummaryPage_ion_card_12_ion_item_1_Template(e,t){if(1&e&&(s.j41(0,"ion-item",9)(1,"ion-label"),s.nrm(2,"core-format-text",7),s.k0s()()),2&e){const e=s.XpG(2);s.R7$(2),s.Y8G("text",e.competency.competency.description)("contextLevel",e.contextLevel)("contextInstanceId",e.contextInstanceId)}}function AddonCompetencyCompetencySummaryPage_ion_card_12_ng_container_9_Template(e,t){if(1&e){const e=s.RV6();s.qex(0),s.EFF(1,"  /  "),s.j41(2,"button",12),s.bIt("click",(function AddonCompetencyCompetencySummaryPage_ion_card_12_ng_container_9_Template_button_click_2_listener(){const t=s.eBV(e).$implicit,n=s.XpG(2);return s.Njj(n.openCompetencySummary(t.id))})),s.nrm(3,"core-format-text",7),s.k0s(),s.bVm()}if(2&e){const e=t.$implicit,n=s.XpG(2);s.R7$(3),s.Y8G("text",e.name)("contextLevel",n.contextLevel)("contextInstanceId",n.contextInstanceId)}}function AddonCompetencyCompetencySummaryPage_ion_card_12_Template(e,t){if(1&e&&(s.j41(0,"ion-card"),s.DNE(1,AddonCompetencyCompetencySummaryPage_ion_card_12_ion_item_1_Template,3,3,"ion-item",8),s.j41(2,"ion-item",9)(3,"ion-label")(4,"p",10),s.EFF(5),s.nI1(6,"translate"),s.k0s(),s.j41(7,"p"),s.nrm(8,"core-format-text",7),s.DNE(9,AddonCompetencyCompetencySummaryPage_ion_card_12_ng_container_9_Template,4,3,"ng-container",11),s.k0s()()()()),2&e){const e=s.XpG();s.R7$(),s.Y8G("ngIf",e.competency.competency.description),s.R7$(4),s.JRh(s.bMT(6,6,"addon.competency.path")),s.R7$(3),s.Y8G("text",e.competency.comppath.framework.name)("contextLevel",e.contextLevel)("contextInstanceId",e.contextInstanceId),s.R7$(),s.Y8G("ngForOf",e.competency.comppath.ancestors)}}let f=(()=>{var e;class AddonCompetencyCompetencySummaryPage{constructor(){var e=this;this.competencyLoaded=!1,this.logView=p.j.once((0,o.A)((function*(){e.competency&&(yield m.g.ignoreErrors(c.AddonCompetency.logCompetencyView(e.competencyId,e.competency.competency.shortname)),i.OF.logEvent({type:i.qr.VIEW_ITEM_LIST,ws:"core_competency_competency_viewed",name:e.competency.competency.shortname,data:{competencyId:e.competencyId,category:"competency"},url:`/admin/tool/lp/user_competency.php?id=${e.competencyId}`}))})))}ngOnInit(){var e=this;return(0,o.A)((function*(){try{e.competencyId=a.CoreNavigator.getRequiredRouteNumberParam("competencyId"),e.contextLevel=a.CoreNavigator.getRouteParam("contextLevel"),e.contextInstanceId=a.CoreNavigator.getRouteNumberParam("contextInstanceId")}catch(e){return d.CoreAlerts.showError(e),a.CoreNavigator.back(),void 0}try{yield e.fetchCompetency()}finally{e.competencyLoaded=!0}}))()}fetchCompetency(){var e=this;return(0,o.A)((function*(){try{const n=yield c.AddonCompetency.getCompetencySummary(e.competencyId);var t;if(!e.contextLevel||void 0===e.contextInstanceId)e.contextLevel="user",e.contextInstanceId=null===(t=n.usercompetency)||void 0===t?void 0:t.userid;e.competency=n.competency,e.logView()}catch(e){d.CoreAlerts.showError(e,{default:"Error getting competency summary data."})}}))()}refreshCompetency(e){c.AddonCompetency.invalidateCompetencySummary(this.competencyId).finally((()=>{this.fetchCompetency().finally((()=>{null==e||e.complete()}))}))}openCompetencySummary(e){a.CoreNavigator.navigate(`../../${e}/${r.kO}`,{params:{contextLevel:this.contextLevel,contextInstanceId:this.contextInstanceId}})}}return(e=AddonCompetencyCompetencySummaryPage).ɵfac=function AddonCompetencyCompetencySummaryPage_Factory(t){return new(t||e)},e.ɵcmp=s.VBU({type:e,selectors:[["page-addon-competency-competency-summary"]],standalone:!0,features:[s.aNF],decls:13,vars:10,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[1,"limited-width"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],[3,"text","contextLevel","contextInstanceId"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],[1,"item-heading"],[4,"ngFor","ngForOf"],[1,"as-link",3,"click"]],template:function AddonCompetencyCompetencySummaryPage_Template(e,t){1&e&&(s.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),s.nrm(3,"ion-back-button",1),s.nI1(4,"translate"),s.k0s(),s.j41(5,"ion-title"),s.DNE(6,AddonCompetencyCompetencySummaryPage_h1_6_Template,4,4,"h1",2),s.k0s()()(),s.j41(7,"ion-content",3)(8,"ion-refresher",4),s.bIt("ionRefresh",(function AddonCompetencyCompetencySummaryPage_Template_ion_refresher_ionRefresh_8_listener(e){return t.refreshCompetency(e.target)})),s.nrm(9,"ion-refresher-content",5),s.nI1(10,"translate"),s.k0s(),s.j41(11,"core-loading",6),s.DNE(12,AddonCompetencyCompetencySummaryPage_ion_card_12_Template,10,8,"ion-card",2),s.k0s()()),2&e&&(s.R7$(3),s.Y8G("text",s.bMT(4,6,"core.back")),s.R7$(3),s.Y8G("ngIf",t.competency),s.R7$(2),s.Y8G("disabled",!t.competencyLoaded),s.R7$(),s.FS9("pullingText",s.bMT(10,8,"core.pulltorefresh")),s.R7$(2),s.Y8G("hideUntil",t.competencyLoaded),s.R7$(),s.Y8G("ngIf",t.competency))},dependencies:[y.n,l.Sq,l.bT,u.QW,u.b_,u.W9,u.eU,u.uz,u.he,u.To,u.Ki,u.BC,u.ai,u.el,_.R,g.B,C.i,I.D9],encapsulation:2}),AddonCompetencyCompetencySummaryPage})()}}]);