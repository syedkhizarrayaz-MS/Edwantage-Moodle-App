"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[42546,69006],{42546:(n,e,o)=>{o.r(e),o.d(e,{AddonModSurveyIndexComponent:()=>O});var t=o(10467),r=o(75629),i=o(69006),d=o(51024),a=o(52749),s=o(75383),c=o(79555),u=o(49882),_=o(72829),l=o(54438);let m=(()=>{var n;class AddonModSurveyHelperProvider{commaStringToArray(n){return"string"==typeof n?n.length>0?n.split(","):[]:n}getParentQuestions(n){const e={};return n.forEach((n=>{0===n.parent&&(e[n.id]=n)})),e}formatQuestions(n){const e=c.HT.instant("addon.mod_survey.ipreferthat"),o=c.HT.instant("addon.mod_survey.ifoundthat"),t=[],r=this.getParentQuestions(n);let i=1;return n.forEach((n=>{const d=Object.assign({},n),a=r[d.parent];if(d.multiArray=this.commaStringToArray(d.multi),d.optionsArray=this.commaStringToArray(d.options),a){if(d.required=!0,1!==a.type&&2!==a.type){const n=Object.assign({},d);return d.text=`${e} ${d.text}`,d.name=`qP${d.id}`,d.num=i++,t.push(d),n.text=`${o} ${n.text}`,n.name=`q${d.id}`,n.num=i++,t.push(n),void 0}d.name=`q${2==a.type?"P":""}${d.id}`,d.num=i++}else d.multiArray&&0===d.multiArray.length&&(d.name=`q${d.id}`,d.num=i++);t.push(d)})),t}}return(n=AddonModSurveyHelperProvider).ɵfac=function AddonModSurveyHelperProvider_Factory(e){return new(e||n)},n.ɵprov=l.jDH({token:n,factory:n.ɵfac,providedIn:"root"}),AddonModSurveyHelperProvider})();const p=(0,c.Qd)(m);var g=o(74339),v=o(51877),f=o(55554),y=o(67039),h=o(33014),C=o(25572),I=o(30864),M=o(6736),A=o(86654),x=o(2910),S=o(60177),T=o(89417),b=o(69502),w=o(17388),R=o(64422),$=o(17778),k=o(13988),G=o(86198),F=o(23007),q=o(66731),E=o(43570),j=o(73955);const _c0=n=>({header:n});function AddonModSurveyIndexComponent_Conditional_1_Template(n,e){if(1&n){const n=l.RV6();l.j41(0,"ion-button",7),l.nI1(1,"translate"),l.bIt("click",(function AddonModSurveyIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){l.eBV(n);const e=l.XpG();return l.Njj(e.openModuleSummary())})),l.nrm(2,"ion-icon",8),l.k0s()}2&n&&l.Y8G("ariaLabel",l.bMT(1,1,"core.info"))}function AddonModSurveyIndexComponent_Conditional_2_Template(n,e){if(1&n){const n=l.RV6();l.j41(0,"core-context-menu")(1,"core-context-menu-item",9),l.nI1(2,"translate"),l.bIt("action",(function AddonModSurveyIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){l.eBV(n);const e=l.XpG();return l.Njj(e.openModuleSummary())})),l.k0s()()}2&n&&(l.R7$(),l.Y8G("priority",5e3)("content",l.bMT(2,2,"core.info")))}function AddonModSurveyIndexComponent_ion_card_5_Template(n,e){1&n&&(l.j41(0,"ion-card",10)(1,"ion-item"),l.nrm(2,"ion-icon",11),l.j41(3,"ion-label"),l.EFF(4),l.nI1(5,"translate"),l.k0s()()()),2&n&&(l.R7$(4),l.SpI(" ",l.bMT(5,1,"addon.mod_survey.surveycompletednograph")," "))}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_1_ion_col_7_Template(n,e){if(1&n&&(l.j41(0,"ion-col",19),l.EFF(1),l.k0s()),2&n){const n=e.$implicit;l.R7$(),l.SpI(" ",n," ")}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_1_Template(n,e){if(1&n&&(l.qex(0),l.j41(1,"h3",14),l.EFF(2),l.k0s(),l.j41(3,"ion-row",15)(4,"ion-col",16),l.EFF(5),l.nI1(6,"translate"),l.k0s(),l.DNE(7,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_1_ion_col_7_Template,2,1,"ion-col",17),l.k0s(),l.j41(8,"ion-item",18)(9,"ion-label")(10,"p"),l.EFF(11),l.k0s()()(),l.bVm()),2&n){const n=l.XpG(),e=n.$implicit,o=n.index,t=n.even;l.R7$(),l.AVh("ion-padding-top",1===o),l.R7$(),l.JRh(e.text),l.R7$(3),l.JRh(l.bMT(6,8,"addon.mod_survey.responses")),l.R7$(2),l.Y8G("ngForOf",e.optionsArray),l.R7$(),l.AVh("even",t),l.R7$(3),l.JRh(e.intro)}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_ion_col_8_Template(n,e){if(1&n&&(l.j41(0,"ion-col",29),l.nrm(1,"ion-radio",30),l.k0s()),2&n){const n=e.$implicit,o=e.index,t=l.XpG(2).$implicit;l.R7$(),l.Y8G("value",o+1),l.BMQ("aria-label",t.num+". "+t.text+": "+n)}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_ion_select_option_15_Template(n,e){if(1&n&&(l.j41(0,"ion-select-option",30),l.EFF(1),l.k0s()),2&n){const n=e.$implicit;l.Y8G("value",e.index+1),l.R7$(),l.SpI(" ",n," ")}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_Template(n,e){if(1&n){const n=l.RV6();l.qex(0),l.j41(1,"ion-radio-group",20),l.mxI("ngModelChange",(function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_Template_ion_radio_group_ngModelChange_1_listener(e){l.eBV(n);const o=l.XpG().$implicit,t=l.XpG(2);return l.DH7(t.answers[o.name],e)||(t.answers[o.name]=e),l.Njj(e)})),l.j41(2,"ion-row",21)(3,"ion-col",22)(4,"span",23)(5,"strong"),l.EFF(6),l.k0s(),l.EFF(7),l.k0s()(),l.DNE(8,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_ion_col_8_Template,2,2,"ion-col",24),l.j41(9,"ion-col",25)(10,"ion-select",26),l.nI1(11,"translate"),l.mxI("ngModelChange",(function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_Template_ion_select_ngModelChange_10_listener(e){l.eBV(n);const o=l.XpG().$implicit,t=l.XpG(2);return l.DH7(t.answers[o.name],e)||(t.answers[o.name]=e),l.Njj(e)})),l.j41(12,"ion-select-option",27),l.EFF(13),l.nI1(14,"translate"),l.k0s(),l.DNE(15,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_ion_select_option_15_Template,2,2,"ion-select-option",28),l.k0s()()()(),l.bVm()}if(2&n){const n=l.XpG(),e=n.$implicit,o=n.even,t=l.XpG(2);l.R7$(),l.R50("ngModel",t.answers[e.name]),l.Y8G("required",!!e.required)("name",e.name),l.R7$(),l.AVh("even",o),l.R7$(2),l.Mz_("id","addon-mod_survey-",e.name,""),l.Y8G("core-mark-required",e.required),l.R7$(2),l.SpI("",e.num,"."),l.R7$(),l.SpI(" ",e.text," "),l.R7$(),l.Y8G("ngForOf",e.optionsArray),l.R7$(2),l.R50("ngModel",t.answers[e.name]),l.Y8G("required",!!e.required)("name",e.name)("cancelText",l.bMT(11,19,"core.cancel"))("interfaceOptions",l.eq3(23,_c0,e.text)),l.BMQ("aria-labelledby","addon-mod_survey-"+e.name),l.R7$(3),l.JRh(l.bMT(14,21,"core.choose")),l.R7$(2),l.Y8G("ngForOf",e.optionsArray)}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_row_1_ion_select_option_12_Template(n,e){if(1&n&&(l.j41(0,"ion-select-option",30),l.EFF(1),l.k0s()),2&n){const n=e.$implicit;l.Y8G("value",e.index+1),l.R7$(),l.SpI(" ",n," ")}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_row_1_Template(n,e){if(1&n){const n=l.RV6();l.j41(0,"ion-row",33)(1,"ion-col",22)(2,"span",23)(3,"strong"),l.EFF(4),l.k0s(),l.EFF(5),l.k0s()(),l.j41(6,"ion-col",34)(7,"ion-select",26),l.nI1(8,"translate"),l.mxI("ngModelChange",(function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_row_1_Template_ion_select_ngModelChange_7_listener(e){l.eBV(n);const o=l.XpG(2).$implicit,t=l.XpG(2);return l.DH7(t.answers[o.name],e)||(t.answers[o.name]=e),l.Njj(e)})),l.j41(9,"ion-select-option",35),l.EFF(10),l.nI1(11,"translate"),l.k0s(),l.DNE(12,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_row_1_ion_select_option_12_Template,2,2,"ion-select-option",28),l.k0s()()()}if(2&n){const n=l.XpG(2),e=n.$implicit,o=n.even,t=l.XpG(2);l.AVh("even",o),l.R7$(2),l.Mz_("id","addon-mod_survey-",e.name,""),l.Y8G("core-mark-required",e.required),l.R7$(2),l.SpI("",e.num,"."),l.R7$(),l.SpI(" ",e.text," "),l.R7$(2),l.R50("ngModel",t.answers[e.name]),l.Y8G("required",!!e.required)("name",e.name)("cancelText",l.bMT(8,17,"core.cancel"))("interfaceOptions",l.eq3(21,_c0,e.text)),l.BMQ("aria-labelledby","addon-mod_survey-"+e.name),l.R7$(2),l.Y8G("value",e.required?"-1":"0")("disabled",e.required),l.R7$(),l.SpI(" ",l.bMT(11,19,"core.choose")," "),l.R7$(2),l.Y8G("ngForOf",e.optionsArray)}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_item_2_Template(n,e){if(1&n){const n=l.RV6();l.j41(0,"ion-item",36)(1,"ion-textarea",37),l.mxI("ngModelChange",(function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_item_2_Template_ion_textarea_ngModelChange_1_listener(e){l.eBV(n);const o=l.XpG(2).$implicit,t=l.XpG(2);return l.DH7(t.answers[o.name],e)||(t.answers[o.name]=e),l.Njj(e)})),l.j41(2,"p",38)(3,"strong"),l.EFF(4),l.k0s(),l.EFF(5),l.k0s()()()}if(2&n){const n=l.XpG(2),e=n.$implicit,o=n.even,t=l.XpG(2);l.AVh("even",o),l.R7$(),l.R50("ngModel",t.answers[e.name]),l.Y8G("name",e.name)("required",!!e.required),l.R7$(),l.Y8G("core-mark-required",e.required),l.R7$(2),l.SpI("",e.num,"."),l.R7$(),l.SpI(" ",e.text," ")}}function AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_Template(n,e){if(1&n&&(l.qex(0),l.DNE(1,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_row_1_Template,13,23,"ion-row",31)(2,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_ion_item_2_Template,6,8,"ion-item",32),l.bVm()),2&n){const n=l.XpG().$implicit;l.R7$(),l.Y8G("ngIf",n.type>0),l.R7$(),l.Y8G("ngIf",0===n.type)}}function AddonModSurveyIndexComponent_form_6_ng_container_2_Template(n,e){if(1&n&&(l.qex(0,12),l.DNE(1,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_1_Template,12,10,"ng-container",5)(2,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_2_Template,16,25,"ng-container",5)(3,AddonModSurveyIndexComponent_form_6_ng_container_2_ng_container_3_Template,3,2,"ng-container",5),l.bVm()),2&n){const n=e.$implicit;l.R7$(),l.Y8G("ngIf",null==n.multiArray?null:n.multiArray.length),l.R7$(),l.Y8G("ngIf",0!==n.parent),l.R7$(),l.Y8G("ngIf",(!n.multiArray||0===n.multiArray.length)&&0===n.parent)}}function AddonModSurveyIndexComponent_form_6_Template(n,e){if(1&n&&(l.j41(0,"form")(1,"ion-grid",12),l.DNE(2,AddonModSurveyIndexComponent_form_6_ng_container_2_Template,4,3,"ng-container",13),l.k0s()()),2&n){const n=l.XpG();l.R7$(2),l.Y8G("ngForOf",n.questions)}}function AddonModSurveyIndexComponent_div_7_div_1_ion_button_1_Template(n,e){if(1&n&&(l.j41(0,"ion-button",45),l.EFF(1),l.nI1(2,"translate"),l.nrm(3,"ion-icon",46),l.k0s()),2&n){const n=l.XpG(3);l.Y8G("href",n.module.url),l.R7$(),l.SpI(" ",l.bMT(2,2,"addon.mod_survey.results")," ")}}function AddonModSurveyIndexComponent_div_7_div_1_ion_button_2_Template(n,e){if(1&n){const n=l.RV6();l.j41(0,"ion-button",47),l.bIt("click",(function AddonModSurveyIndexComponent_div_7_div_1_ion_button_2_Template_ion_button_click_0_listener(){l.eBV(n);const e=l.XpG(3);return l.Njj(e.submit())})),l.EFF(1),l.nI1(2,"translate"),l.k0s()}if(2&n){const n=l.XpG(3);l.Y8G("disabled",!n.isValidResponse()),l.R7$(),l.SpI(" ",l.bMT(2,2,"core.submit")," ")}}function AddonModSurveyIndexComponent_div_7_div_1_Template(n,e){if(1&n&&(l.j41(0,"div",42),l.DNE(1,AddonModSurveyIndexComponent_div_7_div_1_ion_button_1_Template,4,4,"ion-button",43)(2,AddonModSurveyIndexComponent_div_7_div_1_ion_button_2_Template,3,4,"ion-button",44),l.k0s()),2&n){const n=l.XpG(2);l.R7$(),l.Y8G("ngIf",n.survey.surveydone),l.R7$(),l.Y8G("ngIf",!n.survey.surveydone&&!n.hasOffline&&n.questions&&n.questions.length)}}function AddonModSurveyIndexComponent_div_7_Template(n,e){if(1&n&&(l.j41(0,"div",39),l.DNE(1,AddonModSurveyIndexComponent_div_7_div_1_Template,3,2,"div",40),l.nrm(2,"core-course-module-navigation",41),l.k0s()),2&n){const n=l.XpG();l.R7$(),l.Y8G("ngIf",n.survey&&(n.survey.surveydone||!n.hasOffline&&n.questions&&n.questions.length)),l.R7$(),l.Y8G("courseId",n.courseId)("currentModuleId",n.module.id)}}let O=(()=>{var n;class AddonModSurveyIndexComponent extends i.y{constructor(n,e){super("AddonModSurveyIndexComponent",n,e),this.content=n,this.component=y.Rw,this.pluginName="survey",this.questions=[],this.answers={},this.syncEventName=y.A9}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,t.A)((function*(){_superprop_getNgOnInit().call(n),n.currentUserId=a.CoreSites.getCurrentSiteUserId(),yield n.loadContent(!1,!0)}))()}invalidateContent(){var n=this;return(0,t.A)((function*(){const e=[];e.push(_.h.invalidateSurveyData(n.courseId)),n.survey&&e.push(_.h.invalidateQuestions(n.survey.id)),yield Promise.all(e)}))()}isRefreshSyncNeeded(n){return!(!this.survey||n.surveyId!=this.survey.id||n.userId!=this.currentUserId)}fetchContent(n,e=!1,o=!1){var r=this;return(0,t.A)((function*(){if(r.survey=yield _.h.getSurvey(r.courseId,r.module.id),r.description=r.survey.intro,r.dataRetrieved.emit(r.survey),e){(yield r.syncActivity(o))&&(r.survey=yield _.h.getSurvey(r.courseId,r.module.id))}r.hasOffline=!r.survey.surveydone&&(yield g.M.hasAnswers(r.survey.id)),r.survey.surveydone||r.hasOffline||(yield r.fetchQuestions(r.survey.id))}))()}fetchQuestions(n){var e=this;return(0,t.A)((function*(){const o=yield _.h.getQuestions(n,{cmId:e.module.id});e.questions=p.formatQuestions(o),e.questions.forEach((n=>{if(n.name){e.answers[n.name]=n.required?"-1":n.multiArray&&0===n.multiArray.length&&0===n.type?"":"0"}var o;n.multiArray&&!n.multiArray.length&&0===n.parent&&n.type>0&&(n.optionsArray=null===(o=n.optionsArray)||void 0===o?void 0:o.map((n=>s.Ni.cleanTags(n))))}))}))()}logActivity(){var n=this;return(0,t.A)((function*(){n.survey&&(yield f.g.ignoreErrors(_.h.logView(n.survey.id)),n.analyticsLogEvent("mod_survey_view_survey"))}))()}isValidResponse(){return!this.questions.some((n=>n.required&&n.name&&(0===n.type?""==this.answers[n.name]:-1===parseInt(this.answers[n.name],10))))}submit(){var n=this;return(0,t.A)((function*(){if(!n.survey)return;let e;try{yield C.CoreAlerts.confirm(c.HT.instant("core.areyousure"));const o=[];e=yield h.CoreLoadings.show("core.sending",!0);for(const e in n.answers)o.push({key:e,value:n.answers[e]});const t=yield _.h.submitAnswers(n.survey.id,n.survey.name,n.courseId,o);if(u.z.trigger(u.z.ACTIVITY_DATA_SENT,{module:n.moduleName}),t&&n.isPrefetched())try{(yield v.o.prefetchModuleAfterUpdate(n.module,n.courseId))?n.showLoadingAndFetch(!1,!1):n.showLoadingAndRefresh(!1)}catch{n.showLoadingAndRefresh(!1)}else n.showLoadingAndRefresh(!1)}catch(n){C.CoreAlerts.showError(n,{default:c.HT.instant("addon.mod_survey.cannotsubmitsurvey")})}finally{var o;null===(o=e)||void 0===o||o.dismiss()}}))()}sync(){var n=this;return(0,t.A)((function*(){if(!n.survey)throw new r.CoreError("Cannot sync without a survey.");return v.o.syncSurvey(n.survey.id,n.currentUserId)}))()}}return(n=AddonModSurveyIndexComponent).ɵfac=function AddonModSurveyIndexComponent_Factory(e){return new(e||n)(l.rXU(x.W9),l.rXU(d.A,8))},n.ɵcmp=l.VBU({type:n,selectors:[["addon-mod-survey-index"]],standalone:!0,features:[l.Vt3,l.aNF],decls:8,vars:11,consts:[["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],["class","core-success-card",4,"ngIf"],[4,"ngIf"],["collapsible-footer","","slot","fixed",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],[1,"core-success-card"],["name","fas-check","slot","start","aria-hidden","true"],[1,"ion-no-padding","ion-text-wrap"],["class","ion-no-padding ion-text-wrap",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal"],[1,"ion-align-items-center","ion-hide-md-down","ion-padding"],["size","7",1,"ion-padding"],["size","1","class","ion-text-center option-name",4,"ngFor","ngForOf"],["lines","full",1,"ion-text-wrap","addon-mod_survey-question"],["size","1",1,"ion-text-center","option-name"],[3,"ngModelChange","ngModel","required","name"],[1,"ion-align-items-center","ion-padding-horizontal"],["size","7"],[3,"id","core-mark-required"],["class","ion-hide-md-down ion-text-center","size","1",4,"ngFor","ngForOf"],["size","5",1,"ion-hide-md-up"],["interface","action-sheet",1,"ion-padding",3,"ngModelChange","ngModel","required","name","cancelText","interfaceOptions"],["value","-1","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["size","1",1,"ion-hide-md-down","ion-text-center"],[3,"value"],["class","ion-align-items-center ion-padding",3,"even",4,"ngIf"],["class","ion-text-wrap",3,"even",4,"ngIf"],[1,"ion-align-items-center","ion-padding"],["size","5"],["selected","",3,"value","disabled"],[1,"ion-text-wrap"],["labelPlacement","floating",3,"ngModelChange","ngModel","name","required"],["slot","label",3,"core-mark-required"],["collapsible-footer","","slot","fixed"],["class","list-item-limited-width",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width"],["class","ion-text-wrap ion-margin","expand","block","core-link","",3,"href",4,"ngIf"],["expand","block","class","ion-text-wrap ion-margin",3,"disabled","click",4,"ngIf"],["expand","block","core-link","",1,"ion-text-wrap","ion-margin",3,"href"],["name","fas-up-right-from-square","slot","end","aria-hidden","true"],["expand","block",1,"ion-text-wrap","ion-margin",3,"click","disabled"]],template:function AddonModSurveyIndexComponent_Template(n,e){1&n&&(l.j41(0,"core-navbar-buttons",0),l.DNE(1,AddonModSurveyIndexComponent_Conditional_1_Template,3,3,"ion-button",1)(2,AddonModSurveyIndexComponent_Conditional_2_Template,3,4),l.k0s(),l.j41(3,"core-loading",2)(4,"core-course-module-info",3),l.bIt("completionChanged",(function AddonModSurveyIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return e.onCompletionChange()})),l.k0s(),l.DNE(5,AddonModSurveyIndexComponent_ion_card_5_Template,6,3,"ion-card",4)(6,AddonModSurveyIndexComponent_form_6_Template,3,1,"form",5)(7,AddonModSurveyIndexComponent_div_7_Template,3,3,"div",6),l.k0s()),2&n&&(l.R7$(),l.vxM(1,e.courseContentsPage?2:1),l.R7$(2),l.Y8G("hideUntil",!e.showLoading),l.R7$(),l.Y8G("module",e.module)("description",e.survey&&!e.survey.surveydone&&!e.hasOffline&&e.description)("component",e.component)("componentId",e.componentId)("courseId",e.courseId)("hasDataToSync",e.hasOffline),l.R7$(),l.Y8G("ngIf",e.survey&&e.survey.surveydone),l.R7$(),l.Y8G("ngIf",e.survey&&!e.survey.surveydone&&!e.hasOffline&&e.questions&&e.questions.length),l.R7$(),l.Y8G("ngIf",!e.showLoading))},dependencies:[A.n,S.Sq,S.bT,T.qT,T.BC,T.cb,T.YS,T.vS,T.cV,x.Jm,x.b_,x.hU,x.lO,x.iq,x.uz,x.he,x.KO,x.f0,x.ln,x.Nm,x.Ip,x.nc,x.Je,x.Gw,b.B,w.Q,R.R,$.j,k.c,G.t,F.j,q.i,E.T,j.D9,M.CoreCourseModuleInfoComponent,I.CoreCourseModuleNavigationComponent],styles:["[_nghost-%COMP%]{--grid-background: var(--white);--even-background: var(--gray-200)}[_nghost-%COMP%]   .option-name[_ngcontent-%COMP%]{font-size:var(--text-size)}[_nghost-%COMP%]   .addon-mod_survey-question[_ngcontent-%COMP%]{border-top:1px solid var(--stroke)}[_nghost-%COMP%]   ion-row[_ngcontent-%COMP%]{background-color:var(--grid-background)}[_nghost-%COMP%]   .even[_ngcontent-%COMP%]{background-color:var(--even-background)}[_nghost-%COMP%]   ion-radio[_ngcontent-%COMP%]{height:var(--a11y-sizing-minTargetSize);width:var(--a11y-sizing-minTargetSize);padding:12px}:root.dark[_nghost-%COMP%], :root.dark   [_nghost-%COMP%]{--grid-background: var(--gray-900);--even-background: var(--medium)}"]}),AddonModSurveyIndexComponent})()},69006:(n,e,o)=>{o.d(e,{y:()=>g});var t=o(10467),r=o(23063),i=o(49882),d=o(44682),a=o(55554),s=o(51024),c=o(52749),u=o(25572),_=o(79555),l=o(95384),m=o(54438),p=o(2910);let g=(()=>{var n;class CoreCourseModuleMainActivityComponent extends r.x{constructor(n="CoreCourseModuleMainResourceComponent",e,o){super(n,o),this.content=e,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,t.A)((function*(){yield _superprop_getNgOnInit().call(n),n.hasOffline=!1,n.moduleName=l.CoreCourseModuleHelper.translateModuleName(n.pluginName||n.moduleName||""),n.syncEventName&&(n.syncObserver=i.z.on(n.syncEventName,(e=>{n.autoSyncEventReceived(e)}),n.siteId))}))()}isRefreshSyncNeeded(n){return!1}autoSyncEventReceived(n){this.isRefreshSyncNeeded(n)&&this.showLoadingAndRefresh(!1)}refreshContent(n=!1,e=!1){var o=this;return(0,t.A)((function*(){o.module&&(yield a.g.ignoreErrors(Promise.all([o.invalidateContent(),o.showCompletion?d.CoreCourse.invalidateModule(o.module.id):void 0])),yield o.loadContent(!0,n,e))}))()}showLoadingAndFetch(n=!1,e=!1){var o=this;return(0,t.A)((function*(){var t;o.showLoading=!0,null===(t=o.content)||void 0===t||t.scrollToTop(),yield o.loadContent(!1,n,e)}))()}showLoadingAndRefresh(n=!1,e=!1){var o;return this.showLoading=!0,null===(o=this.content)||void 0===o||o.scrollToTop(),this.refreshContent(n,e)}fetchContent(n=!1,e=!1,o=!1){return(0,t.A)((function*(){}))()}loadContent(n,e=!1,o=!1){var r=this;return(0,t.A)((function*(){if(r.module)try{n&&r.showCompletion&&(yield a.g.ignoreErrors(r.fetchModule())),yield r.fetchContent(n,e,o),r.finishSuccessfulFetch()}catch(o){var t;if(!n&&(null===(t=c.CoreSites.getCurrentSite())||void 0===t||!t.isOfflineDisabled())&&l.CoreCourseModuleHelper.isNotFoundError(o))return yield r.refreshContent(e);u.CoreAlerts.showError(o,{default:_.HT.instant(r.fetchContentDefaultError)})}finally{r.showLoading=!1}}))()}sync(){return(0,t.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(n){return n.updated}syncActivity(n=!1){var e=this;return(0,t.A)((function*(){try{const n=yield e.sync();return n.warnings.length&&u.CoreAlerts.show({message:n.warnings[0]}),e.hasSyncSucceed(n)}catch(e){return n&&u.CoreAlerts.showError(e,{default:_.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var n;super.ngOnDestroy(),null===(n=this.syncObserver)||void 0===n||n.off()}}return(n=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(e){return new(e||n)(m.rXU("",8),m.rXU(p.W9),m.rXU(s.A))},n.ɵcmp=m.VBU({type:n,selectors:[["ng-component"]],inputs:{group:"group"},features:[m.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(n,e){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);