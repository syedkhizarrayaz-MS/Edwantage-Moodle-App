"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[84078,69006],{84078:(i,e,n)=>{n.r(e),n.d(e,{AddonModWikiIndexComponent:()=>X});var t=n(10467),o=n(75629),r=n(69006),d=n(51024),a=n(44682),s=n(41094),u=n(98870),c=n(94455),l=n(15221),g=n(15324),p=n(52749),k=n(55554),m=n(79555),w=n(49882),h=n(8756),_=n(91768),f=n(67981),b=n(59379),I=n(22357),v=n(51069),C=n(93589),S=n(24813),y=n(25572),P=n(25367),M=n(86654),T=n(30864),A=n(6736),x=n(54438),W=n(2910),O=n(60177),N=n(69502),E=n(17388),D=n(16986),G=n(64422),$=n(13988),R=n(19858),j=n(86198),L=n(58197),V=n(66731),Y=n(43570),F=n(73955);const _c0=i=>({$a:i}),_c1=i=>({"addon-mod_wiki-noedit":i});function AddonModWikiIndexComponent_ion_button_1_ion_icon_2_Template(i,e){1&i&&x.nrm(0,"ion-icon",15)}function AddonModWikiIndexComponent_ion_button_1_ion_icon_3_Template(i,e){1&i&&x.nrm(0,"ion-icon",16)}function AddonModWikiIndexComponent_ion_button_1_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"ion-button",12),x.nI1(1,"translate"),x.bIt("click",(function AddonModWikiIndexComponent_ion_button_1_Template_ion_button_click_0_listener(e){x.eBV(i);const n=x.XpG();return x.Njj(n.showSubwikiPicker(e))})),x.DNE(2,AddonModWikiIndexComponent_ion_button_1_ion_icon_2_Template,1,0,"ion-icon",13)(3,AddonModWikiIndexComponent_ion_button_1_ion_icon_3_Template,1,0,"ion-icon",14),x.k0s()}if(2&i){const i=x.XpG();x.Y8G("ariaLabel",x.bMT(1,3,"addon.mod_wiki.subwiki")),x.R7$(2),x.Y8G("ngIf",!i.groupWiki),x.R7$(),x.Y8G("ngIf",i.groupWiki)}}function AddonModWikiIndexComponent_ion_button_2_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"ion-button",12),x.nI1(1,"translate"),x.bIt("click",(function AddonModWikiIndexComponent_ion_button_2_Template_ion_button_click_0_listener(){x.eBV(i);const e=x.XpG();return x.Njj(e.openMap())})),x.nrm(2,"ion-icon",17),x.k0s()}2&i&&x.Y8G("ariaLabel",x.bMT(1,1,"addon.mod_wiki.map"))}function AddonModWikiIndexComponent_core_context_menu_item_4_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"core-context-menu-item",18),x.nI1(1,"translate"),x.bIt("action",(function AddonModWikiIndexComponent_core_context_menu_item_4_Template_core_context_menu_item_action_0_listener(){x.eBV(i);const e=x.XpG();return x.Njj(e.goToEditPage())})),x.k0s()}2&i&&x.Y8G("priority",590)("content",x.bMT(1,2,"core.edit"))}function AddonModWikiIndexComponent_core_context_menu_item_5_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"core-context-menu-item",19),x.nI1(1,"translate"),x.bIt("action",(function AddonModWikiIndexComponent_core_context_menu_item_5_Template_core_context_menu_item_action_0_listener(){x.eBV(i);const e=x.XpG();return x.Njj(e.goToNewPage())})),x.k0s()}2&i&&x.Y8G("priority",580)("content",x.bMT(1,2,"addon.mod_wiki.createpage"))}function AddonModWikiIndexComponent_Conditional_6_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"core-context-menu-item",20),x.nI1(1,"translate"),x.bIt("action",(function AddonModWikiIndexComponent_Conditional_6_Template_core_context_menu_item_action_0_listener(){x.eBV(i);const e=x.XpG();return x.Njj(e.openModuleSummary())})),x.k0s()}2&i&&x.Y8G("priority",5e3)("content",x.bMT(1,2,"core.info"))}function AddonModWikiIndexComponent_Conditional_7_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"ion-button",21),x.nI1(1,"translate"),x.bIt("click",(function AddonModWikiIndexComponent_Conditional_7_Template_ion_button_click_0_listener(){x.eBV(i);const e=x.XpG();return x.Njj(e.openModuleSummary())})),x.nrm(2,"ion-icon",22),x.k0s()}2&i&&x.Y8G("ariaLabel",x.bMT(1,1,"core.info"))}function AddonModWikiIndexComponent_core_course_module_info_9_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"core-course-module-info",23),x.bIt("completionChanged",(function AddonModWikiIndexComponent_core_course_module_info_9_Template_core_course_module_info_completionChanged_0_listener(){x.eBV(i);const e=x.XpG();return x.Njj(e.onCompletionChange())})),x.k0s()}if(2&i){const i=x.XpG();x.Y8G("module",i.module)("description",i.description)("component",i.component)("componentId",i.componentId)("courseId",i.courseId)}}function AddonModWikiIndexComponent_div_10_ion_card_1_span_4_Template(i,e){if(1&i&&(x.j41(0,"span"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&i){const i=x.XpG(3);x.R7$(),x.JRh(x.i5U(2,1,"core.hasdatatosync",x.eq3(4,_c0,i.pageStr)))}}function AddonModWikiIndexComponent_div_10_ion_card_1_span_5_Template(i,e){if(1&i&&(x.j41(0,"span"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&i){const i=x.XpG(3);x.R7$(),x.JRh(x.i5U(2,1,"core.hasdatatosync",x.eq3(4,_c0,i.moduleName)))}}function AddonModWikiIndexComponent_div_10_ion_card_1_Template(i,e){if(1&i&&(x.j41(0,"ion-card",25)(1,"ion-item",26),x.nrm(2,"ion-icon",27),x.j41(3,"ion-label"),x.DNE(4,AddonModWikiIndexComponent_div_10_ion_card_1_span_4_Template,3,6,"span",8)(5,AddonModWikiIndexComponent_div_10_ion_card_1_span_5_Template,3,6,"span",8),x.k0s()()()),2&i){const i=x.XpG(2);x.R7$(4),x.Y8G("ngIf",i.pageIsOffline),x.R7$(),x.Y8G("ngIf",!i.pageIsOffline)}}function AddonModWikiIndexComponent_div_10_ion_card_2_Template(i,e){if(1&i&&(x.j41(0,"ion-card",25)(1,"ion-item"),x.nrm(2,"ion-icon",27),x.j41(3,"ion-label"),x.EFF(4),x.k0s()()()),2&i){const i=x.XpG(2);x.R7$(4),x.JRh(i.pageWarning)}}function AddonModWikiIndexComponent_div_10_Template(i,e){if(1&i&&(x.j41(0,"div"),x.DNE(1,AddonModWikiIndexComponent_div_10_ion_card_1_Template,6,2,"ion-card",24)(2,AddonModWikiIndexComponent_div_10_ion_card_2_Template,5,1,"ion-card",24),x.k0s()),2&i){const i=x.XpG();x.R7$(),x.Y8G("ngIf",i.pageIsOffline||i.hasOffline),x.R7$(),x.Y8G("ngIf",i.pageWarning)}}function AddonModWikiIndexComponent_div_11_h2_1_Template(i,e){if(1&i&&(x.j41(0,"h2"),x.nrm(1,"core-format-text",33),x.k0s()),2&i){const i=x.XpG(2);x.R7$(),x.Y8G("component",i.component)("componentId",i.componentId)("text",i.pageTitle)("contextInstanceId",i.module.id)("courseId",i.courseId)("sanitize",i.pageIsOffline)}}function AddonModWikiIndexComponent_div_11_core_format_text_3_Template(i,e){if(1&i&&x.nrm(0,"core-format-text",33),2&i){const i=x.XpG(2);x.Y8G("component",i.component)("componentId",i.componentId)("text",i.pageContent)("contextInstanceId",i.module.id)("courseId",i.courseId)("sanitize",i.pageIsOffline)}}function AddonModWikiIndexComponent_div_11_core_empty_box_4_Template(i,e){1&i&&(x.nrm(0,"core-empty-box",34),x.nI1(1,"translate")),2&i&&x.Y8G("message",x.bMT(1,1,"addon.mod_wiki.nocontent"))}function AddonModWikiIndexComponent_div_11_div_5_Template(i,e){if(1&i&&(x.j41(0,"div",35)(1,"strong"),x.EFF(2),x.nI1(3,"translate"),x.k0s(),x.nrm(4,"core-tag-list",36),x.k0s()),2&i){const i=x.XpG(2);x.R7$(2),x.SpI("",x.bMT(3,2,"core.tag.tags"),":"),x.R7$(2),x.Y8G("tags",i.tags)}}function AddonModWikiIndexComponent_div_11_Template(i,e){if(1&i&&(x.j41(0,"div",28),x.DNE(1,AddonModWikiIndexComponent_div_11_h2_1_Template,2,6,"h2",8),x.j41(2,"article",29),x.DNE(3,AddonModWikiIndexComponent_div_11_core_format_text_3_Template,1,6,"core-format-text",30)(4,AddonModWikiIndexComponent_div_11_core_empty_box_4_Template,2,3,"core-empty-box",31),x.k0s(),x.DNE(5,AddonModWikiIndexComponent_div_11_div_5_Template,5,4,"div",32),x.k0s()),2&i){const i=x.XpG();x.R7$(),x.Y8G("ngIf",i.pageTitle),x.R7$(),x.Y8G("ngClass",x.eq3(5,_c1,!i.canEdit)),x.R7$(),x.Y8G("ngIf",i.pageContent),x.R7$(),x.Y8G("ngIf",!i.pageContent),x.R7$(),x.Y8G("ngIf",i.tagsEnabled&&i.tags.length>0)}}function AddonModWikiIndexComponent_core_course_module_navigation_12_Template(i,e){if(1&i&&x.nrm(0,"core-course-module-navigation",37),2&i){const i=x.XpG();x.Y8G("hidden",i.showLoading)("courseId",i.courseId)("currentModuleId",i.module.id)}}function AddonModWikiIndexComponent_ion_fab_13_Template(i,e){if(1&i){const i=x.RV6();x.j41(0,"ion-fab",38)(1,"ion-fab-button",39),x.nI1(2,"translate"),x.bIt("click",(function AddonModWikiIndexComponent_ion_fab_13_Template_ion_fab_button_click_1_listener(){x.eBV(i);const e=x.XpG();return x.Njj(e.goToNewPage())})),x.nrm(3,"ion-icon",40),x.j41(4,"span",41),x.EFF(5),x.nI1(6,"translate"),x.k0s()()()}2&i&&(x.R7$(),x.BMQ("aria-label",x.bMT(2,2,"addon.mod_wiki.createpage")),x.R7$(4),x.JRh(x.bMT(6,4,"addon.mod_wiki.createpage")))}let X=(()=>{var i;class AddonModWikiIndexComponent extends r.y{constructor(i,e){super("AddonModLessonIndexComponent",i,e),this.content=i,this.component=v.dD,this.pluginName="wiki",this.groupWiki=!1,this.isOnline=!1,this.isMainPage=!1,this.canEdit=!1,this.pageStr="",this.loadedSubwikis=[],this.pageIsOffline=!1,this.tagsEnabled=!1,this.tags=[],this.subwikiData={subwikiSelected:0,userSelected:0,groupSelected:0,subwikis:[],count:0},this.syncEventName=v.mb,this.ignoreManualSyncEvent=!1,this.isOnline=c.WE.isOnline(),this.onlineSubscription=c.WE.onChange().subscribe((()=>{m.SK.run((()=>{this.isOnline=c.WE.isOnline()}))}))}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,i=this;return(0,t.A)((function*(){_superprop_getNgOnInit().call(i),i.pageStr=m.HT.instant("addon.mod_wiki.wikipage"),i.tagsEnabled=s.CoreTag.areTagsAvailableInSite(),i.currentUserId=p.CoreSites.getCurrentSiteUserId(),i.isMainPage=!i.pageId&&!i.pageTitle,i.currentPage=i.pageId,i.currentPath=g.CoreNavigator.getCurrentPath(),i.listenEvents();try{yield i.loadContent(!1,!0)}finally{"map"==i.action&&i.openMap()}}))()}listenEvents(){this.manualSyncObserver=w.z.on(v.$9,(i=>{if(i&&this.wiki&&i.wikiId==this.wiki.id){if(this.ignoreManualSyncEvent)return this.ignoreManualSyncEvent=!1,void 0;this.currentSubwiki&&this.checkPageCreatedOrDiscarded(i.subwikis[this.currentSubwiki.id]),this.pageWarning||this.showLoadingAndFetch(!1,!1)}}),this.siteId)}checkPageCreatedOrDiscarded(i){if(this.currentPage||!i)return;const e=i.created.find((i=>i.title==this.pageTitle));if(e)this.currentPage=e.pageId,this.pageIsOffline=!1;else{const e=i.discarded.find((i=>i.title==this.pageTitle));e&&(this.pageWarning=e.warning,this.pageContent="",this.pageIsOffline=!1,this.hasOffline=!1)}}fetchContent(i,e=!1,n=!1){var r=this;return(0,t.A)((function*(){try{if(r.wiki=yield f.N.getWiki(r.courseId,r.module.id),void 0===r.pageContent&&r.dataRetrieved.emit(r.wiki),f.N.wikiPageOpened(r.wiki.id,r.currentPath),e&&(yield k.g.ignoreErrors(r.syncActivity(n))),r.pageWarning)return;r.module.id||(r.module=yield a.CoreCourse.getModule(r.wiki.coursemodule,r.wiki.course,void 0,!0)),r.description=r.wiki.intro||r.module.description,r.componentId=r.module.id,yield r.fetchSubwikis(r.wiki.id);const i=f.N.getSubwikiList(r.wiki.id);if(i)r.subwikiData.count=i.count,r.setSelectedWiki(r.subwikiId,r.userId,r.groupId),r.isAnySubwikiSelected()||r.setSelectedWiki(i.subwikiSelected,i.userSelected,i.groupSelected),r.subwikiData.subwikis=i.subwikis;else{const i=yield l.CoreGroups.getActivityGroupInfo(r.wiki.coursemodule);if(i.separateGroups&&!i.groups.length)throw new o.CoreError(m.HT.instant("addon.mod_wiki.cannotviewpage"));yield r.createSubwikiList(i.groups)}if(!r.isAnySubwikiSelected()||r.subwikiData.count<=0)throw new o.CoreError(m.HT.instant("addon.mod_wiki.errornowikiavailable"));yield r.fetchWikiPage()}catch(i){if(r.pageWarning)return;throw i}}))()}fetchPageContents(i){var e=this;return(0,t.A)((function*(){if(i)return e.pageIsOffline=!1,f.N.getPageContents(i,{cmId:e.module.id});try{var n,o,r,d,a;const i=e.pageTitle||(null===(n=e.wiki)||void 0===n?void 0:n.firstpagetitle)||"",s=yield b.W.getNewPage(i,null===(o=e.currentSubwiki)||void 0===o?void 0:o.id,null===(r=e.currentSubwiki)||void 0===r?void 0:r.wikiid,null===(d=e.currentSubwiki)||void 0===d?void 0:d.userid,null===(a=e.currentSubwiki)||void 0===a?void 0:a.groupid);return e.pageIsOffline=!0,e.newPageObserver||(e.newPageObserver=w.z.on(v.PQ,function(){var n=(0,t.A)((function*(n){var t,o;n.subwikiId==(null===(t=e.currentSubwiki)||void 0===t?void 0:t.id)&&n.pageTitle==i&&(e.currentPage=n.pageId,null===(o=e.newPageObserver)||void 0===o||o.off(),e.newPageObserver=void 0,yield e.showLoadingAndFetch(!0,!1),e.currentPage&&e.logPageViewed(e.currentPage))}));return function(i){return n.apply(this,arguments)}}(),p.CoreSites.getCurrentSiteId())),s}catch{}}))()}fetchSubwikiPages(i){var e=this;return(0,t.A)((function*(){const n=i.id<=0?[]:yield f.N.getSubwikiPages(i.wikiid,{groupId:i.groupid,userId:i.userid,cmId:e.module.id});e.setCurrentPage(n);const t=yield b.W.getSubwikiNewPages(i.id,i.wikiid,i.userid,i.groupid);if(e.subwikiPages=f.N.sortPagesByTitle(n.concat(t)),!e.currentPage&&!e.pageTitle&&e.subwikiPages.length>0)throw new o.CoreError}))()}setCurrentPage(i){var e,n;if(this.currentPage)return;if(this.pageTitle){const e=i.find((i=>i.title===this.pageTitle));return e&&(this.currentPage=e.id),void 0}const t=i.find((i=>i.firstpage));this.currentPage=null==t?void 0:t.id,this.pageTitle=null!==(e=null==t?void 0:t.title)&&void 0!==e?e:null===(n=this.wiki)||void 0===n?void 0:n.firstpagetitle}fetchSubwikis(i){var e=this;return(0,t.A)((function*(){e.loadedSubwikis=yield f.N.getSubwikis(i,{cmId:e.module.id}),e.hasOffline=yield b.W.subwikisHaveOfflineData(e.loadedSubwikis)}))()}fetchWikiPage(){var i=this;return(0,t.A)((function*(){if(i.currentSubwiki=i.loadedSubwikis.find((e=>i.isSubwikiSelected(e))),!i.currentSubwiki)throw new o.CoreError;i.setSelectedWiki(i.currentSubwiki.id,i.currentSubwiki.userid,i.currentSubwiki.groupid),yield i.fetchSubwikiPages(i.currentSubwiki),i.canEdit=i.currentSubwiki.canedit;const e=yield i.fetchPageContents(i.currentPage);e&&(i.setSelectedWiki(e.subwikiid,e.userid,e.groupid),i.pageTitle=e.title,i.pageContent=i.replaceEditLinks(e.cachedcontent),i.canEdit=!!e.caneditpage,i.currentPageObj=e,i.tags="tags"in e&&e.tags||[])}))()}logActivity(){var i=this;return(0,t.A)((function*(){var e,n;if(!i.wiki)return;if(i.pageId)return i.checkCompletionAfterLog=!1,yield i.logPageViewed(i.pageId),void 0;if(yield f.N.logView(i.wiki.id),void 0===i.groupId&&void 0===i.userId)return i.analyticsLogEvent("mod_wiki_view_wiki",{name:null===(n=i.currentPageObj)||void 0===n?void 0:n.title}),void 0;const t=i.loadedSubwikis.some((i=>i.userid>0)),o=i.loadedSubwikis.some((i=>i.groupid>0));let r=`/mod/wiki/view.php?wid=${i.wiki.id}&title=${i.wiki.firstpagetitle}`;r+=t&&o?`&groupanduser=${i.groupId}-${i.userId}`:t?`&uid=${i.userId}`:`&group=${i.groupId}`,i.analyticsLogEvent("mod_wiki_view_wiki",{name:null===(e=i.currentPageObj)||void 0===e?void 0:e.title,data:{subwiki:i.subwikiId,userid:i.userId,groupid:i.groupId},url:r})}))()}logPageViewed(i){var e=this;return(0,t.A)((function*(){var n;e.wiki&&(yield k.g.ignoreErrors(f.N.logPageView(i,e.wiki.id)),e.analyticsLogEvent("mod_wiki_view_page",{name:null===(n=e.currentPageObj)||void 0===n?void 0:n.title,data:{pageid:e.pageId},url:`/mod/wiki/view.php?page=${e.pageId}`}))}))()}storeModuleViewed(){var _superprop_getStoreModuleViewed=()=>super.storeModuleViewed,i=this;return(0,t.A)((function*(){i.pageId||(yield _superprop_getStoreModuleViewed().call(i))}))()}getWikiHomeView(){if(this.wiki)return f.N.getFirstWikiPageOpened(this.wiki.id,this.currentPath)}goToCreateFirstPage(){var i,e,n,t,o;g.CoreNavigator.navigateToSitePath(`${v.Jb}/${this.courseId}/${this.module.id}/edit`,{params:{pageTitle:null!==(i=null===(e=this.wiki)||void 0===e?void 0:e.firstpagetitle)&&void 0!==i?i:"",wikiId:null===(n=this.currentSubwiki)||void 0===n?void 0:n.wikiid,userId:null===(t=this.currentSubwiki)||void 0===t?void 0:t.userid,groupId:null===(o=this.currentSubwiki)||void 0===o?void 0:o.groupid}})}goToEditPage(){if(this.canEdit)if(this.currentPageObj){const i={pageTitle:this.currentPageObj.title,subwikiId:this.currentPageObj.subwikiid};"id"in this.currentPageObj&&(i.pageId=this.currentPageObj.id),this.currentSubwiki&&(i.wikiId=this.currentSubwiki.wikiid,i.userId=this.currentSubwiki.userid,i.groupId=this.currentSubwiki.groupid),g.CoreNavigator.navigateToSitePath(`${v.Jb}/${this.courseId}/${this.module.id}/edit`,{params:i})}else this.currentSubwiki&&this.goToCreateFirstPage()}goToNewPage(){if(this.canEdit)if(this.currentPageObj){const i={subwikiId:this.currentPageObj.subwikiid};this.currentSubwiki&&(i.wikiId=this.currentSubwiki.wikiid,i.userId=this.currentSubwiki.userid,i.groupId=this.currentSubwiki.groupid),g.CoreNavigator.navigateToSitePath(`${v.Jb}/${this.courseId}/${this.module.id}/edit`,{params:i})}else this.currentSubwiki&&this.goToCreateFirstPage()}goToPage(i){var e=this;return(0,t.A)((function*(){if("id"in i){if(e.currentPage!=i.id){const n=yield e.fetchPageContents(i.id);e.openPageOrSubwiki({pageTitle:n.title,pageId:n.id,subwikiId:i.subwikiid})}}else!e.currentPage&&e.pageTitle&&i.title==e.pageTitle||e.openPageOrSubwiki({pageTitle:i.title,subwikiId:i.subwikiid})}))()}openPageOrSubwiki(i){var e=this;return(0,t.A)((function*(){const n=_.VV.hashAsciiStr(JSON.stringify({...i,timestamp:Date.now()}));g.CoreNavigator.navigateToSitePath(`${v.Jb}/${e.courseId}/${e.module.id}/page/${n}`,{params:{module:e.module,...i},animated:!i.replace,replace:i.replace})}))()}openMap(){var i=this;return(0,t.A)((function*(){const{AddonModWikiMapModalComponent:e}=yield n.e(66826).then(n.bind(n,66826)),t=yield C.I.openSideModal({component:e,componentProps:{pages:i.subwikiPages,homeView:i.getWikiHomeView(),moduleId:i.module.id,courseId:i.courseId,selectedId:i.currentPage,selectedTitle:i.currentPageObj&&i.currentPageObj.title,wiki:i.wiki}});t&&(t.home?g.CoreNavigator.navigateToSitePath(t.home,{animationDirection:"back"}):t.page&&i.goToPage(t.page))}))()}goToSubwiki(i,e,n){var t,o,r;i===(null===(t=this.currentSubwiki)||void 0===t?void 0:t.id)&&e===(null===(o=this.currentSubwiki)||void 0===o?void 0:o.userid)&&n===(null===(r=this.currentSubwiki)||void 0===r?void 0:r.groupid)||this.openPageOrSubwiki({subwikiId:i,userId:e,groupId:n,replace:!0})}isAnySubwikiSelected(){return 0!==this.subwikiData.subwikiSelected||this.subwikiData.userSelected>0||this.subwikiData.groupSelected>0}isSubwikiSelected(i){return i.id>0&&this.subwikiData.subwikiSelected>0?i.id==this.subwikiData.subwikiSelected:i.userid==this.subwikiData.userSelected&&i.groupid==this.subwikiData.groupSelected}replaceEditLinks(i){if((i=i.trim()).length>0){const e=h.$.concatenatePaths(p.CoreSites.getRequiredCurrentSite().getURL(),"/mod/wiki/edit.php");i=i.replace(/href="edit\.php/g,`href="${e}`)}return i}setSelectedWiki(i,e,n){this.subwikiData.subwikiSelected=null!=i?i:0,this.subwikiData.userSelected=b.W.convertToPositiveNumber(e),this.subwikiData.groupSelected=b.W.convertToPositiveNumber(n)}hasSyncSucceed(i){return!!i&&(i.updated&&this.wiki&&(this.ignoreManualSyncEvent=!0,w.z.trigger(v.$9,{...i,wikiId:this.wiki.id})),this.currentSubwiki&&this.checkPageCreatedOrDiscarded(i.subwikis[this.currentSubwiki.id]),i.updated)}ionViewDidEnter(){super.ionViewDidEnter();const i=f.N.consumeEditedPageData();if(!i)return;if(this.pageId&&i.pageId===this.pageId)return this.showLoadingAndRefresh(!0,!1),void 0;if(this.currentSubwiki&&(this.currentSubwiki.id>0&&this.currentSubwiki.id===i.subwikiId||this.currentSubwiki.userid===i.userId&&this.currentSubwiki.groupid===i.groupId)&&i.pageTitle===this.pageTitle)return this.showLoadingAndRefresh(!0,!1),void 0;this.openPageOrSubwiki({pageId:i.pageId,pageTitle:i.pageTitle,subwikiId:i.subwikiId,userId:i.wikiId,groupId:i.groupId}),!i.pageId||this.pageContent&&-1==this.pageContent.indexOf("/mod/wiki/create.php")||this.showLoadingAndRefresh(!0,!1)}invalidateContent(){var i=this;return(0,t.A)((function*(){const e=[];e.push(f.N.invalidateWikiData(i.courseId)),i.wiki&&(e.push(f.N.invalidateSubwikis(i.wiki.id)),e.push(l.CoreGroups.invalidateActivityAllowedGroups(i.wiki.coursemodule)),e.push(l.CoreGroups.invalidateActivityGroupMode(i.wiki.coursemodule))),i.currentSubwiki&&(e.push(f.N.invalidateSubwikiPages(i.currentSubwiki.wikiid)),e.push(f.N.invalidateSubwikiFiles(i.currentSubwiki.wikiid))),i.currentPage&&e.push(f.N.invalidatePage(i.currentPage)),yield Promise.all(e)}))()}isRefreshSyncNeeded(i){return this.currentSubwiki&&i.subwikiId==this.currentSubwiki.id&&i.wikiId==this.currentSubwiki.wikiid&&i.userId==this.currentSubwiki.userid&&i.groupId==this.currentSubwiki.groupid&&(this.isCurrentView&&i.warnings&&i.warnings.length&&y.CoreAlerts.show({message:i.warnings[0]}),this.checkPageCreatedOrDiscarded(i)),!this.pageWarning}showSubwikiPicker(i){var e=this;return(0,t.A)((function*(){const{AddonModWikiSubwikiPickerComponent:t}=yield n.e(89030).then(n.bind(n,89030)),o=yield S.CorePopovers.open({component:t,componentProps:{courseId:e.courseId,subwikis:e.subwikiData.subwikis,currentSubwiki:e.currentSubwiki},event:i});o&&e.goToSubwiki(o.id,o.userid,o.groupid)}))()}sync(){var i=this;return(0,t.A)((function*(){if(!i.wiki)throw new o.CoreError("Cannot sync without a wiki.");return I.i.syncWiki(i.wiki.id,i.courseId,i.wiki.coursemodule)}))()}ngOnDestroy(){var i,e;super.ngOnDestroy(),null===(i=this.manualSyncObserver)||void 0===i||i.off(),null===(e=this.newPageObserver)||void 0===e||e.off(),this.onlineSubscription.unsubscribe(),this.wiki&&f.N.wikiPageClosed(this.wiki.id,this.currentPath)}createSubwikiList(i){var e=this;return(0,t.A)((function*(){const n=[];let o=!1,r=!1,d=!1;e.subwikiData.subwikis=[],e.setSelectedWiki(e.subwikiId,e.userId,e.groupId),e.subwikiData.count=0,yield Promise.all(e.loadedSubwikis.map(function(){var a=(0,t.A)((function*(t){let a="";if(0===t.groupid&&0===t.userid)o||(n.unshift({name:m.HT.instant("core.allparticipants"),id:t.id,userid:t.userid,groupid:t.groupid,groupLabel:"",canedit:t.canedit}),o=!0);else{if(0!==t.groupid&&i.length>0){var s;const e=i.find((i=>i.id==t.groupid));a=null!==(s=null==e?void 0:e.name)&&void 0!==s?s:""}else a=m.HT.instant("addon.mod_wiki.notingroup");if(0!==t.userid){d||0==t.groupid||(d=!0);const i=yield u.CoreUser.getProfile(t.userid,e.courseId,!0);n.push({name:i.fullname,id:t.id,userid:t.userid,groupid:t.groupid,groupLabel:a,canedit:t.canedit})}else n.push({name:a,id:t.id,userid:t.userid,groupid:t.groupid,groupLabel:a,canedit:t.canedit}),r=!0}}));return function(i){return a.apply(this,arguments)}}())),e.fillSubwikiData(n,r,d)}))()}fillSubwikiData(i,e,n){if(this.groupWiki=e,this.subwikiData.count=i.length,(!this.subwikiId||!this.userId&&!this.groupId)&&!this.isAnySubwikiSelected()&&i.length>0){let n,t,o,r;for(const r in i){const d=i[r];if(d.canedit){let i;if(d.userid>0?this.currentUserId==d.userid&&(i=d.id):d.groupid>0?e&&(i=d.id):d.id>0&&(i=d.id),void 0!==i){if(i>0){o=Number(r);break}void 0===t&&(t=Number(r))}else void 0===n&&(n=Number(r))}}r=void 0!==o?o:void 0!==t?t:void 0!==n?n:0;const d=i[r];void 0!==d&&this.setSelectedWiki(d.id,d.userid,d.groupid)}if(n){let e,n=-1;i.forEach((i=>{i.groupid!==n&&(e={label:i.groupLabel,subwikis:[]},n=i.groupid,this.subwikiData.subwikis.push(e)),e.subwikis.push(i)}))}else if(e){const e=[],n=[],t=[];i.forEach((i=>{0===i.groupid&&0===i.userid?e.push(i):i.canedit?n.push(i):t.push(i)})),n.length>0&&t.length>0?(e.length>0&&this.subwikiData.subwikis.push({label:"",subwikis:e}),n.length>0&&this.subwikiData.subwikis.push({label:m.HT.instant("core.mygroups"),subwikis:n}),t.length>0&&this.subwikiData.subwikis.push({label:m.HT.instant("core.othergroups"),subwikis:t})):this.subwikiData.subwikis.push({label:"",subwikis:i})}else this.subwikiData.subwikis.push({label:"",subwikis:i});this.wiki&&f.N.setSubwikiList(this.wiki.id,this.subwikiData.subwikis,this.subwikiData.count,this.subwikiData.subwikiSelected,this.subwikiData.userSelected,this.subwikiData.groupSelected)}}return(i=AddonModWikiIndexComponent).ɵfac=function AddonModWikiIndexComponent_Factory(e){return new(e||i)(x.rXU(W.W9),x.rXU(d.A,8))},i.ɵcmp=x.VBU({type:i,selectors:[["addon-mod-wiki-index"]],inputs:{action:"action",pageId:"pageId",pageTitle:"pageTitle",subwikiId:"subwikiId",userId:"userId",groupId:"groupId"},standalone:!0,features:[x.Vt3,x.aNF],decls:14,vars:12,consts:[["slot","end"],["aria-haspopup","true",3,"ariaLabel","click",4,"ngIf"],["iconAction","fas-pen",3,"priority","content","action",4,"ngIf"],["iconAction","fas-plus",3,"priority","content","action",4,"ngIf"],["iconAction","fas-circle-info",3,"priority","content"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"module","description","component","componentId","courseId","completionChanged",4,"ngIf"],[4,"ngIf"],["class","ion-padding-horizontal addon-mod_wiki-page-content",4,"ngIf"],["collapsible-footer","",3,"hidden","courseId","currentModuleId",4,"ngIf"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end",4,"ngIf"],["aria-haspopup","true",3,"click","ariaLabel"],["name","fas-user","aria-hidden","true",4,"ngIf"],["name","fas-users","aria-hidden","true",4,"ngIf"],["name","fas-user","aria-hidden","true"],["name","fas-users","aria-hidden","true"],["name","fas-map","aria-hidden","true"],["iconAction","fas-pen",3,"action","priority","content"],["iconAction","fas-plus",3,"action","priority","content"],["iconAction","fas-circle-info",3,"action","priority","content"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],[3,"completionChanged","module","description","component","componentId","courseId"],["class","core-warning-card",4,"ngIf"],[1,"core-warning-card"],[1,"ion-text-wrap"],["name","fas-triangle-exclamation","slot","start","aria-hidden","true"],[1,"ion-padding-horizontal","addon-mod_wiki-page-content"],[3,"ngClass"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId","sanitize",4,"ngIf"],["icon","fas-file-lines",3,"message",4,"ngIf"],["class","ion-margin-top",4,"ngIf"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId","sanitize"],["icon","fas-file-lines",3,"message"],[1,"ion-margin-top"],[3,"tags"],["collapsible-footer","",3,"hidden","courseId","currentModuleId"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end"],[3,"click"],["name","fas-plus","aria-hidden","true"],[1,"sr-only"]],template:function AddonModWikiIndexComponent_Template(i,e){1&i&&(x.j41(0,"core-navbar-buttons",0),x.DNE(1,AddonModWikiIndexComponent_ion_button_1_Template,4,5,"ion-button",1)(2,AddonModWikiIndexComponent_ion_button_2_Template,3,3,"ion-button",1),x.j41(3,"core-context-menu"),x.DNE(4,AddonModWikiIndexComponent_core_context_menu_item_4_Template,2,4,"core-context-menu-item",2)(5,AddonModWikiIndexComponent_core_context_menu_item_5_Template,2,4,"core-context-menu-item",3)(6,AddonModWikiIndexComponent_Conditional_6_Template,2,4,"core-context-menu-item",4),x.k0s(),x.DNE(7,AddonModWikiIndexComponent_Conditional_7_Template,3,3,"ion-button",5),x.k0s(),x.j41(8,"core-loading",6),x.DNE(9,AddonModWikiIndexComponent_core_course_module_info_9_Template,1,5,"core-course-module-info",7)(10,AddonModWikiIndexComponent_div_10_Template,3,2,"div",8)(11,AddonModWikiIndexComponent_div_11_Template,6,7,"div",9),x.k0s(),x.DNE(12,AddonModWikiIndexComponent_core_course_module_navigation_12_Template,1,3,"core-course-module-navigation",10)(13,AddonModWikiIndexComponent_ion_fab_13_Template,7,6,"ion-fab",11)),2&i&&(x.R7$(),x.Y8G("ngIf",e.subwikiData.count>1),x.R7$(),x.Y8G("ngIf",!e.showLoading&&e.currentPageObj),x.R7$(2),x.Y8G("ngIf",e.canEdit&&(e.isOnline||e.pageIsOffline)),x.R7$(),x.Y8G("ngIf",e.canEdit),x.R7$(),x.vxM(6,e.courseContentsPage?6:-1),x.R7$(),x.vxM(7,e.courseContentsPage?-1:7),x.R7$(),x.Y8G("hideUntil",!e.showLoading),x.R7$(),x.Y8G("ngIf",e.isMainPage),x.R7$(),x.Y8G("ngIf",e.pageIsOffline||e.hasOffline||e.pageWarning),x.R7$(),x.Y8G("ngIf",!e.showLoading),x.R7$(),x.Y8G("ngIf",e.isMainPage),x.R7$(),x.Y8G("ngIf",e.canEdit))},dependencies:[M.n,O.YU,O.bT,W.Jm,W.b_,W.Q8,W.YW,W.iq,W.uz,W.he,N.B,E.Q,D.h,G.R,$.c,R.A,j.t,L.B,V.i,Y.T,F.D9,P.v,A.CoreCourseModuleInfoComponent,T.CoreCourseModuleNavigationComponent],styles:["[_nghost-%COMP%]{--addon-mod-wiki-newentry-link-color: var(--danger);--addon-mod-wiki-toc-border-color: var(--gray-500);--addon-mod-wiki-toc-background-color: var(--gray-200);background-color:var(--ion-item-background)}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]{background-color:var(--ion-item-background);padding-bottom:10px}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .wiki-toc{margin:16px;padding:8px;border:1px solid var(--addon-mod-wiki-toc-border-color);background:var(--addon-mod-wiki-toc-background-color)}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .wiki-toc p{color:var(--ion-text-color)}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .wiki-toc-title{font-size:1.1em;font-variant:small-caps;text-align:center}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .wiki-toc-section{padding:0;margin:2px 8px}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .wiki-toc-section-2{padding-inline-start:12px}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .wiki-toc-section-3{padding-inline-start:24px}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .wiki_newentry{color:var(--addon-mod-wiki-newentry-link-color);font-style:italic}[_nghost-%COMP%]   .addon-mod_wiki-page-content[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%]     .addon-mod_wiki-noedit a.wiki_edit_section{display:none}:root.dark[_nghost-%COMP%], :root.dark   [_nghost-%COMP%]{--addon-mod-wiki-newentry-link-color: var(--danger-tint);--addon-mod-wiki-toc-background-color: var(--medium)}"]}),AddonModWikiIndexComponent})()},22357:(i,e,n)=>{n.d(e,{i:()=>b});var t=n(10467),o=n(42008),r=n(49446),d=n(97254),a=n(94455),s=n(15221),u=n(52749),c=n(48966),l=n(43411),g=n(79555),p=n(49882),k=n(67981),m=n(59379),w=n(51069),h=n(55554),_=n(54438);let f=(()=>{var i;class AddonModWikiSyncProvider extends o.l{constructor(){super("AddonModWikiSyncProvider"),this.componentTranslatableString="wiki"}getSubwikiBlockId(i,e,n,t){return(i=m.W.convertToPositiveNumber(i))&&i>0?String(i):`${e=m.W.convertToPositiveNumber(e)}:${n=m.W.convertToPositiveNumber(n)}:${t=m.W.convertToPositiveNumber(t)}`}syncAllWikis(i,e){return this.syncOnSites("all wikis",(i=>this.syncAllWikisFunc(!!e,i)),i)}syncAllWikisFunc(i,e){var n=this;return(0,t.A)((function*(){const o=yield m.W.getAllNewPages(e),r={};yield Promise.all(o.map(function(){var o=(0,t.A)((function*(t){const o=n.getSubwikiBlockId(t.subwikiid,t.wikiid,t.userid,t.groupid);if(r[o])return;r[o]=!0;const d=i?yield n.syncSubwiki(t.subwikiid,t.wikiid,t.userid,t.groupid,e):yield n.syncSubwikiIfNeeded(t.subwikiid,t.wikiid,t.userid,t.groupid,e);null!=d&&d.updated&&p.z.trigger(w.mb,{siteId:e,subwikiId:t.subwikiid,wikiId:t.wikiid,userId:t.userid,groupId:t.groupid,created:d.created,discarded:d.discarded,warnings:d.warnings})}));return function(i){return o.apply(this,arguments)}}()))}))()}syncSubwikiIfNeeded(i,e,n,o,r){var d=this;return(0,t.A)((function*(){const t=d.getSubwikiBlockId(i,e,n,o);if(yield d.isSyncNeeded(t,r))return d.syncSubwiki(i,e,n,o,r)}))()}syncSubwiki(i,e,n,t,r){r=r||u.CoreSites.getCurrentSiteId();const d=this.getSubwikiBlockId(i,e,n,t),a=this.getOngoingSync(d,r);if(a)return a;if(c.CoreSync.isBlocked(w.Rv,d,r))throw this.logger.debug(`Cannot sync subwiki ${d} because it is blocked.`),new o.D(g.HT.instant("core.errorsyncblocked",{$a:this.componentTranslate}));return this.logger.debug(`Try to sync subwiki ${d}`),this.addOngoingSync(d,this.performSyncSubwiki(i,e,n,t,r),r)}performSyncSubwiki(i,e,n,o,d){var s=this;return(0,t.A)((function*(){const u={warnings:[],updated:!1,created:[],discarded:[]},c=s.getSubwikiBlockId(i,e,n,o),g=yield h.g.ignoreErrors(m.W.getSubwikiNewPages(i,e,n,o,d),[]);if(!g||!g.length)return yield h.g.ignoreErrors(s.setSyncTime(c,d)),u;if(!a.WE.isOnline())throw new r.CoreNetworkError;return yield Promise.all(g.map(function(){var r=(0,t.A)((function*(t){try{const r=yield k.N.newPageOnline(t.title,t.cachedcontent,{subwikiId:i,wikiId:e,userId:n,groupId:o,siteId:d});u.updated=!0,u.created.push({pageId:r,title:t.title}),yield m.W.deleteNewPage(t.title,i,e,n,o,d)}catch(r){if(!l.CoreWSError.isWebServiceError(r))throw r;yield m.W.deleteNewPage(t.title,i,e,n,o,d),u.updated=!0;const a=s.getOfflineDataDeletedWarning(t.title,r);u.discarded.push({title:t.title,warning:a}),u.warnings.push(a)}}));return function(i){return r.apply(this,arguments)}}())),yield h.g.ignoreErrors(s.setSyncTime(c,d)),u}))()}syncWiki(i,e,n,o){var r=this;return(0,t.A)((function*(){o=o||u.CoreSites.getCurrentSiteId(),yield h.g.ignoreErrors(d.CoreCourseLogHelper.syncActivity(w.dD,i,o));const a=yield k.N.getSubwikis(i,{cmId:n,siteId:o}),c={warnings:[],updated:!1,subwikis:{},siteId:o};if(yield Promise.all(a.map(function(){var i=(0,t.A)((function*(i){const e=yield r.syncSubwiki(i.id,i.wikiid,i.userid,i.groupid,o);e&&e.updated&&(c.warnings=c.warnings.concat(e.warnings),c.updated=!0,c.subwikis[i.id]={created:e.created,discarded:e.discarded})}));return function(e){return i.apply(this,arguments)}}())),c.updated){const t=[];i&&(t.push(k.N.invalidateSubwikis(i)),t.push(k.N.invalidateSubwikiPages(i)),t.push(k.N.invalidateSubwikiFiles(i))),e&&t.push(k.N.invalidateWikiData(e)),n&&(t.push(s.CoreGroups.invalidateActivityAllowedGroups(n)),t.push(s.CoreGroups.invalidateActivityGroupMode(n))),yield h.g.ignoreErrors(Promise.all(t))}return c}))()}}return(i=AddonModWikiSyncProvider).ɵfac=function AddonModWikiSyncProvider_Factory(e){return new(e||i)},i.ɵprov=_.jDH({token:i,factory:i.ɵfac,providedIn:"root"}),AddonModWikiSyncProvider})();const b=(0,g.Qd)(f)},69006:(i,e,n)=>{n.d(e,{y:()=>m});var t=n(10467),o=n(23063),r=n(49882),d=n(44682),a=n(55554),s=n(51024),u=n(52749),c=n(25572),l=n(79555),g=n(95384),p=n(54438),k=n(2910);let m=(()=>{var i;class CoreCourseModuleMainActivityComponent extends o.x{constructor(i="CoreCourseModuleMainResourceComponent",e,n){super(i,n),this.content=e,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,i=this;return(0,t.A)((function*(){yield _superprop_getNgOnInit().call(i),i.hasOffline=!1,i.moduleName=g.CoreCourseModuleHelper.translateModuleName(i.pluginName||i.moduleName||""),i.syncEventName&&(i.syncObserver=r.z.on(i.syncEventName,(e=>{i.autoSyncEventReceived(e)}),i.siteId))}))()}isRefreshSyncNeeded(i){return!1}autoSyncEventReceived(i){this.isRefreshSyncNeeded(i)&&this.showLoadingAndRefresh(!1)}refreshContent(i=!1,e=!1){var n=this;return(0,t.A)((function*(){n.module&&(yield a.g.ignoreErrors(Promise.all([n.invalidateContent(),n.showCompletion?d.CoreCourse.invalidateModule(n.module.id):void 0])),yield n.loadContent(!0,i,e))}))()}showLoadingAndFetch(i=!1,e=!1){var n=this;return(0,t.A)((function*(){var t;n.showLoading=!0,null===(t=n.content)||void 0===t||t.scrollToTop(),yield n.loadContent(!1,i,e)}))()}showLoadingAndRefresh(i=!1,e=!1){var n;return this.showLoading=!0,null===(n=this.content)||void 0===n||n.scrollToTop(),this.refreshContent(i,e)}fetchContent(i=!1,e=!1,n=!1){return(0,t.A)((function*(){}))()}loadContent(i,e=!1,n=!1){var o=this;return(0,t.A)((function*(){if(o.module)try{i&&o.showCompletion&&(yield a.g.ignoreErrors(o.fetchModule())),yield o.fetchContent(i,e,n),o.finishSuccessfulFetch()}catch(n){var t;if(!i&&(null===(t=u.CoreSites.getCurrentSite())||void 0===t||!t.isOfflineDisabled())&&g.CoreCourseModuleHelper.isNotFoundError(n))return yield o.refreshContent(e);c.CoreAlerts.showError(n,{default:l.HT.instant(o.fetchContentDefaultError)})}finally{o.showLoading=!1}}))()}sync(){return(0,t.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(i){return i.updated}syncActivity(i=!1){var e=this;return(0,t.A)((function*(){try{const i=yield e.sync();return i.warnings.length&&c.CoreAlerts.show({message:i.warnings[0]}),e.hasSyncSucceed(i)}catch(e){return i&&c.CoreAlerts.showError(e,{default:l.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var i;super.ngOnDestroy(),null===(i=this.syncObserver)||void 0===i||i.off()}}return(i=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(e){return new(e||i)(p.rXU("",8),p.rXU(k.W9),p.rXU(s.A))},i.ɵcmp=p.VBU({type:i,selectors:[["ng-component"]],inputs:{group:"group"},features:[p.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(i,e){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()},25367:(i,e,n)=>{n.d(e,{v:()=>s});var t=n(15324),o=n(86654),r=n(54438),d=n(60177),a=n(2910);function CoreTagListComponent_ng_container_0_Template(i,e){if(1&i){const i=r.RV6();r.qex(0),r.j41(1,"ion-badge",1),r.bIt("click",(function CoreTagListComponent_ng_container_0_Template_ion_badge_click_1_listener(){const e=r.eBV(i).$implicit,n=r.XpG();return r.Njj(n.openTag(e))})),r.EFF(2),r.k0s(),r.bVm()}if(2&i){const i=e.$implicit;r.R7$(2),r.JRh(i.rawname)}}let s=(()=>{var i;class CoreTagListComponent{constructor(){this.tags=[]}openTag(i){t.CoreNavigator.navigateToSitePath("/tag/index",{params:{tagId:i.id,tagName:i.rawname,collectionId:i.tagcollid,fromContextId:i.taginstancecontextid}})}}return(i=CoreTagListComponent).ɵfac=function CoreTagListComponent_Factory(e){return new(e||i)},i.ɵcmp=r.VBU({type:i,selectors:[["core-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[r.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["role","link",1,"core-tag-list-tag",3,"click"]],template:function CoreTagListComponent_Template(i,e){1&i&&r.DNE(0,CoreTagListComponent_ng_container_0_Template,3,1,"ng-container",0),2&i&&r.Y8G("ngForOf",e.tags)},dependencies:[o.n,d.Sq,a.In],styles:["[_nghost-%COMP%]{line-height:1.6}[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]{cursor:pointer;margin-left:4px;margin-right:4px}"]}),CoreTagListComponent})()}}]);