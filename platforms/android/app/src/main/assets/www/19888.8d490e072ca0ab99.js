"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[19888,46526,24145,91288],{46526:(t,e,n)=>{n.d(e,{U:()=>f});var o=n(10467),i=n(54438),a=n(21413),s=n(91768),r=n(74978),l=n(32832),c=n(15324),d=n(49882),u=n(52749),g=n(57085),p=n(86654),h=n(25572),C=n(79555),m=n(64422);const v=["compile"];let f=(()=>{var t;class CoreSitePluginsPluginContentComponent{constructor(t){this.component="",this.data={},this.onContentLoaded=new i.bkB,this.onLoadingContent=new i.bkB,this.content="",this.javascript="",this.dataLoaded=!1,this.invalidateObservable=new a.B,this.differ=t.find([]).create()}ngOnInit(){this.fetchContent()}ngDoCheck(){if(!this.data||!this.jsData)return;this.differ.diff(this.data)&&(this.jsData=Object.assign(this.jsData,this.data))}fetchContent(t){var e=this;return(0,o.A)((function*(){e.onLoadingContent.emit(t),e.forceCompile=!1;const n=Object.assign({},e.preSets);n.component=n.component||e.component;try{const o=yield l.CoreSitePlugins.getContent(e.component,e.method,e.args,n);e.content=o.templates.length?o.templates[0].html:"",e.javascript=o.javascript,e.otherData=o.otherdata,e.data=e.data||{},e.forceCompile=!0,e.jsData={...e.args,...e.data,...l.CoreSitePlugins.createDataForJS(e.initResult,o)},e.jsData.fetchContent=t=>e.fetchContent(t),e.jsData.openContent=(t,n,o,i,a,s,r)=>e.openContent(t,n,o,i,a,s,r),e.jsData.refreshContent=t=>e.refreshContent(t),e.jsData.updateContent=(t,n,o,i,a)=>e.updateContent(t,n,o,i,a),e.jsData.updateModuleCourseContent=(t,n)=>e.updateModuleCourseContent(t,n),e.jsData.updateCachedContent=()=>e.updateCachedContent(),e.onContentLoaded.emit({refresh:!!t,success:!0,content:e.content})}catch(n){e.content="<div></div>",e.onContentLoaded.emit({refresh:!!t,success:!1,content:e.content}),h.CoreAlerts.showError(n,{default:C.HT.instant("core.errorloadingcontent")})}finally{e.dataLoaded=!0}}))()}openContent(t,e={},n,o,i,a,r,l){!0===i&&(i=this.data),n=n||this.component,o=o||this.method;const d=s.VV.hashAsciiStr(JSON.stringify(e));c.CoreNavigator.navigateToSitePath(`siteplugins/content/${n}/${o}/${d}`,{params:{title:t,args:e,initResult:this.initResult,jsData:i,preSets:a,ptrEnabled:r,contextLevel:(null==l?void 0:l.contextLevel)||this.contextLevel,contextInstanceId:(null==l?void 0:l.contextInstanceId)||this.contextInstanceId,courseId:(null==l?void 0:l.courseId)||this.courseId}})}refreshContent(t=!0){var e=this;return(0,o.A)((function*(){t&&(e.dataLoaded=!1),e.invalidateObservable.next();try{yield l.CoreSitePlugins.invalidateContent(e.component,e.method,e.args)}finally{yield e.fetchContent(!0)}}))()}updateContent(t,e,n,o,i){this.component=e||this.component,this.method=n||this.method,this.args=t,this.dataLoaded=!1,this.preSets=i||this.preSets,this.data&&o&&Object.assign(this.data,o),this.fetchContent()}callComponentFunction(t,e){var n;return null===(n=this.compileComponent)||void 0===n?void 0:n.callComponentFunction(t,e)}updateModuleCourseContent(t,e){d.z.trigger(g.Vs,{cmId:t,alreadyFetched:e})}updateCachedContent(){var t=this;return(0,o.A)((function*(){yield l.CoreSitePlugins.getContent(t.component,t.method,t.args,u.CoreSites.getReadingStrategyPreSets(2))}))()}}return(t=CoreSitePluginsPluginContentComponent).ɵfac=function CoreSitePluginsPluginContentComponent_Factory(e){return new(e||t)(i.rXU(i.MKu))},t.ɵcmp=i.VBU({type:t,selectors:[["core-site-plugins-plugin-content"]],viewQuery:function CoreSitePluginsPluginContentComponent_Query(t,e){if(1&t&&i.GBs(v,5),2&t){let t;i.mGM(t=i.lsd())&&(e.compileComponent=t.first)}},hostVars:2,hostBindings:function CoreSitePluginsPluginContentComponent_HostBindings(t,e){2&t&&i.HbH(e.component)},inputs:{component:"component",method:"method",args:"args",initResult:"initResult",data:"data",preSets:"preSets",pageTitle:"pageTitle",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},outputs:{onContentLoaded:"onContentLoaded",onLoadingContent:"onLoadingContent"},standalone:!0,features:[i.aNF],decls:3,vars:6,consts:[["compile",""],[3,"hideUntil","fullscreen"],[3,"text","javascript","jsData","forceCompile"]],template:function CoreSitePluginsPluginContentComponent_Template(t,e){1&t&&(i.j41(0,"core-loading",1),i.nrm(1,"core-compile-html",2,0),i.k0s()),2&t&&(i.Y8G("hideUntil",e.dataLoaded)("fullscreen",!1),i.R7$(),i.Y8G("text",e.content)("javascript",e.javascript)("jsData",e.jsData)("forceCompile",e.forceCompile))},dependencies:[p.n,m.R,r.h],styles:["[_nghost-%COMP%]{display:contents}"]}),CoreSitePluginsPluginContentComponent})()},19888:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var o=n(10467),i=n(15324),a=n(81690),s=n(46526),r=n(86654),l=n(54438),c=n(60177),d=n(2910),u=n(58197),g=n(88246),p=n(73955);function CoreSitePluginsPluginPage_h1_6_Template(t,e){if(1&t&&(l.j41(0,"h1"),l.nrm(1,"core-format-text",7),l.nI1(2,"translate"),l.k0s()),2&t){const t=l.XpG();l.R7$(),l.Y8G("text",l.bMT(2,4,t.title))("contextLevel",t.contextLevel)("contextInstanceId",t.contextInstanceId)("courseId",t.courseId)}}let h=(()=>{var t;class CoreSitePluginsPluginPage{constructor(){this.ptrEnabled=!1}ngOnInit(){this.title=i.CoreNavigator.getRouteParam("title"),this.component=i.CoreNavigator.getRouteParam("component"),this.method=i.CoreNavigator.getRouteParam("method"),this.args=i.CoreNavigator.getRouteParam("args"),this.initResult=i.CoreNavigator.getRouteParam("initResult"),this.jsData=i.CoreNavigator.getRouteParam("jsData"),this.preSets=i.CoreNavigator.getRouteParam("preSets"),this.ptrEnabled=!a.j.isFalseOrZero(i.CoreNavigator.getRouteBooleanParam("ptrEnabled")),this.contextLevel=i.CoreNavigator.getRouteParam("contextLevel"),this.contextInstanceId=i.CoreNavigator.getRouteNumberParam("contextInstanceId"),this.courseId=i.CoreNavigator.getRouteNumberParam("courseId")}refreshData(t){var e;null===(e=this.content)||void 0===e||e.refreshContent(!1).finally((()=>{t.complete()}))}ionViewWillEnter(){var t;null===(t=this.content)||void 0===t||t.callComponentFunction("ionViewWillEnter")}ionViewDidEnter(){var t;null===(t=this.content)||void 0===t||t.callComponentFunction("ionViewDidEnter")}ionViewWillLeave(){var t;null===(t=this.content)||void 0===t||t.callComponentFunction("ionViewWillLeave")}ionViewDidLeave(){var t;null===(t=this.content)||void 0===t||t.callComponentFunction("ionViewDidLeave")}ionViewWillUnload(){var t;null===(t=this.content)||void 0===t||t.callComponentFunction("ionViewWillUnload")}canLeave(){var t=this;return(0,o.A)((function*(){if(!t.content)return!0;const e=yield t.content.callComponentFunction("canLeave");return null==e||!!e}))()}}return(t=CoreSitePluginsPluginPage).ɵfac=function CoreSitePluginsPluginPage_Factory(e){return new(e||t)},t.ɵcmp=l.VBU({type:t,selectors:[["page-core-site-plugins-plugin"]],viewQuery:function CoreSitePluginsPluginPage_Query(t,e){if(1&t&&l.GBs(s.U,5),2&t){let t;l.mGM(t=l.lsd())&&(e.content=t.first)}},standalone:!0,features:[l.aNF],decls:13,vars:18,consts:[["slot","start"],[3,"text"],[4,"ngIf"],["slot","end"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"component","method","args","preSets","initResult","data","pageTitle","contextLevel","contextInstanceId","courseId"],[3,"text","contextLevel","contextInstanceId","courseId"]],template:function CoreSitePluginsPluginPage_Template(t,e){1&t&&(l.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),l.nrm(3,"ion-back-button",1),l.nI1(4,"translate"),l.k0s(),l.j41(5,"ion-title"),l.DNE(6,CoreSitePluginsPluginPage_h1_6_Template,3,6,"h1",2),l.k0s(),l.nrm(7,"ion-buttons",3),l.k0s()(),l.j41(8,"ion-content")(9,"ion-refresher",4),l.bIt("ionRefresh",(function CoreSitePluginsPluginPage_Template_ion_refresher_ionRefresh_9_listener(t){return e.refreshData(t.target)})),l.nrm(10,"ion-refresher-content",5),l.nI1(11,"translate"),l.k0s(),l.nrm(12,"core-site-plugins-plugin-content",6),l.k0s()),2&t&&(l.R7$(3),l.Y8G("text",l.bMT(4,14,"core.back")),l.R7$(3),l.Y8G("ngIf",e.title),l.R7$(3),l.Y8G("disabled",!e.ptrEnabled||!e.content||!e.content.dataLoaded),l.R7$(),l.FS9("pullingText",l.bMT(11,16,"core.pulltorefresh")),l.R7$(2),l.Y8G("component",e.component)("method",e.method)("args",e.args)("preSets",e.preSets)("initResult",e.initResult)("data",e.jsData)("pageTitle",e.title)("contextLevel",e.contextLevel)("contextInstanceId",e.contextInstanceId)("courseId",e.courseId))},dependencies:[r.n,c.bT,d.QW,d.W9,d.eU,d.To,d.Ki,d.BC,d.ai,d.el,u.B,g.i,p.D9,s.U],encapsulation:2}),CoreSitePluginsPluginPage})()}}]);