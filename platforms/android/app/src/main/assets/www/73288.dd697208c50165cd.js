"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[73288],{73288:(e,t,n)=>{n.r(t),n.d(t,{AddonBlockRecentlyAccessedItemsComponent:()=>O});var o=n(10467),c=n(3484),s=n(52749),i=n(82907),l=n(95384),r=n(79555),d=n(97086),a=n(54438);let m=(()=>{var e;class AddonBlockRecentlyAccessedItemsProvider{getRecentItemsCacheKey(){return`${AddonBlockRecentlyAccessedItemsProvider.ROOT_CACHE_KEY}:recentitems`}getRecentItemsWS(e){var t=this;return(0,o.A)((function*(){const n=yield s.CoreSites.getSite(e),o={cacheKey:t.getRecentItemsCacheKey()};return yield n.read("block_recentlyaccesseditems_get_recent_items",void 0,o)}))()}getRecentItems(e){var t=this;return(0,o.A)((function*(){const n=yield s.CoreSites.getSite(e),c=yield t.getRecentItemsWS(n.getId()),r=[],a=yield Promise.all(c.map(function(){var e=(0,o.A)((function*(e){const t=e.icon&&i.y.getHTMLElementAttribute(e.icon,"src");return e.iconUrl=yield d.CoreCourseModuleDelegate.getModuleIconSrc(e.modname,t||void 0),e.iconTitle=e.icon&&i.y.getHTMLElementAttribute(e.icon,"title"),r.push(e.cmid),e}));return function(t){return e.apply(this,arguments)}}())),m=yield l.CoreCourseModuleHelper.getCertainModulesViewed(r,n.getId());return a.forEach((e=>{const t=m[e.cmid];t&&t.timeaccess>=1e3*e.timeaccess||l.CoreCourseModuleHelper.storeModuleViewed(e.courseid,e.cmid,{timeaccess:1e3*e.timeaccess,sectionId:t&&t.sectionId,siteId:n.getId()})})),a}))()}invalidateRecentItems(e){var t=this;return(0,o.A)((function*(){const n=yield s.CoreSites.getSite(e);yield n.invalidateWsCacheForKey(t.getRecentItemsCacheKey())}))()}}return(e=AddonBlockRecentlyAccessedItemsProvider).ROOT_CACHE_KEY="AddonBlockRecentlyAccessedItems:",e.ɵfac=function AddonBlockRecentlyAccessedItemsProvider_Factory(t){return new(t||e)},e.ɵprov=a.jDH({token:e,factory:e.ɵfac,providedIn:"root"}),AddonBlockRecentlyAccessedItemsProvider})();const p=(0,r.Qd)(m);var _=n(75383),g=n(33014),h=n(81690),u=n(86654),C=n(10883),v=n(60177),I=n(2910),y=n(16986),A=n(64422),f=n(32572),R=n(29210),k=n(58197),M=n(74235),P=n(73955);function AddonBlockRecentlyAccessedItemsComponent_div_10_div_2_core_mod_icon_3_Template(e,t){if(1&e&&a.nrm(0,"core-mod-icon",19),2&e){const e=a.XpG().$implicit;a.Y8G("modicon",e.iconUrl)("modname",e.modname)("componentId",e.cmid)("showAlt",!1)("purpose",e.purpose)("isBranded",e.branded)}}function AddonBlockRecentlyAccessedItemsComponent_div_10_div_2_span_5_Template(e,t){if(1&e&&(a.j41(0,"span",20),a.EFF(1),a.k0s()),2&e){const e=a.XpG().$implicit;a.R7$(),a.JRh(e.iconTitle)}}function AddonBlockRecentlyAccessedItemsComponent_div_10_div_2_Template(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",12)(1,"ion-card")(2,"ion-item",13),a.bIt("click",(function AddonBlockRecentlyAccessedItemsComponent_div_10_div_2_Template_ion_item_click_2_listener(t){const n=a.eBV(e).$implicit,o=a.XpG(2);return a.Njj(o.action(t,n))})),a.DNE(3,AddonBlockRecentlyAccessedItemsComponent_div_10_div_2_core_mod_icon_3_Template,1,6,"core-mod-icon",14),a.j41(4,"ion-label"),a.DNE(5,AddonBlockRecentlyAccessedItemsComponent_div_10_div_2_span_5_Template,2,1,"span",15),a.j41(6,"p",16),a.nrm(7,"core-format-text",17),a.k0s(),a.j41(8,"p"),a.nrm(9,"core-format-text",18),a.k0s()()()()()}if(2&e){const e=t.$implicit;a.R7$(2),a.Y8G("detail",!1),a.R7$(),a.Y8G("ngIf",e.iconUrl),a.R7$(2),a.Y8G("ngIf",e.iconTitle),a.R7$(2),a.Y8G("text",e.name)("contextInstanceId",e.cmid)("courseId",e.courseid),a.R7$(2),a.Y8G("text",e.coursename)("contextInstanceId",e.courseid)}}function AddonBlockRecentlyAccessedItemsComponent_div_10_Template(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",8),a.bIt("onResize",(function AddonBlockRecentlyAccessedItemsComponent_div_10_Template_div_onResize_0_listener(){a.eBV(e),a.XpG();const t=a.sdS(7);return a.Njj(t.updateScrollPosition())})),a.nrm(1,"div",9),a.DNE(2,AddonBlockRecentlyAccessedItemsComponent_div_10_div_2_Template,10,8,"div",10),a.nrm(3,"div",11),a.k0s()}if(2&e){const e=a.XpG();a.R7$(2),a.Y8G("ngForOf",e.items)}}function AddonBlockRecentlyAccessedItemsComponent_core_empty_box_11_Template(e,t){1&e&&(a.nrm(0,"core-empty-box",21),a.nI1(1,"translate")),2&e&&a.Y8G("message",a.bMT(1,1,"addon.block_recentlyaccesseditems.noitems"))}let O=(()=>{var e;class AddonBlockRecentlyAccessedItemsComponent extends c.d{constructor(){super("AddonBlockRecentlyAccessedItemsComponent"),this.items=[],this.fetchContentDefaultError="Error getting recently accessed items data."}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,o.A)((function*(){const t=h.j.getUniqueId("AddonBlockRecentlyAccessedItemsComponent-Scroll");e.scrollElementId=`addon-block-recentlyaccesseditems-scroll-${t}`,_superprop_getNgOnInit().call(e)}))()}invalidateContent(){return(0,o.A)((function*(){yield p.invalidateRecentItems()}))()}fetchContent(){var e=this;return(0,o.A)((function*(){e.items=yield p.getRecentItems()}))()}action(e,t){return(0,o.A)((function*(){e.preventDefault(),e.stopPropagation();const n=_.Ni.decodeHTMLEntities(t.viewurl),o=yield g.CoreLoadings.show();try{yield C.CoreContentLinksHelper.visitLink(n)}finally{o.dismiss()}}))()}}return(e=AddonBlockRecentlyAccessedItemsComponent).ɵfac=function AddonBlockRecentlyAccessedItemsComponent_Factory(t){return new(t||e)},e.ɵcmp=a.VBU({type:e,selectors:[["addon-block-recentlyaccesseditems"]],standalone:!0,features:[a.Vt3,a.aNF],decls:12,vars:11,consts:[["scrollControls",""],[3,"sticky"],["slot","end"],[3,"aria-controls"],["placeholderType","row","placeholderWidth","280px","placeholderHeight","66px",3,"hideUntil","placeholderLimit"],[1,"core-horizontal-scroll",3,"scroll","id","hidden"],["class","flex-row",3,"onResize",4,"ngIf"],["image","assets/img/icons/activities.svg",3,"message",4,"ngIf"],[1,"flex-row",3,"onResize"],[1,"safe-area-pseudo-padding-start"],["class","core-horizontal-scroll-item",4,"ngFor","ngForOf"],[1,"safe-area-pseudo-padding-end"],[1,"core-horizontal-scroll-item"],["button","",1,"core-course-module-handler","ion-text-wrap",3,"click","detail"],["slot","start",3,"modicon","modname","componentId","showAlt","purpose","isBranded",4,"ngIf"],["class","sr-only",4,"ngIf"],[1,"item-heading"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["contextLevel","course",3,"text","contextInstanceId"],["slot","start",3,"modicon","modname","componentId","showAlt","purpose","isBranded"],[1,"sr-only"],["image","assets/img/icons/activities.svg",3,"message"]],template:function AddonBlockRecentlyAccessedItemsComponent_Template(e,t){if(1&e){const e=a.RV6();a.j41(0,"ion-item-divider",1)(1,"ion-label")(2,"h2"),a.EFF(3),a.nI1(4,"translate"),a.k0s()(),a.j41(5,"div",2),a.nrm(6,"core-horizontal-scroll-controls",3,0),a.k0s()(),a.j41(8,"core-loading",4)(9,"div",5),a.bIt("scroll",(function AddonBlockRecentlyAccessedItemsComponent_Template_div_scroll_9_listener(){a.eBV(e);const t=a.sdS(7);return a.Njj(t.updateScrollPosition())})),a.DNE(10,AddonBlockRecentlyAccessedItemsComponent_div_10_Template,4,1,"div",6),a.k0s(),a.DNE(11,AddonBlockRecentlyAccessedItemsComponent_core_empty_box_11_Template,2,3,"core-empty-box",7),a.k0s()}2&e&&(a.Y8G("sticky",!0),a.R7$(3),a.JRh(a.bMT(4,9,"addon.block_recentlyaccesseditems.pluginname")),a.R7$(3),a.Y8G("aria-controls",t.scrollElementId),a.R7$(2),a.Y8G("hideUntil",t.loaded)("placeholderLimit",4),a.R7$(),a.Y8G("id",t.scrollElementId)("hidden",!t.items||0===t.items.length),a.R7$(),a.Y8G("ngIf",t.items),a.R7$(),a.Y8G("ngIf",t.items.length<=0))},dependencies:[u.n,v.Sq,v.bT,I.b_,I.uz,I.Dg,I.he,y.h,A.R,f.I,R.c,k.B,M.C,P.D9],styles:["[_nghost-%COMP%]   .core-horizontal-scroll[_ngcontent-%COMP%]   div.core-horizontal-scroll-item[_ngcontent-%COMP%]{flex:0 0 80%;min-width:250px;max-width:300px;align-self:stretch;display:block}[_nghost-%COMP%]   .core-horizontal-scroll[_ngcontent-%COMP%]   div.core-horizontal-scroll-item[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{--vertical-spacing: 10px;--horizontal-spacing: 10px;width:calc(100% - var(--horizontal-spacing) - var(--horizontal-spacing));height:calc(100% - var(--vertical-spacing) - var(--vertical-spacing));margin:var(--vertical-spacing) var(--horizontal-spacing)}@media (max-width: 360px){[_nghost-%COMP%]   .core-horizontal-scroll[_ngcontent-%COMP%]   div.core-horizontal-scroll-item[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{--horizontal-spacing: 6px}}[_nghost-%COMP%]   .core-horizontal-scroll[_ngcontent-%COMP%]   div.core-horizontal-scroll-item[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .core-horizontal-scroll[_ngcontent-%COMP%]   div.core-horizontal-scroll-item[_ngcontent-%COMP%]   .ion-text-wrap[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-heading[_ngcontent-%COMP%], [_nghost-%COMP%]   .core-horizontal-scroll[_ngcontent-%COMP%]   div.core-horizontal-scroll-item[_ngcontent-%COMP%]   .ion-text-wrap[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   .core-horizontal-scroll[_ngcontent-%COMP%]   div.core-horizontal-scroll-item[_ngcontent-%COMP%]   .ion-text-wrap[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .core-course-module-handler[_ngcontent-%COMP%]{--inner-border-width: 0px}"]}),AddonBlockRecentlyAccessedItemsComponent})()}}]);