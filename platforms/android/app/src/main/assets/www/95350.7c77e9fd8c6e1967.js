"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[95350],{95350:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var i=n(10467),o=n(74431),a=n(84129),s=n(87455),l=n(74037),r=n(22513),g=n(85190),_=n(49882),c=n(45507),u=n(15324),d=n(18022),m=n(52749),p=n(47551),C=n(75383),S=n(25572),h=n(33014),f=n(86654),b=n(54438),v=n(60177),F=n(89417),T=n(2910),D=n(86198),y=n(88246),k=n(43570),E=n(73955),P=n(49780),R=n(93453);function CoreSettingsDevPage_ion_buttons_9_Template(e,t){if(1&e){const e=b.RV6();b.j41(0,"ion-buttons",14)(1,"ion-button",15),b.nI1(2,"translate"),b.bIt("click",(function CoreSettingsDevPage_ion_buttons_9_Template_ion_button_click_1_listener(){b.eBV(e);const t=b.XpG();return b.Njj(t.copyInfo())})),b.nrm(3,"ion-icon",16),b.k0s()()}2&e&&(b.R7$(),b.Y8G("ariaLabel",b.bMT(2,1,"core.settings.copyinfo")))}function CoreSettingsDevPage_ion_item_22_Template(e,t){if(1&e){const e=b.RV6();b.j41(0,"ion-item",4)(1,"ion-toggle",5),b.mxI("ngModelChange",(function CoreSettingsDevPage_ion_item_22_Template_ion_toggle_ngModelChange_1_listener(t){b.eBV(e);const n=b.XpG();return b.DH7(n.enableStagingSites,t)||(n.enableStagingSites=t),b.Njj(t)})),b.bIt("ionChange",(function CoreSettingsDevPage_ion_item_22_Template_ion_toggle_ionChange_1_listener(t){b.eBV(e);const n=b.XpG();return b.Njj(n.setEnabledStagingSites(t.detail.checked))})),b.j41(2,"p",6),b.EFF(3,"Enable staging sites "),b.j41(4,"ion-badge"),b.EFF(5),b.k0s()()()()}if(2&e){const e=b.XpG();b.R7$(),b.R50("ngModel",e.enableStagingSites),b.R7$(4),b.JRh(e.stagingSitesCount)}}function CoreSettingsDevPage_ng_container_27_Template(e,t){if(1&e){const e=b.RV6();b.qex(0),b.j41(1,"ion-item",4)(2,"ion-toggle",5),b.mxI("ngModelChange",(function CoreSettingsDevPage_ng_container_27_Template_ion_toggle_ngModelChange_2_listener(t){b.eBV(e);const n=b.XpG();return b.DH7(n.remoteStyles,t)||(n.remoteStyles=t),b.Njj(t)})),b.bIt("ionChange",(function CoreSettingsDevPage_ng_container_27_Template_ion_toggle_ionChange_2_listener(){b.eBV(e);const t=b.XpG();return b.Njj(t.remoteStylesChanged())})),b.j41(3,"p",6),b.EFF(4,"Enable remote styles "),b.j41(5,"ion-badge"),b.EFF(6),b.k0s()()()(),b.j41(7,"ion-item",4)(8,"ion-toggle",5),b.mxI("ngModelChange",(function CoreSettingsDevPage_ng_container_27_Template_ion_toggle_ngModelChange_8_listener(t){b.eBV(e);const n=b.XpG();return b.DH7(n.pluginStyles,t)||(n.pluginStyles=t),b.Njj(t)})),b.bIt("ionChange",(function CoreSettingsDevPage_ng_container_27_Template_ion_toggle_ionChange_8_listener(){b.eBV(e);const t=b.XpG();return b.Njj(t.pluginStylesChanged())})),b.j41(9,"p",6),b.EFF(10,"Enable site plugin styles "),b.j41(11,"ion-badge"),b.EFF(12),b.k0s()()()(),b.bVm()}if(2&e){const e=b.XpG();b.R7$(2),b.R50("ngModel",e.remoteStyles),b.R7$(4),b.JRh(e.remoteStylesCount),b.R7$(2),b.R50("ngModel",e.pluginStyles),b.R7$(4),b.JRh(e.pluginStylesCount)}}function CoreSettingsDevPage_ion_item_28_Template(e,t){if(1&e){const e=b.RV6();b.j41(0,"ion-item",4)(1,"ion-label")(2,"p",6),b.EFF(3,"Reset user tours"),b.k0s()(),b.j41(4,"ion-button",17),b.bIt("click",(function CoreSettingsDevPage_ion_item_28_Template_ion_button_click_4_listener(){b.eBV(e);const t=b.XpG();return b.Njj(t.resetUserTours())})),b.nrm(5,"ion-icon",18),b.k0s()()}}function CoreSettingsDevPage_ng_container_47_Conditional_11_Template(e,t){if(1&e&&(b.j41(0,"p"),b.EFF(1),b.k0s()),2&e){const e=b.XpG(2);b.R7$(),b.JRh(e.privateToken)}}function CoreSettingsDevPage_ng_container_47_Conditional_12_Template(e,t){1&e&&(b.j41(0,"p"),b.EFF(1,"---"),b.k0s())}function CoreSettingsDevPage_ng_container_47_Conditional_17_Template(e,t){if(1&e&&(b.j41(0,"p"),b.EFF(1),b.k0s()),2&e){const e=b.XpG(2);b.R7$(),b.JRh(e.filesAccessKey)}}function CoreSettingsDevPage_ng_container_47_Conditional_18_Template(e,t){1&e&&(b.j41(0,"p"),b.EFF(1,"---"),b.k0s())}function CoreSettingsDevPage_ng_container_47_Conditional_19_ion_item_0_Template(e,t){if(1&e&&(b.j41(0,"ion-item",4)(1,"ion-label")(2,"p",6),b.EFF(3,"Minimum time between auto-login requests"),b.k0s(),b.j41(4,"p"),b.EFF(5),b.nI1(6,"coreDuration"),b.k0s()()()),2&e){const e=b.XpG(3);b.R7$(5),b.JRh(b.bMT(6,1,e.autoLoginTimeBetweenRequests))}}function CoreSettingsDevPage_ng_container_47_Conditional_19_Conditional_5_Template(e,t){if(1&e&&(b.j41(0,"p"),b.EFF(1),b.nI1(2,"coreTimeAgo"),b.k0s(),b.j41(3,"ion-note",20),b.EFF(4,"This value will reset when the app is restarted."),b.k0s()),2&e){const e=b.XpG(3);b.R7$(),b.JRh(b.bMT(2,1,e.lastAutoLoginTime))}}function CoreSettingsDevPage_ng_container_47_Conditional_19_Conditional_6_Template(e,t){1&e&&(b.j41(0,"p"),b.EFF(1,"---"),b.k0s())}function CoreSettingsDevPage_ng_container_47_Conditional_19_Template(e,t){if(1&e&&(b.DNE(0,CoreSettingsDevPage_ng_container_47_Conditional_19_ion_item_0_Template,7,3,"ion-item",7),b.j41(1,"ion-item",4)(2,"ion-label")(3,"p",6),b.EFF(4,"Last auto login in this device"),b.k0s(),b.DNE(5,CoreSettingsDevPage_ng_container_47_Conditional_19_Conditional_5_Template,5,3)(6,CoreSettingsDevPage_ng_container_47_Conditional_19_Conditional_6_Template,2,0),b.k0s()()),2&e){const e=b.XpG(2);b.Y8G("ngIf",e.autoLoginTimeBetweenRequests),b.R7$(5),b.vxM(5,e.lastAutoLoginTime&&e.lastAutoLoginTime>0?5:6)}}function CoreSettingsDevPage_ng_container_47_ion_item_24_Template(e,t){1&e&&(b.j41(0,"ion-item")(1,"ion-label"),b.EFF(2,"There are no features disabled"),b.k0s()())}function CoreSettingsDevPage_ng_container_47_ion_item_25_Template(e,t){if(1&e&&(b.j41(0,"ion-item",4)(1,"ion-label")(2,"p",6),b.EFF(3),b.k0s()()()),2&e){const e=t.$implicit;b.R7$(3),b.JRh(e)}}function CoreSettingsDevPage_ng_container_47_ion_item_30_Template(e,t){1&e&&(b.j41(0,"ion-item")(1,"ion-label"),b.EFF(2,"There are no site plugins installed"),b.k0s()())}function CoreSettingsDevPage_ng_container_47_ion_item_31_Template(e,t){if(1&e&&(b.j41(0,"ion-item",4)(1,"ion-label")(2,"p",6),b.EFF(3),b.k0s(),b.j41(4,"p"),b.EFF(5),b.k0s()()()),2&e){const e=t.$implicit;b.R7$(3),b.Lme("",e.addon," (",e.component,")"),b.R7$(2),b.JRh(e.version)}}function CoreSettingsDevPage_ng_container_47_Template(e,t){if(1&e&&(b.qex(0),b.j41(1,"ion-item",4)(2,"ion-label")(3,"p",6),b.EFF(4,"WebService token"),b.k0s(),b.j41(5,"p"),b.EFF(6),b.k0s()()(),b.j41(7,"ion-item",4)(8,"ion-label")(9,"p",6),b.EFF(10,"Private token"),b.k0s(),b.DNE(11,CoreSettingsDevPage_ng_container_47_Conditional_11_Template,2,1,"p")(12,CoreSettingsDevPage_ng_container_47_Conditional_12_Template,2,0),b.k0s()(),b.j41(13,"ion-item",4)(14,"ion-label")(15,"p",6),b.EFF(16,"Files access key"),b.k0s(),b.DNE(17,CoreSettingsDevPage_ng_container_47_Conditional_17_Template,2,1,"p")(18,CoreSettingsDevPage_ng_container_47_Conditional_18_Template,2,0),b.k0s()(),b.DNE(19,CoreSettingsDevPage_ng_container_47_Conditional_19_Template,7,2),b.j41(20,"ion-item-divider")(21,"ion-label")(22,"h2"),b.EFF(23,"Disabled features"),b.k0s()()(),b.DNE(24,CoreSettingsDevPage_ng_container_47_ion_item_24_Template,3,0,"ion-item",8)(25,CoreSettingsDevPage_ng_container_47_ion_item_25_Template,4,1,"ion-item",19),b.j41(26,"ion-item-divider")(27,"ion-label")(28,"h2"),b.EFF(29,"Site plugins"),b.k0s()()(),b.DNE(30,CoreSettingsDevPage_ng_container_47_ion_item_30_Template,3,0,"ion-item",8)(31,CoreSettingsDevPage_ng_container_47_ion_item_31_Template,6,3,"ion-item",19),b.bVm()),2&e){const e=b.XpG();b.R7$(6),b.JRh(e.token),b.R7$(5),b.vxM(11,e.privateToken?11:12),b.R7$(6),b.vxM(17,e.filesAccessKey?17:18),b.R7$(2),b.vxM(19,e.privateToken?19:-1),b.R7$(5),b.Y8G("ngIf",0===e.disabledFeatures.length),b.R7$(),b.Y8G("ngForOf",e.disabledFeatures),b.R7$(5),b.Y8G("ngIf",0===e.sitePlugins.length),b.R7$(),b.Y8G("ngForOf",e.sitePlugins)}}let j=(()=>{var e;class CoreSettingsDevPage{constructor(){this.rtl=!1,this.forceSafeAreaMargins=!1,this.direction="ltr",this.alwaysShowLoginForm=!1,this.remoteStyles=!0,this.remoteStylesCount=0,this.pluginStyles=!0,this.pluginStylesCount=0,this.sitePlugins=[],this.userToursEnabled=!0,this.stagingSitesCount=0,this.disabledFeatures=[]}ngOnInit(){var e=this;return(0,i.A)((function*(){var t,i;e.rtl=d.CorePlatform.isRTL,e.RTLChanged(),e.forceSafeAreaMargins=document.documentElement.classList.contains("force-safe-area-margins"),e.safeAreaChanged();const r=m.CoreSites.getCurrentSite();if(e.siteId=null==r?void 0:r.getId(),e.stagingSitesCount=o.CoreConstants.CONFIG.sites.filter((e=>e.staging)).length,e.stagingSitesCount&&(e.enableStagingSites=yield s.CoreSettingsHelper.hasEnabledStagingSites(),e.previousEnableStagingSites=e.enableStagingSites),e.alwaysShowLoginForm=Boolean(yield g.CoreConfig.get(a.Vu,0)),!r)return;e.remoteStyles=!1,e.remoteStylesCount=0,e.pluginStyles=!1,e.pluginStylesCount=0,e.userToursEnabled=!l.E.isDisabled();const _=r.getPrivateToken(),c=r.getFilesAccessKey();e.token=`...${r.getToken().slice(-3)}`,e.privateToken=_&&`...${_.slice(-3)}`,e.filesAccessKey=c&&`...${c.slice(-3)}`,e.autoLoginTimeBetweenRequests=yield r.getAutoLoginMinTimeBetweenRequests(),e.lastAutoLoginTime=r.getLastAutoLoginTime(),document.head.querySelectorAll("style").forEach((t=>{e.siteId&&t.id.endsWith(e.siteId)&&(t.innerHTML.length>0&&e.remoteStylesCount++,e.remoteStyles=e.remoteStyles||"disabled"!=t.getAttribute("media")),t.id.startsWith("siteplugin-")&&(t.innerHTML.length>0&&e.pluginStylesCount++,e.pluginStyles=e.pluginStyles||"disabled"!=t.getAttribute("media"))}));const{CoreSitePlugins:u}=yield Promise.resolve().then(n.bind(n,32832));e.sitePlugins=u.getCurrentSitePluginList().map((e=>({addon:e.addon,component:e.component,version:e.version})));const p=null===(t=yield r.getPublicConfig())||void 0===t?void 0:t.tool_mobile_disabledfeatures;e.disabledFeatures=null!==(i=null==p?void 0:p.split(",").filter((e=>e.trim().length>0)))&&void 0!==i?i:[]}))()}RTLChanged(){this.direction=this.rtl?"rtl":"ltr",document.dir=this.direction}safeAreaChanged(){document.documentElement.classList.toggle("force-safe-area-margins",this.forceSafeAreaMargins)}alwaysShowLoginFormChanged(){var e=this;return(0,i.A)((function*(){const t=Number(e.alwaysShowLoginForm);yield g.CoreConfig.set(a.Vu,t),_.z.trigger(a.g,{value:t})}))()}remoteStylesChanged(){document.head.querySelectorAll("style").forEach((e=>{this.siteId&&e.id.endsWith(this.siteId)&&(this.remoteStyles?e.removeAttribute("media"):e.setAttribute("media","disabled"))}))}pluginStylesChanged(){document.head.querySelectorAll("style").forEach((e=>{e.id.startsWith("siteplugin-")&&(this.pluginStyles?e.removeAttribute("media"):e.setAttribute("media","disabled"))}))}openErrorLog(){u.CoreNavigator.navigate("error-log")}copyInfo(){C.Ni.copyToClipboard(JSON.stringify({disabledFeatures:this.disabledFeatures,sitePlugins:this.sitePlugins,autoLoginTimeBetweenRequests:this.autoLoginTimeBetweenRequests,lastAutoLoginTime:this.lastAutoLoginTime}))}resetUserTours(){return(0,i.A)((function*(){yield l.E.resetTours(),yield g.CoreConfig.delete(a.n5),yield g.CoreConfig.delete(a.wd),p.CoreToasts.show({message:"User tours have been reseted"})}))()}invalidateCaches(){return(0,i.A)((function*(){(yield h.CoreLoadings.showOperationModals("Invalidating caches",!1,(0,i.A)((function*(){return yield r.Z.invalidate(),!0}))))&&(yield p.CoreToasts.show({message:"Caches invalidated",duration:p.ToastDuration.LONG}))}))()}clearFileStorage(){return(0,i.A)((function*(){const e=yield m.CoreSites.getSitesIds();yield c.CoreFile.clearDeletedSitesFolder(e),yield c.CoreFile.clearTmpFolder(),p.CoreToasts.show({message:"File storage cleared"})}))()}setEnabledStagingSites(e){var t=this;return(0,i.A)((function*(){if(t.enableStagingSites!==t.previousEnableStagingSites)try{yield s.CoreSettingsHelper.setEnabledStagingSites(e),t.previousEnableStagingSites=e}catch(n){t.enableStagingSites=!e,S.CoreAlerts.showError(n)}}))()}}return(e=CoreSettingsDevPage).ɵfac=function CoreSettingsDevPage_Factory(t){return new(t||e)},e.ɵcmp=b.VBU({type:e,selectors:[["page-core-app-settings-dev"]],standalone:!0,features:[b.aNF],decls:48,vars:16,consts:[["slot","start"],[3,"text"],["slot","end",4,"ngIf"],[1,"list-item-limited-width"],[1,"ion-text-wrap"],[3,"ngModelChange","ionChange","ngModel"],[1,"item-heading"],["class","ion-text-wrap",4,"ngIf"],[4,"ngIf"],["aria-label","Invalidate caches","fill","clear","slot","end",3,"click"],["slot","icon-only","aria-hidden","true","name","fas-rotate-right"],["button","",1,"ion-text-wrap",3,"click","detail"],["aria-label","Clear File Storage","fill","clear","slot","end",3,"click"],["slot","icon-only","aria-hidden","true","name","fas-broom"],["slot","end"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-clipboard","aria-hidden","true"],["aria-label","Reset user tours","fill","clear","slot","end",3,"click"],["slot","icon-only","aria-hidden","true","name","fas-repeat"],["class","ion-text-wrap",4,"ngFor","ngForOf"],[1,"core-text-sm"]],template:function CoreSettingsDevPage_Template(e,t){1&e&&(b.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),b.nrm(3,"ion-back-button",1),b.nI1(4,"translate"),b.k0s(),b.j41(5,"ion-title")(6,"h1"),b.EFF(7),b.nI1(8,"translate"),b.k0s()(),b.DNE(9,CoreSettingsDevPage_ion_buttons_9_Template,4,3,"ion-buttons",2),b.k0s()(),b.j41(10,"ion-content")(11,"ion-list",3)(12,"ion-item",4)(13,"ion-toggle",5),b.mxI("ngModelChange",(function CoreSettingsDevPage_Template_ion_toggle_ngModelChange_13_listener(e){return b.DH7(t.rtl,e)||(t.rtl=e),e})),b.bIt("ionChange",(function CoreSettingsDevPage_Template_ion_toggle_ionChange_13_listener(){return t.RTLChanged()})),b.j41(14,"p",6),b.EFF(15,"Change text direction"),b.k0s(),b.j41(16,"p"),b.EFF(17),b.k0s()()(),b.j41(18,"ion-item",4)(19,"ion-toggle",5),b.mxI("ngModelChange",(function CoreSettingsDevPage_Template_ion_toggle_ngModelChange_19_listener(e){return b.DH7(t.forceSafeAreaMargins,e)||(t.forceSafeAreaMargins=e),e})),b.bIt("ionChange",(function CoreSettingsDevPage_Template_ion_toggle_ionChange_19_listener(){return t.safeAreaChanged()})),b.j41(20,"p",6),b.EFF(21,"Force safe area margins"),b.k0s()()(),b.DNE(22,CoreSettingsDevPage_ion_item_22_Template,6,2,"ion-item",7),b.j41(23,"ion-item",4)(24,"ion-toggle",5),b.mxI("ngModelChange",(function CoreSettingsDevPage_Template_ion_toggle_ngModelChange_24_listener(e){return b.DH7(t.alwaysShowLoginForm,e)||(t.alwaysShowLoginForm=e),e})),b.bIt("ionChange",(function CoreSettingsDevPage_Template_ion_toggle_ionChange_24_listener(){return t.alwaysShowLoginFormChanged()})),b.j41(25,"p",6),b.EFF(26,"Always show login form"),b.k0s()()(),b.DNE(27,CoreSettingsDevPage_ng_container_27_Template,13,4,"ng-container",8)(28,CoreSettingsDevPage_ion_item_28_Template,6,0,"ion-item",7),b.j41(29,"ion-item",4)(30,"ion-label")(31,"p",6),b.EFF(32,"Invalidate caches"),b.k0s()(),b.j41(33,"ion-button",9),b.bIt("click",(function CoreSettingsDevPage_Template_ion_button_click_33_listener(){return t.invalidateCaches()})),b.nrm(34,"ion-icon",10),b.k0s()(),b.j41(35,"ion-item",11),b.bIt("click",(function CoreSettingsDevPage_Template_ion_item_click_35_listener(){return t.openErrorLog()})),b.j41(36,"ion-label")(37,"p",6),b.EFF(38,"Error log"),b.k0s()()(),b.j41(39,"ion-item",4)(40,"ion-label")(41,"p",6),b.EFF(42,"Clean file storage"),b.k0s(),b.j41(43,"p"),b.EFF(44,"Clear deleted sites from file storage and temp folder"),b.k0s()(),b.j41(45,"ion-button",12),b.bIt("click",(function CoreSettingsDevPage_Template_ion_button_click_45_listener(){return t.clearFileStorage()})),b.nrm(46,"ion-icon",13),b.k0s()(),b.DNE(47,CoreSettingsDevPage_ng_container_47_Template,32,8,"ng-container",8),b.k0s()()),2&e&&(b.R7$(3),b.Y8G("text",b.bMT(4,12,"core.back")),b.R7$(4),b.JRh(b.bMT(8,14,"core.settings.developeroptions")),b.R7$(2),b.Y8G("ngIf",t.siteId),b.R7$(4),b.R50("ngModel",t.rtl),b.R7$(4),b.JRh(t.direction),b.R7$(2),b.R50("ngModel",t.forceSafeAreaMargins),b.R7$(3),b.Y8G("ngIf",t.stagingSitesCount&&void 0!==t.enableStagingSites),b.R7$(2),b.R50("ngModel",t.alwaysShowLoginForm),b.R7$(3),b.Y8G("ngIf",t.siteId),b.R7$(),b.Y8G("ngIf",t.userToursEnabled),b.R7$(7),b.Y8G("detail",!0),b.R7$(12),b.Y8G("ngIf",t.siteId))},dependencies:[f.n,v.Sq,v.bT,F.BC,F.vS,T.In,T.Jm,T.QW,T.W9,T.eU,T.iq,T.uz,T.Dg,T.he,T.nf,T.JI,T.BC,T.BY,T.ai,T.hB,T.el,D.t,y.i,k.T,E.D9,P.S,R.A],encapsulation:2}),CoreSettingsDevPage})()}}]);