"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[45393],{45393:(n,e,o)=>{o.r(e),o.d(e,{AddonCalendarFilterComponent:()=>M});var t=o(58364),i=o(79555),r=o(49882),a=o(83219),d=o(86654),l=o(99234),s=o(52749),c=o(54438),_=o(60177),C=o(89417),m=o(2910),p=o(4060),g=o(86198),u=o(58197),f=o(88246),h=o(43570),v=o(73955);const _forTrack0=(n,e)=>e.id,_c0=n=>[n];function AddonCalendarFilterComponent_For_9_Template(n,e){if(1&n){const n=c.RV6();c.j41(0,"ion-item",5),c.nrm(1,"ion-icon",6),c.j41(2,"ion-toggle",7),c.mxI("ngModelChange",(function AddonCalendarFilterComponent_For_9_Template_ion_toggle_ngModelChange_2_listener(e){const o=c.eBV(n).$implicit,t=c.XpG();return c.DH7(t.filter[o],e)||(t.filter[o]=e),c.Njj(e)})),c.bIt("ionChange",(function AddonCalendarFilterComponent_For_9_Template_ion_toggle_ionChange_2_listener(){c.eBV(n);const e=c.XpG();return c.Njj(e.onChange())})),c.EFF(3),c.nI1(4,"translate"),c.k0s()()}if(2&n){const n=e.$implicit,o=c.XpG();c.Y8G("ngClass",c.eq3(6,_c0,"addon-calendar-eventtype-"+n)),c.R7$(),c.Y8G("name",o.typeIcons[n]),c.R7$(),c.R50("ngModel",o.filter[n]),c.R7$(),c.SpI(" ",c.bMT(4,4,"addon.calendar."+n+"events")," ")}}function AddonCalendarFilterComponent_Conditional_10_For_3_Conditional_2_Template(n,e){if(1&n&&c.nrm(0,"core-format-text",10),2&n){const n=c.XpG().$implicit;c.Y8G("text",n.fullname)("filter",!1)}}function AddonCalendarFilterComponent_Conditional_10_For_3_Conditional_3_Template(n,e){if(1&n&&c.nrm(0,"core-format-text",10),2&n){const n=c.XpG().$implicit;c.Y8G("text",n.shortname)("filter",!1)}}function AddonCalendarFilterComponent_Conditional_10_For_3_Template(n,e){if(1&n&&(c.j41(0,"ion-item",8)(1,"ion-radio",9),c.DNE(2,AddonCalendarFilterComponent_Conditional_10_For_3_Conditional_2_Template,1,2,"core-format-text",10)(3,AddonCalendarFilterComponent_Conditional_10_For_3_Conditional_3_Template,1,2),c.k0s()()),2&n){const n=e.$implicit,o=c.XpG(2);c.R7$(),c.Y8G("value",n.id),c.R7$(),c.vxM(2,o.showFullName?2:3)}}function AddonCalendarFilterComponent_Conditional_10_Template(n,e){if(1&n){const n=c.RV6();c.nrm(0,"core-spacer"),c.j41(1,"ion-radio-group",7),c.mxI("ngModelChange",(function AddonCalendarFilterComponent_Conditional_10_Template_ion_radio_group_ngModelChange_1_listener(e){c.eBV(n);const o=c.XpG();return c.DH7(o.courseId,e)||(o.courseId=e),c.Njj(e)})),c.bIt("ionChange",(function AddonCalendarFilterComponent_Conditional_10_Template_ion_radio_group_ionChange_1_listener(){c.eBV(n);const e=c.XpG();return c.Njj(e.onChange())})),c.Z7z(2,AddonCalendarFilterComponent_Conditional_10_For_3_Template,4,2,"ion-item",8,_forTrack0),c.k0s()}if(2&n){const n=c.XpG();c.R7$(),c.R50("ngModel",n.courseId),c.R7$(),c.Dyx(n.sortedCourses)}}let M=(()=>{var n;class AddonCalendarFilterComponent{constructor(){this.courses=[],this.filter={filtered:!1,courseId:void 0,categoryId:void 0,course:!0,group:!0,site:!0,user:!0,category:!0},this.courseId=-1,this.typeIcons=[],this.types=[],this.sortedCourses=[],this.showFullName=!1,t.T.enumKeys(l.rz).forEach((n=>{const e=l.rz[n];this.typeIcons[e]=l.DT[n],this.types.push(e)}))}ngOnInit(){var n;this.showFullName=!(null===(n=s.CoreSites.getCurrentSite())||void 0===n||!n.isVersionGreaterEqualThan("4.5")),this.courseId=this.filter.courseId||a.ALL_COURSES_ID,this.sortedCourses=Array.from(this.courses).sort(((n,e)=>{var o,t,i,r;return n.id===a.ALL_COURSES_ID?-1:e.id===a.ALL_COURSES_ID?1:(null!==(o=null===(t=n.shortname)||void 0===t?void 0:t.toLowerCase())&&void 0!==o?o:"").localeCompare(null!==(i=null===(r=e.shortname)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"")}))}onChange(){if(this.courseId>0){const n=this.courses.find((n=>this.courseId==n.id));this.filter.courseId=null==n?void 0:n.id,this.filter.categoryId=null==n?void 0:n.categoryid}else this.filter.courseId=void 0,this.filter.categoryId=void 0;this.filter.filtered=!!this.filter.courseId||this.types.some((n=>!this.filter[n])),r.z.trigger(l.Jj,this.filter)}closeModal(){i.W3.dismiss()}}return(n=AddonCalendarFilterComponent).ɵfac=function AddonCalendarFilterComponent_Factory(e){return new(e||n)},n.ɵcmp=c.VBU({type:n,selectors:[["addon-calendar-filter"]],inputs:{courses:"courses",filter:"filter"},standalone:!0,features:[c.aNF],decls:11,vars:5,consts:[[1,"no-title"],["slot","end"],["fill","clear",3,"click","ariaLabel"],["name","fas-xmark","slot","icon-only","aria-hidden","true"],[3,"fullscreen"],[1,"addon-calendar-event",3,"ngClass"],["slot","start","aria-hidden","true",3,"name"],[3,"ngModelChange","ionChange","ngModel"],[1,"ion-text-wrap"],[3,"value"],[3,"text","filter"]],template:function AddonCalendarFilterComponent_Template(n,e){1&n&&(c.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),c.nI1(4,"translate"),c.bIt("click",(function AddonCalendarFilterComponent_Template_ion_button_click_3_listener(){return e.closeModal()})),c.nrm(5,"ion-icon",3),c.k0s()()()(),c.j41(6,"ion-content",4)(7,"ion-list"),c.Z7z(8,AddonCalendarFilterComponent_For_9_Template,5,8,"ion-item",5,c.fX1),c.DNE(10,AddonCalendarFilterComponent_Conditional_10_Template,4,1),c.k0s()()),2&n&&(c.R7$(3),c.Y8G("ariaLabel",c.bMT(4,3,"core.close")),c.R7$(3),c.Y8G("fullscreen",!0),c.R7$(2),c.Dyx(e.types),c.R7$(2),c.vxM(10,e.filter.course||e.filter.category||e.filter.group?10:-1))},dependencies:[d.n,_.YU,C.BC,C.vS,m.Jm,m.QW,m.W9,m.eU,m.iq,m.uz,m.nf,m.KO,m.f0,m.BY,m.ai,m.hB,m.Je,p.f,g.t,u.B,f.i,h.T,v.D9],styles:["[_nghost-%COMP%]{--addon-calendar-blank-day-background-color: var(--light)}[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{color:#fff;border-radius:50%;padding:.7rem;--margin-vertical: 12px;--margin-end: 12px;margin-top:var(--margin-vertical);margin-bottom:var(--margin-vertical);margin-inline-end:var(--margin-end)}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-category[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#8e24aa}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-course[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#ca3120}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-group[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#f0ad4e}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-user[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#0f6cbf}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-site[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#10846c}","[_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{margin-inline-end:8px}[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{--margin-vertical: 8px;--margin-end: 8px;padding:8px;font-size:var(--mdl-typography-icon-fontSize-sm)}"]}),AddonCalendarFilterComponent})()}}]);