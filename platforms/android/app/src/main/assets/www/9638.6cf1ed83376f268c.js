"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9638],{9638:(o,n,e)=>{e.r(n),e.d(n,{CoreCourseModuleManualCompletionComponent:()=>d});var t=e(10467),i=e(86654),a=e(54438),l=e(94247),c=e(98870),r=e(79555),_=e(49882),u=e(60177),m=e(2910),p=e(86198),s=e(43570),C=e(73955);function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_1_ion_icon_4_Template(o,n){1&o&&(a.nrm(0,"ion-icon",6),a.nI1(1,"translate")),2&o&&a.BMQ("aria-label",a.bMT(1,1,"core.course.manualcompletionnotsynced"))}function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_1_Template(o,n){if(1&o){const o=a.RV6();a.j41(0,"ion-button",3),a.bIt("click",(function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_1_Template_ion_button_click_0_listener(n){a.eBV(o);const e=a.XpG(3);return a.Njj(e.completionClicked(n))})),a.nrm(1,"ion-icon",4),a.EFF(2),a.nI1(3,"translate"),a.DNE(4,CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_1_ion_icon_4_Template,2,3,"ion-icon",5),a.k0s()}if(2&o){const o=a.XpG(3);a.Y8G("ariaLabel",o.accessibleDescription),a.R7$(2),a.SpI(" ",a.bMT(3,3,"core.course.completion_manual:done")," "),a.R7$(2),a.Y8G("ngIf",null==o.completion?null:o.completion.offline)}}function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_2_ion_icon_3_Template(o,n){1&o&&(a.nrm(0,"ion-icon",6),a.nI1(1,"translate")),2&o&&a.BMQ("aria-label",a.bMT(1,1,"core.course.manualcompletionnotsynced"))}function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_2_Template(o,n){if(1&o){const o=a.RV6();a.j41(0,"ion-button",7),a.bIt("click",(function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_2_Template_ion_button_click_0_listener(n){a.eBV(o);const e=a.XpG(3);return a.Njj(e.completionClicked(n))})),a.EFF(1),a.nI1(2,"translate"),a.DNE(3,CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_2_ion_icon_3_Template,2,3,"ion-icon",5),a.k0s()}if(2&o){const o=a.XpG(3);a.Y8G("ariaLabel",o.accessibleDescription),a.R7$(),a.SpI(" ",a.bMT(2,3,"core.course.completion_manual:markdone")," "),a.R7$(2),a.Y8G("ngIf",null==o.completion?null:o.completion.offline)}}function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_Template(o,n){if(1&o&&(a.qex(0),a.DNE(1,CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_1_Template,5,5,"ion-button",1)(2,CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_ion_button_2_Template,4,5,"ion-button",2),a.bVm()),2&o){const o=a.XpG(2);a.R7$(),a.Y8G("ngIf",o.completion.state),a.R7$(),a.Y8G("ngIf",!o.completion.state)}}function CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_2_Template(o,n){1&o&&(a.qex(0),a.j41(1,"ion-button",8),a.EFF(2),a.nI1(3,"translate"),a.k0s(),a.bVm()),2&o&&(a.R7$(2),a.SpI(" ",a.bMT(3,1,"core.course.completion_manual:markdone")," "))}function CoreCourseModuleManualCompletionComponent_ng_container_0_Template(o,n){if(1&o&&(a.qex(0),a.DNE(1,CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_1_Template,3,2,"ng-container",0)(2,CoreCourseModuleManualCompletionComponent_ng_container_0_ng_container_2_Template,4,3,"ng-container",0),a.bVm()),2&o){const o=a.XpG();a.R7$(),a.Y8G("ngIf",o.completion.istrackeduser),a.R7$(),a.Y8G("ngIf",!o.completion.istrackeduser)}}let d=(()=>{var o;class CoreCourseModuleManualCompletionComponent{constructor(){this.completionChanged=new a.bkB,this.accessibleDescription=null}ngOnInit(){this.completionObserver=_.z.on(_.z.MANUAL_COMPLETION_CHANGED,(o=>{this.completion&&this.completion.cmid==o.completion.cmid&&(this.completion=o.completion,this.calculateData(),this.completionChanged.emit(this.completion))}))}ngOnChanges(o){o.completion&&this.completion&&this.calculateData()}calculateData(){var o=this;return(0,t.A)((function*(){if(o.completion&&!o.completion.isautomatic)if(o.completion.overrideby){const n=yield c.CoreUser.getUserFullNameWithDefault(o.completion.overrideby,o.completion.courseId);o.accessibleDescription=r.HT.instant(`core.course.${o.completion.state?"completion_setby:manual:done":"completion_setby:manual:markdone"}`,{$a:{activityname:o.moduleName,setby:n}})}else{o.accessibleDescription=r.HT.instant(`core.course.${o.completion.state?"completion_manual:aria:done":"completion_manual:aria:markdone"}`,{$a:o.moduleName})}}))()}completionClicked(o){var n=this;return(0,t.A)((function*(){n.completion&&(o.stopPropagation(),o.preventDefault(),yield l.CoreCourseHelper.changeManualCompletion(n.completion),_.z.trigger(_.z.MANUAL_COMPLETION_CHANGED,{completion:n.completion}))}))()}ngOnDestroy(){var o;null===(o=this.completionObserver)||void 0===o||o.off()}}return(o=CoreCourseModuleManualCompletionComponent).ɵfac=function CoreCourseModuleManualCompletionComponent_Factory(n){return new(n||o)},o.ɵcmp=a.VBU({type:o,selectors:[["core-course-module-manual-completion"]],inputs:{completion:"completion",moduleName:"moduleName"},outputs:{completionChanged:"completionChanged"},standalone:!0,features:[a.OA$,a.aNF],decls:1,vars:1,consts:[[4,"ngIf"],["color","success","class","ion-text-wrap chip",3,"ariaLabel","click",4,"ngIf"],["fill","outline","class","ion-text-wrap chip",3,"ariaLabel","click",4,"ngIf"],["color","success",1,"ion-text-wrap","chip",3,"click","ariaLabel"],["name","fas-check","slot","start","aria-hidden","true"],["name","fas-arrows-rotate","slot","end",4,"ngIf"],["name","fas-arrows-rotate","slot","end"],["fill","outline",1,"ion-text-wrap","chip",3,"click","ariaLabel"],["disabled","true","fill","outline",1,"ion-text-wrap","chip"]],template:function CoreCourseModuleManualCompletionComponent_Template(o,n){1&o&&a.DNE(0,CoreCourseModuleManualCompletionComponent_ng_container_0_Template,3,2,"ng-container",0),2&o&&a.Y8G("ngIf",n.completion&&!n.completion.isautomatic)},dependencies:[i.n,u.bT,m.Jm,m.iq,p.t,s.T,C.D9],encapsulation:2}),CoreCourseModuleManualCompletionComponent})()}}]);