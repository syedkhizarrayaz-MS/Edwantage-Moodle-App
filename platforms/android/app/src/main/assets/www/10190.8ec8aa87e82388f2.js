"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[10190,69006],{10190:(e,n,o)=>{o.r(n),o.d(n,{AddonModLessonIndexComponent:()=>q});var t=o(10467),s=o(74431),_=o(73564),a=o(69006),d=o(51024),i=o(98870),r=o(15221),l=o(15324),c=o(63153),p=o(75383),m=o(55554),u=o(49882),g=o(15712),f=o(21509),I=o(2907),h=o(35661),v=o(24742),b=o(75629),T=o(79555),C=o(55101),R=o(25572),w=o(30864),M=o(6736),A=o(86654),x=o(54438),L=o(2910),k=o(60177),y=o(89417),G=o(69502),$=o(17388),E=o(16986),F=o(97818),j=o(64422),N=o(13988),S=o(49234),Y=o(72597),D=o(16658),V=o(69901),X=o(86198),O=o(58197),P=o(66731),J=o(43570),U=o(73955);const B=["passwordForm"],_c1=e=>({"ion-text-center":e}),_c2=e=>({$a:e}),_c3=e=>({"ion-margin-bottom":e});function AddonModLessonIndexComponent_Conditional_1_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"ion-button",11),x.nI1(1,"translate"),x.bIt("click",(function AddonModLessonIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){x.eBV(e);const n=x.XpG();return x.Njj(n.openModuleSummary())})),x.nrm(2,"ion-icon",12),x.k0s()}2&e&&x.Y8G("ariaLabel",x.bMT(1,1,"core.info"))}function AddonModLessonIndexComponent_Conditional_2_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"core-context-menu")(1,"core-context-menu-item",13),x.nI1(2,"translate"),x.bIt("action",(function AddonModLessonIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){x.eBV(e);const n=x.XpG();return x.Njj(n.openModuleSummary())})),x.k0s()()}2&e&&(x.R7$(),x.Y8G("priority",5e3)("content",x.bMT(2,2,"core.info")))}function AddonModLessonIndexComponent_ng_template_8_ion_card_0_Template(e,n){if(1&e&&(x.j41(0,"ion-card",17)(1,"ion-item"),x.nrm(2,"ion-icon",18)(3,"ion-label",19),x.k0s()()),2&e){const e=x.XpG(2);x.R7$(3),x.Y8G("innerHTML",e.preventReasons[0].message,x.npT)}}function AddonModLessonIndexComponent_ng_template_8_ion_card_1_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"ion-card")(1,"form",20,1),x.bIt("ngSubmit",(function AddonModLessonIndexComponent_ng_template_8_ion_card_1_Template_form_ngSubmit_1_listener(n){x.eBV(e);const o=x.sdS(5),t=x.XpG(2);return x.Njj(t.submitPassword(n,o))})),x.j41(3,"ion-item",21)(4,"ion-input",22,2),x.nI1(6,"translate"),x.nI1(7,"translate"),x.nrm(8,"ion-input-password-toggle",23),x.k0s()(),x.j41(9,"ion-button",24),x.EFF(10),x.nI1(11,"translate"),x.k0s(),x.nrm(12,"input",25),x.k0s()()}2&e&&(x.R7$(4),x.FS9("placeholder",x.bMT(6,4,"core.login.password")),x.Y8G("clearOnEdit",!1)("label",x.bMT(7,6,"addon.mod_lesson.enterpassword")),x.R7$(6),x.SpI(" ",x.bMT(11,8,"addon.mod_lesson.continue")," "))}function AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_ng_container_1_Template(e,n){1&e&&x.eu8(0)}function AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_Template(e,n){if(1&e&&(x.j41(0,"ion-list"),x.DNE(1,AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_ng_container_1_Template,1,0,"ng-container",26),x.k0s()),2&e){x.XpG(3);const e=x.sdS(12);x.R7$(),x.Y8G("ngTemplateOutlet",e)}}function AddonModLessonIndexComponent_ng_template_8_core_loading_2_Template(e,n){if(1&e&&(x.j41(0,"core-loading",5),x.DNE(1,AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_Template,2,1,"ion-list",15),x.k0s()),2&e){const e=x.XpG(2);x.Y8G("hideUntil",!e.showSpinner),x.R7$(),x.Y8G("ngIf",e.lesson&&!e.preventReasons.length||e.retakeToReview)}}function AddonModLessonIndexComponent_ng_template_8_Template(e,n){if(1&e&&x.DNE(0,AddonModLessonIndexComponent_ng_template_8_ion_card_0_Template,4,1,"ion-card",14)(1,AddonModLessonIndexComponent_ng_template_8_ion_card_1_Template,13,10,"ion-card",15)(2,AddonModLessonIndexComponent_ng_template_8_core_loading_2_Template,2,2,"core-loading",16),2&e){const e=x.XpG();x.Y8G("ngIf",e.lesson&&e.preventReasons.length),x.R7$(),x.Y8G("ngIf",e.askPassword),x.R7$(),x.Y8G("ngIf",e.canViewReports)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_2_Template(e,n){if(1&e&&(x.j41(0,"core-empty-box",31),x.nrm(1,"core-format-text",32),x.k0s()),2&e){const e=x.XpG(3);x.R7$(),x.Y8G("text",e.selectedGroupEmptyMessage)("contextInstanceId",e.courseId)("wsNotFiltered",!0)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_3_Template(e,n){1&e&&(x.nrm(0,"core-empty-box",33),x.nI1(1,"translate")),2&e&&x.Y8G("message",x.bMT(1,1,"addon.mod_lesson.nolessonattempts"))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_5_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e){const e=x.XpG(5);x.R7$(),x.SpI(" ",x.i5U(2,1,"core.percentagenumber",x.eq3(4,_c2,e.overview.avescore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_6_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_11_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e){const e=x.XpG(5);x.R7$(),x.SpI(" ",x.i5U(2,1,"core.percentagenumber",x.eq3(4,_c2,e.overview.highscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_12_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_17_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e){const e=x.XpG(5);x.R7$(),x.SpI(" ",x.i5U(2,1,"core.percentagenumber",x.eq3(4,_c2,e.overview.lowscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_18_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_Template(e,n){if(1&e&&(x.j41(0,"ion-row")(1,"ion-col",36)(2,"p",37),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_5_Template,3,6,"p",15)(6,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_6_Template,3,3,"p",15),x.k0s(),x.j41(7,"ion-col",36)(8,"p",37),x.EFF(9),x.nI1(10,"translate"),x.k0s(),x.DNE(11,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_11_Template,3,6,"p",15)(12,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_12_Template,3,3,"p",15),x.k0s(),x.j41(13,"ion-col",36)(14,"p",37),x.EFF(15),x.nI1(16,"translate"),x.k0s(),x.DNE(17,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_17_Template,3,6,"p",15)(18,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_18_Template,3,3,"p",15),x.k0s()()),2&e){const e=x.XpG(4);x.R7$(3),x.JRh(x.bMT(4,9,"addon.mod_lesson.averagescore")),x.R7$(2),x.Y8G("ngIf",e.overview.numofattempts>0),x.R7$(),x.Y8G("ngIf",e.overview.numofattempts<=0),x.R7$(3),x.JRh(x.bMT(10,11,"addon.mod_lesson.highscore")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.highscore),x.R7$(),x.Y8G("ngIf",null===e.overview.highscore),x.R7$(3),x.JRh(x.bMT(16,13,"addon.mod_lesson.lowscore")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.lowscore),x.R7$(),x.Y8G("ngIf",null===e.overview.lowscore)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_12_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&e){const e=x.XpG(4);x.R7$(),x.JRh(e.avetimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_13_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_lesson.notcompleted")," "))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_18_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&e){const e=x.XpG(4);x.R7$(),x.JRh(e.hightimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_19_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_24_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&e){const e=x.XpG(4);x.R7$(),x.JRh(e.lowtimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_25_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_4_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e){const e=x.XpG(5);x.R7$(),x.SpI(" ",x.i5U(2,1,"core.percentagenumber",x.eq3(4,_c2,e.overview.avescore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_5_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_Template(e,n){if(1&e&&(x.j41(0,"ion-col",36)(1,"p",37),x.EFF(2),x.nI1(3,"translate"),x.k0s(),x.DNE(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_4_Template,3,6,"p",15)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_5_Template,3,3,"p",15),x.k0s()),2&e){const e=x.XpG(4);x.R7$(2),x.JRh(x.bMT(3,3,"addon.mod_lesson.averagescore")),x.R7$(2),x.Y8G("ngIf",e.overview.numofattempts>0),x.R7$(),x.Y8G("ngIf",e.overview.numofattempts<=0)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_33_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&e){const e=x.XpG(4);x.R7$(),x.JRh(e.avetimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_34_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_lesson.notcompleted")," "))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_4_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e){const e=x.XpG(5);x.R7$(),x.SpI(" ",x.i5U(2,1,"core.percentagenumber",x.eq3(4,_c2,e.overview.highscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_5_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_Template(e,n){if(1&e&&(x.j41(0,"ion-col",36)(1,"p",37),x.EFF(2),x.nI1(3,"translate"),x.k0s(),x.DNE(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_4_Template,3,6,"p",15)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_5_Template,3,3,"p",15),x.k0s()),2&e){const e=x.XpG(4);x.R7$(2),x.JRh(x.bMT(3,3,"addon.mod_lesson.highscore")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.highscore),x.R7$(),x.Y8G("ngIf",null===e.overview.highscore)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_41_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&e){const e=x.XpG(4);x.R7$(),x.JRh(e.hightimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_42_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_4_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e){const e=x.XpG(5);x.R7$(),x.SpI(" ",x.i5U(2,1,"core.percentagenumber",x.eq3(4,_c2,e.overview.lowscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_5_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_Template(e,n){if(1&e&&(x.j41(0,"ion-col",36)(1,"p",37),x.EFF(2),x.nI1(3,"translate"),x.k0s(),x.DNE(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_4_Template,3,6,"p",15)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_5_Template,3,3,"p",15),x.k0s()),2&e){const e=x.XpG(4);x.R7$(2),x.JRh(x.bMT(3,3,"addon.mod_lesson.lowscore")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.lowscore),x.R7$(),x.Y8G("ngIf",null===e.overview.lowscore)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_49_Template(e,n){if(1&e&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&e){const e=x.XpG(4);x.R7$(),x.JRh(e.lowtimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_50_Template(e,n){1&e&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_Template(e,n){if(1&e&&(x.j41(0,"ion-card",34)(1,"ion-card-header",21)(2,"ion-card-title"),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.j41(5,"ion-grid",35),x.DNE(6,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_Template,19,15,"ion-row",15),x.j41(7,"ion-row")(8,"ion-col",36)(9,"p",37),x.EFF(10),x.nI1(11,"translate"),x.k0s(),x.DNE(12,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_12_Template,2,1,"p",15)(13,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_13_Template,3,3,"p",15),x.k0s(),x.j41(14,"ion-col",36)(15,"p",37),x.EFF(16),x.nI1(17,"translate"),x.k0s(),x.DNE(18,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_18_Template,2,1,"p",15)(19,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_19_Template,3,3,"p",15),x.k0s(),x.j41(20,"ion-col",36)(21,"p",37),x.EFF(22),x.nI1(23,"translate"),x.k0s(),x.DNE(24,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_24_Template,2,1,"p",15)(25,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_25_Template,3,3,"p",15),x.k0s()()(),x.j41(26,"ion-grid",38)(27,"ion-row"),x.DNE(28,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_Template,6,5,"ion-col",39),x.j41(29,"ion-col",40)(30,"p",37),x.EFF(31),x.nI1(32,"translate"),x.k0s(),x.DNE(33,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_33_Template,2,1,"p",15)(34,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_34_Template,3,3,"p",15),x.k0s()(),x.j41(35,"ion-row"),x.DNE(36,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_Template,6,5,"ion-col",39),x.j41(37,"ion-col",40)(38,"p",37),x.EFF(39),x.nI1(40,"translate"),x.k0s(),x.DNE(41,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_41_Template,2,1,"p",15)(42,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_42_Template,3,3,"p",15),x.k0s()(),x.j41(43,"ion-row"),x.DNE(44,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_Template,6,5,"ion-col",39),x.j41(45,"ion-col",40)(46,"p",37),x.EFF(47),x.nI1(48,"translate"),x.k0s(),x.DNE(49,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_49_Template,2,1,"p",15)(50,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_50_Template,3,3,"p",15),x.k0s()()()()),2&e){const e=x.XpG(3);x.R7$(3),x.JRh(x.bMT(4,26,"addon.mod_lesson.lessonstats")),x.R7$(3),x.Y8G("ngIf",e.overview.lessonscored),x.R7$(4),x.JRh(x.bMT(11,28,"addon.mod_lesson.averagetime")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.avetime&&e.overview.numofattempts),x.R7$(),x.Y8G("ngIf",null===e.overview.avetime||!e.overview.numofattempts),x.R7$(3),x.JRh(x.bMT(17,30,"addon.mod_lesson.hightime")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.hightime),x.R7$(),x.Y8G("ngIf",null===e.overview.hightime),x.R7$(3),x.JRh(x.bMT(23,32,"addon.mod_lesson.lowtime")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.lowtime),x.R7$(),x.Y8G("ngIf",null===e.overview.lowtime),x.R7$(3),x.Y8G("ngIf",e.overview.lessonscored),x.R7$(),x.Y8G("ngClass",x.eq3(40,_c1,e.overview.lessonscored)),x.R7$(2),x.JRh(x.bMT(32,34,"addon.mod_lesson.averagetime")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.avetime&&e.overview.numofattempts),x.R7$(),x.Y8G("ngIf",null===e.overview.avetime||!e.overview.numofattempts),x.R7$(2),x.Y8G("ngIf",e.overview.lessonscored),x.R7$(),x.Y8G("ngClass",x.eq3(42,_c1,e.overview.lessonscored)),x.R7$(2),x.JRh(x.bMT(40,36,"addon.mod_lesson.hightime")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.hightime),x.R7$(),x.Y8G("ngIf",null===e.overview.hightime),x.R7$(2),x.Y8G("ngIf",e.overview.lessonscored),x.R7$(),x.Y8G("ngClass",x.eq3(44,_c1,e.overview.lessonscored)),x.R7$(2),x.JRh(x.bMT(48,38,"addon.mod_lesson.lowtime")),x.R7$(2),x.Y8G("ngIf",null!==e.overview.lowtime),x.R7$(),x.Y8G("ngIf",null===e.overview.lowtime)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_ion_item_5_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"ion-item",42),x.bIt("click",(function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_ion_item_5_Template_ion_item_click_0_listener(){const n=x.eBV(e).$implicit,o=x.XpG(4);return x.Njj(o.openRetake(n.id))})),x.nrm(1,"core-user-avatar",43),x.j41(2,"ion-label")(3,"p",37),x.EFF(4),x.k0s(),x.nrm(5,"core-progress-bar",44),x.k0s()()}if(2&e){const e=n.$implicit,o=x.XpG(4);x.Y8G("detail",!0),x.R7$(),x.Y8G("user",e)("userId",e.id)("courseId",o.courseId),x.R7$(3),x.JRh(e.fullname),x.R7$(),x.Y8G("progress",e.bestgrade)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_Template(e,n){if(1&e&&(x.j41(0,"ion-card")(1,"ion-card-header",21)(2,"ion-card-title"),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.DNE(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_ion_item_5_Template,6,6,"ion-item",41),x.k0s()),2&e){const e=x.XpG(3);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_lesson.overview")),x.R7$(2),x.Y8G("ngForOf",e.overview.students)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"core-loading",5)(1,"core-group-selector",27),x.mxI("selectedChange",(function AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template_core_group_selector_selectedChange_1_listener(n){x.eBV(e);const o=x.XpG(2);return x.DH7(o.group,n)||(o.group=n),x.Njj(n)})),x.bIt("selectedChange",(function AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template_core_group_selector_selectedChange_1_listener(){x.eBV(e);const n=x.XpG(2);return x.Njj(n.setGroup(n.group))})),x.k0s(),x.DNE(2,AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_2_Template,2,3,"core-empty-box",28)(3,AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_3_Template,2,3,"core-empty-box",29)(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_Template,51,46,"ion-card",30)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_Template,6,4,"ion-card",15),x.k0s()}if(2&e){const e=x.XpG(2);x.Y8G("hideUntil",e.reportLoaded),x.R7$(),x.Y8G("groupInfo",e.groupInfo),x.R50("selected",e.group),x.Y8G("courseId",e.courseId),x.R7$(),x.Y8G("ngIf",e.lesson&&!e.overview&&e.selectedGroupEmptyMessage),x.R7$(),x.Y8G("ngIf",!e.overview&&!e.selectedGroupEmptyMessage),x.R7$(),x.Y8G("ngIf",e.overview),x.R7$(),x.Y8G("ngIf",e.overview)}}function AddonModLessonIndexComponent_core_tab_9_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"core-tab",8),x.nI1(1,"translate"),x.bIt("ionSelect",(function AddonModLessonIndexComponent_core_tab_9_Template_core_tab_ionSelect_0_listener(){x.eBV(e);const n=x.XpG();return x.Njj(n.reportsSelected())})),x.DNE(2,AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template,6,8,"ng-template"),x.k0s()}2&e&&x.Y8G("title",x.bMT(1,1,"addon.mod_lesson.reports"))}function AddonModLessonIndexComponent_div_10_div_1_ng_container_2_Template(e,n){1&e&&x.eu8(0)}function AddonModLessonIndexComponent_div_10_div_1_Template(e,n){if(1&e&&(x.j41(0,"div",48)(1,"core-loading",5),x.DNE(2,AddonModLessonIndexComponent_div_10_div_1_ng_container_2_Template,1,0,"ng-container",26),x.k0s()()),2&e){const e=x.XpG(2),n=x.sdS(12);x.R7$(),x.Y8G("hideUntil",!e.showSpinner),x.R7$(),x.Y8G("ngTemplateOutlet",n)}}function AddonModLessonIndexComponent_div_10_Template(e,n){if(1&e&&(x.j41(0,"div",45),x.DNE(1,AddonModLessonIndexComponent_div_10_div_1_Template,3,2,"div",46),x.nrm(2,"core-course-module-navigation",47),x.k0s()),2&e){const e=x.XpG();x.Y8G("ngClass",x.eq3(4,_c3,e.showSpinner)),x.R7$(),x.Y8G("ngIf",!e.canViewReports&&(e.lesson&&!e.preventReasons.length||e.retakeToReview)),x.R7$(),x.Y8G("courseId",e.courseId)("currentModuleId",e.module.id)}}function AddonModLessonIndexComponent_ng_template_11_ng_container_0_Template(e,n){if(1&e){const e=x.RV6();x.qex(0),x.j41(1,"ion-item",21)(2,"ion-label",49),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.j41(5,"ion-button",50),x.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_0_Template_ion_button_click_5_listener(){x.eBV(e);const n=x.XpG(2);return x.Njj(n.review())})),x.EFF(6),x.nI1(7,"translate"),x.k0s(),x.bVm()}2&e&&(x.R7$(3),x.SpI(" ",x.bMT(4,2,"addon.mod_lesson.retakefinishedinsync")," "),x.R7$(3),x.SpI(" ",x.bMT(7,4,"addon.mod_lesson.review")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"ion-item",21)(1,"ion-label"),x.nrm(2,"p",19),x.nI1(3,"translate"),x.j41(4,"ion-row")(5,"ion-col")(6,"ion-button",53),x.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template_ion_button_click_6_listener(){x.eBV(e);const n=x.XpG(3);return x.Njj(n.start(!1))})),x.EFF(7),x.nI1(8,"translate"),x.k0s()(),x.j41(9,"ion-col")(10,"ion-button",54),x.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template_ion_button_click_10_listener(){x.eBV(e);const n=x.XpG(3);return x.Njj(n.start(!0))})),x.EFF(11),x.nI1(12,"translate"),x.k0s()()()()()}2&e&&(x.R7$(2),x.Y8G("innerHTML",x.bMT(3,3,"addon.mod_lesson.youhaveseen"),x.npT),x.R7$(5),x.SpI(" ",x.bMT(8,5,"core.no")," "),x.R7$(4),x.SpI(" ",x.bMT(12,7,"core.yes")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_2_Template(e,n){if(1&e){const e=x.RV6();x.qex(0),x.j41(1,"ion-item",21),x.nrm(2,"ion-label",19),x.nI1(3,"translate"),x.k0s(),x.j41(4,"ion-button",50),x.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_2_Template_ion_button_click_4_listener(){x.eBV(e);const n=x.XpG(3);return x.Njj(n.start(!1))})),x.EFF(5),x.nI1(6,"translate"),x.k0s(),x.bVm()}2&e&&(x.R7$(2),x.Y8G("innerHTML",x.bMT(3,2,"addon.mod_lesson.leftduringtimed"),x.npT),x.R7$(3),x.SpI(" ",x.bMT(6,4,"addon.mod_lesson.continue")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_3_Template(e,n){1&e&&(x.j41(0,"ion-item",21),x.nrm(1,"ion-label",19),x.nI1(2,"translate"),x.k0s()),2&e&&(x.R7$(),x.Y8G("innerHTML",x.bMT(2,1,"addon.mod_lesson.leftduringtimednoretake"),x.npT))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_1_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"ion-button",50),x.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_1_Template_ion_button_click_0_listener(){x.eBV(e);const n=x.XpG(4);return x.Njj(n.start(!1))})),x.EFF(1),x.nI1(2,"translate"),x.k0s()}2&e&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"core.start")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_2_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"ion-button",56),x.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_2_Template_ion_button_click_0_listener(){x.eBV(e);const n=x.XpG(4);return x.Njj(n.start(!1))})),x.nrm(1,"ion-icon",57),x.EFF(2),x.nI1(3,"translate"),x.k0s()}2&e&&(x.R7$(2),x.SpI(" ",x.bMT(3,1,"addon.mod_lesson.preview")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_Template(e,n){if(1&e&&(x.qex(0),x.DNE(1,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_1_Template,3,3,"ion-button",52)(2,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_2_Template,4,3,"ion-button",55),x.bVm()),2&e){const e=x.XpG(3);x.R7$(),x.Y8G("ngIf",!e.canManage),x.R7$(),x.Y8G("ngIf",e.canManage)}}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_button_5_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"ion-button",50),x.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_button_5_Template_ion_button_click_0_listener(){x.eBV(e);const n=x.XpG(3);return x.Njj(n.start(!0))})),x.EFF(1),x.nI1(2,"translate"),x.k0s()}2&e&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_lesson.continue")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_Template(e,n){if(1&e&&(x.qex(0),x.DNE(1,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template,13,9,"ion-item",51)(2,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_2_Template,7,6,"ng-container",15)(3,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_3_Template,3,3,"ion-item",51)(4,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_Template,3,2,"ng-container",15)(5,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_button_5_Template,3,3,"ion-button",52),x.bVm()),2&e){const e=x.XpG(2);x.R7$(),x.Y8G("ngIf",e.leftDuringTimed&&!e.lesson.timelimit&&!e.finishedOffline),x.R7$(),x.Y8G("ngIf",e.leftDuringTimed&&e.lesson.timelimit&&e.lesson.retake&&!e.finishedOffline),x.R7$(),x.Y8G("ngIf",e.leftDuringTimed&&e.lesson.timelimit&&!e.lesson.retake),x.R7$(),x.Y8G("ngIf",!e.leftDuringTimed&&!e.finishedOffline),x.R7$(),x.Y8G("ngIf",e.finishedOffline)}}function AddonModLessonIndexComponent_ng_template_11_Template(e,n){if(1&e&&x.DNE(0,AddonModLessonIndexComponent_ng_template_11_ng_container_0_Template,8,6,"ng-container",15)(1,AddonModLessonIndexComponent_ng_template_11_ng_container_1_Template,6,5,"ng-container",15),2&e){const e=x.XpG();x.Y8G("ngIf",e.retakeToReview),x.R7$(),x.Y8G("ngIf",e.lesson&&!e.preventReasons.length)}}let q=(()=>{var e;class AddonModLessonIndexComponent extends a.y{constructor(e,n){super("AddonModLessonIndexComponent",e,n),this.content=e,this.group=0,this.component=C.tj,this.pluginName="lesson",this.preventReasons=[],this.syncEventName=C.EI,this.hasPlayed=!1,this.dataSent=!1}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,t.A)((function*(){_superprop_getNgOnInit().call(e),e.selectedTab="report"==e.action?1:0,yield e.loadContent(!1,!0)}))()}changeGroup(e){var n=this;return(0,t.A)((function*(){n.reportLoaded=!1;try{yield n.setGroup(e)}catch(e){R.CoreAlerts.showError(e,{default:"Error getting report."})}finally{n.reportLoaded=!0}}))()}fetchContent(e,n=!1,o=!1){var s=this;return(0,t.A)((function*(){let e=!0;s.askPassword=!1,s.lesson=yield f.N.getLesson(s.courseId,s.module.id),s.dataRetrieved.emit(s.lesson),s.description=s.lesson.intro,n&&(yield s.syncActivity(o)),s.accessInfo=yield f.N.getAccessInformation(s.lesson.id,{cmId:s.module.id}),s.canManage=s.accessInfo.canmanage,s.canViewReports=s.accessInfo.canviewreports,s.preventReasons=[];const t=[];if(f.N.isLessonOffline(s.lesson)&&(s.setStatusListener(),t.push(s.loadOfflineData())),s.accessInfo.preventaccessreasons.length){var _;let n=f.N.getPreventAccessReason(s.accessInfo,!1);if("passwordprotectedlesson"==(null===(_=n)||void 0===_?void 0:_.reason))try{const e=s.password?s.password:yield f.N.getStoredPassword(s.lesson.id);yield s.validatePassword(e),n=f.N.getPreventAccessReason(s.accessInfo,!0),n&&(s.preventReasons=[n])}catch{s.askPassword=!0,s.preventReasons=[n],e=!1}else s.preventReasons=[n],e=!1}1==s.selectedTab&&s.canViewReports&&t.push(s.fetchReportData()),yield Promise.all(t),e&&s.lessonReady()}))()}loadOfflineData(){var e=this;return(0,t.A)((function*(){if(!e.lesson||!e.accessInfo)return;const n=[],o={cmId:e.module.id};n.push(h._.hasDataToSync(e.lesson.id,e.accessInfo.attemptscount).then((n=>{e.hasOffline=n}))),n.push(h._.getRetakeFinishedInSync(e.lesson.id).then((n=>{n&&n.retake==e.accessInfo.attemptscount-1?e.retakeToReview=n:(e.retakeToReview=void 0,n&&h._.deleteRetakeFinishedInSync(e.lesson.id))}))),n.push(I.c.hasFinishedRetake(e.lesson.id).then((n=>{e.finishedOffline=n}))),n.push(f.N.getContentPagesViewedOnline(e.lesson.id,e.accessInfo.attemptscount,o)),n.push(f.N.getQuestionsAttemptsOnline(e.lesson.id,e.accessInfo.attemptscount,o)),yield Promise.all(n)}))()}fetchReportData(){var e=this;return(0,t.A)((function*(){if(e.module)try{e.groupInfo=yield r.CoreGroups.getActivityGroupInfo(e.module.id),yield e.setGroup(r.CoreGroups.validateGroupId(e.group,e.groupInfo))}finally{e.reportLoaded=!0}}))()}hasSyncSucceed(e){return(e.updated||this.dataSent)&&this.checkCompletion(),this.dataSent=!1,e.updated}ionViewDidEnter(){var e,n;super.ionViewDidEnter(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidEnter(),this.hasPlayed&&(this.hasPlayed=!1,null===(n=this.dataSentObserver)||void 0===n||n.off(),this.dataSentObserver=void 0,this.showLoadingAndRefresh(!0,!1))}ionViewDidLeave(){var e;super.ionViewDidLeave(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidLeave()}invalidateContent(){var e=this;return(0,t.A)((function*(){const n=[];n.push(f.N.invalidateLessonData(e.courseId)),e.lesson&&(n.push(f.N.invalidateAccessInformation(e.lesson.id)),n.push(f.N.invalidatePages(e.lesson.id)),n.push(f.N.invalidateLessonWithPassword(e.lesson.id)),n.push(f.N.invalidateTimers(e.lesson.id)),n.push(f.N.invalidateContentPagesViewed(e.lesson.id)),n.push(f.N.invalidateQuestionsAttempts(e.lesson.id)),n.push(f.N.invalidateRetakesOverview(e.lesson.id)),e.module&&n.push(r.CoreGroups.invalidateActivityGroupInfo(e.module.id))),yield Promise.all(n)}))()}isRefreshSyncNeeded(e){return!(!this.lesson||e.lessonId!=this.lesson.id)}lessonReady(){this.askPassword=!1,this.leftDuringTimed=this.hasOffline||f.N.leftDuringTimed(this.accessInfo),this.password&&f.N.storePassword(this.lesson.id,this.password)}logActivity(){var e=this;return(0,t.A)((function*(){e.lesson&&!e.preventReasons.length&&(yield m.g.ignoreErrors(f.N.logViewLesson(e.lesson.id,e.password)))}))()}callAnalyticsLogEvent(){this.analyticsLogEvent("mod_lesson_view_lesson",{url:1===this.selectedTab?`/mod/lesson/report.php?id=${this.module.id}&action=reportoverview`:void 0})}playLesson(e){var n=this;return(0,t.A)((function*(){var o;if(!n.lesson||!n.accessInfo)return;let t;n.hasOffline?t=e?yield f.N.getLastPageSeen(n.lesson.id,n.accessInfo.attemptscount,{cmId:n.module.id}):n.accessInfo.firstpageid:n.leftDuringTimed&&!n.lesson.timelimit&&(t=e?n.accessInfo.lastpageseen:n.accessInfo.firstpageid),yield l.CoreNavigator.navigateToSitePath(`${C.Lc}/${n.courseId}/${n.module.id}/player`,{params:{pageId:t,password:n.password}}),n.hasPlayed=!0,null===(o=n.dataSentObserver)||void 0===o||o.off(),n.dataSentObserver=u.z.on(C.y6,(e=>{var o;e.lessonId===(null===(o=n.lesson)||void 0===o?void 0:o.id)&&"launch"!==e.type&&("finish"===e.type?(n.dataSent=!1,n.checkCompletion()):n.dataSent=!0)}),n.siteId)}))()}indexSelected(){const e=0!==this.selectedTab;this.selectedTab=0,e&&this.callAnalyticsLogEvent()}reportsSelected(){const e=1!==this.selectedTab;this.selectedTab=1,this.groupInfo||this.fetchReportData().catch((e=>{R.CoreAlerts.showError(e,{default:"Error getting report."})})),e&&this.callAnalyticsLogEvent()}review(){var e=this;return(0,t.A)((function*(){e.retakeToReview&&e.lesson&&(yield l.CoreNavigator.navigateToSitePath(`${C.Lc}/${e.courseId}/${e.module.id}/player`,{params:{pageId:e.retakeToReview.pageid,password:e.password,review:!0,retake:e.retakeToReview.retake}}),e.retakeToReview=void 0)}))()}setGroup(e){var n=this;return(0,t.A)((function*(){if(!n.lesson)return;if(n.group=e,n.selectedGroupEmptyMessage="",e&&n.groupInfo&&n.groupInfo.groups){const o=n.groupInfo.groups.find((n=>e==n.id));n.selectedGroupEmptyMessage=o?T.HT.instant("addon.mod_lesson.nolessonattemptsgroup",{$a:o.name}):""}const o=yield f.N.getRetakesOverview(n.lesson.id,{groupId:e,cmId:n.lesson.coursemodule});if(!o)return n.overview=o,void 0;const s=o;null!=s.avetime&&s.numofattempts&&(s.avetime=Math.floor(s.avetime/s.numofattempts),n.avetimeReadable=v.j.formatTime(s.avetime)),null!=s.hightime&&(n.hightimeReadable=v.j.formatTime(s.hightime)),null!=s.lowtime&&(n.lowtimeReadable=v.j.formatTime(s.lowtime)),s.lessonscored&&(s.numofattempts&&null!=s.avescore&&(s.avescore=p.Ni.roundToDecimals(s.avescore,2)),null!=s.highscore&&(s.highscore=p.Ni.roundToDecimals(s.highscore,2)),null!=s.lowscore&&(s.lowscore=p.Ni.roundToDecimals(s.lowscore,2))),s.students&&(yield m.g.allPromises(s.students.map(function(){var e=(0,t.A)((function*(e){e.bestgrade=p.Ni.roundToDecimals(e.bestgrade,2);const o=yield m.g.ignoreErrors(i.CoreUser.getProfile(e.id,n.courseId,!0));o&&(e.profileimageurl=o.profileimageurl)}));return function(n){return e.apply(this,arguments)}}()))),n.overview=s}))()}showStatus(e){this.showSpinner=e===s.DownloadStatus.DOWNLOADING}start(e){var n=this;return(0,t.A)((function*(){if(!n.showSpinner&&n.lesson){if(!f.N.isLessonOffline(n.lesson)||n.currentStatus==s.DownloadStatus.DOWNLOADED)return n.playLesson(e),void 0;n.showSpinner=!0;try{yield g.o.prefetch(n.module,n.courseId,!0),n.playLesson(e)}catch(o){n.hasOffline?n.playLesson(e):R.CoreAlerts.showError(o,{default:T.HT.instant("core.errordownloading")})}finally{n.showSpinner=!1}}}))()}submitPassword(e,n){var o=this;return(0,t.A)((function*(){e.preventDefault(),e.stopPropagation();const t=null==n?void 0:n.value;if(!t)return R.CoreAlerts.showError(T.HT.instant("addon.mod_lesson.emptypassword")),void 0;o.showLoading=!0;try{yield o.validatePassword(t),o.lessonReady();const e=f.N.getPreventAccessReason(o.accessInfo,!0);o.preventReasons=e?[e]:[],o.logActivity()}catch(e){R.CoreAlerts.showError(e)}finally{o.showLoading=!1,c.R.triggerFormSubmittedEvent(o.formElement,!0,o.siteId)}}))()}sync(){var e=this;return(0,t.A)((function*(){if(!e.lesson)throw new b.CoreError("Cannot sync without a lesson.");const n=yield h._.syncLesson(e.lesson.id,!0);return!n.updated&&e.dataSent&&e.isPrefetched()&&(yield m.g.ignoreErrors(h._.prefetchModuleAfterUpdate(e.module,e.courseId))),n}))()}validatePassword(e){var n=this;return(0,t.A)((function*(){try{n.lesson=yield f.N.getLessonWithPassword(n.lesson.id,{password:e,cmId:n.module.id}),n.password=e}catch(e){throw n.password="",e}}))()}openRetake(e){var n=this;return(0,t.A)((function*(){l.CoreNavigator.navigateToSitePath(`${C.Lc}/${n.courseId}/${n.module.id}/user-retake/${e}`)}))()}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.dataSentObserver)||void 0===e||e.off()}}return(e=AddonModLessonIndexComponent).ɵfac=function AddonModLessonIndexComponent_Factory(n){return new(n||e)(x.rXU(L.W9),x.rXU(d.A,8))},e.ɵcmp=x.VBU({type:e,selectors:[["addon-mod-lesson-index"]],viewQuery:function AddonModLessonIndexComponent_Query(e,n){if(1&e&&(x.GBs(_.h,5),x.GBs(B,5)),2&e){let e;x.mGM(e=x.lsd())&&(n.tabsComponent=e.first),x.mGM(e=x.lsd())&&(n.formElement=e.first)}},inputs:{group:"group",action:"action"},standalone:!0,features:[x.Vt3,x.aNF],decls:13,vars:15,consts:[["buttons",""],["passwordForm",""],["passwordinput",""],["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[3,"hideUntil","selectedIndex"],[3,"ionSelect","title"],[3,"title","ionSelect",4,"ngIf"],["collapsible-footer","","slot","fixed",3,"ngClass",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],["class","core-info-card",4,"ngIf"],[4,"ngIf"],[3,"hideUntil",4,"ngIf"],[1,"core-info-card"],["name","fas-circle-info","slot","start","aria-hidden","true"],[3,"innerHTML"],[3,"ngSubmit"],[1,"ion-text-wrap"],["labelPlacement","stacked","name","password","type","password","core-auto-focus","",3,"placeholder","clearOnEdit","label"],["slot","end","showIcon","fas-eye","hideIcon","fas-eye-slash"],["expand","block","type","submit"],["type","submit",1,"core-submit-hidden-enter"],[4,"ngTemplateOutlet"],[3,"selectedChange","groupInfo","selected","courseId"],["icon","fas-chart-bar",4,"ngIf"],["icon","fas-chart-bar",3,"message",4,"ngIf"],["class","addon-mod_lesson-lessonstats",4,"ngIf"],["icon","fas-chart-bar"],["contextLevel","course",3,"text","contextInstanceId","wsNotFiltered"],["icon","fas-chart-bar",3,"message"],[1,"addon-mod_lesson-lessonstats"],[1,"ion-text-wrap","ion-hide-md-down"],[1,"ion-text-center"],[1,"item-heading"],[1,"ion-text-wrap","ion-hide-md-up"],["class","ion-text-center",4,"ngIf"],[3,"ngClass"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngFor","ngForOf"],["button","",1,"ion-text-wrap",3,"click","detail"],["slot","start",3,"user","userId","courseId"],["a11yText","core.gradenoun",3,"progress"],["collapsible-footer","","slot","fixed",3,"ngClass"],["class","list-item-limited-width",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width"],[1,"ion-padding-bottom"],["expand","block",1,"ion-text-wrap","ion-margin",3,"click"],["class","ion-text-wrap",4,"ngIf"],["class","ion-text-wrap ion-margin","expand","block",3,"click",4,"ngIf"],["expand","block","fill","outline",3,"click"],["expand","block",3,"click"],["class","ion-text-wrap ion-margin","expand","block","fill","outline",3,"click",4,"ngIf"],["expand","block","fill","outline",1,"ion-text-wrap","ion-margin",3,"click"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"]],template:function AddonModLessonIndexComponent_Template(e,n){if(1&e){const e=x.RV6();x.j41(0,"core-navbar-buttons",3),x.DNE(1,AddonModLessonIndexComponent_Conditional_1_Template,3,3,"ion-button",4)(2,AddonModLessonIndexComponent_Conditional_2_Template,3,4),x.k0s(),x.j41(3,"core-loading",5)(4,"core-course-module-info",6),x.bIt("completionChanged",(function AddonModLessonIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return x.eBV(e),x.Njj(n.onCompletionChange())})),x.k0s(),x.j41(5,"core-tabs",7)(6,"core-tab",8),x.nI1(7,"translate"),x.bIt("ionSelect",(function AddonModLessonIndexComponent_Template_core_tab_ionSelect_6_listener(){return x.eBV(e),x.Njj(n.indexSelected())})),x.DNE(8,AddonModLessonIndexComponent_ng_template_8_Template,3,3,"ng-template"),x.k0s(),x.DNE(9,AddonModLessonIndexComponent_core_tab_9_Template,3,3,"core-tab",9),x.k0s(),x.DNE(10,AddonModLessonIndexComponent_div_10_Template,3,6,"div",10),x.k0s(),x.DNE(11,AddonModLessonIndexComponent_ng_template_11_Template,2,2,"ng-template",null,0,x.C5r)}2&e&&(x.R7$(),x.vxM(1,n.courseContentsPage?2:1),x.R7$(2),x.Y8G("hideUntil",!n.showLoading),x.R7$(),x.Y8G("module",n.module)("description",n.description)("component",n.component)("componentId",n.componentId)("courseId",n.courseId)("hasDataToSync",n.hasOffline),x.R7$(),x.Y8G("hideUntil",!n.showLoading)("selectedIndex",n.selectedTab),x.R7$(),x.Y8G("title",x.bMT(7,13,"addon.mod_lesson.preview")),x.R7$(3),x.Y8G("ngIf",n.canViewReports),x.R7$(),x.Y8G("ngIf",!n.showLoading))},dependencies:[A.n,k.YU,k.Sq,k.bT,k.T3,y.qT,y.cb,y.cV,L.Jm,L.b_,L.ME,L.tN,L.hU,L.lO,L.iq,L.$w,L.Wv,L.uz,L.he,L.nf,L.ln,L.Gw,G.B,$.Q,E.h,F.F,j.R,N.c,S.z,Y.K,_.h,D.T,V.i,X.t,O.B,P.i,J.T,U.D9,M.CoreCourseModuleInfoComponent,w.CoreCourseModuleNavigationComponent],encapsulation:2}),AddonModLessonIndexComponent})()},69006:(e,n,o)=>{o.d(n,{y:()=>g});var t=o(10467),s=o(23063),_=o(49882),a=o(44682),d=o(55554),i=o(51024),r=o(52749),l=o(25572),c=o(79555),p=o(95384),m=o(54438),u=o(2910);let g=(()=>{var e;class CoreCourseModuleMainActivityComponent extends s.x{constructor(e="CoreCourseModuleMainResourceComponent",n,o){super(e,o),this.content=n,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,t.A)((function*(){yield _superprop_getNgOnInit().call(e),e.hasOffline=!1,e.moduleName=p.CoreCourseModuleHelper.translateModuleName(e.pluginName||e.moduleName||""),e.syncEventName&&(e.syncObserver=_.z.on(e.syncEventName,(n=>{e.autoSyncEventReceived(n)}),e.siteId))}))()}isRefreshSyncNeeded(e){return!1}autoSyncEventReceived(e){this.isRefreshSyncNeeded(e)&&this.showLoadingAndRefresh(!1)}refreshContent(e=!1,n=!1){var o=this;return(0,t.A)((function*(){o.module&&(yield d.g.ignoreErrors(Promise.all([o.invalidateContent(),o.showCompletion?a.CoreCourse.invalidateModule(o.module.id):void 0])),yield o.loadContent(!0,e,n))}))()}showLoadingAndFetch(e=!1,n=!1){var o=this;return(0,t.A)((function*(){var t;o.showLoading=!0,null===(t=o.content)||void 0===t||t.scrollToTop(),yield o.loadContent(!1,e,n)}))()}showLoadingAndRefresh(e=!1,n=!1){var o;return this.showLoading=!0,null===(o=this.content)||void 0===o||o.scrollToTop(),this.refreshContent(e,n)}fetchContent(e=!1,n=!1,o=!1){return(0,t.A)((function*(){}))()}loadContent(e,n=!1,o=!1){var s=this;return(0,t.A)((function*(){if(s.module)try{e&&s.showCompletion&&(yield d.g.ignoreErrors(s.fetchModule())),yield s.fetchContent(e,n,o),s.finishSuccessfulFetch()}catch(o){var t;if(!e&&(null===(t=r.CoreSites.getCurrentSite())||void 0===t||!t.isOfflineDisabled())&&p.CoreCourseModuleHelper.isNotFoundError(o))return yield s.refreshContent(n);l.CoreAlerts.showError(o,{default:c.HT.instant(s.fetchContentDefaultError)})}finally{s.showLoading=!1}}))()}sync(){return(0,t.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(e){return e.updated}syncActivity(e=!1){var n=this;return(0,t.A)((function*(){try{const e=yield n.sync();return e.warnings.length&&l.CoreAlerts.show({message:e.warnings[0]}),n.hasSyncSucceed(e)}catch(n){return e&&l.CoreAlerts.showError(n,{default:c.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.syncObserver)||void 0===e||e.off()}}return(e=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(n){return new(n||e)(m.rXU("",8),m.rXU(u.W9),m.rXU(i.A))},e.ɵcmp=m.VBU({type:e,selectors:[["ng-component"]],inputs:{group:"group"},features:[m.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(e,n){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);