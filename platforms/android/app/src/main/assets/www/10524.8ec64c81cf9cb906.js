"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[10524,69006],{10524:(n,e,o)=>{o.r(e),o.d(e,{AddonModBBBIndexComponent:()=>D});var t=o(10467),i=o(75629),d=o(69006),r=o(51024),a=o(36358),_=o(15221),c=o(52749),s=o(75383),l=o(24742),m=o(24502),p=o(79555),u=o(47101),g=o(91767),b=o(33014),f=o(35161),I=o(55554),B=o(86552),h=o(25572),C=o(86654),M=o(6736),v=o(30864),x=o(54438),y=o(2910),A=o(60177),R=o(69502),T=o(17388),k=o(16986),w=o(31498),G=o(97818),F=o(64422),$=o(13988),j=o(86198),E=o(58197),O=o(66731),N=o(43570),Y=o(73955),S=o(59528);function AddonModBBBIndexComponent_Conditional_1_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-button",7),x.nI1(1,"translate"),x.bIt("click",(function AddonModBBBIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){x.eBV(n);const e=x.XpG();return x.Njj(e.openModuleSummary())})),x.nrm(2,"ion-icon",8),x.k0s()}2&n&&x.Y8G("ariaLabel",x.bMT(1,1,"core.info"))}function AddonModBBBIndexComponent_Conditional_2_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"core-context-menu")(1,"core-context-menu-item",9),x.nI1(2,"translate"),x.bIt("action",(function AddonModBBBIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){x.eBV(n);const e=x.XpG();return x.Njj(e.openModuleSummary())})),x.k0s()()}2&n&&(x.R7$(),x.Y8G("priority",5e3)("content",x.bMT(2,2,"core.info")))}function AddonModBBBIndexComponent_ng_container_7_ion_item_1_Template(n,e){if(1&n&&(x.j41(0,"ion-item",12)(1,"ion-label")(2,"p",13),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.j41(5,"p",0),x.EFF(6),x.nI1(7,"coreFormatDate"),x.k0s()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_bigbluebuttonbn.mod_form_field_openingtime")),x.R7$(3),x.JRh(x.bMT(7,4,1e3*n.meetingInfo.openingtime))}}function AddonModBBBIndexComponent_ng_container_7_ion_item_2_Template(n,e){if(1&n&&(x.j41(0,"ion-item",12)(1,"ion-label")(2,"p",13),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.j41(5,"p",0),x.EFF(6),x.nI1(7,"coreFormatDate"),x.k0s()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_bigbluebuttonbn.mod_form_field_closingtime")),x.R7$(3),x.JRh(x.bMT(7,4,1e3*n.meetingInfo.closingtime))}}function AddonModBBBIndexComponent_ng_container_7_ion_item_3_Template(n,e){1&n&&(x.j41(0,"ion-item",12)(1,"ion-label")(2,"p"),x.EFF(3),x.nI1(4,"translate"),x.k0s()()()),2&n&&(x.R7$(3),x.JRh(x.bMT(4,1,"addon.mod_bigbluebuttonbn.view_message_conference_room_ready")))}function AddonModBBBIndexComponent_ng_container_7_ng_container_4_ion_item_6_Template(n,e){if(1&n&&(x.j41(0,"ion-item",12)(1,"ion-label")(2,"p",13),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.j41(5,"p",0),x.EFF(6),x.nI1(7,"coreFormatDate"),x.k0s()()),2&n){const n=x.XpG(3);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_bigbluebuttonbn.view_message_session_started_at")),x.R7$(3),x.JRh(x.i5U(7,4,1e3*n.meetingInfo.startedat,"strftimetime"))}}function AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_9_Template(n,e){1&n&&(x.j41(0,"p",13),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_bigbluebuttonbn.view_message_moderators")," "))}function AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_10_Template(n,e){1&n&&(x.j41(0,"p",13),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_bigbluebuttonbn.view_message_moderator")," "))}function AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_15_Template(n,e){1&n&&(x.j41(0,"p",13),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_bigbluebuttonbn.view_message_viewers")," "))}function AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_16_Template(n,e){1&n&&(x.j41(0,"p",13),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_bigbluebuttonbn.view_message_viewer")," "))}function AddonModBBBIndexComponent_ng_container_7_ng_container_4_Template(n,e){if(1&n&&(x.qex(0),x.j41(1,"ion-item",12)(2,"ion-label")(3,"p"),x.EFF(4),x.nI1(5,"translate"),x.k0s()()(),x.DNE(6,AddonModBBBIndexComponent_ng_container_7_ng_container_4_ion_item_6_Template,8,7,"ion-item",10),x.j41(7,"ion-item",12)(8,"ion-label"),x.DNE(9,AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_9_Template,3,3,"p",14)(10,AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_10_Template,3,3,"p",14),x.k0s(),x.j41(11,"p",0),x.EFF(12),x.k0s()(),x.j41(13,"ion-item",12)(14,"ion-label"),x.DNE(15,AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_15_Template,3,3,"p",14)(16,AddonModBBBIndexComponent_ng_container_7_ng_container_4_p_16_Template,3,3,"p",14),x.k0s(),x.j41(17,"p",0),x.EFF(18),x.k0s()(),x.bVm()),2&n){const n=x.XpG(2);x.R7$(4),x.JRh(x.bMT(5,8,"addon.mod_bigbluebuttonbn.view_message_conference_in_progress")),x.R7$(2),x.Y8G("ngIf",n.meetingInfo.startedat),x.R7$(3),x.Y8G("ngIf",n.meetingInfo.moderatorplural),x.R7$(),x.Y8G("ngIf",!n.meetingInfo.moderatorplural),x.R7$(2),x.JRh(n.meetingInfo.moderatorcount),x.R7$(3),x.Y8G("ngIf",n.meetingInfo.participantplural),x.R7$(),x.Y8G("ngIf",!n.meetingInfo.participantplural),x.R7$(2),x.JRh(n.meetingInfo.participantcount)}}function AddonModBBBIndexComponent_ng_container_7_ion_card_5_Template(n,e){if(1&n&&(x.j41(0,"ion-card",15)(1,"ion-item",12),x.nrm(2,"ion-icon",16),x.j41(3,"ion-label"),x.EFF(4),x.k0s()()()),2&n){const n=x.XpG(2);x.R7$(4),x.JRh(n.meetingInfo.statusmessage)}}function AddonModBBBIndexComponent_ng_container_7_Conditional_6_Template(n,e){if(1&n&&(x.j41(0,"ion-item",12)(1,"ion-label")(2,"h2"),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"div"),x.nrm(6,"core-files",17),x.k0s()()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,5,"addon.mod_bigbluebuttonbn.view_section_title_presentation")),x.R7$(3),x.Y8G("files",n.meetingInfo.presentations)("component",n.component)("componentId",n.module.id)("alwaysDownload",!0)}}function AddonModBBBIndexComponent_ng_container_7_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModBBBIndexComponent_ng_container_7_ion_item_1_Template,8,6,"ion-item",10)(2,AddonModBBBIndexComponent_ng_container_7_ion_item_2_Template,8,6,"ion-item",10)(3,AddonModBBBIndexComponent_ng_container_7_ion_item_3_Template,5,3,"ion-item",10)(4,AddonModBBBIndexComponent_ng_container_7_ng_container_4_Template,19,10,"ng-container",5)(5,AddonModBBBIndexComponent_ng_container_7_ion_card_5_Template,5,1,"ion-card",11)(6,AddonModBBBIndexComponent_ng_container_7_Conditional_6_Template,7,7,"ion-item",12),x.bVm()),2&n){const n=x.XpG();x.R7$(),x.Y8G("ngIf",n.meetingInfo.openingtime),x.R7$(),x.Y8G("ngIf",n.meetingInfo.closingtime),x.R7$(),x.Y8G("ngIf",n.meetingInfo.canjoin&&!n.meetingInfo.statusrunning),x.R7$(),x.Y8G("ngIf",n.meetingInfo.statusrunning),x.R7$(),x.Y8G("ngIf",!n.meetingInfo.canjoin),x.R7$(),x.vxM(6,n.meetingInfo.showpresentations&&n.meetingInfo.presentations.length?6:-1)}}function AddonModBBBIndexComponent_ng_container_8_ng_container_6_div_10_ion_item_5_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-item",28),x.bIt("click",(function AddonModBBBIndexComponent_ng_container_8_ng_container_6_div_10_ion_item_5_Template_ion_item_click_0_listener(e){const o=x.eBV(n).$implicit,t=x.XpG(4);return x.Njj(t.openPlayback(e,o))})),x.j41(1,"ion-label")(2,"p"),x.EFF(3),x.k0s()(),x.nrm(4,"ion-icon",29),x.k0s()}if(2&n){const n=e.$implicit;x.Y8G("detail",!1),x.R7$(3),x.JRh(n.name),x.R7$(),x.Y8G("name",n.icon)}}function AddonModBBBIndexComponent_ng_container_8_ng_container_6_div_10_Template(n,e){if(1&n&&(x.j41(0,"div",25)(1,"ion-item",26)(2,"ion-label")(3,"p",13),x.EFF(4),x.k0s()()(),x.DNE(5,AddonModBBBIndexComponent_ng_container_8_ng_container_6_div_10_ion_item_5_Template,5,3,"ion-item",27),x.k0s()),2&n){const n=x.XpG().$implicit;x.R7$(4),x.JRh(n.playbackLabel),x.R7$(),x.Y8G("ngForOf",n.playbacks)}}function AddonModBBBIndexComponent_ng_container_8_ng_container_6_ion_item_11_p_4_Template(n,e){if(1&n&&(x.j41(0,"p"),x.nrm(1,"core-format-text",30),x.k0s()),2&n){const n=x.XpG().$implicit,e=x.XpG(3);x.R7$(),x.Y8G("text",n.value)("component",e.component)("componentId",e.module.id)("contextInstanceId",e.module.id)("courseId",e.module.course)}}function AddonModBBBIndexComponent_ng_container_8_ng_container_6_ion_item_11_p_5_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&n){const n=x.XpG().$implicit;x.R7$(),x.JRh(n.value)}}function AddonModBBBIndexComponent_ng_container_8_ng_container_6_ion_item_11_Template(n,e){if(1&n&&(x.j41(0,"ion-item",12)(1,"ion-label")(2,"p",13),x.EFF(3),x.k0s(),x.DNE(4,AddonModBBBIndexComponent_ng_container_8_ng_container_6_ion_item_11_p_4_Template,2,5,"p",5)(5,AddonModBBBIndexComponent_ng_container_8_ng_container_6_ion_item_11_p_5_Template,2,1,"p",5),x.k0s()()),2&n){const n=e.$implicit;x.R7$(3),x.JRh(n.label),x.R7$(),x.Y8G("ngIf",n.allowHTML),x.R7$(),x.Y8G("ngIf",!n.allowHTML)}}function AddonModBBBIndexComponent_ng_container_8_ng_container_6_Template(n,e){if(1&n){const n=x.RV6();x.qex(0),x.j41(1,"ion-item",20),x.nI1(2,"translate"),x.bIt("click",(function AddonModBBBIndexComponent_ng_container_8_ng_container_6_Template_ion_item_click_1_listener(){const e=x.eBV(n).$implicit,o=x.XpG(2);return x.Njj(o.toggle(e))})),x.nrm(3,"ion-icon",21),x.j41(4,"ion-label")(5,"p"),x.EFF(6),x.k0s(),x.j41(7,"p"),x.EFF(8),x.k0s()()(),x.j41(9,"div",22),x.DNE(10,AddonModBBBIndexComponent_ng_container_8_ng_container_6_div_10_Template,6,2,"div",23)(11,AddonModBBBIndexComponent_ng_container_8_ng_container_6_ion_item_11_Template,6,3,"ion-item",24),x.k0s(),x.bVm()}if(2&n){const n=e.$implicit;x.R7$(),x.Y8G("detail",!1),x.BMQ("aria-expanded",n.expanded)("aria-label",x.bMT(2,10,n.expanded?"core.collapse":"core.expand")),x.R7$(2),x.AVh("expandable-status-icon-expanded",n.expanded),x.R7$(3),x.JRh(n.type),x.R7$(2),x.JRh(n.name),x.R7$(),x.Y8G("hidden",!n.expanded),x.R7$(),x.Y8G("ngIf",n.playbacks.length),x.R7$(),x.Y8G("ngForOf",n.details)}}function AddonModBBBIndexComponent_ng_container_8_core_empty_box_7_Template(n,e){1&n&&(x.nrm(0,"core-empty-box",31),x.nI1(1,"translate")),2&n&&x.Y8G("message",x.bMT(1,1,"addon.mod_bigbluebuttonbn.view_message_norecordings"))}function AddonModBBBIndexComponent_ng_container_8_Template(n,e){if(1&n&&(x.qex(0),x.j41(1,"ion-item",12)(2,"ion-label")(3,"h2"),x.EFF(4),x.nI1(5,"translate"),x.k0s()()(),x.DNE(6,AddonModBBBIndexComponent_ng_container_8_ng_container_6_Template,12,12,"ng-container",18)(7,AddonModBBBIndexComponent_ng_container_8_core_empty_box_7_Template,2,3,"core-empty-box",19),x.bVm()),2&n){const n=x.XpG();x.R7$(4),x.JRh(x.bMT(5,3,"addon.mod_bigbluebuttonbn.view_section_title_recordings")),x.R7$(2),x.Y8G("ngForOf",n.recordings),x.R7$(),x.Y8G("ngIf",n.recordings&&!n.recordings.length)}}function AddonModBBBIndexComponent_div_9_div_1_ion_button_1_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-button",38),x.bIt("click",(function AddonModBBBIndexComponent_div_9_div_1_ion_button_1_Template_ion_button_click_0_listener(){x.eBV(n);const e=x.XpG(3);return x.Njj(e.endMeeting())})),x.EFF(1),x.nI1(2,"translate"),x.k0s()}2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_bigbluebuttonbn.view_conference_action_end")," "))}function AddonModBBBIndexComponent_div_9_div_1_ion_button_2_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-button",39),x.bIt("click",(function AddonModBBBIndexComponent_div_9_div_1_ion_button_2_Template_ion_button_click_0_listener(){x.eBV(n);const e=x.XpG(3);return x.Njj(e.joinRoom())})),x.EFF(1),x.nI1(2,"translate"),x.k0s()}2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_bigbluebuttonbn.view_conference_action_join")," "))}function AddonModBBBIndexComponent_div_9_div_1_Template(n,e){if(1&n&&(x.j41(0,"div",35),x.DNE(1,AddonModBBBIndexComponent_div_9_div_1_ion_button_1_Template,3,3,"ion-button",36)(2,AddonModBBBIndexComponent_div_9_div_1_ion_button_2_Template,3,3,"ion-button",37),x.k0s()),2&n){const n=x.XpG(2);x.R7$(),x.Y8G("ngIf",n.meetingInfo.statusrunning&&n.meetingInfo.ismoderator),x.R7$(),x.Y8G("ngIf",n.meetingInfo.canjoin)}}function AddonModBBBIndexComponent_div_9_Template(n,e){if(1&n&&(x.j41(0,"div",32),x.DNE(1,AddonModBBBIndexComponent_div_9_div_1_Template,3,2,"div",33),x.nrm(2,"core-course-module-navigation",34),x.k0s()),2&n){const n=x.XpG();x.R7$(),x.Y8G("ngIf",n.meetingInfo&&n.showRoom&&(n.meetingInfo.canjoin||n.meetingInfo.statusrunning&&n.meetingInfo.ismoderator)),x.R7$(),x.Y8G("courseId",n.courseId)("currentModuleId",n.module.id)}}let D=(()=>{var n;class AddonModBBBIndexComponent extends d.y{constructor(n,e){super("AddonModBBBIndexComponent",n,e),this.content=n,this.component=g.$q,this.pluginName=g.vi,this.groupId=0}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,t.A)((function*(){_superprop_getNgOnInit().call(n),yield n.loadContent()}))()}get showRoom(){return!!this.meetingInfo&&(!this.meetingInfo.features||this.meetingInfo.features.showroom)}get showRecordings(){return!!this.meetingInfo&&(!this.meetingInfo.features||this.meetingInfo.features.showrecordings)}fetchContent(){var n=this;return(0,t.A)((function*(){if(n.bbb=yield u.no.getBBB(n.courseId,n.module.id),n.description=n.bbb.intro,n.dataRetrieved.emit(n.bbb),n.groupInfo=yield _.CoreGroups.getActivityGroupInfo(n.module.id,!1),n.groupId=_.CoreGroups.validateGroupId(n.groupId,n.groupInfo),n.groupInfo.separateGroups&&!n.groupInfo.groups.length)throw new i.CoreError(p.HT.instant("addon.mod_bigbluebuttonbn.view_nojoin"));yield n.fetchMeetingInfo(),yield n.fetchRecordings()}))()}fetchMeetingInfo(n){var e=this;return(0,t.A)((function*(){if(e.bbb)try{if(e.meetingInfo=yield u.no.getMeetingInfo(e.bbb.id,e.groupId,{cmId:e.module.id,updateCache:n}),e.meetingInfo.statusrunning&&e.meetingInfo.userlimit>0){(e.meetingInfo.participantcount||0)+(e.meetingInfo.moderatorcount||0)===e.meetingInfo.userlimit&&(e.meetingInfo.statusmessage=p.HT.instant("addon.mod_bigbluebuttonbn.userlimitreached"))}}catch(n){throw n&&"restrictedcontextexception"===n.errorcode&&(n.message=p.HT.instant("addon.mod_bigbluebuttonbn.view_nojoin")),n}}))()}fetchRecordings(){var n=this;return(0,t.A)((function*(){if(!n.bbb||!n.showRecordings)return;const e=yield u.no.getRecordings(n.bbb.id,n.groupId,{cmId:n.module.id}),o=m.R.toObject(e.columns,"key");n.recordings=e.parsedData.map((e=>{const t=[],i=(0,f.B)(String(e.playback)),d=Array.from(i.querySelectorAll("a")).map((e=>{var o;return{name:null!==(o=e.textContent)&&void 0!==o?o:"",url:e.href,icon:n.getPlaybackIcon(e)}}));return Object.entries(e).forEach((([n,e])=>{const i=o[n];if(i&&""!==e&&"actionbar"!==n&&"playback"!==n){if("customDate"!==i.formatter||isNaN(Number(e))){if(i.allowHTML&&"string"==typeof e){var d;const n=(0,f.B)(e);if(!n.querySelector("img")&&""===(null!==(d=n.textContent)&&void 0!==d?d:"").trim())return;const o=n.querySelector(".quickeditlink");var r,a;if(o)e=(null!==(r=null===(a=o.querySelector("span"))||void 0===a?void 0:a.innerHTML)&&void 0!==r?r:"").trim()}}else e=l.j.userDate(Number(e),"core.strftimedaydate");t.push({label:i.label,value:String(e),allowHTML:!!i.allowHTML})}})),{name:s.Ni.cleanTags(String(e.recording),{singleLine:!0}),playbackLabel:o.playback.label,playbacks:d,details:t,expanded:!1}}))}))()}getPlaybackIcon(n){switch(n.dataset.target){case u.OG.NOTES:return"far-file-lines";case u.OG.PODCAST:return"fas-microphone-lines";case u.OG.SCREENSHARE:return"fas-display";case u.OG.STATISTICS:return"fas-chart-line";case u.OG.VIDEO:return"fas-video";default:return"fas-circle-play"}}logActivity(){var n=this;return(0,t.A)((function*(){n.bbb&&(yield I.g.ignoreErrors(u.no.logView(n.bbb.id)),n.analyticsLogEvent("mod_bigbluebuttonbn_view_bigbluebuttonbn"))}))()}updateMeetingInfo(n){var e=this;return(0,t.A)((function*(){if(e.bbb){e.showLoading=!0;try{yield u.no.invalidateAllGroupsMeetingInfo(e.bbb.id),yield e.fetchMeetingInfo(n)}finally{e.showLoading=!1}}}))()}invalidateContent(){var n=this;return(0,t.A)((function*(){const e=[];e.push(u.no.invalidateBBBs(n.courseId)),e.push(_.CoreGroups.invalidateActivityGroupInfo(n.module.id)),n.bbb&&(e.push(u.no.invalidateAllGroupsMeetingInfo(n.bbb.id)),e.push(u.no.invalidateAllGroupsRecordings(n.bbb.id))),yield Promise.all(e)}))()}groupChanged(){var n=this;return(0,t.A)((function*(){n.showLoading=!0;try{yield n.fetchMeetingInfo(),yield n.fetchRecordings()}catch(n){h.CoreAlerts.showError(n)}finally{n.showLoading=!1}}))()}joinRoom(){var n=this;return(0,t.A)((function*(){const e=yield b.CoreLoadings.show();try{const e=yield u.no.getJoinUrl(n.module.id,n.groupId);yield B.j.openInBrowser(e,{showBrowserWarning:!1}),yield a.CoreApp.waitForResume(1e4),n.updateMeetingInfo(!0)}catch(n){h.CoreAlerts.showError(n)}finally{e.dismiss()}}))()}endMeeting(){var n=this;return(0,t.A)((function*(){if(!n.bbb)return;try{yield h.CoreAlerts.confirm(p.HT.instant("addon.mod_bigbluebuttonbn.end_session_confirm"),{header:p.HT.instant("addon.mod_bigbluebuttonbn.end_session_confirm_title"),okText:p.HT.instant("core.yes")})}catch{return}const e=yield b.CoreLoadings.show();try{yield u.no.endMeeting(n.bbb.id,n.groupId),n.updateMeetingInfo()}catch(n){h.CoreAlerts.showError(n)}finally{e.dismiss()}}))()}toggle(n){n.expanded=!n.expanded}openPlayback(n,e){var o;n.preventDefault(),n.stopPropagation(),null===(o=c.CoreSites.getCurrentSite())||void 0===o||o.openInBrowserWithAutoLogin(e.url)}}return(n=AddonModBBBIndexComponent).ɵfac=function AddonModBBBIndexComponent_Factory(e){return new(e||n)(x.rXU(y.W9),x.rXU(r.A,8))},n.ɵcmp=x.VBU({type:n,selectors:[["addon-mod-bbb-index"]],standalone:!0,features:[x.Vt3,x.aNF],decls:10,vars:16,consts:[["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId"],[3,"selectedChange","groupInfo","selected","multipleGroupsMessage","courseId"],[4,"ngIf"],["collapsible-footer","","slot","fixed",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],["class","ion-text-wrap",4,"ngIf"],["class","core-warning-card",4,"ngIf"],[1,"ion-text-wrap"],[1,"item-heading"],["class","item-heading",4,"ngIf"],[1,"core-warning-card"],["name","fas-triangle-exclamation","slot","start","aria-hidden","true"],[3,"files","component","componentId","alwaysDownload"],[4,"ngFor","ngForOf"],["icon","far-file-video",3,"message",4,"ngIf"],["button","",1,"addon-mod_bbb-recording-title",3,"click","detail"],["name","fas-chevron-right","flip-rtl","","slot","start","aria-hidden","true",1,"expandable-status-icon"],[1,"addon-mod_bbb-recording-details",3,"hidden"],["class","addon-mod_bbb-recording-playbacks",4,"ngIf"],["class","ion-text-wrap",4,"ngFor","ngForOf"],[1,"addon-mod_bbb-recording-playbacks"],[1,"ion-text-wrap","addon-mod_bbb-recording-playback-title"],["button","","class","ion-text-wrap addon-mod_bbb-recording-playback-item",3,"detail","click",4,"ngFor","ngForOf"],["button","",1,"ion-text-wrap","addon-mod_bbb-recording-playback-item",3,"click","detail"],["slot","end","aria-hidden","true",3,"name"],["contextLevel","module",3,"text","component","componentId","contextInstanceId","courseId"],["icon","far-file-video",3,"message"],["collapsible-footer","","slot","fixed"],["class","list-item-limited-width adaptable-buttons-row",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width","adaptable-buttons-row"],["fill","outline","class","ion-margin ion-text-wrap","expand","block",3,"click",4,"ngIf"],["class","ion-margin ion-text-wrap","expand","block",3,"click",4,"ngIf"],["fill","outline","expand","block",1,"ion-margin","ion-text-wrap",3,"click"],["expand","block",1,"ion-margin","ion-text-wrap",3,"click"]],template:function AddonModBBBIndexComponent_Template(n,e){1&n&&(x.j41(0,"core-navbar-buttons",0),x.DNE(1,AddonModBBBIndexComponent_Conditional_1_Template,3,3,"ion-button",1)(2,AddonModBBBIndexComponent_Conditional_2_Template,3,4),x.k0s(),x.j41(3,"core-loading",2)(4,"core-course-module-info",3),x.bIt("completionChanged",(function AddonModBBBIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return e.onCompletionChange()})),x.k0s(),x.j41(5,"core-group-selector",4),x.nI1(6,"translate"),x.mxI("selectedChange",(function AddonModBBBIndexComponent_Template_core_group_selector_selectedChange_5_listener(n){return x.DH7(e.groupId,n)||(e.groupId=n),n})),x.bIt("selectedChange",(function AddonModBBBIndexComponent_Template_core_group_selector_selectedChange_5_listener(){return e.groupChanged()})),x.k0s(),x.DNE(7,AddonModBBBIndexComponent_ng_container_7_Template,7,6,"ng-container",5)(8,AddonModBBBIndexComponent_ng_container_8_Template,8,5,"ng-container",5)(9,AddonModBBBIndexComponent_div_9_Template,3,3,"div",6),x.k0s()),2&n&&(x.R7$(),x.vxM(1,e.courseContentsPage?2:1),x.R7$(2),x.Y8G("hideUntil",!e.showLoading),x.R7$(),x.Y8G("module",e.module)("description",e.description)("component",e.component)("componentId",e.componentId)("courseId",e.courseId),x.R7$(),x.Y8G("groupInfo",e.groupInfo),x.R50("selected",e.groupId),x.Y8G("multipleGroupsMessage",x.bMT(6,14,"addon.mod_bigbluebuttonbn.view_groups_selection_warning"))("courseId",e.module.course),x.R7$(2),x.Y8G("ngIf",e.meetingInfo&&e.showRoom),x.R7$(),x.Y8G("ngIf",e.showRecordings&&e.recordings),x.R7$(),x.Y8G("ngIf",!e.showLoading))},dependencies:[C.n,A.Sq,A.bT,y.Jm,y.b_,y.iq,y.uz,y.he,R.B,T.Q,k.h,w.Y,G.F,F.R,$.c,j.t,E.B,O.i,N.T,Y.D9,S.f,M.CoreCourseModuleInfoComponent,v.CoreCourseModuleNavigationComponent],styles:["[_nghost-%COMP%]{--recording-details-background: var(--gray-100);--recording-details-border: var(--gray-500)}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%] > p[slot=end][_ngcontent-%COMP%]{font-size:var(--text-size)}[_nghost-%COMP%]   core-empty-box[_ngcontent-%COMP%]     p{font-size:100%}[_nghost-%COMP%]   .addon-mod_bbb-recording-playback-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .addon-mod_bbb-recording-details[_ngcontent-%COMP%]{border-top:2px solid var(--recording-details-border);border-bottom:2px solid var(--recording-details-border)}[_nghost-%COMP%]   .addon-mod_bbb-recording-details[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--recording-details-background)}:root.dark[_nghost-%COMP%], :root.dark   [_nghost-%COMP%]{--recording-details-background: var(--gray-800);--recording-details-border: var(--gray-500)}"]}),AddonModBBBIndexComponent})()},69006:(n,e,o)=>{o.d(e,{y:()=>g});var t=o(10467),i=o(23063),d=o(49882),r=o(44682),a=o(55554),_=o(51024),c=o(52749),s=o(25572),l=o(79555),m=o(95384),p=o(54438),u=o(2910);let g=(()=>{var n;class CoreCourseModuleMainActivityComponent extends i.x{constructor(n="CoreCourseModuleMainResourceComponent",e,o){super(n,o),this.content=e,this.moduleName=""}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,t.A)((function*(){yield _superprop_getNgOnInit().call(n),n.hasOffline=!1,n.moduleName=m.CoreCourseModuleHelper.translateModuleName(n.pluginName||n.moduleName||""),n.syncEventName&&(n.syncObserver=d.z.on(n.syncEventName,(e=>{n.autoSyncEventReceived(e)}),n.siteId))}))()}isRefreshSyncNeeded(n){return!1}autoSyncEventReceived(n){this.isRefreshSyncNeeded(n)&&this.showLoadingAndRefresh(!1)}refreshContent(n=!1,e=!1){var o=this;return(0,t.A)((function*(){o.module&&(yield a.g.ignoreErrors(Promise.all([o.invalidateContent(),o.showCompletion?r.CoreCourse.invalidateModule(o.module.id):void 0])),yield o.loadContent(!0,n,e))}))()}showLoadingAndFetch(n=!1,e=!1){var o=this;return(0,t.A)((function*(){var t;o.showLoading=!0,null===(t=o.content)||void 0===t||t.scrollToTop(),yield o.loadContent(!1,n,e)}))()}showLoadingAndRefresh(n=!1,e=!1){var o;return this.showLoading=!0,null===(o=this.content)||void 0===o||o.scrollToTop(),this.refreshContent(n,e)}fetchContent(n=!1,e=!1,o=!1){return(0,t.A)((function*(){}))()}loadContent(n,e=!1,o=!1){var i=this;return(0,t.A)((function*(){if(i.module)try{n&&i.showCompletion&&(yield a.g.ignoreErrors(i.fetchModule())),yield i.fetchContent(n,e,o),i.finishSuccessfulFetch()}catch(o){var t;if(!n&&(null===(t=c.CoreSites.getCurrentSite())||void 0===t||!t.isOfflineDisabled())&&m.CoreCourseModuleHelper.isNotFoundError(o))return yield i.refreshContent(e);s.CoreAlerts.showError(o,{default:l.HT.instant(i.fetchContentDefaultError)})}finally{i.showLoading=!1}}))()}sync(){return(0,t.A)((function*(){return{updated:!1,warnings:[]}}))()}hasSyncSucceed(n){return n.updated}syncActivity(n=!1){var e=this;return(0,t.A)((function*(){try{const n=yield e.sync();return n.warnings.length&&s.CoreAlerts.show({message:n.warnings[0]}),e.hasSyncSucceed(n)}catch(e){return n&&s.CoreAlerts.showError(e,{default:l.HT.instant("core.errorsync")}),!1}}))()}ngOnDestroy(){var n;super.ngOnDestroy(),null===(n=this.syncObserver)||void 0===n||n.off()}}return(n=CoreCourseModuleMainActivityComponent).ɵfac=function CoreCourseModuleMainActivityComponent_Factory(e){return new(e||n)(p.rXU("",8),p.rXU(u.W9),p.rXU(_.A))},n.ɵcmp=p.VBU({type:n,selectors:[["ng-component"]],inputs:{group:"group"},features:[p.Vt3],decls:0,vars:0,template:function CoreCourseModuleMainActivityComponent_Template(n,e){},encapsulation:2}),CoreCourseModuleMainActivityComponent})()}}]);