"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[86981,46526,24145,91288],{46526:(t,e,n)=>{n.d(e,{U:()=>f});var o=n(10467),i=n(54438),s=n(21413),a=n(91768),r=n(74978),c=n(32832),l=n(15324),d=n(49882),h=n(52749),u=n(57085),p=n(86654),C=n(25572),m=n(79555),g=n(64422);const v=["compile"];let f=(()=>{var t;class CoreSitePluginsPluginContentComponent{constructor(t){this.component="",this.data={},this.onContentLoaded=new i.bkB,this.onLoadingContent=new i.bkB,this.content="",this.javascript="",this.dataLoaded=!1,this.invalidateObservable=new s.B,this.differ=t.find([]).create()}ngOnInit(){this.fetchContent()}ngDoCheck(){if(!this.data||!this.jsData)return;this.differ.diff(this.data)&&(this.jsData=Object.assign(this.jsData,this.data))}fetchContent(t){var e=this;return(0,o.A)((function*(){e.onLoadingContent.emit(t),e.forceCompile=!1;const n=Object.assign({},e.preSets);n.component=n.component||e.component;try{const o=yield c.CoreSitePlugins.getContent(e.component,e.method,e.args,n);e.content=o.templates.length?o.templates[0].html:"",e.javascript=o.javascript,e.otherData=o.otherdata,e.data=e.data||{},e.forceCompile=!0,e.jsData={...e.args,...e.data,...c.CoreSitePlugins.createDataForJS(e.initResult,o)},e.jsData.fetchContent=t=>e.fetchContent(t),e.jsData.openContent=(t,n,o,i,s,a,r)=>e.openContent(t,n,o,i,s,a,r),e.jsData.refreshContent=t=>e.refreshContent(t),e.jsData.updateContent=(t,n,o,i,s)=>e.updateContent(t,n,o,i,s),e.jsData.updateModuleCourseContent=(t,n)=>e.updateModuleCourseContent(t,n),e.jsData.updateCachedContent=()=>e.updateCachedContent(),e.onContentLoaded.emit({refresh:!!t,success:!0,content:e.content})}catch(n){e.content="<div></div>",e.onContentLoaded.emit({refresh:!!t,success:!1,content:e.content}),C.CoreAlerts.showError(n,{default:m.HT.instant("core.errorloadingcontent")})}finally{e.dataLoaded=!0}}))()}openContent(t,e={},n,o,i,s,r,c){!0===i&&(i=this.data),n=n||this.component,o=o||this.method;const d=a.VV.hashAsciiStr(JSON.stringify(e));l.CoreNavigator.navigateToSitePath(`siteplugins/content/${n}/${o}/${d}`,{params:{title:t,args:e,initResult:this.initResult,jsData:i,preSets:s,ptrEnabled:r,contextLevel:(null==c?void 0:c.contextLevel)||this.contextLevel,contextInstanceId:(null==c?void 0:c.contextInstanceId)||this.contextInstanceId,courseId:(null==c?void 0:c.courseId)||this.courseId}})}refreshContent(t=!0){var e=this;return(0,o.A)((function*(){t&&(e.dataLoaded=!1),e.invalidateObservable.next();try{yield c.CoreSitePlugins.invalidateContent(e.component,e.method,e.args)}finally{yield e.fetchContent(!0)}}))()}updateContent(t,e,n,o,i){this.component=e||this.component,this.method=n||this.method,this.args=t,this.dataLoaded=!1,this.preSets=i||this.preSets,this.data&&o&&Object.assign(this.data,o),this.fetchContent()}callComponentFunction(t,e){var n;return null===(n=this.compileComponent)||void 0===n?void 0:n.callComponentFunction(t,e)}updateModuleCourseContent(t,e){d.z.trigger(u.Vs,{cmId:t,alreadyFetched:e})}updateCachedContent(){var t=this;return(0,o.A)((function*(){yield c.CoreSitePlugins.getContent(t.component,t.method,t.args,h.CoreSites.getReadingStrategyPreSets(2))}))()}}return(t=CoreSitePluginsPluginContentComponent).ɵfac=function CoreSitePluginsPluginContentComponent_Factory(e){return new(e||t)(i.rXU(i.MKu))},t.ɵcmp=i.VBU({type:t,selectors:[["core-site-plugins-plugin-content"]],viewQuery:function CoreSitePluginsPluginContentComponent_Query(t,e){if(1&t&&i.GBs(v,5),2&t){let t;i.mGM(t=i.lsd())&&(e.compileComponent=t.first)}},hostVars:2,hostBindings:function CoreSitePluginsPluginContentComponent_HostBindings(t,e){2&t&&i.HbH(e.component)},inputs:{component:"component",method:"method",args:"args",initResult:"initResult",data:"data",preSets:"preSets",pageTitle:"pageTitle",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},outputs:{onContentLoaded:"onContentLoaded",onLoadingContent:"onLoadingContent"},standalone:!0,features:[i.aNF],decls:3,vars:6,consts:[["compile",""],[3,"hideUntil","fullscreen"],[3,"text","javascript","jsData","forceCompile"]],template:function CoreSitePluginsPluginContentComponent_Template(t,e){1&t&&(i.j41(0,"core-loading",1),i.nrm(1,"core-compile-html",2,0),i.k0s()),2&t&&(i.Y8G("hideUntil",e.dataLoaded)("fullscreen",!1),i.R7$(),i.Y8G("text",e.content)("javascript",e.javascript)("jsData",e.jsData)("forceCompile",e.forceCompile))},dependencies:[p.n,g.R,r.h],styles:["[_nghost-%COMP%]{display:contents}"]}),CoreSitePluginsPluginContentComponent})()},86981:(t,e,n)=>{n.r(e),n.d(e,{CoreSitePluginsNewContentDirective:()=>d});var o=n(91768),i=n(15324),s=n(32832),a=n(63153),r=n(91416),c=n(54438),l=n(46526);let d=(()=>{var t;class CoreSitePluginsNewContentDirective{constructor(t,e){this.parentContent=e,this.samePage=!1,this.ptrEnabled=!0,this.element=t.nativeElement||t}ngOnInit(){this.element.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();let e=this.args||{};this.parentContent&&(e=s.CoreSitePlugins.loadOtherDataInArgs(this.args,this.parentContent.otherData,this.useOtherData)),this.form&&document.forms[this.form]&&(e=Object.assign(e,a.R.getDataFromForm(document.forms[this.form])));let n=this.jsData||{};var r;!0===n&&(n=(null===(r=this.parentContent)||void 0===r?void 0:r.data)||{});if(this.samePage){var c;null===(c=this.parentContent)||void 0===c||c.updateContent(e,this.component,this.method,n,this.preSets)}else{var l,d,h,u,p,C,m,g,v,f,S;const t=this.component||(null===(l=this.parentContent)||void 0===l?void 0:l.component),s=this.method||(null===(d=this.parentContent)||void 0===d?void 0:d.method),a=o.VV.hashAsciiStr(JSON.stringify(e));i.CoreNavigator.navigateToSitePath(`siteplugins/content/${t}/${s}/${a}`,{params:{title:this.title||(null===(h=this.parentContent)||void 0===h?void 0:h.pageTitle),args:e,initResult:null===(u=this.parentContent)||void 0===u?void 0:u.initResult,jsData:n,preSets:this.preSets,ptrEnabled:this.ptrEnabled,contextLevel:null!==(p=this.contextLevel)&&void 0!==p?p:null===(C=this.parentContent)||void 0===C?void 0:C.contextLevel,contextInstanceId:null!==(m=this.contextInstanceId)&&void 0!==m?m:null===(g=this.parentContent)||void 0===g?void 0:g.contextInstanceId,courseId:null!==(v=null!==(f=this.courseId)&&void 0!==f?f:null===(S=this.parentContent)||void 0===S?void 0:S.courseId)&&void 0!==v?v:e.courseid}})}}))}}return(t=CoreSitePluginsNewContentDirective).ɵfac=function CoreSitePluginsNewContentDirective_Factory(e){return new(e||t)(c.rXU(c.aKT),c.rXU(l.U,8))},t.ɵdir=c.FsC({type:t,selectors:[["","core-site-plugins-new-content",""]],inputs:{component:"component",method:"method",args:"args",title:"title",samePage:[c.Mj6.HasDecoratorInputTransform,"samePage","samePage",r.G],useOtherData:"useOtherData",form:"form",jsData:"jsData",preSets:"preSets",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId",ptrEnabled:[c.Mj6.HasDecoratorInputTransform,"ptrEnabled","ptrEnabled",r.G]},standalone:!0,features:[c.GFd]}),CoreSitePluginsNewContentDirective})()}}]);